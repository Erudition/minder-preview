var Ht=Object.defineProperty;var Vt=(t,e,n)=>e in t?Ht(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Bt=(t,e,n)=>(Vt(t,typeof e!="symbol"?e+"":e,n),n),Ft=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var pt=(t,e,n)=>(Ft(t,e,"read from private field"),n?n.call(t):e.get(t)),kt=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ht=(t,e,n,a)=>(Ft(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n);var Ot=(t,e,n,a)=>({set _(o){ht(t,e,o,n)},get _(){return pt(t,e,a)}});import{g as getDefaultExportFromCjs,c as commonjsGlobal,f as functionBind,a as getAugmentedNamespace}from"./ionic-modules-23047cf7.js";import{C as CID,c as base64$2,B as base64url,d as bases,i as identity$3,f as decode$f,D as base32upper,a as base32,E as code$6,F as base32pad,b as base58btc,G as bases$1,g as commonjsRequire$1,H as fs_,J as bases$2,z as CID$1,K as encode$i,L as sha256$6,M as identity$4,N as decode$g}from"./ipfs-modules-6140a6e2.js";import{l as logger$i,g as unmarshalPublicKey,b as peerIdFromKeys,h as peerIdFromBytes,u as unmarshalPrivateKey,C as CodeError}from"./libp2p-modules-7ceb3045.js";import{d as apgApi,e as apgLib}from"./orbit-modules-7eb78d3b.js";function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in t)){const c=Object.getOwnPropertyDescriptor(a,o);c&&Object.defineProperty(t,o,c.get?c:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var buffer$2={},base64Js={};base64Js.byteLength=byteLength$1;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup$3=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$5="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code$5.length;i$1<len;++i$1)lookup$3[i$1]=code$5[i$1],revLookup[code$5.charCodeAt(i$1)]=i$1;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var a=n===e?0:4-n%4;return[n,a]}function byteLength$1(t){var e=getLens(t),n=e[0],a=e[1];return(n+a)*3/4-a}function _byteLength(t,e,n){return(e+n)*3/4-n}function toByteArray(t){var e,n=getLens(t),a=n[0],o=n[1],c=new Arr(_byteLength(t,a,o)),u=0,l=o>0?a-4:a,p;for(p=0;p<l;p+=4)e=revLookup[t.charCodeAt(p)]<<18|revLookup[t.charCodeAt(p+1)]<<12|revLookup[t.charCodeAt(p+2)]<<6|revLookup[t.charCodeAt(p+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=e&255;return o===2&&(e=revLookup[t.charCodeAt(p)]<<2|revLookup[t.charCodeAt(p+1)]>>4,c[u++]=e&255),o===1&&(e=revLookup[t.charCodeAt(p)]<<10|revLookup[t.charCodeAt(p+1)]<<4|revLookup[t.charCodeAt(p+2)]>>2,c[u++]=e>>8&255,c[u++]=e&255),c}function tripletToBase64(t){return lookup$3[t>>18&63]+lookup$3[t>>12&63]+lookup$3[t>>6&63]+lookup$3[t&63]}function encodeChunk(t,e,n){for(var a,o=[],c=e;c<n;c+=3)a=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(t[c+2]&255),o.push(tripletToBase64(a));return o.join("")}function fromByteArray(t){for(var e,n=t.length,a=n%3,o=[],c=16383,u=0,l=n-a;u<l;u+=c)o.push(encodeChunk(t,u,u+c>l?l:u+c));return a===1?(e=t[n-1],o.push(lookup$3[e>>2]+lookup$3[e<<4&63]+"==")):a===2&&(e=(t[n-2]<<8)+t[n-1],o.push(lookup$3[e>>10]+lookup$3[e>>4&63]+lookup$3[e<<2&63]+"=")),o.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(t,e,n,a,o){var c,u,l=o*8-a-1,p=(1<<l)-1,b=p>>1,v=-7,x=n?o-1:0,_=n?-1:1,E=t[e+x];for(x+=_,c=E&(1<<-v)-1,E>>=-v,v+=l;v>0;c=c*256+t[e+x],x+=_,v-=8);for(u=c&(1<<-v)-1,c>>=-v,v+=a;v>0;u=u*256+t[e+x],x+=_,v-=8);if(c===0)c=1-b;else{if(c===p)return u?NaN:(E?-1:1)*(1/0);u=u+Math.pow(2,a),c=c-b}return(E?-1:1)*u*Math.pow(2,c-a)};ieee754.write=function(t,e,n,a,o,c){var u,l,p,b=c*8-o-1,v=(1<<b)-1,x=v>>1,_=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=a?0:c-1,$=a?1:-1,S=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,u=v):(u=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-u))<1&&(u--,p*=2),u+x>=1?e+=_/p:e+=_*Math.pow(2,1-x),e*p>=2&&(u++,p/=2),u+x>=v?(l=0,u=v):u+x>=1?(l=(e*p-1)*Math.pow(2,o),u=u+x):(l=e*Math.pow(2,x-1)*Math.pow(2,o),u=0));o>=8;t[n+E]=l&255,E+=$,l/=256,o-=8);for(u=u<<o|l,b+=o;b>0;t[n+E]=u&255,E+=$,u/=256,b-=8);t[n+E-$]|=S*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){var e=base64Js,n=ieee754,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=O,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,l.TYPED_ARRAY_SUPPORT=c(),!l.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{var le=new Uint8Array(1),Y={foo:function(){return 42}};return Object.setPrototypeOf(Y,Uint8Array.prototype),Object.setPrototypeOf(le,Y),le.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}});function u(le){if(le>o)throw new RangeError('The value "'+le+'" is invalid for option "size"');var Y=new Uint8Array(le);return Object.setPrototypeOf(Y,l.prototype),Y}function l(le,Y,te){if(typeof le=="number"){if(typeof Y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(le)}return p(le,Y,te)}l.poolSize=8192;function p(le,Y,te){if(typeof le=="string")return _(le,Y);if(ArrayBuffer.isView(le))return $(le);if(le==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le);if(ye(le,ArrayBuffer)||le&&ye(le.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ye(le,SharedArrayBuffer)||le&&ye(le.buffer,SharedArrayBuffer)))return S(le,Y,te);if(typeof le=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ue=le.valueOf&&le.valueOf();if(ue!=null&&ue!==le)return l.from(ue,Y,te);var pe=A(le);if(pe)return pe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof le[Symbol.toPrimitive]=="function")return l.from(le[Symbol.toPrimitive]("string"),Y,te);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof le)}l.from=function(le,Y,te){return p(le,Y,te)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array);function b(le){if(typeof le!="number")throw new TypeError('"size" argument must be of type number');if(le<0)throw new RangeError('The value "'+le+'" is invalid for option "size"')}function v(le,Y,te){return b(le),le<=0?u(le):Y!==void 0?typeof te=="string"?u(le).fill(Y,te):u(le).fill(Y):u(le)}l.alloc=function(le,Y,te){return v(le,Y,te)};function x(le){return b(le),u(le<0?0:I(le)|0)}l.allocUnsafe=function(le){return x(le)},l.allocUnsafeSlow=function(le){return x(le)};function _(le,Y){if((typeof Y!="string"||Y==="")&&(Y="utf8"),!l.isEncoding(Y))throw new TypeError("Unknown encoding: "+Y);var te=F(le,Y)|0,ue=u(te),pe=ue.write(le,Y);return pe!==te&&(ue=ue.slice(0,pe)),ue}function E(le){for(var Y=le.length<0?0:I(le.length)|0,te=u(Y),ue=0;ue<Y;ue+=1)te[ue]=le[ue]&255;return te}function $(le){if(ye(le,Uint8Array)){var Y=new Uint8Array(le);return S(Y.buffer,Y.byteOffset,Y.byteLength)}return E(le)}function S(le,Y,te){if(Y<0||le.byteLength<Y)throw new RangeError('"offset" is outside of buffer bounds');if(le.byteLength<Y+(te||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return Y===void 0&&te===void 0?ue=new Uint8Array(le):te===void 0?ue=new Uint8Array(le,Y):ue=new Uint8Array(le,Y,te),Object.setPrototypeOf(ue,l.prototype),ue}function A(le){if(l.isBuffer(le)){var Y=I(le.length)|0,te=u(Y);return te.length===0||le.copy(te,0,0,Y),te}if(le.length!==void 0)return typeof le.length!="number"||be(le.length)?u(0):E(le);if(le.type==="Buffer"&&Array.isArray(le.data))return E(le.data)}function I(le){if(le>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return le|0}function O(le){return+le!=le&&(le=0),l.alloc(+le)}l.isBuffer=function(Y){return Y!=null&&Y._isBuffer===!0&&Y!==l.prototype},l.compare=function(Y,te){if(ye(Y,Uint8Array)&&(Y=l.from(Y,Y.offset,Y.byteLength)),ye(te,Uint8Array)&&(te=l.from(te,te.offset,te.byteLength)),!l.isBuffer(Y)||!l.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Y===te)return 0;for(var ue=Y.length,pe=te.length,ge=0,me=Math.min(ue,pe);ge<me;++ge)if(Y[ge]!==te[ge]){ue=Y[ge],pe=te[ge];break}return ue<pe?-1:pe<ue?1:0},l.isEncoding=function(Y){switch(String(Y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(Y,te){if(!Array.isArray(Y))throw new TypeError('"list" argument must be an Array of Buffers');if(Y.length===0)return l.alloc(0);var ue;if(te===void 0)for(te=0,ue=0;ue<Y.length;++ue)te+=Y[ue].length;var pe=l.allocUnsafe(te),ge=0;for(ue=0;ue<Y.length;++ue){var me=Y[ue];if(ye(me,Uint8Array))ge+me.length>pe.length?l.from(me).copy(pe,ge):Uint8Array.prototype.set.call(pe,me,ge);else if(l.isBuffer(me))me.copy(pe,ge);else throw new TypeError('"list" argument must be an Array of Buffers');ge+=me.length}return pe};function F(le,Y){if(l.isBuffer(le))return le.length;if(ArrayBuffer.isView(le)||ye(le,ArrayBuffer))return le.byteLength;if(typeof le!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof le);var te=le.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&te===0)return 0;for(var pe=!1;;)switch(Y){case"ascii":case"latin1":case"binary":return te;case"utf8":case"utf-8":return oe(le).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te*2;case"hex":return te>>>1;case"base64":return Q(le).length;default:if(pe)return ue?-1:oe(le).length;Y=(""+Y).toLowerCase(),pe=!0}}l.byteLength=F;function U(le,Y,te){var ue=!1;if((Y===void 0||Y<0)&&(Y=0),Y>this.length||((te===void 0||te>this.length)&&(te=this.length),te<=0)||(te>>>=0,Y>>>=0,te<=Y))return"";for(le||(le="utf8");;)switch(le){case"hex":return W(this,Y,te);case"utf8":case"utf-8":return T(this,Y,te);case"ascii":return z(this,Y,te);case"latin1":case"binary":return X(this,Y,te);case"base64":return P(this,Y,te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,Y,te);default:if(ue)throw new TypeError("Unknown encoding: "+le);le=(le+"").toLowerCase(),ue=!0}}l.prototype._isBuffer=!0;function G(le,Y,te){var ue=le[Y];le[Y]=le[te],le[te]=ue}l.prototype.swap16=function(){var Y=this.length;if(Y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var te=0;te<Y;te+=2)G(this,te,te+1);return this},l.prototype.swap32=function(){var Y=this.length;if(Y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var te=0;te<Y;te+=4)G(this,te,te+3),G(this,te+1,te+2);return this},l.prototype.swap64=function(){var Y=this.length;if(Y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var te=0;te<Y;te+=8)G(this,te,te+7),G(this,te+1,te+6),G(this,te+2,te+5),G(this,te+3,te+4);return this},l.prototype.toString=function(){var Y=this.length;return Y===0?"":arguments.length===0?T(this,0,Y):U.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(Y){if(!l.isBuffer(Y))throw new TypeError("Argument must be a Buffer");return this===Y?!0:l.compare(this,Y)===0},l.prototype.inspect=function(){var Y="",te=t.INSPECT_MAX_BYTES;return Y=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(Y+=" ... "),"<Buffer "+Y+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(Y,te,ue,pe,ge){if(ye(Y,Uint8Array)&&(Y=l.from(Y,Y.offset,Y.byteLength)),!l.isBuffer(Y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Y);if(te===void 0&&(te=0),ue===void 0&&(ue=Y?Y.length:0),pe===void 0&&(pe=0),ge===void 0&&(ge=this.length),te<0||ue>Y.length||pe<0||ge>this.length)throw new RangeError("out of range index");if(pe>=ge&&te>=ue)return 0;if(pe>=ge)return-1;if(te>=ue)return 1;if(te>>>=0,ue>>>=0,pe>>>=0,ge>>>=0,this===Y)return 0;for(var me=ge-pe,we=ue-te,xe=Math.min(me,we),Ee=this.slice(pe,ge),$e=Y.slice(te,ue),_e=0;_e<xe;++_e)if(Ee[_e]!==$e[_e]){me=Ee[_e],we=$e[_e];break}return me<we?-1:we<me?1:0};function J(le,Y,te,ue,pe){if(le.length===0)return-1;if(typeof te=="string"?(ue=te,te=0):te>2147483647?te=2147483647:te<-2147483648&&(te=-2147483648),te=+te,be(te)&&(te=pe?0:le.length-1),te<0&&(te=le.length+te),te>=le.length){if(pe)return-1;te=le.length-1}else if(te<0)if(pe)te=0;else return-1;if(typeof Y=="string"&&(Y=l.from(Y,ue)),l.isBuffer(Y))return Y.length===0?-1:k(le,Y,te,ue,pe);if(typeof Y=="number")return Y=Y&255,typeof Uint8Array.prototype.indexOf=="function"?pe?Uint8Array.prototype.indexOf.call(le,Y,te):Uint8Array.prototype.lastIndexOf.call(le,Y,te):k(le,[Y],te,ue,pe);throw new TypeError("val must be string, number or Buffer")}function k(le,Y,te,ue,pe){var ge=1,me=le.length,we=Y.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(le.length<2||Y.length<2)return-1;ge=2,me/=2,we/=2,te/=2}function xe(Ie,Se){return ge===1?Ie[Se]:Ie.readUInt16BE(Se*ge)}var Ee;if(pe){var $e=-1;for(Ee=te;Ee<me;Ee++)if(xe(le,Ee)===xe(Y,$e===-1?0:Ee-$e)){if($e===-1&&($e=Ee),Ee-$e+1===we)return $e*ge}else $e!==-1&&(Ee-=Ee-$e),$e=-1}else for(te+we>me&&(te=me-we),Ee=te;Ee>=0;Ee--){for(var _e=!0,Te=0;Te<we;Te++)if(xe(le,Ee+Te)!==xe(Y,Te)){_e=!1;break}if(_e)return Ee}return-1}l.prototype.includes=function(Y,te,ue){return this.indexOf(Y,te,ue)!==-1},l.prototype.indexOf=function(Y,te,ue){return J(this,Y,te,ue,!0)},l.prototype.lastIndexOf=function(Y,te,ue){return J(this,Y,te,ue,!1)};function ne(le,Y,te,ue){te=Number(te)||0;var pe=le.length-te;ue?(ue=Number(ue),ue>pe&&(ue=pe)):ue=pe;var ge=Y.length;ue>ge/2&&(ue=ge/2);for(var me=0;me<ue;++me){var we=parseInt(Y.substr(me*2,2),16);if(be(we))return me;le[te+me]=we}return me}function ee(le,Y,te,ue){return se(oe(Y,le.length-te),le,te,ue)}function de(le,Y,te,ue){return se(ce(Y),le,te,ue)}function ae(le,Y,te,ue){return se(Q(Y),le,te,ue)}function L(le,Y,te,ue){return se(V(Y,le.length-te),le,te,ue)}l.prototype.write=function(Y,te,ue,pe){if(te===void 0)pe="utf8",ue=this.length,te=0;else if(ue===void 0&&typeof te=="string")pe=te,ue=this.length,te=0;else if(isFinite(te))te=te>>>0,isFinite(ue)?(ue=ue>>>0,pe===void 0&&(pe="utf8")):(pe=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ge=this.length-te;if((ue===void 0||ue>ge)&&(ue=ge),Y.length>0&&(ue<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");for(var me=!1;;)switch(pe){case"hex":return ne(this,Y,te,ue);case"utf8":case"utf-8":return ee(this,Y,te,ue);case"ascii":case"latin1":case"binary":return de(this,Y,te,ue);case"base64":return ae(this,Y,te,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,Y,te,ue);default:if(me)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),me=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(le,Y,te){return Y===0&&te===le.length?e.fromByteArray(le):e.fromByteArray(le.slice(Y,te))}function T(le,Y,te){te=Math.min(le.length,te);for(var ue=[],pe=Y;pe<te;){var ge=le[pe],me=null,we=ge>239?4:ge>223?3:ge>191?2:1;if(pe+we<=te){var xe,Ee,$e,_e;switch(we){case 1:ge<128&&(me=ge);break;case 2:xe=le[pe+1],(xe&192)===128&&(_e=(ge&31)<<6|xe&63,_e>127&&(me=_e));break;case 3:xe=le[pe+1],Ee=le[pe+2],(xe&192)===128&&(Ee&192)===128&&(_e=(ge&15)<<12|(xe&63)<<6|Ee&63,_e>2047&&(_e<55296||_e>57343)&&(me=_e));break;case 4:xe=le[pe+1],Ee=le[pe+2],$e=le[pe+3],(xe&192)===128&&(Ee&192)===128&&($e&192)===128&&(_e=(ge&15)<<18|(xe&63)<<12|(Ee&63)<<6|$e&63,_e>65535&&_e<1114112&&(me=_e))}}me===null?(me=65533,we=1):me>65535&&(me-=65536,ue.push(me>>>10&1023|55296),me=56320|me&1023),ue.push(me),pe+=we}return q(ue)}var C=4096;function q(le){var Y=le.length;if(Y<=C)return String.fromCharCode.apply(String,le);for(var te="",ue=0;ue<Y;)te+=String.fromCharCode.apply(String,le.slice(ue,ue+=C));return te}function z(le,Y,te){var ue="";te=Math.min(le.length,te);for(var pe=Y;pe<te;++pe)ue+=String.fromCharCode(le[pe]&127);return ue}function X(le,Y,te){var ue="";te=Math.min(le.length,te);for(var pe=Y;pe<te;++pe)ue+=String.fromCharCode(le[pe]);return ue}function W(le,Y,te){var ue=le.length;(!Y||Y<0)&&(Y=0),(!te||te<0||te>ue)&&(te=ue);for(var pe="",ge=Y;ge<te;++ge)pe+=ve[le[ge]];return pe}function M(le,Y,te){for(var ue=le.slice(Y,te),pe="",ge=0;ge<ue.length-1;ge+=2)pe+=String.fromCharCode(ue[ge]+ue[ge+1]*256);return pe}l.prototype.slice=function(Y,te){var ue=this.length;Y=~~Y,te=te===void 0?ue:~~te,Y<0?(Y+=ue,Y<0&&(Y=0)):Y>ue&&(Y=ue),te<0?(te+=ue,te<0&&(te=0)):te>ue&&(te=ue),te<Y&&(te=Y);var pe=this.subarray(Y,te);return Object.setPrototypeOf(pe,l.prototype),pe};function D(le,Y,te){if(le%1!==0||le<0)throw new RangeError("offset is not uint");if(le+Y>te)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUintLE=l.prototype.readUIntLE=function(Y,te,ue){Y=Y>>>0,te=te>>>0,ue||D(Y,te,this.length);for(var pe=this[Y],ge=1,me=0;++me<te&&(ge*=256);)pe+=this[Y+me]*ge;return pe},l.prototype.readUintBE=l.prototype.readUIntBE=function(Y,te,ue){Y=Y>>>0,te=te>>>0,ue||D(Y,te,this.length);for(var pe=this[Y+--te],ge=1;te>0&&(ge*=256);)pe+=this[Y+--te]*ge;return pe},l.prototype.readUint8=l.prototype.readUInt8=function(Y,te){return Y=Y>>>0,te||D(Y,1,this.length),this[Y]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(Y,te){return Y=Y>>>0,te||D(Y,2,this.length),this[Y]|this[Y+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(Y,te){return Y=Y>>>0,te||D(Y,2,this.length),this[Y]<<8|this[Y+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(Y,te){return Y=Y>>>0,te||D(Y,4,this.length),(this[Y]|this[Y+1]<<8|this[Y+2]<<16)+this[Y+3]*16777216},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(Y,te){return Y=Y>>>0,te||D(Y,4,this.length),this[Y]*16777216+(this[Y+1]<<16|this[Y+2]<<8|this[Y+3])},l.prototype.readIntLE=function(Y,te,ue){Y=Y>>>0,te=te>>>0,ue||D(Y,te,this.length);for(var pe=this[Y],ge=1,me=0;++me<te&&(ge*=256);)pe+=this[Y+me]*ge;return ge*=128,pe>=ge&&(pe-=Math.pow(2,8*te)),pe},l.prototype.readIntBE=function(Y,te,ue){Y=Y>>>0,te=te>>>0,ue||D(Y,te,this.length);for(var pe=te,ge=1,me=this[Y+--pe];pe>0&&(ge*=256);)me+=this[Y+--pe]*ge;return ge*=128,me>=ge&&(me-=Math.pow(2,8*te)),me},l.prototype.readInt8=function(Y,te){return Y=Y>>>0,te||D(Y,1,this.length),this[Y]&128?(255-this[Y]+1)*-1:this[Y]},l.prototype.readInt16LE=function(Y,te){Y=Y>>>0,te||D(Y,2,this.length);var ue=this[Y]|this[Y+1]<<8;return ue&32768?ue|4294901760:ue},l.prototype.readInt16BE=function(Y,te){Y=Y>>>0,te||D(Y,2,this.length);var ue=this[Y+1]|this[Y]<<8;return ue&32768?ue|4294901760:ue},l.prototype.readInt32LE=function(Y,te){return Y=Y>>>0,te||D(Y,4,this.length),this[Y]|this[Y+1]<<8|this[Y+2]<<16|this[Y+3]<<24},l.prototype.readInt32BE=function(Y,te){return Y=Y>>>0,te||D(Y,4,this.length),this[Y]<<24|this[Y+1]<<16|this[Y+2]<<8|this[Y+3]},l.prototype.readFloatLE=function(Y,te){return Y=Y>>>0,te||D(Y,4,this.length),n.read(this,Y,!0,23,4)},l.prototype.readFloatBE=function(Y,te){return Y=Y>>>0,te||D(Y,4,this.length),n.read(this,Y,!1,23,4)},l.prototype.readDoubleLE=function(Y,te){return Y=Y>>>0,te||D(Y,8,this.length),n.read(this,Y,!0,52,8)},l.prototype.readDoubleBE=function(Y,te){return Y=Y>>>0,te||D(Y,8,this.length),n.read(this,Y,!1,52,8)};function B(le,Y,te,ue,pe,ge){if(!l.isBuffer(le))throw new TypeError('"buffer" argument must be a Buffer instance');if(Y>pe||Y<ge)throw new RangeError('"value" argument is out of bounds');if(te+ue>le.length)throw new RangeError("Index out of range")}l.prototype.writeUintLE=l.prototype.writeUIntLE=function(Y,te,ue,pe){if(Y=+Y,te=te>>>0,ue=ue>>>0,!pe){var ge=Math.pow(2,8*ue)-1;B(this,Y,te,ue,ge,0)}var me=1,we=0;for(this[te]=Y&255;++we<ue&&(me*=256);)this[te+we]=Y/me&255;return te+ue},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(Y,te,ue,pe){if(Y=+Y,te=te>>>0,ue=ue>>>0,!pe){var ge=Math.pow(2,8*ue)-1;B(this,Y,te,ue,ge,0)}var me=ue-1,we=1;for(this[te+me]=Y&255;--me>=0&&(we*=256);)this[te+me]=Y/we&255;return te+ue},l.prototype.writeUint8=l.prototype.writeUInt8=function(Y,te,ue){return Y=+Y,te=te>>>0,ue||B(this,Y,te,1,255,0),this[te]=Y&255,te+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(Y,te,ue){return Y=+Y,te=te>>>0,ue||B(this,Y,te,2,65535,0),this[te]=Y&255,this[te+1]=Y>>>8,te+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(Y,te,ue){return Y=+Y,te=te>>>0,ue||B(this,Y,te,2,65535,0),this[te]=Y>>>8,this[te+1]=Y&255,te+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(Y,te,ue){return Y=+Y,te=te>>>0,ue||B(this,Y,te,4,4294967295,0),this[te+3]=Y>>>24,this[te+2]=Y>>>16,this[te+1]=Y>>>8,this[te]=Y&255,te+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(Y,te,ue){return Y=+Y,te=te>>>0,ue||B(this,Y,te,4,4294967295,0),this[te]=Y>>>24,this[te+1]=Y>>>16,this[te+2]=Y>>>8,this[te+3]=Y&255,te+4},l.prototype.writeIntLE=function(Y,te,ue,pe){if(Y=+Y,te=te>>>0,!pe){var ge=Math.pow(2,8*ue-1);B(this,Y,te,ue,ge-1,-ge)}var me=0,we=1,xe=0;for(this[te]=Y&255;++me<ue&&(we*=256);)Y<0&&xe===0&&this[te+me-1]!==0&&(xe=1),this[te+me]=(Y/we>>0)-xe&255;return te+ue},l.prototype.writeIntBE=function(Y,te,ue,pe){if(Y=+Y,te=te>>>0,!pe){var ge=Math.pow(2,8*ue-1);B(this,Y,te,ue,ge-1,-ge)}var me=ue-1,we=1,xe=0;for(this[te+me]=Y&255;--me>=0&&(we*=256);)Y<0&&xe===0&&this[te+me+1]!==0&&(xe=1),this[te+me]=(Y/we>>0)-xe&255;return te+ue},l.prototype.writeInt8=function(Y,te,ue){return Y=+Y,te=te>>>0,ue||B(this,Y,te,1,127,-128),Y<0&&(Y=255+Y+1),this[te]=Y&255,te+1},l.prototype.writeInt16LE=function(Y,te,ue){return Y=+Y,te=te>>>0,ue||B(this,Y,te,2,32767,-32768),this[te]=Y&255,this[te+1]=Y>>>8,te+2},l.prototype.writeInt16BE=function(Y,te,ue){return Y=+Y,te=te>>>0,ue||B(this,Y,te,2,32767,-32768),this[te]=Y>>>8,this[te+1]=Y&255,te+2},l.prototype.writeInt32LE=function(Y,te,ue){return Y=+Y,te=te>>>0,ue||B(this,Y,te,4,2147483647,-2147483648),this[te]=Y&255,this[te+1]=Y>>>8,this[te+2]=Y>>>16,this[te+3]=Y>>>24,te+4},l.prototype.writeInt32BE=function(Y,te,ue){return Y=+Y,te=te>>>0,ue||B(this,Y,te,4,2147483647,-2147483648),Y<0&&(Y=4294967295+Y+1),this[te]=Y>>>24,this[te+1]=Y>>>16,this[te+2]=Y>>>8,this[te+3]=Y&255,te+4};function Z(le,Y,te,ue,pe,ge){if(te+ue>le.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("Index out of range")}function he(le,Y,te,ue,pe){return Y=+Y,te=te>>>0,pe||Z(le,Y,te,4),n.write(le,Y,te,ue,23,4),te+4}l.prototype.writeFloatLE=function(Y,te,ue){return he(this,Y,te,!0,ue)},l.prototype.writeFloatBE=function(Y,te,ue){return he(this,Y,te,!1,ue)};function j(le,Y,te,ue,pe){return Y=+Y,te=te>>>0,pe||Z(le,Y,te,8),n.write(le,Y,te,ue,52,8),te+8}l.prototype.writeDoubleLE=function(Y,te,ue){return j(this,Y,te,!0,ue)},l.prototype.writeDoubleBE=function(Y,te,ue){return j(this,Y,te,!1,ue)},l.prototype.copy=function(Y,te,ue,pe){if(!l.isBuffer(Y))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!pe&&pe!==0&&(pe=this.length),te>=Y.length&&(te=Y.length),te||(te=0),pe>0&&pe<ue&&(pe=ue),pe===ue||Y.length===0||this.length===0)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),Y.length-te<pe-ue&&(pe=Y.length-te+ue);var ge=pe-ue;return this===Y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(te,ue,pe):Uint8Array.prototype.set.call(Y,this.subarray(ue,pe),te),ge},l.prototype.fill=function(Y,te,ue,pe){if(typeof Y=="string"){if(typeof te=="string"?(pe=te,te=0,ue=this.length):typeof ue=="string"&&(pe=ue,ue=this.length),pe!==void 0&&typeof pe!="string")throw new TypeError("encoding must be a string");if(typeof pe=="string"&&!l.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);if(Y.length===1){var ge=Y.charCodeAt(0);(pe==="utf8"&&ge<128||pe==="latin1")&&(Y=ge)}}else typeof Y=="number"?Y=Y&255:typeof Y=="boolean"&&(Y=Number(Y));if(te<0||this.length<te||this.length<ue)throw new RangeError("Out of range index");if(ue<=te)return this;te=te>>>0,ue=ue===void 0?this.length:ue>>>0,Y||(Y=0);var me;if(typeof Y=="number")for(me=te;me<ue;++me)this[me]=Y;else{var we=l.isBuffer(Y)?Y:l.from(Y,pe),xe=we.length;if(xe===0)throw new TypeError('The value "'+Y+'" is invalid for argument "value"');for(me=0;me<ue-te;++me)this[me+te]=we[me%xe]}return this};var fe=/[^+/0-9A-Za-z-_]/g;function ie(le){if(le=le.split("=")[0],le=le.trim().replace(fe,""),le.length<2)return"";for(;le.length%4!==0;)le=le+"=";return le}function oe(le,Y){Y=Y||1/0;for(var te,ue=le.length,pe=null,ge=[],me=0;me<ue;++me){if(te=le.charCodeAt(me),te>55295&&te<57344){if(!pe){if(te>56319){(Y-=3)>-1&&ge.push(239,191,189);continue}else if(me+1===ue){(Y-=3)>-1&&ge.push(239,191,189);continue}pe=te;continue}if(te<56320){(Y-=3)>-1&&ge.push(239,191,189),pe=te;continue}te=(pe-55296<<10|te-56320)+65536}else pe&&(Y-=3)>-1&&ge.push(239,191,189);if(pe=null,te<128){if((Y-=1)<0)break;ge.push(te)}else if(te<2048){if((Y-=2)<0)break;ge.push(te>>6|192,te&63|128)}else if(te<65536){if((Y-=3)<0)break;ge.push(te>>12|224,te>>6&63|128,te&63|128)}else if(te<1114112){if((Y-=4)<0)break;ge.push(te>>18|240,te>>12&63|128,te>>6&63|128,te&63|128)}else throw new Error("Invalid code point")}return ge}function ce(le){for(var Y=[],te=0;te<le.length;++te)Y.push(le.charCodeAt(te)&255);return Y}function V(le,Y){for(var te,ue,pe,ge=[],me=0;me<le.length&&!((Y-=2)<0);++me)te=le.charCodeAt(me),ue=te>>8,pe=te%256,ge.push(pe),ge.push(ue);return ge}function Q(le){return e.toByteArray(ie(le))}function se(le,Y,te,ue){for(var pe=0;pe<ue&&!(pe+te>=Y.length||pe>=le.length);++pe)Y[pe+te]=le[pe];return pe}function ye(le,Y){return le instanceof Y||le!=null&&le.constructor!=null&&le.constructor.name!=null&&le.constructor.name===Y.name}function be(le){return le!==le}var ve=function(){for(var le="0123456789abcdef",Y=new Array(256),te=0;te<16;++te)for(var ue=te*16,pe=0;pe<16;++pe)Y[ue+pe]=le[te]+le[pe];return Y}()})(buffer$2);var browser$i={exports:{}},process=browser$i.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(t){if(cachedSetTimeout===setTimeout)return setTimeout(t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(t,0);try{return cachedSetTimeout(t,0)}catch{try{return cachedSetTimeout.call(null,t,0)}catch{return cachedSetTimeout.call(this,t,0)}}}function runClearTimeout(t){if(cachedClearTimeout===clearTimeout)return clearTimeout(t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(t);try{return cachedClearTimeout(t)}catch{try{return cachedClearTimeout.call(null,t)}catch{return cachedClearTimeout.call(this,t)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(t)}}process.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];queue.push(new Item(t,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(t,e){this.fun=t,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$4(){}process.on=noop$4;process.addListener=noop$4;process.once=noop$4;process.off=noop$4;process.removeListener=noop$4;process.removeAllListeners=noop$4;process.emit=noop$4;process.prependListener=noop$4;process.prependOnceListener=noop$4;process.listeners=function(t){return[]};process.binding=function(t){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(t){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports$1=browser$i.exports;const process$1=getDefaultExportFromCjs(browserExports$1);var _globalThis=function(t){function e(){var a=this||self;return delete t.prototype.__magic__,a}if(typeof globalThis=="object")return globalThis;if(this)return e();t.defineProperty(t.prototype,"__magic__",{configurable:!0,get:e});var n=__magic__;return n}(Object),_global=_globalThis,isPlainObj=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty:hasOwnProperty$2}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=t=>{const e=[];for(const n in t)hasOwnProperty$2.call(t,n)&&e.push(n);if(Object.getOwnPropertySymbols){const n=Object.getOwnPropertySymbols(t);for(const a of n)propertyIsEnumerable.call(t,a)&&e.push(a)}return e};function clone(t){return Array.isArray(t)?cloneArray(t):isOptionObject(t)?cloneOptionObject(t):t}function cloneArray(t){const e=t.slice(0,0);return getEnumerableOwnPropertyKeys(t).forEach(n=>{defineProperty(e,n,clone(t[n]))}),e}function cloneOptionObject(t){const e=Object.getPrototypeOf(t)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(t).forEach(n=>{defineProperty(e,n,clone(t[n]))}),e}const mergeKeys=(t,e,n,a)=>(n.forEach(o=>{typeof e[o]>"u"&&a.ignoreUndefined||(o in t&&t[o]!==Object.getPrototypeOf(t)?defineProperty(t,o,merge$2(t[o],e[o],a)):defineProperty(t,o,clone(e[o])))}),t),concatArrays=(t,e,n)=>{let a=t.slice(0,0),o=0;return[t,e].forEach(c=>{const u=[];for(let l=0;l<c.length;l++)hasOwnProperty$2.call(c,l)&&(u.push(String(l)),c===t?defineProperty(a,o++,c[l]):defineProperty(a,o++,clone(c[l])));a=mergeKeys(a,c,getEnumerableOwnPropertyKeys(c).filter(l=>!u.includes(l)),n)}),a};function merge$2(t,e,n){return n.concatArrays&&Array.isArray(t)&&Array.isArray(e)?concatArrays(t,e,n):!isOptionObject(e)||!isOptionObject(t)?clone(e):mergeKeys(t,e,getEnumerableOwnPropertyKeys(e),n)}var mergeOptions=function(...t){const e=merge$2(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let n={_:{}};for(const a of t)if(a!==void 0){if(!isOptionObject(a))throw new TypeError("`"+a+"` is not an Option Object");n=merge$2(n,{_:a},e)}return n._};const mergeOptions$1=getDefaultExportFromCjs(mergeOptions);function isElectron$1(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process$1<"u"&&typeof process$1.versions=="object"&&process$1.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var isElectron_1=isElectron$1;const detectElectron=getDefaultExportFromCjs(isElectron_1);var browser$h={exports:{}},ms$1,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms$1;hasRequiredMs=1;var t=1e3,e=t*60,n=e*60,a=n*24,o=a*7,c=a*365.25;ms$1=function(v,x){x=x||{};var _=typeof v;if(_==="string"&&v.length>0)return u(v);if(_==="number"&&isFinite(v))return x.long?p(v):l(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))};function u(v){if(v=String(v),!(v.length>100)){var x=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(v);if(x){var _=parseFloat(x[1]),E=(x[2]||"ms").toLowerCase();switch(E){case"years":case"year":case"yrs":case"yr":case"y":return _*c;case"weeks":case"week":case"w":return _*o;case"days":case"day":case"d":return _*a;case"hours":case"hour":case"hrs":case"hr":case"h":return _*n;case"minutes":case"minute":case"mins":case"min":case"m":return _*e;case"seconds":case"second":case"secs":case"sec":case"s":return _*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return _;default:return}}}}function l(v){var x=Math.abs(v);return x>=a?Math.round(v/a)+"d":x>=n?Math.round(v/n)+"h":x>=e?Math.round(v/e)+"m":x>=t?Math.round(v/t)+"s":v+"ms"}function p(v){var x=Math.abs(v);return x>=a?b(v,x,a,"day"):x>=n?b(v,x,n,"hour"):x>=e?b(v,x,e,"minute"):x>=t?b(v,x,t,"second"):v+" ms"}function b(v,x,_,E){var $=x>=_*1.5;return Math.round(v/_)+" "+E+($?"s":"")}return ms$1}function setup(t){n.debug=n,n.default=n,n.coerce=p,n.disable=c,n.enable=o,n.enabled=u,n.humanize=requireMs(),n.destroy=b,Object.keys(t).forEach(v=>{n[v]=t[v]}),n.names=[],n.skips=[],n.formatters={};function e(v){let x=0;for(let _=0;_<v.length;_++)x=(x<<5)-x+v.charCodeAt(_),x|=0;return n.colors[Math.abs(x)%n.colors.length]}n.selectColor=e;function n(v){let x,_=null,E,$;function S(...A){if(!S.enabled)return;const I=S,O=Number(new Date),F=O-(x||O);I.diff=F,I.prev=x,I.curr=O,x=O,A[0]=n.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let U=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(J,k)=>{if(J==="%%")return"%";U++;const ne=n.formatters[k];if(typeof ne=="function"){const ee=A[U];J=ne.call(I,ee),A.splice(U,1),U--}return J}),n.formatArgs.call(I,A),(I.log||n.log).apply(I,A)}return S.namespace=v,S.useColors=n.useColors(),S.color=n.selectColor(v),S.extend=a,S.destroy=n.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(E!==n.namespaces&&(E=n.namespaces,$=n.enabled(v)),$),set:A=>{_=A}}),typeof n.init=="function"&&n.init(S),S}function a(v,x){const _=n(this.namespace+(typeof x>"u"?":":x)+v);return _.log=this.log,_}function o(v){n.save(v),n.namespaces=v,n.names=[],n.skips=[];let x;const _=(typeof v=="string"?v:"").split(/[\s,]+/),E=_.length;for(x=0;x<E;x++)_[x]&&(v=_[x].replace(/\*/g,".*?"),v[0]==="-"?n.skips.push(new RegExp("^"+v.slice(1)+"$")):n.names.push(new RegExp("^"+v+"$")))}function c(){const v=[...n.names.map(l),...n.skips.map(l).map(x=>"-"+x)].join(",");return n.enable(""),v}function u(v){if(v[v.length-1]==="*")return!0;let x,_;for(x=0,_=n.skips.length;x<_;x++)if(n.skips[x].test(v))return!1;for(x=0,_=n.names.length;x<_;x++)if(n.names[x].test(v))return!0;return!1}function l(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}function p(v){return v instanceof Error?v.stack||v.message:v}function b(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var common$8=setup;(function(t,e){e.formatArgs=a,e.save=o,e.load=c,e.useColors=n,e.storage=u(),e.destroy=(()=>{let p=!1;return()=>{p||(p=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(p){if(p[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+p[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const b="color: "+this.color;p.splice(1,0,b,"color: inherit");let v=0,x=0;p[0].replace(/%[a-zA-Z%]/g,_=>{_!=="%%"&&(v++,_==="%c"&&(x=v))}),p.splice(x,0,b)}e.log=console.debug||console.log||(()=>{});function o(p){try{p?e.storage.setItem("debug",p):e.storage.removeItem("debug")}catch{}}function c(){let p;try{p=e.storage.getItem("debug")}catch{}return!p&&typeof process$1<"u"&&"env"in process$1&&(p={}.DEBUG),p}function u(){try{return localStorage}catch{}}t.exports=common$8(e);const{formatters:l}=t.exports;l.j=function(p){try{return JSON.stringify(p)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}}})(browser$h,browser$h.exports);var browserExports=browser$h.exports;const debug=getDefaultExportFromCjs(browserExports);function assign$2(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}function createError(t,e,n){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");n||(n={}),typeof e=="object"&&(n=e,e=""),e&&(n.code=e);try{return assign$2(t,n)}catch{n.message=t.message,n.stack=t.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),assign$2(new o,n)}}var errCode=createError;const errCode$1=getDefaultExportFromCjs(errCode);var indexMinimal$1={},minimal$3={},aspromise=asPromise;function asPromise(t,e){for(var n=new Array(arguments.length-1),a=0,o=2,c=!0;o<arguments.length;)n[a++]=arguments[o++];return new Promise(function(l,p){n[a]=function(v){if(c)if(c=!1,v)p(v);else{for(var x=new Array(arguments.length-1),_=0;_<x.length;)x[_++]=arguments[_];l.apply(null,x)}};try{t.apply(e||null,n)}catch(b){c&&(c=!1,p(b))}})}var base64$1={};(function(t){var e=t;e.length=function(l){var p=l.length;if(!p)return 0;for(var b=0;--p%4>1&&l.charAt(p)==="=";)++b;return Math.ceil(l.length*3)/4-b};for(var n=new Array(64),a=new Array(123),o=0;o<64;)a[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(l,p,b){for(var v=null,x=[],_=0,E=0,$;p<b;){var S=l[p++];switch(E){case 0:x[_++]=n[S>>2],$=(S&3)<<4,E=1;break;case 1:x[_++]=n[$|S>>4],$=(S&15)<<2,E=2;break;case 2:x[_++]=n[$|S>>6],x[_++]=n[S&63],E=0;break}_>8191&&((v||(v=[])).push(String.fromCharCode.apply(String,x)),_=0)}return E&&(x[_++]=n[$],x[_++]=61,E===1&&(x[_++]=61)),v?(_&&v.push(String.fromCharCode.apply(String,x.slice(0,_))),v.join("")):String.fromCharCode.apply(String,x.slice(0,_))};var c="invalid encoding";e.decode=function(l,p,b){for(var v=b,x=0,_,E=0;E<l.length;){var $=l.charCodeAt(E++);if($===61&&x>1)break;if(($=a[$])===void 0)throw Error(c);switch(x){case 0:_=$,x=1;break;case 1:p[b++]=_<<2|($&48)>>4,_=$,x=2;break;case 2:p[b++]=(_&15)<<4|($&60)>>2,_=$,x=3;break;case 3:p[b++]=(_&3)<<6|$,x=0;break}}if(x===1)throw Error(c);return b-v},e.test=function(l){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(l)}})(base64$1);var eventemitter=EventEmitter$6;function EventEmitter$6(){this._listeners={}}EventEmitter$6.prototype.on=function(e,n,a){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:n,ctx:a||this}),this};EventEmitter$6.prototype.off=function(e,n){if(e===void 0)this._listeners={};else if(n===void 0)this._listeners[e]=[];else for(var a=this._listeners[e],o=0;o<a.length;)a[o].fn===n?a.splice(o,1):++o;return this};EventEmitter$6.prototype.emit=function(e){var n=this._listeners[e];if(n){for(var a=[],o=1;o<arguments.length;)a.push(arguments[o++]);for(o=0;o<n.length;)n[o].fn.apply(n[o++].ctx,a)}return this};var float=factory(factory);function factory(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),a=n[3]===128;function o(p,b,v){e[0]=p,b[v]=n[0],b[v+1]=n[1],b[v+2]=n[2],b[v+3]=n[3]}function c(p,b,v){e[0]=p,b[v]=n[3],b[v+1]=n[2],b[v+2]=n[1],b[v+3]=n[0]}t.writeFloatLE=a?o:c,t.writeFloatBE=a?c:o;function u(p,b){return n[0]=p[b],n[1]=p[b+1],n[2]=p[b+2],n[3]=p[b+3],e[0]}function l(p,b){return n[3]=p[b],n[2]=p[b+1],n[1]=p[b+2],n[0]=p[b+3],e[0]}t.readFloatLE=a?u:l,t.readFloatBE=a?l:u}():function(){function e(a,o,c,u){var l=o<0?1:0;if(l&&(o=-o),o===0)a(1/o>0?0:2147483648,c,u);else if(isNaN(o))a(2143289344,c,u);else if(o>34028234663852886e22)a((l<<31|2139095040)>>>0,c,u);else if(o<11754943508222875e-54)a((l<<31|Math.round(o/1401298464324817e-60))>>>0,c,u);else{var p=Math.floor(Math.log(o)/Math.LN2),b=Math.round(o*Math.pow(2,-p)*8388608)&8388607;a((l<<31|p+127<<23|b)>>>0,c,u)}}t.writeFloatLE=e.bind(null,writeUintLE$1),t.writeFloatBE=e.bind(null,writeUintBE$1);function n(a,o,c){var u=a(o,c),l=(u>>31)*2+1,p=u>>>23&255,b=u&8388607;return p===255?b?NaN:l*(1/0):p===0?l*1401298464324817e-60*b:l*Math.pow(2,p-150)*(b+8388608)}t.readFloatLE=n.bind(null,readUintLE$1),t.readFloatBE=n.bind(null,readUintBE$1)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),a=n[7]===128;function o(p,b,v){e[0]=p,b[v]=n[0],b[v+1]=n[1],b[v+2]=n[2],b[v+3]=n[3],b[v+4]=n[4],b[v+5]=n[5],b[v+6]=n[6],b[v+7]=n[7]}function c(p,b,v){e[0]=p,b[v]=n[7],b[v+1]=n[6],b[v+2]=n[5],b[v+3]=n[4],b[v+4]=n[3],b[v+5]=n[2],b[v+6]=n[1],b[v+7]=n[0]}t.writeDoubleLE=a?o:c,t.writeDoubleBE=a?c:o;function u(p,b){return n[0]=p[b],n[1]=p[b+1],n[2]=p[b+2],n[3]=p[b+3],n[4]=p[b+4],n[5]=p[b+5],n[6]=p[b+6],n[7]=p[b+7],e[0]}function l(p,b){return n[7]=p[b],n[6]=p[b+1],n[5]=p[b+2],n[4]=p[b+3],n[3]=p[b+4],n[2]=p[b+5],n[1]=p[b+6],n[0]=p[b+7],e[0]}t.readDoubleLE=a?u:l,t.readDoubleBE=a?l:u}():function(){function e(a,o,c,u,l,p){var b=u<0?1:0;if(b&&(u=-u),u===0)a(0,l,p+o),a(1/u>0?0:2147483648,l,p+c);else if(isNaN(u))a(0,l,p+o),a(2146959360,l,p+c);else if(u>17976931348623157e292)a(0,l,p+o),a((b<<31|2146435072)>>>0,l,p+c);else{var v;if(u<22250738585072014e-324)v=u/5e-324,a(v>>>0,l,p+o),a((b<<31|v/4294967296)>>>0,l,p+c);else{var x=Math.floor(Math.log(u)/Math.LN2);x===1024&&(x=1023),v=u*Math.pow(2,-x),a(v*4503599627370496>>>0,l,p+o),a((b<<31|x+1023<<20|v*1048576&1048575)>>>0,l,p+c)}}}t.writeDoubleLE=e.bind(null,writeUintLE$1,0,4),t.writeDoubleBE=e.bind(null,writeUintBE$1,4,0);function n(a,o,c,u,l){var p=a(u,l+o),b=a(u,l+c),v=(b>>31)*2+1,x=b>>>20&2047,_=4294967296*(b&1048575)+p;return x===2047?_?NaN:v*(1/0):x===0?v*5e-324*_:v*Math.pow(2,x-1075)*(_+4503599627370496)}t.readDoubleLE=n.bind(null,readUintLE$1,0,4),t.readDoubleBE=n.bind(null,readUintBE$1,4,0)}(),t}function writeUintLE$1(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function writeUintBE$1(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=t&255}function readUintLE$1(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE$1(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}var utf8$2={};(function(t){var e=t;e.length=function(a){for(var o=0,c=0,u=0;u<a.length;++u)c=a.charCodeAt(u),c<128?o+=1:c<2048?o+=2:(c&64512)===55296&&(a.charCodeAt(u+1)&64512)===56320?(++u,o+=4):o+=3;return o},e.read=function(a,o,c){var u=c-o;if(u<1)return"";for(var l=null,p=[],b=0,v;o<c;)v=a[o++],v<128?p[b++]=v:v>191&&v<224?p[b++]=(v&31)<<6|a[o++]&63:v>239&&v<365?(v=((v&7)<<18|(a[o++]&63)<<12|(a[o++]&63)<<6|a[o++]&63)-65536,p[b++]=55296+(v>>10),p[b++]=56320+(v&1023)):p[b++]=(v&15)<<12|(a[o++]&63)<<6|a[o++]&63,b>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,p)),b=0);return l?(b&&l.push(String.fromCharCode.apply(String,p.slice(0,b))),l.join("")):String.fromCharCode.apply(String,p.slice(0,b))},e.write=function(a,o,c){for(var u=c,l,p,b=0;b<a.length;++b)l=a.charCodeAt(b),l<128?o[c++]=l:l<2048?(o[c++]=l>>6|192,o[c++]=l&63|128):(l&64512)===55296&&((p=a.charCodeAt(b+1))&64512)===56320?(l=65536+((l&1023)<<10)+(p&1023),++b,o[c++]=l>>18|240,o[c++]=l>>12&63|128,o[c++]=l>>6&63|128,o[c++]=l&63|128):(o[c++]=l>>12|224,o[c++]=l>>6&63|128,o[c++]=l&63|128);return c-u}})(utf8$2);var pool_1=pool;function pool(t,e,n){var a=n||8192,o=a>>>1,c=null,u=a;return function(p){if(p<1||p>o)return t(p);u+p>a&&(c=t(a),u=0);var b=e.call(c,u,u+=p);return u&7&&(u=(u|7)+1),b}}var longbits$1,hasRequiredLongbits$1;function requireLongbits$1(){if(hasRequiredLongbits$1)return longbits$1;hasRequiredLongbits$1=1,longbits$1=e;var t=requireMinimal$2();function e(c,u){this.lo=c>>>0,this.hi=u>>>0}var n=e.zero=new e(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var a=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(u){if(u===0)return n;var l=u<0;l&&(u=-u);var p=u>>>0,b=(u-p)/4294967296>>>0;return l&&(b=~b>>>0,p=~p>>>0,++p>4294967295&&(p=0,++b>4294967295&&(b=0))),new e(p,b)},e.from=function(u){if(typeof u=="number")return e.fromNumber(u);if(t.isString(u))if(t.Long)u=t.Long.fromString(u);else return e.fromNumber(parseInt(u,10));return u.low||u.high?new e(u.low>>>0,u.high>>>0):n},e.prototype.toNumber=function(u){if(!u&&this.hi>>>31){var l=~this.lo+1>>>0,p=~this.hi>>>0;return l||(p=p+1>>>0),-(l+p*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(u){return t.Long?new t.Long(this.lo|0,this.hi|0,!!u):{low:this.lo|0,high:this.hi|0,unsigned:!!u}};var o=String.prototype.charCodeAt;return e.fromHash=function(u){return u===a?n:new e((o.call(u,0)|o.call(u,1)<<8|o.call(u,2)<<16|o.call(u,3)<<24)>>>0,(o.call(u,4)|o.call(u,5)<<8|o.call(u,6)<<16|o.call(u,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^u)>>>0,this.lo=(this.lo<<1^u)>>>0,this},e.prototype.zzDecode=function(){var u=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^u)>>>0,this.hi=(this.hi>>>1^u)>>>0,this},e.prototype.length=function(){var u=this.lo,l=(this.lo>>>28|this.hi<<4)>>>0,p=this.hi>>>24;return p===0?l===0?u<16384?u<128?1:2:u<2097152?3:4:l<16384?l<128?5:6:l<2097152?7:8:p<128?9:10},longbits$1}var hasRequiredMinimal$2;function requireMinimal$2(){return hasRequiredMinimal$2||(hasRequiredMinimal$2=1,function(t){var e=t;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits$1(),e.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c},e.isString=function(c){return typeof c=="string"||c instanceof String},e.isObject=function(c){return c&&typeof c=="object"},e.isset=e.isSet=function(c,u){var l=c[u];return l!=null&&c.hasOwnProperty(u)?typeof l!="object"||(Array.isArray(l)?l.length:Object.keys(l).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(c){return typeof c=="number"?e.Buffer?e._Buffer_allocUnsafe(c):new e.Array(c):e.Buffer?e._Buffer_from(c):typeof Uint8Array>"u"?c:new Uint8Array(c)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(c){return c?e.LongBits.from(c).toHash():e.LongBits.zeroHash},e.longFromHash=function(c,u){var l=e.LongBits.fromHash(c);return e.Long?e.Long.fromBits(l.lo,l.hi,u):l.toNumber(!!u)};function n(o,c,u){for(var l=Object.keys(c),p=0;p<l.length;++p)(o[l[p]]===void 0||!u)&&(o[l[p]]=c[l[p]]);return o}e.merge=n,e.lcFirst=function(c){return c.charAt(0).toLowerCase()+c.substring(1)};function a(o){function c(u,l){if(!(this instanceof c))return new c(u,l);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,c):Object.defineProperty(this,"stack",{value:new Error().stack||""}),l&&n(this,l)}return c.prototype=Object.create(Error.prototype,{constructor:{value:c,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),c}e.newError=a,e.ProtocolError=a("ProtocolError"),e.oneOfGetter=function(c){for(var u={},l=0;l<c.length;++l)u[c[l]]=1;return function(){for(var p=Object.keys(this),b=p.length-1;b>-1;--b)if(u[p[b]]===1&&this[p[b]]!==void 0&&this[p[b]]!==null)return p[b]}},e.oneOfSetter=function(c){return function(u){for(var l=0;l<c.length;++l)c[l]!==u&&delete this[c[l]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(u,l){return new o(u,l)},e._Buffer_allocUnsafe=o.allocUnsafe||function(u){return new o(u)}}}(minimal$3)),minimal$3}var writer$3=Writer$1,util$a=requireMinimal$2(),BufferWriter$1,LongBits$2=util$a.LongBits,base64=util$a.base64,utf8$1=util$a.utf8;function Op(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function noop$3(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer$1(){this.len=0,this.head=new Op(noop$3,0,0),this.tail=this.head,this.states=null}var create$4=function t(){return util$a.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$4();Writer$1.alloc=function t(e){return new util$a.Array(e)};util$a.Array!==Array&&(Writer$1.alloc=util$a.pool(Writer$1.alloc,util$a.Array.prototype.subarray));Writer$1.prototype._push=function t(e,n,a){return this.tail=this.tail.next=new Op(e,n,a),this.len+=n,this};function writeByte(t,e,n){e[n]=t&255}function writeVarint32(t,e,n){for(;t>127;)e[n++]=t&127|128,t>>>=7;e[n]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function t(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function t(e){return e<0?this._push(writeVarint64,10,LongBits$2.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function t(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(t,e,n){for(;t.hi;)e[n++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=t.lo&127|128,t.lo=t.lo>>>7;e[n++]=t.lo}Writer$1.prototype.uint64=function t(e){var n=LongBits$2.from(e);return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function t(e){var n=LongBits$2.from(e).zzEncode();return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.bool=function t(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}Writer$1.prototype.fixed32=function t(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function t(e){var n=LongBits$2.from(e);return this._push(writeFixed32,4,n.lo)._push(writeFixed32,4,n.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function t(e){return this._push(util$a.float.writeFloatLE,4,e)};Writer$1.prototype.double=function t(e){return this._push(util$a.float.writeDoubleLE,8,e)};var writeBytes=util$a.Array.prototype.set?function t(e,n,a){n.set(e,a)}:function t(e,n,a){for(var o=0;o<e.length;++o)n[a+o]=e[o]};Writer$1.prototype.bytes=function t(e){var n=e.length>>>0;if(!n)return this._push(writeByte,1,0);if(util$a.isString(e)){var a=Writer$1.alloc(n=base64.length(e));base64.decode(e,a,0),e=a}return this.uint32(n)._push(writeBytes,n,e)};Writer$1.prototype.string=function t(e){var n=utf8$1.length(e);return n?this.uint32(n)._push(utf8$1.write,n,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function t(){return this.states=new State(this),this.head=this.tail=new Op(noop$3,0,0),this.len=0,this};Writer$1.prototype.reset=function t(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$3,0,0),this.len=0),this};Writer$1.prototype.ldelim=function t(){var e=this.head,n=this.tail,a=this.len;return this.reset().uint32(a),a&&(this.tail.next=e.next,this.tail=n,this.len+=a),this};Writer$1.prototype.finish=function t(){for(var e=this.head.next,n=this.constructor.alloc(this.len),a=0;e;)e.fn(e.val,n,a),a+=e.len,e=e.next;return n};Writer$1._configure=function(t){BufferWriter$1=t,Writer$1.create=create$4(),BufferWriter$1._configure()};const WriterClass=getDefaultExportFromCjs(writer$3);var writer_buffer$1=BufferWriter,Writer=writer$3;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$9=requireMinimal$2();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$9._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$9.Buffer&&util$9.Buffer.prototype instanceof Uint8Array&&util$9.Buffer.prototype.set.name==="set"?function(e,n,a){n.set(e,a)}:function(e,n,a){if(e.copy)e.copy(n,a,0,e.length);else for(var o=0;o<e.length;)n[a++]=e[o++]}};BufferWriter.prototype.bytes=function t(e){util$9.isString(e)&&(e=util$9._Buffer_from(e,"base64"));var n=e.length>>>0;return this.uint32(n),n&&this._push(BufferWriter.writeBytesBuffer,n,e),this};function writeStringBuffer(t,e,n){t.length<40?util$9.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}BufferWriter.prototype.string=function t(e){var n=util$9.Buffer.byteLength(e);return this.uint32(n),n&&this._push(writeStringBuffer,n,e),this};BufferWriter._configure();const WriterBufferClass=getDefaultExportFromCjs(writer_buffer$1);var reader$4=Reader$1,util$8=requireMinimal$2(),BufferReader$1,LongBits$1=util$8.LongBits,utf8=util$8.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader$1(t){this.buf=t,this.pos=0,this.len=t.length}var create_array=typeof Uint8Array<"u"?function t(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function t(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$3=function t(){return util$8.Buffer?function(n){return(Reader$1.create=function(o){return util$8.Buffer.isBuffer(o)?new BufferReader$1(o):create_array(o)})(n)}:create_array};Reader$1.create=create$3();Reader$1.prototype._slice=util$8.Array.prototype.subarray||util$8.Array.prototype.slice;Reader$1.prototype.uint32=function t(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function t(){return this.uint32()|0};Reader$1.prototype.sint32=function t(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var t=new LongBits$1(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function t(){return this.uint32()!==0};function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$1(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$8.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function t(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$8.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function t(){var e=this.uint32(),n=this.pos,a=this.pos+e;if(a>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(n,a):n===a?new this.buf.constructor(0):this._slice.call(this.buf,n,a)};Reader$1.prototype.string=function t(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function t(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Reader$1._configure=function(t){BufferReader$1=t,Reader$1.create=create$3(),BufferReader$1._configure();var e=util$8.Long?"toLong":"toNumber";util$8.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};const ReaderClass=getDefaultExportFromCjs(reader$4);var reader_buffer$1=BufferReader,Reader=reader$4;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$7=requireMinimal$2();function BufferReader(t){Reader.call(this,t)}BufferReader._configure=function(){util$7.Buffer&&(BufferReader.prototype._slice=util$7.Buffer.prototype.slice)};BufferReader.prototype.string=function t(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();const ReaderBufferClass=getDefaultExportFromCjs(reader_buffer$1);var rpc$1={},service$1=Service,util$6=requireMinimal$2();(Service.prototype=Object.create(util$6.EventEmitter.prototype)).constructor=Service;function Service(t,e,n){if(typeof t!="function")throw TypeError("rpcImpl must be a function");util$6.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=!!e,this.responseDelimited=!!n}Service.prototype.rpcCall=function t(e,n,a,o,c){if(!o)throw TypeError("request must be specified");var u=this;if(!c)return util$6.asPromise(t,u,e,n,a,o);if(!u.rpcImpl){setTimeout(function(){c(Error("already ended"))},0);return}try{return u.rpcImpl(e,n[u.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(p,b){if(p)return u.emit("error",p,e),c(p);if(b===null){u.end(!0);return}if(!(b instanceof a))try{b=a[u.responseDelimited?"decodeDelimited":"decode"](b)}catch(v){return u.emit("error",v,e),c(v)}return u.emit("data",b,e),c(null,b)})}catch(l){u.emit("error",l,e),setTimeout(function(){c(l)},0);return}};Service.prototype.end=function t(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(t){var e=t;e.Service=service$1})(rpc$1);var roots$1={};(function(t){var e=t;e.build="minimal",e.Writer=writer$3,e.BufferWriter=writer_buffer$1,e.Reader=reader$4,e.BufferReader=reader_buffer$1,e.util=requireMinimal$2(),e.rpc=rpc$1,e.roots=roots$1,e.configure=n;function n(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}n()})(indexMinimal$1);var minimal$2=indexMinimal$1;const $protobuf=getDefaultExportFromCjs(minimal$2),textDecoder$2=new TextDecoder;function decodeVarint$1(t,e){let n=0;for(let a=0;;a+=7){if(a>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const o=t[e++];if(n+=a<28?(o&127)<<a:(o&127)*2**a,o<128)break}return[n,e]}function decodeBytes(t,e){let n;[n,e]=decodeVarint$1(t,e);const a=e+n;if(n<0||a<0)throw new Error("protobuf: invalid length");if(a>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,a),a]}function decodeKey(t,e){let n;return[n,e]=decodeVarint$1(t,e),[n&7,n>>3,e]}function decodeLink(t){const e={},n=t.length;let a=0;for(;a<n;){let o,c;if([o,c,a]=decodeKey(t,a),c===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,a]=decodeBytes(t,a)}else if(c===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let u;[u,a]=decodeBytes(t,a),e.Name=textDecoder$2.decode(u)}else if(c===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,a]=decodeVarint$1(t,a)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${c}`)}if(a>n)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(t){const e=t.length;let n=0,a,o=!1,c;for(;n<e;){let l,p;if([l,p,n]=decodeKey(t,n),l!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${l}`);if(p===1){if(c)throw new Error("protobuf: (PBNode) duplicate Data section");[c,n]=decodeBytes(t,n),a&&(o=!0)}else if(p===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");a||(a=[]);let b;[b,n]=decodeBytes(t,n),a.push(decodeLink(b))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${p}`)}if(n>e)throw new Error("protobuf: (PBNode) unexpected end of data");const u={};return c&&(u.Data=c),u.Links=a||[],u}const textEncoder$4=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(t,e){let n=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");n=encodeVarint(e,n,t.Tsize)-1,e[n]=24}if(typeof t.Name=="string"){const a=textEncoder$4.encode(t.Name);n-=a.length,e.set(a,n),n=encodeVarint(e,n,a.length)-1,e[n]=18}return t.Hash&&(n-=t.Hash.length,e.set(t.Hash,n),n=encodeVarint(e,n,t.Hash.length)-1,e[n]=10),e.length-n}function encodeNode(t){const e=sizeNode(t),n=new Uint8Array(e);let a=e;if(t.Data&&(a-=t.Data.length,n.set(t.Data,a),a=encodeVarint(n,a,t.Data.length)-1,n[a]=10),t.Links)for(let o=t.Links.length-1;o>=0;o--){const c=encodeLink(t.Links[o],n.subarray(0,a));a-=c,a=encodeVarint(n,a,c)-1,n[a]=18}return n}function sizeLink(t){let e=0;if(t.Hash){const n=t.Hash.length;e+=1+n+sov(n)}if(typeof t.Name=="string"){const n=textEncoder$4.encode(t.Name).length;e+=1+n+sov(n)}return typeof t.Tsize=="number"&&(e+=1+sov(t.Tsize)),e}function sizeNode(t){let e=0;if(t.Data){const n=t.Data.length;e+=1+n+sov(n)}if(t.Links)for(const n of t.Links){const a=sizeLink(n);e+=1+a+sov(a)}return e}function encodeVarint(t,e,n){e-=sov(n);const a=e;for(;n>=maxUInt32;)t[e++]=n&127|128,n/=128;for(;n>=128;)t[e++]=n&127|128,n>>>=7;return t[e]=n,a}function sov(t){return t%2===0&&t++,Math.floor((len64(t)+6)/7)}function len64(t){let e=0;return t>=maxInt32&&(t=Math.floor(t/maxInt32),e=32),t>=65536&&(t>>>=16,e+=16),t>=256&&(t>>>=8,e+=8),e+len8tab[t]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$3=new TextEncoder;function linkComparator(t,e){if(t===e)return 0;const n=t.Name?textEncoder$3.encode(t.Name):[],a=e.Name?textEncoder$3.encode(e.Name):[];let o=n.length,c=a.length;for(let u=0,l=Math.min(o,c);u<l;++u)if(n[u]!==a[u]){o=n[u],c=a[u];break}return o<c?-1:c<o?1:0}function hasOnlyProperties(t,e){return!Object.keys(t).some(n=>!e.includes(n))}function asLink(t){if(typeof t.asCID=="object"){const n=CID.asCID(t);if(!n)throw new TypeError("Invalid DAG-PB form");return{Hash:n}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let n=CID.asCID(t.Hash);try{n||(typeof t.Hash=="string"?n=CID.parse(t.Hash):t.Hash instanceof Uint8Array&&(n=CID.decode(t.Hash)))}catch(a){throw new TypeError(`Invalid DAG-PB form: ${a.message}`)}n&&(e.Hash=n)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function prepare(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=textEncoder$3.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(asLink),e.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function validate$1(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(t,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const n=t.Links[e];if(!n||typeof n!="object"||Array.isArray(n)||n instanceof Uint8Array||n["/"]&&n["/"]===n.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!hasOnlyProperties(n,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(n.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(n.Hash==null||!n.Hash["/"]||n.Hash["/"]!==n.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(n.Name!==void 0&&typeof n.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(n.Tsize!==void 0){if(typeof n.Tsize!="number"||n.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(n.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&linkComparator(n,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode$1(t,e=[]){return prepare({Data:t,Links:e})}function createLink(t,e,n){return asLink({Hash:n,Name:t,Tsize:e})}const name$5="dag-pb",code$4=112;function encode$h(t){validate$1(t);const e={};return t.Links&&(e.Links=t.Links.map(n=>{const a={};return n.Hash&&(a.Hash=n.Hash.bytes),n.Name!==void 0&&(a.Name=n.Name),n.Tsize!==void 0&&(a.Tsize=n.Tsize),a})),t.Data&&(e.Data=t.Data),encodeNode(e)}function decode$e(t){const e=decodeNode(t),n={};return e.Data&&(n.Data=e.Data),e.Links&&(n.Links=e.Links.map(a=>{const o={};try{o.Hash=CID.decode(a.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return a.Name!==void 0&&(o.Name=a.Name),a.Tsize!==void 0&&(o.Tsize=a.Tsize),o})),n}const dagPb=Object.freeze(Object.defineProperty({__proto__:null,code:code$4,createLink,createNode:createNode$1,decode:decode$e,encode:encode$h,name:name$5,prepare,validate:validate$1},Symbol.toStringTag,{value:"Module"})),typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is$1(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(isBuffer$1(t))return"Buffer";const n=getObjectType(t);return n||"Object"}function isBuffer$1(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function getObjectType(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,n,a){this.major=e,this.majorEncoded=e<<5,this.name=n,this.terminal=a}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,n,a){this.type=e,this.value=n,this.encodedLength=a,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$1=new TextDecoder,textEncoder$2=new TextEncoder;function isBuffer(t){return useBuffer&&globalThis.Buffer.isBuffer(t)}function asU8A(t){return t instanceof Uint8Array?isBuffer(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const toString$5=useBuffer?(t,e,n)=>n-e>64?globalThis.Buffer.from(t.subarray(e,n)).toString("utf8"):utf8Slice(t,e,n):(t,e,n)=>n-e>64?textDecoder$1.decode(t.subarray(e,n)):utf8Slice(t,e,n),fromString$3=useBuffer?t=>t.length>64?globalThis.Buffer.from(t):utf8ToBytes(t):t=>t.length>64?textEncoder$2.encode(t):utf8ToBytes(t),fromArray=t=>Uint8Array.from(t),slice=useBuffer?(t,e,n)=>isBuffer(t)?new Uint8Array(t.subarray(e,n)):t.slice(e,n):(t,e,n)=>t.slice(e,n),concat$3=useBuffer?(t,e)=>(t=t.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),asU8A(globalThis.Buffer.concat(t,e))):(t,e)=>{const n=new Uint8Array(e);let a=0;for(let o of t)a+o.length>n.length&&(o=o.subarray(0,n.length-a)),n.set(o,a),a+=o.length;return n},alloc$1=useBuffer?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function compare$2(t,e){if(isBuffer(t)&&isBuffer(e))return t.compare(e);for(let n=0;n<t.length;n++)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return 0}function utf8ToBytes(t,e=1/0){let n;const a=t.length;let o=null;const c=[];for(let u=0;u<a;++u){if(n=t.charCodeAt(u),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&c.push(239,191,189);continue}else if(u+1===a){(e-=3)>-1&&c.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&c.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&c.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;c.push(n)}else if(n<2048){if((e-=2)<0)break;c.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;c.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;c.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return c}function utf8Slice(t,e,n){const a=[];for(;e<n;){const o=t[e];let c=null,u=o>239?4:o>223?3:o>191?2:1;if(e+u<=n){let l,p,b,v;switch(u){case 1:o<128&&(c=o);break;case 2:l=t[e+1],(l&192)===128&&(v=(o&31)<<6|l&63,v>127&&(c=v));break;case 3:l=t[e+1],p=t[e+2],(l&192)===128&&(p&192)===128&&(v=(o&15)<<12|(l&63)<<6|p&63,v>2047&&(v<55296||v>57343)&&(c=v));break;case 4:l=t[e+1],p=t[e+2],b=t[e+3],(l&192)===128&&(p&192)===128&&(b&192)===128&&(v=(o&15)<<18|(l&63)<<12|(p&63)<<6|b&63,v>65535&&v<1114112&&(c=v))}}c===null?(c=65533,u=1):c>65535&&(c-=65536,a.push(c>>>10&1023|55296),c=56320|c&1023),a.push(c),e+=u}return decodeCodePointsArray(a)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(t){const e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);let n="",a=0;for(;a<e;)n+=String.fromCharCode.apply(String,t.slice(a,a+=MAX_ARGUMENTS_LENGTH));return n}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let n=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const o=n.length-(this.maxCursor-this.cursor)-1;n.set(e,o)}else{if(n){const o=n.length-(this.maxCursor-this.cursor)-1;o<n.length&&(this.chunks[this.chunks.length-1]=n.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(n=alloc$1(this.chunkSize),this.chunks.push(n),this.maxCursor+=n.length,this._initReuseChunk===null&&(this._initReuseChunk=n),n.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let n;if(this.chunks.length===1){const a=this.chunks[0];e&&this.cursor>a.length/2?(n=this.cursor===a.length?a:a.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):n=slice(a,0,this.cursor)}else n=concat$3(this.chunks,this.cursor);return e&&this.reset(),n}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(t,e,n){if(t.length-e<n)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(t,e,n){assertEnoughData(t,e,1);const a=t[e];if(n.strict===!0&&a<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return a}function readUint16(t,e,n){assertEnoughData(t,e,2);const a=t[e]<<8|t[e+1];if(n.strict===!0&&a<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return a}function readUint32(t,e,n){assertEnoughData(t,e,4);const a=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(n.strict===!0&&a<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return a}function readUint64(t,e,n){assertEnoughData(t,e,8);const a=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],c=(BigInt(a)<<BigInt(32))+BigInt(o);if(n.strict===!0&&c<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(c<=Number.MAX_SAFE_INTEGER)return Number(c);if(n.allowBigInt===!0)return c;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(t,e,n,a){return new Token(Type.uint,readUint8(t,e+1,a),2)}function decodeUint16(t,e,n,a){return new Token(Type.uint,readUint16(t,e+1,a),3)}function decodeUint32(t,e,n,a){return new Token(Type.uint,readUint32(t,e+1,a),5)}function decodeUint64(t,e,n,a){return new Token(Type.uint,readUint64(t,e+1,a),9)}function encodeUint(t,e){return encodeUintValue(t,0,e.value)}function encodeUintValue(t,e,n){if(n<uintBoundaries[0]){const a=Number(n);t.push([e|a])}else if(n<uintBoundaries[1]){const a=Number(n);t.push([e|24,a])}else if(n<uintBoundaries[2]){const a=Number(n);t.push([e|25,a>>>8,a&255])}else if(n<uintBoundaries[3]){const a=Number(n);t.push([e|26,a>>>24&255,a>>>16&255,a>>>8&255,a&255])}else{const a=BigInt(n);if(a<uintBoundaries[4]){const o=[e|27,0,0,0,0,0,0,0];let c=Number(a&BigInt(4294967295)),u=Number(a>>BigInt(32)&BigInt(4294967295));o[8]=c&255,c=c>>8,o[7]=c&255,c=c>>8,o[6]=c&255,c=c>>8,o[5]=c&255,o[4]=u&255,u=u>>8,o[3]=u&255,u=u>>8,o[2]=u&255,u=u>>8,o[1]=u&255,t.push(o)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function t(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function t(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function t(e,n){return e.value<n.value?-1:e.value>n.value?1:0};function decodeNegint8(t,e,n,a){return new Token(Type.negint,-1-readUint8(t,e+1,a),2)}function decodeNegint16(t,e,n,a){return new Token(Type.negint,-1-readUint16(t,e+1,a),3)}function decodeNegint32(t,e,n,a){return new Token(Type.negint,-1-readUint32(t,e+1,a),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o!="bigint"){const c=-1-o;if(c>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,c,9)}if(a.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(o),9)}function encodeNegint(t,e){const n=e.value,a=typeof n=="bigint"?n*neg1b-pos1b:n*-1-1;encodeUintValue(t,e.type.majorEncoded,a)}encodeNegint.encodedSize=function t(e){const n=e.value,a=typeof n=="bigint"?n*neg1b-pos1b:n*-1-1;return a<uintBoundaries[0]?1:a<uintBoundaries[1]?2:a<uintBoundaries[2]?3:a<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function t(e,n){return e.value<n.value?1:e.value>n.value?-1:0};function toToken$3(t,e,n,a){assertEnoughData(t,e,n+a);const o=slice(t,e+n,e+n+a);return new Token(Type.bytes,o,n+a)}function decodeBytesCompact(t,e,n,a){return toToken$3(t,e,1,n)}function decodeBytes8(t,e,n,a){return toToken$3(t,e,2,readUint8(t,e+1,a))}function decodeBytes16(t,e,n,a){return toToken$3(t,e,3,readUint16(t,e+1,a))}function decodeBytes32(t,e,n,a){return toToken$3(t,e,5,readUint32(t,e+1,a))}function decodeBytes64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(t,e,9,o)}function tokenBytes(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Type.string?fromString$3(t.value):t.value),t.encodedBytes}function encodeBytes(t,e){const n=tokenBytes(e);encodeUintValue(t,e.type.majorEncoded,n.length),t.push(n)}encodeBytes.encodedSize=function t(e){const n=tokenBytes(e);return encodeUintValue.encodedSize(n.length)+n.length};encodeBytes.compareTokens=function t(e,n){return compareBytes(tokenBytes(e),tokenBytes(n))};function compareBytes(t,e){return t.length<e.length?-1:t.length>e.length?1:compare$2(t,e)}function toToken$2(t,e,n,a,o){const c=n+a;assertEnoughData(t,e,c);const u=new Token(Type.string,toString$5(t,e+n,e+c),c);return o.retainStringBytes===!0&&(u.byteValue=slice(t,e+n,e+c)),u}function decodeStringCompact(t,e,n,a){return toToken$2(t,e,1,n,a)}function decodeString8(t,e,n,a){return toToken$2(t,e,2,readUint8(t,e+1,a),a)}function decodeString16(t,e,n,a){return toToken$2(t,e,3,readUint16(t,e+1,a),a)}function decodeString32(t,e,n,a){return toToken$2(t,e,5,readUint32(t,e+1,a),a)}function decodeString64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(t,e,9,o,a)}const encodeString=encodeBytes;function toToken$1(t,e,n,a){return new Token(Type.array,a,n)}function decodeArrayCompact(t,e,n,a){return toToken$1(t,e,1,n)}function decodeArray8(t,e,n,a){return toToken$1(t,e,2,readUint8(t,e+1,a))}function decodeArray16(t,e,n,a){return toToken$1(t,e,3,readUint16(t,e+1,a))}function decodeArray32(t,e,n,a){return toToken$1(t,e,5,readUint32(t,e+1,a))}function decodeArray64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(t,e,9,o)}function decodeArrayIndefinite(t,e,n,a){if(a.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(t,e,1,1/0)}function encodeArray(t,e){encodeUintValue(t,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function t(e){return encodeUintValue.encodedSize(e.value)};function toToken(t,e,n,a){return new Token(Type.map,a,n)}function decodeMapCompact(t,e,n,a){return toToken(t,e,1,n)}function decodeMap8(t,e,n,a){return toToken(t,e,2,readUint8(t,e+1,a))}function decodeMap16(t,e,n,a){return toToken(t,e,3,readUint16(t,e+1,a))}function decodeMap32(t,e,n,a){return toToken(t,e,5,readUint32(t,e+1,a))}function decodeMap64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(t,e,9,o)}function decodeMapIndefinite(t,e,n,a){if(a.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(t,e,1,1/0)}function encodeMap(t,e){encodeUintValue(t,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function t(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(t,e,n,a){return new Token(Type.tag,n,1)}function decodeTag8(t,e,n,a){return new Token(Type.tag,readUint8(t,e+1,a),2)}function decodeTag16(t,e,n,a){return new Token(Type.tag,readUint16(t,e+1,a),3)}function decodeTag32(t,e,n,a){return new Token(Type.tag,readUint32(t,e+1,a),5)}function decodeTag64(t,e,n,a){return new Token(Type.tag,readUint64(t,e+1,a),9)}function encodeTag(t,e){encodeUintValue(t,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function t(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(t,e,n,a){if(a.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return a.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(t,e,n,a){if(a.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(t,e,n){if(n){if(n.allowNaN===!1&&Number.isNaN(t))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(n.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,t,e)}function decodeFloat16(t,e,n,a){return createToken(readFloat16(t,e+1),3,a)}function decodeFloat32(t,e,n,a){return createToken(readFloat32(t,e+1),5,a)}function decodeFloat64(t,e,n,a){return createToken(readFloat64(t,e+1),9,a)}function encodeFloat(t,e,n){const a=e.value;if(a===!1)t.push([Type.float.majorEncoded|MINOR_FALSE]);else if(a===!0)t.push([Type.float.majorEncoded|MINOR_TRUE]);else if(a===null)t.push([Type.float.majorEncoded|MINOR_NULL]);else if(a===void 0)t.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let o,c=!1;(!n||n.float64!==!0)&&(encodeFloat16(a),o=readFloat16(ui8a,1),a===o||Number.isNaN(a)?(ui8a[0]=249,t.push(ui8a.slice(0,3)),c=!0):(encodeFloat32(a),o=readFloat32(ui8a,1),a===o&&(ui8a[0]=250,t.push(ui8a.slice(0,5)),c=!0))),c||(encodeFloat64(a),o=readFloat64(ui8a,1),ui8a[0]=251,t.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function t(e,n){const a=e.value;if(a===!1||a===!0||a===null||a===void 0)return 1;if(!n||n.float64!==!0){encodeFloat16(a);let o=readFloat16(ui8a,1);if(a===o||Number.isNaN(a))return 3;if(encodeFloat32(a),o=readFloat32(ui8a,1),a===o)return 5}return 9};const buffer$1=new ArrayBuffer(9),dataView=new DataView(buffer$1,1),ui8a=new Uint8Array(buffer$1,0);function encodeFloat16(t){if(t===1/0)dataView.setUint16(0,31744,!1);else if(t===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(t))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,t);const e=dataView.getUint32(0),n=(e&2139095040)>>23,a=e&8388607;if(n===255)dataView.setUint16(0,31744,!1);else if(n===0)dataView.setUint16(0,(t&2147483648)>>16|a>>13,!1);else{const o=n-127;o<-24?dataView.setUint16(0,0):o<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):dataView.setUint16(0,(e&2147483648)>>16|o+15<<10|a>>13,!1)}}}function readFloat16(t,e){if(t.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const n=(t[e]<<8)+t[e+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;const a=n>>10&31,o=n&1023;let c;return a===0?c=o*2**-24:a!==31?c=(o+1024)*2**(a-25):c=o===0?1/0:NaN,n&32768?-c:c}function encodeFloat32(t){dataView.setFloat32(0,t,!1)}function readFloat32(t,e){if(t.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,4).getFloat32(0,!1)}function encodeFloat64(t){dataView.setFloat64(0,t,!1)}function readFloat64(t,e){if(t.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(t,e,n){throw new Error(`${decodeErrPrefix} encountered invalid minor (${n}) for major ${t[e]>>>5}`)}function errorer(t){return()=>{throw new Error(`${decodeErrPrefix} ${t}`)}}const jump=[];for(let t=0;t<=23;t++)jump[t]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let t=32;t<=55;t++)jump[t]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let t=64;t<=87;t++)jump[t]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)jump[t]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)jump[t]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let t=160;t<=183;t++)jump[t]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let t=192;t<=215;t++)jump[t]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let t=224;t<=243;t++)jump[t]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let t=0;t<24;t++)quick[t]=new Token(Type.uint,t,1);for(let t=-1;t>=-24;t--)quick[31-t]=new Token(Type.negint,t,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(t){switch(t.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return t.value.length?void 0:fromArray([64]);case Type.string:return t.value===""?fromArray([96]):void 0;case Type.array:return t.value===0?fromArray([128]):void 0;case Type.map:return t.value===0?fromArray([160]):void 0;case Type.uint:return t.value<24?fromArray([Number(t.value)]):void 0;case Type.negint:if(t.value>=-24)return fromArray([31-Number(t.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter:mapSorter$1,quickEncodeToken};function makeCborEncoders(){const t=[];return t[Type.uint.major]=encodeUint,t[Type.negint.major]=encodeNegint,t[Type.bytes.major]=encodeBytes,t[Type.string.major]=encodeString,t[Type.array.major]=encodeArray,t[Type.map.major]=encodeMap,t[Type.tag.major]=encodeTag,t[Type.float.major]=encodeFloat,t}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,n){this.obj=e,this.parent=n}includes(e){let n=this;do if(n.obj===e)return!0;while(n=n.parent);return!1}static createCheck(e,n){if(e&&e.includes(n))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(n,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(t,e,n,a){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Token(Type.float,t):t>=0?new Token(Type.uint,t):new Token(Type.negint,t)},bigint(t,e,n,a){return t>=BigInt(0)?new Token(Type.uint,t):new Token(Type.negint,t)},Uint8Array(t,e,n,a){return new Token(Type.bytes,t)},string(t,e,n,a){return new Token(Type.string,t)},boolean(t,e,n,a){return t?simpleTokens.true:simpleTokens.false},null(t,e,n,a){return simpleTokens.null},undefined(t,e,n,a){return simpleTokens.undefined},ArrayBuffer(t,e,n,a){return new Token(Type.bytes,new Uint8Array(t))},DataView(t,e,n,a){return new Token(Type.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,n,a){if(!t.length)return n.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;a=Ref.createCheck(a,t);const o=[];let c=0;for(const u of t)o[c++]=objectToTokens(u,n,a);return n.addBreakTokens?[new Token(Type.array,t.length),o,new Token(Type.break)]:[new Token(Type.array,t.length),o]},Object(t,e,n,a){const o=e!=="Object",c=o?t.keys():Object.keys(t),u=o?t.size:c.length;if(!u)return n.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;a=Ref.createCheck(a,t);const l=[];let p=0;for(const b of c)l[p++]=[objectToTokens(b,n,a),objectToTokens(o?t.get(b):t[b],n,a)];return sortMapEntries(l,n),n.addBreakTokens?[new Token(Type.map,u),l,new Token(Type.break)]:[new Token(Type.map,u),l]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${t}Array`]=typeEncoders.DataView;function objectToTokens(t,e={},n){const a=is$1(t),o=e&&e.typeEncoders&&e.typeEncoders[a]||typeEncoders[a];if(typeof o=="function"){const u=o(t,a,e,n);if(u!=null)return u}const c=typeEncoders[a];if(!c)throw new Error(`${encodeErrPrefix} unsupported type: ${a}`);return c(t,a,e,n)}function sortMapEntries(t,e){e.mapSorter&&t.sort(e.mapSorter)}function mapSorter$1(t,e){const n=Array.isArray(t[0])?t[0][0]:t[0],a=Array.isArray(e[0])?e[0][0]:e[0];if(n.type!==a.type)return n.type.compare(a.type);const o=n.type.major,c=cborEncoders[o].compareTokens(n,a);return c===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),c}function tokensToEncoded(t,e,n,a){if(Array.isArray(e))for(const o of e)tokensToEncoded(t,o,n,a);else n[e.type.major](t,e,a)}function encodeCustom(t,e,n){const a=objectToTokens(t,n);if(!Array.isArray(a)&&n.quickEncodeToken){const o=n.quickEncodeToken(a);if(o)return o;const c=e[a.type.major];if(c.encodedSize){const u=c.encodedSize(a,n),l=new Bl(u);if(c(l,a,n),l.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${a} was wrong`);return asU8A(l.chunks[0])}}return buf.reset(),tokensToEncoded(buf,a,e,n),buf.toBytes(!0)}function encode$g(t,e){return e=Object.assign({},defaultEncodeOptions$1,e),encodeCustom(t,cborEncoders,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,n={}){this.pos=0,this.data=e,this.options=n}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let n=quick[e];if(n===void 0){const a=jump[e];if(!a)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const o=e&31;n=a(this.data,this.pos,o,this.options)}return this.pos+=n.encodedLength,n}}const DONE$1=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(t,e,n){const a=[];for(let o=0;o<t.value;o++){const c=tokensToObject(e,n);if(c===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(c===DONE$1)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${o}, expected ${t.value})`);a[o]=c}return a}function tokenToMap(t,e,n){const a=n.useMaps===!0,o=a?void 0:{},c=a?new Map:void 0;for(let u=0;u<t.value;u++){const l=tokensToObject(e,n);if(l===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(l===DONE$1)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${u} [no key], expected ${t.value})`);if(a!==!0&&typeof l!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof l})`);if(n.rejectDuplicateMapKeys===!0&&(a&&c.has(l)||!a&&l in o))throw new Error(`${decodeErrPrefix} found repeat map key "${l}"`);const p=tokensToObject(e,n);if(p===DONE$1)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${u} [no value], expected ${t.value})`);a?c.set(l,p):o[l]=p}return a?c:o}function tokensToObject(t,e){if(t.done())return DONE$1;const n=t.next();if(n.type===Type.break)return BREAK;if(n.type.terminal)return n.value;if(n.type===Type.array)return tokenToArray(n,t,e);if(n.type===Type.map)return tokenToMap(n,t,e);if(n.type===Type.tag){if(e.tags&&typeof e.tags[n.value]=="function"){const a=tokensToObject(t,e);return e.tags[n.value](a)}throw new Error(`${decodeErrPrefix} tag not supported (${n.value})`)}throw new Error("unsupported")}function decode$d(t,e){if(!(t instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const n=e.tokenizer||new Tokeniser(t,e),a=tokensToObject(n,e);if(a===DONE$1)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(a===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!n.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return a}const CID_CBOR_TAG$1=42;function cidEncoder$2(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=CID.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG$1),new Token(Type.bytes,n)]}function undefinedEncoder$2(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$2(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$2={float64:!0,typeEncoders:{Object:cidEncoder$2,undefined:undefinedEncoder$2,number:numberEncoder$2}};function cidDecoder$1(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(t.subarray(1))}const decodeOptions$2={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions$2.tags[CID_CBOR_TAG$1]=cidDecoder$1;const name$4="dag-cbor",code$3=113,encode$f=t=>encode$g(t,encodeOptions$2),decode$c=t=>decode$d(t,decodeOptions$2),dagCbor$1=Object.freeze(Object.defineProperty({__proto__:null,code:code$3,decode:decode$c,encode:encode$f,name:name$4},Symbol.toStringTag,{value:"Module"}));class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const n=this.inRecursive[this.inRecursive.length-1];n&&(n.type===Type.array&&(n.elements++,n.elements!==1&&e.push([44])),n.type===Type.map&&(n.elements++,n.elements!==1&&(n.elements%2===1?e.push([44]):e.push([58]))))}[Type.uint.major](e,n){this.prefix(e);const a=String(n.value),o=[];for(let c=0;c<a.length;c++)o[c]=a.charCodeAt(c);e.push(o)}[Type.negint.major](e,n){this[Type.uint.major](e,n)}[Type.bytes.major](e,n){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](e,n){this.prefix(e);const a=fromString$3(JSON.stringify(n.value));e.push(a.length>32?asU8A(a):a)}[Type.array.major](e,n){this.prefix(e),this.inRecursive.push({type:Type.array,elements:0}),e.push([91])}[Type.map.major](e,n){this.prefix(e),this.inRecursive.push({type:Type.map,elements:0}),e.push([123])}[Type.tag.major](e,n){}[Type.float.major](e,n){if(n.type.name==="break"){const u=this.inRecursive.pop();if(u){if(u.type===Type.array)e.push([93]);else if(u.type===Type.map)e.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(n.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(e),n.type.name==="true"){e.push([116,114,117,101]);return}else if(n.type.name==="false"){e.push([102,97,108,115,101]);return}else if(n.type.name==="null"){e.push([110,117,108,108]);return}const a=String(n.value),o=[];let c=!1;for(let u=0;u<a.length;u++)o[u]=a.charCodeAt(u),!c&&(o[u]===46||o[u]===101||o[u]===69)&&(c=!0);c||(o.push(46),o.push(48)),e.push(o)}}function mapSorter(t,e){if(Array.isArray(t[0])||Array.isArray(e[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const n=t[0],a=e[0];if(n.type!==Type.string||a.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(n<a)return-1;if(n>a)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}const defaultEncodeOptions={addBreakTokens:!0,mapSorter};function encode$e(t,e){return e=Object.assign({},defaultEncodeOptions,e),encodeCustom(t,new JSONEncoder,e)}class Tokenizer{constructor(e,n={}){this.pos=0,this.data=e,this.options=n,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;e===32||e===9||e===13||e===10;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this.pos}`);for(let n=0;n<e.length;n++)if(this.data[this.pos++]!==e[n])throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this.pos;let n=!1,a=!1;const o=l=>{for(;!this.done();){const p=this.ch();if(l.includes(p))this.pos++;else break}};if(this.ch()===45&&(n=!0,this.pos++),this.ch()===48)if(this.pos++,this.ch()===46)this.pos++,a=!0;else return new Token(Type.uint,0,this.pos-e);if(o([48,49,50,51,52,53,54,55,56,57]),n&&this.pos===e+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);if(!this.done()&&this.ch()===46){if(a)throw new Error(`${decodeErrPrefix} unexpected token at position ${this.pos}`);a=!0,this.pos++,o([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(a=!0,this.pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this.pos++,o([48,49,50,51,52,53,54,55,56,57]));const c=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),u=parseFloat(c);return a?new Token(Type.float,u,this.pos-e):this.options.allowBigInt!==!0||Number.isSafeInteger(u)?new Token(u>=0?Type.uint:Type.negint,u,this.pos-e):new Token(u>=0?Type.uint:Type.negint,BigInt(c),this.pos-e)}parseString(){if(this.ch()!==34)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let c=this.pos,u=0;c<this.data.length&&u<65536;c++,u++){const l=this.data[c];if(l===92||l<32||l>=128)break;if(l===34){const p=String.fromCharCode.apply(null,this.data.subarray(this.pos,c));return this.pos=c+1,new Token(Type.string,p,u)}}const e=this.pos,n=[],a=()=>{if(this.pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this.pos}`);let c=0;for(let u=0;u<4;u++){let l=this.ch();if(l>=48&&l<=57)l-=48;else if(l>=97&&l<=102)l=l-97+10;else if(l>=65&&l<=70)l=l-65+10;else throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this.pos}`);c=c*16+l,this.pos++}return c},o=()=>{const c=this.ch();let u=null,l=c>239?4:c>223?3:c>191?2:1;if(this.pos+l>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this.pos}`);let p,b,v,x;switch(l){case 1:c<128&&(u=c);break;case 2:p=this.data[this.pos+1],(p&192)===128&&(x=(c&31)<<6|p&63,x>127&&(u=x));break;case 3:p=this.data[this.pos+1],b=this.data[this.pos+2],(p&192)===128&&(b&192)===128&&(x=(c&15)<<12|(p&63)<<6|b&63,x>2047&&(x<55296||x>57343)&&(u=x));break;case 4:p=this.data[this.pos+1],b=this.data[this.pos+2],v=this.data[this.pos+3],(p&192)===128&&(b&192)===128&&(v&192)===128&&(x=(c&15)<<18|(p&63)<<12|(b&63)<<6|v&63,x>65535&&x<1114112&&(u=x))}u===null?(u=65533,l=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|u&1023),n.push(u),this.pos+=l};for(;!this.done();){const c=this.ch();let u;switch(c){case 92:if(this.pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this.pos}`);switch(u=this.ch(),this.pos++,u){case 34:case 39:case 92:case 47:n.push(u);break;case 98:n.push(8);break;case 116:n.push(9);break;case 110:n.push(10);break;case 102:n.push(12);break;case 114:n.push(13);break;case 117:n.push(a());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new Token(Type.string,decodeCodePointsArray(n),this.pos-e);default:if(c<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this.pos}`);c<128?(n.push(c),this.pos++):o()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this.pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${decodeErrPrefix} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function decode$b(t,e){return e=Object.assign({tokenizer:new Tokenizer(t,e)},e),decode$d(t,e)}function cidEncoder$1(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=CID.asCID(t);if(!e)return null;const n=e.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,n,n.length),new Token(Type.break,void 0,1)]}function bytesEncoder(t){const e=base64$2.encode(t).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,e,e.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={typeEncoders:{Object:cidEncoder$1,Uint8Array:bytesEncoder,Buffer:bytesEncoder,undefined:undefinedEncoder$1,number:numberEncoder$1}};class DagJsonTokenizer extends Tokenizer{constructor(e,n){super(e,n),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===Type.map){const n=this._next();if(n.type===Type.string&&n.value==="/"){const a=this._next();if(a.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(a),new Token(Type.tag,42,0)}if(a.type===Type.map){const o=this._next();if(o.type===Type.string&&o.value==="bytes"){const c=this._next();if(c.type===Type.string){for(let l=0;l<2;l++)if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form");const u=base64$2.decode(`m${c.value}`);return new Token(Type.bytes,u,c.value.length)}this.tokenBuffer.push(c)}this.tokenBuffer.push(o)}this.tokenBuffer.push(a)}this.tokenBuffer.push(n)}return e}}const decodeOptions$1={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions$1.tags[42]=CID.parse;const name$3="dag-json",code$2=297,encode$d=t=>encode$e(t,encodeOptions$1),decode$a=t=>{const e=Object.assign(decodeOptions$1,{tokenizer:new DagJsonTokenizer(t,decodeOptions$1)});return decode$b(t,e)},format$6=t=>utf8Decoder.decode(encode$d(t)),utf8Decoder=new TextDecoder,parse$7=t=>decode$a(utf8Encoder.encode(t)),utf8Encoder=new TextEncoder,dagJSON=Object.freeze(Object.defineProperty({__proto__:null,code:code$2,decode:decode$a,encode:encode$d,format:format$6,name:name$3,parse:parse$7,stringify:format$6},Symbol.toStringTag,{value:"Module"}));function toBase64url(t){return base64url.encode(t).slice(1)}function fromBase64url(t){return base64url.decode(`u${t}`)}function fromSplit$1(t){const[e,n,a]=t;return{payload:n,signatures:[{protected:e,signature:a}],link:CID.decode(fromBase64url(n))}}function encodeSignature(t){const e={signature:fromBase64url(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=fromBase64url(t.protected)),e}function encode$c(t){const e=fromBase64url(t.payload);try{CID.decode(e)}catch{throw new Error("Not a valid DagJWS")}return{payload:e,signatures:t.signatures.map(encodeSignature)}}function decodeSignature(t){const e={signature:toBase64url(t.signature)};return t.header&&(e.header=t.header),t.protected&&(e.protected=toBase64url(t.protected)),e}function decode$9(t){const e={payload:toBase64url(t.payload),signatures:t.signatures.map(decodeSignature)};return e.link=CID.decode(new Uint8Array(t.payload)),e}function fromSplit(t){const[e,n,a,o,c]=t,u={ciphertext:o,iv:a,protected:e,tag:c};return n&&(u.recipients=[{encrypted_key:n}]),u}function encodeRecipient(t){const e={};return t.encrypted_key&&(e.encrypted_key=fromBase64url(t.encrypted_key)),t.header&&(e.header=t.header),e}function encode$b(t){const e={ciphertext:fromBase64url(t.ciphertext),protected:fromBase64url(t.protected),iv:fromBase64url(t.iv),tag:fromBase64url(t.tag)};return t.aad&&(e.aad=fromBase64url(t.aad)),t.recipients&&(e.recipients=t.recipients.map(encodeRecipient)),t.unprotected&&(e.unprotected=t.unprotected),e}function decodeRecipient(t){const e={};return t.encrypted_key&&(e.encrypted_key=toBase64url(t.encrypted_key)),t.header&&(e.header=t.header),e}function decode$8(t){const e={ciphertext:toBase64url(t.ciphertext),protected:toBase64url(t.protected),iv:toBase64url(t.iv),tag:toBase64url(t.tag)};return t.aad&&(e.aad=toBase64url(t.aad)),t.recipients&&(e.recipients=t.recipients.map(decodeRecipient)),t.unprotected&&(e.unprotected=t.unprotected),e}const name$2="dag-jose",code$1=133;function isDagJWS(t){return"payload"in t&&typeof t.payload=="string"&&"signatures"in t&&Array.isArray(t.signatures)}function isEncodedJWS(t){return"payload"in t&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures)}function isEncodedJWE(t){return"ciphertext"in t&&t.ciphertext instanceof Uint8Array&&"iv"in t&&t.iv instanceof Uint8Array&&"protected"in t&&t.protected instanceof Uint8Array&&"tag"in t&&t.tag instanceof Uint8Array}function isDagJWE(t){return"ciphertext"in t&&typeof t.ciphertext=="string"&&"iv"in t&&typeof t.iv=="string"&&"protected"in t&&typeof t.protected=="string"&&"tag"in t&&typeof t.tag=="string"}function toGeneral(t){if(typeof t=="string"){const e=t.split(".");if(e.length===3)return fromSplit$1(e);if(e.length===5)return fromSplit(e);throw new Error("Not a valid JOSE string")}if(isDagJWS(t)||isDagJWE(t))return t;throw new Error("Not a valid unencoded JOSE object")}function encode$a(t){typeof t=="string"&&(t=toGeneral(t));let e;if(isDagJWS(t))e=encode$c(t);else if(isDagJWE(t))e=encode$b(t);else throw new Error("Not a valid JOSE object");return new Uint8Array(encode$f(e))}function decode$7(t){let e;try{e=decode$c(t)}catch{throw new Error("Not a valid DAG-JOSE object")}if(isEncodedJWS(e))return decode$9(e);if(isEncodedJWE(e))return decode$8(e);throw new Error("Not a valid DAG-JOSE object")}const dagJOSE=Object.freeze(Object.defineProperty({__proto__:null,code:code$1,decode:decode$7,encode:encode$a,name:name$2,toGeneral},Symbol.toStringTag,{value:"Module"}));function asUint8Array$2(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function alloc(t=0){return globalThis.Buffer?.alloc!=null?asUint8Array$2(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function allocUnsafe$3(t=0){return globalThis.Buffer?.allocUnsafe!=null?asUint8Array$2(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec$4(t,e,n,a){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:a}}}const string$2=createCodec$4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$2=createCodec$4("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=allocUnsafe$3(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BASES$2={utf8:string$2,"utf-8":string$2,hex:bases.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...bases};function fromString$2(t,e="utf8"){const n=BASES$2[e];if(n==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$2(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}var timeBrowser=function t(){return Date.now()};const getTime=timeBrowser;class Retimer{constructor(e,n,a){const o=this;this._started=getTime(),this._rescheduled=0,this._scheduled=n,this._args=a,this._triggered=!1,this._timerWrapper=()=>{o._rescheduled>0?(o._scheduled=o._rescheduled-(getTime()-o._started),o._schedule(o._scheduled)):(o._triggered=!0,e.apply(null,o._args))},this._timer=setTimeout(this._timerWrapper,n)}reschedule(e){e||(e=this._scheduled);const n=getTime();n+e-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(e)):this._triggered?this._schedule(e):(this._started=n,this._rescheduled=e)}_schedule(e){this._triggered=!1,this._started=getTime(),this._rescheduled=0,this._scheduled=e,this._timer=setTimeout(this._timerWrapper,e)}clear(){clearTimeout(this._timer)}}function retimer$1(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let t;if(arguments.length>0){t=new Array(arguments.length-2);for(var e=0;e<t.length;e++)t[e]=arguments[e+2]}return new Retimer(arguments[0],arguments[1],t)}var retimer_1=retimer$1;const retimer$2=getDefaultExportFromCjs(retimer_1),{AbortController:AbortController$1}=globalThis,retimer=retimer_1;class TimeoutController extends AbortController$1{constructor(e){super(),this._ms=e,this._timer=retimer(()=>this.abort(),e),Object.setPrototypeOf(this,TimeoutController.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=retimer(()=>this.abort(),this._ms)}}var timeoutAbortController={TimeoutController};class Parser{constructor(){Bt(this,"index",0);Bt(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const n=this.index,a=e();return a===void 0&&(this.index=n),a}parseWith(e){const n=e();if(this.index===this.input.length)return n}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const n=this.readChar();if(n===e)return n})}readSeparator(e,n,a){return this.readAtomically(()=>{if(!(n>0&&this.readGivenChar(e)===void 0))return a()})}readNumber(e,n,a,o){return this.readAtomically(()=>{let c=0,u=0;const l=this.peekChar();if(l===void 0)return;const p=l==="0",b=2**(8*o)-1;for(;;){const v=this.readAtomically(()=>{const x=this.readChar();if(x===void 0)return;const _=Number.parseInt(x,e);if(!Number.isNaN(_))return _});if(v===void 0)break;if(c*=e,c+=v,c>b||(u+=1,n!==void 0&&u>n))return}if(u!==0)return!a&&p&&u>1?void 0:c})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let n=0;n<e.length;n++){const a=this.readSeparator(".",n,()=>this.readNumber(10,3,!1,1));if(a===void 0)return;e[n]=a}return e})}readIPv6Addr(){const e=n=>{for(let a=0;a<n.length/2;a++){const o=a*2;if(a<n.length-3){const u=this.readSeparator(":",a,()=>this.readIPv4Addr());if(u!==void 0)return n[o]=u[0],n[o+1]=u[1],n[o+2]=u[2],n[o+3]=u[3],[o+4,!0]}const c=this.readSeparator(":",a,()=>this.readNumber(16,4,!0,2));if(c===void 0)return[o,!1];n[o]=c>>8,n[o+1]=c&255}return[n.length,!1]};return this.readAtomically(()=>{const n=new Uint8Array(16),[a,o]=e(n);if(a===16)return n;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const c=new Uint8Array(14),u=16-(a+2),[l]=e(c.subarray(0,u));return n.set(c.subarray(0,l),16-l),n})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const MAX_IPV6_LENGTH=45,MAX_IPV4_LENGTH=15,parser$1=new Parser;function parseIPv4(t){if(!(t.length>MAX_IPV4_LENGTH))return parser$1.new(t).parseWith(()=>parser$1.readIPv4Addr())}function parseIPv6(t){if(!(t.length>MAX_IPV6_LENGTH))return parser$1.new(t).parseWith(()=>parser$1.readIPv6Addr())}function parseIP(t){if(!(t.length>MAX_IPV6_LENGTH))return parser$1.new(t).parseWith(()=>parser$1.readIPAddr())}function isIPv4(t){return!!parseIPv4(t)}function isIPv6(t){return!!parseIPv6(t)}function isIP(t){return!!parseIP(t)}function toString$4(t,e="utf8"){const n=BASES$2[e];if(n==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}var encode_1$1=encode$9,MSB$3=128,REST$3=127,MSBALL$1=~REST$3,INT$1=Math.pow(2,31);function encode$9(t,e,n){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw encode$9.bytes=0,new RangeError("Could not encode varint");e=e||[],n=n||0;for(var a=n;t>=INT$1;)e[n++]=t&255|MSB$3,t/=128;for(;t&MSBALL$1;)e[n++]=t&255|MSB$3,t>>>=7;return e[n]=t|0,encode$9.bytes=n-a+1,e}var decode$6=read$1,MSB$2=128,REST$2=127;function read$1(t,a){var n=0,a=a||0,o=0,c=a,u,l=t.length;do{if(c>=l||o>49)throw read$1.bytes=0,new RangeError("Could not decode varint");u=t[c++],n+=o<28?(u&REST$2)<<o:(u&REST$2)*Math.pow(2,o),o+=7}while(u>=MSB$2);return read$1.bytes=c-a,n}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$3=function(t){return t<N1$2?1:t<N2$2?2:t<N3$2?3:t<N4$2?4:t<N5$2?5:t<N6$2?6:t<N7$2?7:t<N8$2?8:t<N9$2?9:10},varint$2={encode:encode_1$1,decode:decode$6,encodingLength:length$3};const varint$3=getDefaultExportFromCjs(varint$2);function concat$2(t,e){e==null&&(e=t.reduce((o,c)=>o+c.length,0));const n=allocUnsafe$3(e);let a=0;for(const o of t)n.set(o,a),a+=o.length;return asUint8Array$2(n)}function equals(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const isReactNative$2=typeof navigator<"u"&&navigator.product==="ReactNative";function getDefaultBase(){return isReactNative$2?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const URL$1=self.URL,defaultBase$1=getDefaultBase();let URLWithLegacySupport$2=class{constructor(e="",n=defaultBase$1){this.super=new URL$1(e,n),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return URL$1.createObjectURL(e)}static revokeObjectURL(e){URL$1.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function format$5(t){if(typeof t=="string")return new URL$1(t).toString();if(!(t instanceof URL$1)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",n=t.auth?t.auth+"@":"",a=t.port?":"+t.port:"",o=t.protocol?t.protocol+"//":"",c=t.host||"",u=t.hostname||"",l=t.search||(t.query?"?"+t.query:""),p=t.hash||"",b=t.pathname||"",v=t.path||b+l;return`${o}${e||n}${c||u+a}${v}${p}`}}var urlBrowser={URLWithLegacySupport:URLWithLegacySupport$2,URLSearchParams:self.URLSearchParams,defaultBase:defaultBase$1,format:format$5};const{URLWithLegacySupport:URLWithLegacySupport$1,format:format$4}=urlBrowser;var relative$1=(t,e={},n={},a)=>{let o=e.protocol?e.protocol.replace(":",""):"http";o=(n[o]||a||o)+":";let c;try{c=new URLWithLegacySupport$1(t)}catch{c={}}const u=Object.assign({},e,{protocol:o||c.protocol,host:e.host||c.host});return new URLWithLegacySupport$1(t,format$4(u)).toString()};const{URLWithLegacySupport,format:format$3,URLSearchParams,defaultBase}=urlBrowser,relative=relative$1;var isoUrl={URL:URLWithLegacySupport,URLSearchParams,format:format$3,relative,defaultBase};let nanoid$1=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const pathSepS="/",pathSepB=new TextEncoder().encode(pathSepS),pathSep=pathSepB[0];class Key{constructor(e,n){if(typeof e=="string")this._buf=fromString$2(e);else if(e instanceof Uint8Array)this._buf=e;else throw new Error("Invalid key, should be String of Uint8Array");if(n==null&&(n=!0),n&&this.clean(),this._buf.byteLength===0||this._buf[0]!==pathSep)throw new Error("Invalid key")}toString(e="utf8"){return toString$4(this._buf,e)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(e){return new Key(e.join(pathSepS))}static random(){return new Key(nanoid$1().replace(/-/g,""))}static asKey(e){return e instanceof Uint8Array||typeof e=="string"?new Key(e):typeof e.uint8Array=="function"?new Key(e.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=pathSepB),this._buf[0]!==pathSep){const e=new Uint8Array(this._buf.byteLength+1);e.fill(pathSep,0,1),e.set(this._buf,1),this._buf=e}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===pathSep;)this._buf=this._buf.subarray(0,-1)}less(e){const n=this.list(),a=e.list();for(let o=0;o<n.length;o++){if(a.length<o+1)return!1;const c=n[o],u=a[o];if(c<u)return!0;if(c>u)return!1}return n.length<a.length}reverse(){return Key.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(pathSepS).slice(1)}type(){return namespaceType(this.baseNamespace())}name(){return namespaceValue(this.baseNamespace())}instance(e){return new Key(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(pathSepS)||(e+=pathSepS),e+=this.type(),new Key(e)}parent(){const e=this.list();return e.length===1?new Key(pathSepS):new Key(e.slice(0,-1).join(pathSepS))}child(e){return this.toString()===pathSepS?e:e.toString()===pathSepS?this:new Key(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()===this.toString()?!1:e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()===this.toString()?!1:this.toString().startsWith(e.toString())}isTopLevel(){return this.list().length===1}concat(...e){return Key.withNamespaces([...this.namespaces(),...flatten(e.map(n=>n.namespaces()))])}}function namespaceType(t){const e=t.split(":");return e.length<2?"":e.slice(0,-1).join(":")}function namespaceValue(t){const e=t.split(":");return e[e.length-1]}function flatten(t){return[].concat(...t)}var anySignal$3={exports:{}};function anySignal$1(t){const e=new globalThis.AbortController;function n(){e.abort();for(const a of t)!a||!a.removeEventListener||a.removeEventListener("abort",n)}for(const a of t)if(!(!a||!a.addEventListener)){if(a.aborted){n();break}a.addEventListener("abort",n)}return e.signal}anySignal$3.exports=anySignal$1;var anySignal_2=anySignal$3.exports.anySignal=anySignal$1,anySignalExports=anySignal$3.exports;const anySignal$2=getDefaultExportFromCjs(anySignalExports);let durationRE=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;parse$6.nanosecond=parse$6.ns=1/1e6;parse$6.µs=parse$6.μs=parse$6.us=parse$6.microsecond=1/1e3;parse$6.millisecond=parse$6.ms=parse$6[""]=1;parse$6.second=parse$6.sec=parse$6.s=parse$6.ms*1e3;parse$6.minute=parse$6.min=parse$6.m=parse$6.s*60;parse$6.hour=parse$6.hr=parse$6.h=parse$6.m*60;parse$6.day=parse$6.d=parse$6.h*24;parse$6.week=parse$6.wk=parse$6.w=parse$6.d*7;parse$6.month=parse$6.b=parse$6.d*(365.25/12);parse$6.year=parse$6.yr=parse$6.y=parse$6.d*365.25;function parse$6(t="",e="ms"){var n=null;return t=(t+"").replace(/(\d)[,_](\d)/g,"$1$2"),t.replace(durationRE,function(a,o,c){c=unitRatio(c),c&&(n=(n||0)+parseFloat(o,10)*c)}),n&&n/(unitRatio(e)||1)}function unitRatio(t){return parse$6[t]||parse$6[t.toLowerCase().replace(/s$/,"")]}var hashlru=function(t){if(!t)throw Error("hashlru must have a max value, of type number, greater than 0");var e=0,n=Object.create(null),a=Object.create(null);function o(c,u){n[c]=u,e++,e>=t&&(e=0,a=n,n=Object.create(null))}return{has:function(c){return n[c]!==void 0||a[c]!==void 0},remove:function(c){n[c]!==void 0&&(n[c]=void 0),a[c]!==void 0&&(a[c]=void 0)},get:function(c){var u=n[c];if(u!==void 0)return u;if((u=a[c])!==void 0)return o(c,u),u},set:function(c,u){n[c]!==void 0?n[c]=u:o(c,u)},clear:function(){n=Object.create(null),a=Object.create(null)}}};const cache$2=getDefaultExportFromCjs(hashlru);var eventemitter3={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function o(p,b,v){this.fn=p,this.context=b,this.once=v||!1}function c(p,b,v,x,_){if(typeof v!="function")throw new TypeError("The listener must be a function");var E=new o(v,x||p,_),$=n?n+b:b;return p._events[$]?p._events[$].fn?p._events[$]=[p._events[$],E]:p._events[$].push(E):(p._events[$]=E,p._eventsCount++),p}function u(p,b){--p._eventsCount===0?p._events=new a:delete p._events[b]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var b=[],v,x;if(this._eventsCount===0)return b;for(x in v=this._events)e.call(v,x)&&b.push(n?x.slice(1):x);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(v)):b},l.prototype.listeners=function(b){var v=n?n+b:b,x=this._events[v];if(!x)return[];if(x.fn)return[x.fn];for(var _=0,E=x.length,$=new Array(E);_<E;_++)$[_]=x[_].fn;return $},l.prototype.listenerCount=function(b){var v=n?n+b:b,x=this._events[v];return x?x.fn?1:x.length:0},l.prototype.emit=function(b,v,x,_,E,$){var S=n?n+b:b;if(!this._events[S])return!1;var A=this._events[S],I=arguments.length,O,F;if(A.fn){switch(A.once&&this.removeListener(b,A.fn,void 0,!0),I){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,v),!0;case 3:return A.fn.call(A.context,v,x),!0;case 4:return A.fn.call(A.context,v,x,_),!0;case 5:return A.fn.call(A.context,v,x,_,E),!0;case 6:return A.fn.call(A.context,v,x,_,E,$),!0}for(F=1,O=new Array(I-1);F<I;F++)O[F-1]=arguments[F];A.fn.apply(A.context,O)}else{var U=A.length,G;for(F=0;F<U;F++)switch(A[F].once&&this.removeListener(b,A[F].fn,void 0,!0),I){case 1:A[F].fn.call(A[F].context);break;case 2:A[F].fn.call(A[F].context,v);break;case 3:A[F].fn.call(A[F].context,v,x);break;case 4:A[F].fn.call(A[F].context,v,x,_);break;default:if(!O)for(G=1,O=new Array(I-1);G<I;G++)O[G-1]=arguments[G];A[F].fn.apply(A[F].context,O)}}return!0},l.prototype.on=function(b,v,x){return c(this,b,v,x,!1)},l.prototype.once=function(b,v,x){return c(this,b,v,x,!0)},l.prototype.removeListener=function(b,v,x,_){var E=n?n+b:b;if(!this._events[E])return this;if(!v)return u(this,E),this;var $=this._events[E];if($.fn)$.fn===v&&(!_||$.once)&&(!x||$.context===x)&&u(this,E);else{for(var S=0,A=[],I=$.length;S<I;S++)($[S].fn!==v||_&&!$[S].once||x&&$[S].context!==x)&&A.push($[S]);A.length?this._events[E]=A.length===1?A[0]:A:u(this,E)}return this},l.prototype.removeAllListeners=function(b){var v;return b?(v=n?n+b:b,this._events[v]&&u(this,v)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter$5=getDefaultExportFromCjs(eventemitter3Exports);let TimeoutError$1=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},AbortError$5=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const getDOMException$2=t=>globalThis.DOMException===void 0?new AbortError$5(t):new DOMException(t),getAbortedReason$2=t=>{const e=t.reason===void 0?getDOMException$2("This operation was aborted."):t.reason;return e instanceof Error?e:getDOMException$2(e)};function pTimeout$1(t,e,n,a){let o;const c=new Promise((u,l)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){u(t);return}if(a={customTimers:{setTimeout,clearTimeout},...a},a.signal){const{signal:p}=a;p.aborted&&l(getAbortedReason$2(p)),p.addEventListener("abort",()=>{l(getAbortedReason$2(p))})}o=a.customTimers.setTimeout.call(void 0,()=>{if(typeof n=="function"){try{u(n())}catch(v){l(v)}return}const p=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,b=n instanceof Error?n:new TimeoutError$1(p);typeof t.cancel=="function"&&t.cancel(),l(b)},e),(async()=>{try{u(await t)}catch(p){l(p)}finally{a.customTimers.clearTimeout.call(void 0,o)}})()});return c.clear=()=>{clearTimeout(o),o=void 0},c}function lowerBound(t,e,n){let a=0,o=t.length;for(;o>0;){const c=Math.trunc(o/2);let u=a+c;n(t[u],e)<=0?(a=++u,o-=c+1):o=c}return a}var __classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(t):a?a.value:e.get(t)},_PriorityQueue_queue;class PriorityQueue{constructor(){_PriorityQueue_queue.set(this,[])}enqueue(e,n){n={priority:0,...n};const a={priority:n.priority,run:e};if(this.size&&__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f")[this.size-1].priority>=n.priority){__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").push(a);return}const o=lowerBound(__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f"),a,(c,u)=>u.priority-c.priority);__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").splice(o,0,a)}dequeue(){const e=__classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").shift();return e?.run}filter(e){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return __classPrivateFieldGet$1(this,_PriorityQueue_queue,"f").length}}_PriorityQueue_queue=new WeakMap;var __classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},__classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(t):a?a.value:e.get(t)},_PQueue_instances,_PQueue_carryoverConcurrencyCount,_PQueue_isIntervalIgnored,_PQueue_intervalCount,_PQueue_intervalCap,_PQueue_interval,_PQueue_intervalEnd,_PQueue_intervalId,_PQueue_timeoutId,_PQueue_queue,_PQueue_queueClass,_PQueue_pending,_PQueue_concurrency,_PQueue_isPaused,_PQueue_throwOnTimeout,_PQueue_doesIntervalAllowAnother_get,_PQueue_doesConcurrentAllowAnother_get,_PQueue_next,_PQueue_onResumeInterval,_PQueue_isIntervalPaused_get,_PQueue_tryToStartAnother,_PQueue_initializeIntervalIfNeeded,_PQueue_onInterval,_PQueue_processQueue,_PQueue_throwOnAbort,_PQueue_onEvent;let AbortError$4=class extends Error{};class PQueue extends EventEmitter$5{constructor(e){var n,a,o,c;if(super(),_PQueue_instances.add(this),_PQueue_carryoverConcurrencyCount.set(this,void 0),_PQueue_isIntervalIgnored.set(this,void 0),_PQueue_intervalCount.set(this,0),_PQueue_intervalCap.set(this,void 0),_PQueue_interval.set(this,void 0),_PQueue_intervalEnd.set(this,0),_PQueue_intervalId.set(this,void 0),_PQueue_timeoutId.set(this,void 0),_PQueue_queue.set(this,void 0),_PQueue_queueClass.set(this,void 0),_PQueue_pending.set(this,0),_PQueue_concurrency.set(this,void 0),_PQueue_isPaused.set(this,void 0),_PQueue_throwOnTimeout.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(a=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(c=(o=e.interval)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""}\` (${typeof e.interval})`);__classPrivateFieldSet(this,_PQueue_carryoverConcurrencyCount,e.carryoverConcurrencyCount,"f"),__classPrivateFieldSet(this,_PQueue_isIntervalIgnored,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),__classPrivateFieldSet(this,_PQueue_intervalCap,e.intervalCap,"f"),__classPrivateFieldSet(this,_PQueue_interval,e.interval,"f"),__classPrivateFieldSet(this,_PQueue_queue,new e.queueClass,"f"),__classPrivateFieldSet(this,_PQueue_queueClass,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,__classPrivateFieldSet(this,_PQueue_throwOnTimeout,e.throwOnTimeout===!0,"f"),__classPrivateFieldSet(this,_PQueue_isPaused,e.autoStart===!1,"f")}get concurrency(){return __classPrivateFieldGet(this,_PQueue_concurrency,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);__classPrivateFieldSet(this,_PQueue_concurrency,e,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)}async add(e,n={}){return n={timeout:this.timeout,throwOnTimeout:__classPrivateFieldGet(this,_PQueue_throwOnTimeout,"f"),...n},new Promise((a,o)=>{__classPrivateFieldGet(this,_PQueue_queue,"f").enqueue(async()=>{var c,u,l;__classPrivateFieldSet(this,_PQueue_pending,(u=__classPrivateFieldGet(this,_PQueue_pending,"f"),u++,u),"f"),__classPrivateFieldSet(this,_PQueue_intervalCount,(l=__classPrivateFieldGet(this,_PQueue_intervalCount,"f"),l++,l),"f");try{if(!((c=n.signal)===null||c===void 0)&&c.aborted)throw new AbortError$4("The task was aborted.");let p=e({signal:n.signal});n.timeout&&(p=pTimeout$1(Promise.resolve(p),n.timeout)),n.signal&&(p=Promise.race([p,__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_throwOnAbort).call(this,n.signal)]));const b=await p;a(b),this.emit("completed",b)}catch(p){if(p instanceof TimeoutError$1&&!n.throwOnTimeout){a();return}o(p),this.emit("error",p)}finally{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_next).call(this)}},n),this.emit("add"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this)})}async addAll(e,n){return Promise.all(e.map(async a=>this.add(a,n)))}start(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")?(__classPrivateFieldSet(this,_PQueue_isPaused,!1,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this),this):this}pause(){__classPrivateFieldSet(this,_PQueue_isPaused,!0,"f")}clear(){__classPrivateFieldSet(this,_PQueue_queue,new(__classPrivateFieldGet(this,_PQueue_queueClass,"f")),"f")}async onEmpty(){__classPrivateFieldGet(this,_PQueue_queue,"f").size!==0&&await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"empty")}async onSizeLessThan(e){__classPrivateFieldGet(this,_PQueue_queue,"f").size<e||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"next",()=>__classPrivateFieldGet(this,_PQueue_queue,"f").size<e)}async onIdle(){__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&__classPrivateFieldGet(this,_PQueue_queue,"f").size===0||await __classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"idle")}get size(){return __classPrivateFieldGet(this,_PQueue_queue,"f").size}sizeBy(e){return __classPrivateFieldGet(this,_PQueue_queue,"f").filter(e).length}get pending(){return __classPrivateFieldGet(this,_PQueue_pending,"f")}get isPaused(){return __classPrivateFieldGet(this,_PQueue_isPaused,"f")}}_PQueue_carryoverConcurrencyCount=new WeakMap,_PQueue_isIntervalIgnored=new WeakMap,_PQueue_intervalCount=new WeakMap,_PQueue_intervalCap=new WeakMap,_PQueue_interval=new WeakMap,_PQueue_intervalEnd=new WeakMap,_PQueue_intervalId=new WeakMap,_PQueue_timeoutId=new WeakMap,_PQueue_queue=new WeakMap,_PQueue_queueClass=new WeakMap,_PQueue_pending=new WeakMap,_PQueue_concurrency=new WeakMap,_PQueue_isPaused=new WeakMap,_PQueue_throwOnTimeout=new WeakMap,_PQueue_instances=new WeakSet,_PQueue_doesIntervalAllowAnother_get=function t(){return __classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalCount,"f")<__classPrivateFieldGet(this,_PQueue_intervalCap,"f")},_PQueue_doesConcurrentAllowAnother_get=function t(){return __classPrivateFieldGet(this,_PQueue_pending,"f")<__classPrivateFieldGet(this,_PQueue_concurrency,"f")},_PQueue_next=function t(){var e;__classPrivateFieldSet(this,_PQueue_pending,(e=__classPrivateFieldGet(this,_PQueue_pending,"f"),e--,e),"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("next")},_PQueue_onResumeInterval=function t(){__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),__classPrivateFieldSet(this,_PQueue_timeoutId,void 0,"f")},_PQueue_isIntervalPaused_get=function t(){const e=Date.now();if(__classPrivateFieldGet(this,_PQueue_intervalId,"f")===void 0){const n=__classPrivateFieldGet(this,_PQueue_intervalEnd,"f")-e;if(n<0)__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pending,"f"):0,"f");else return __classPrivateFieldGet(this,_PQueue_timeoutId,"f")===void 0&&__classPrivateFieldSet(this,_PQueue_timeoutId,setTimeout(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onResumeInterval).call(this)},n),"f"),!0}return!1},_PQueue_tryToStartAnother=function t(){if(__classPrivateFieldGet(this,_PQueue_queue,"f").size===0)return __classPrivateFieldGet(this,_PQueue_intervalId,"f")&&clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f"),this.emit("empty"),__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&this.emit("idle"),!1;if(!__classPrivateFieldGet(this,_PQueue_isPaused,"f")){const e=!__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_isIntervalPaused_get);if(__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesIntervalAllowAnother_get)&&__classPrivateFieldGet(this,_PQueue_instances,"a",_PQueue_doesConcurrentAllowAnother_get)){const n=__classPrivateFieldGet(this,_PQueue_queue,"f").dequeue();return n?(this.emit("active"),n(),e&&__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),!0):!1}}return!1},_PQueue_initializeIntervalIfNeeded=function t(){__classPrivateFieldGet(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet(this,_PQueue_intervalId,"f")!==void 0||(__classPrivateFieldSet(this,_PQueue_intervalId,setInterval(()=>{__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_onInterval).call(this)},__classPrivateFieldGet(this,_PQueue_interval,"f")),"f"),__classPrivateFieldSet(this,_PQueue_intervalEnd,Date.now()+__classPrivateFieldGet(this,_PQueue_interval,"f"),"f"))},_PQueue_onInterval=function t(){__classPrivateFieldGet(this,_PQueue_intervalCount,"f")===0&&__classPrivateFieldGet(this,_PQueue_pending,"f")===0&&__classPrivateFieldGet(this,_PQueue_intervalId,"f")&&(clearInterval(__classPrivateFieldGet(this,_PQueue_intervalId,"f")),__classPrivateFieldSet(this,_PQueue_intervalId,void 0,"f")),__classPrivateFieldSet(this,_PQueue_intervalCount,__classPrivateFieldGet(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet(this,_PQueue_pending,"f"):0,"f"),__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)},_PQueue_processQueue=function t(){for(;__classPrivateFieldGet(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this););},_PQueue_throwOnAbort=async function t(e){return new Promise((n,a)=>{e.addEventListener("abort",()=>{a(new AbortError$4("The task was aborted."))},{once:!0})})},_PQueue_onEvent=async function t(e,n){return new Promise(a=>{const o=()=>{n&&!n()||(this.off(e,o),a())};this.on(e,o)})};var src$5={exports:{}},browser$g={exports:{}},hasRequiredBrowser$c;function requireBrowser$c(){return hasRequiredBrowser$c||(hasRequiredBrowser$c=1,function(t,e){var n=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal<"u")return commonjsGlobal;throw new Error("unable to locate global object")},a=n();t.exports=e=a.fetch,a.fetch&&(e.default=a.fetch.bind(a)),e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response}(browser$g,browser$g.exports)),browser$g.exports}globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?src$5.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:src$5.exports={default:requireBrowser$c().default,Headers:requireBrowser$c().Headers,Request:requireBrowser$c().Request,Response:requireBrowser$c().Response};var srcExports=src$5.exports;async function*browserReadableStreamToIt$1(t,e={}){const n=t.getReader();try{for(;;){const a=await n.read();if(a.done)return;yield a.value}}finally{e.preventCancel!==!0&&n.cancel(),n.releaseLock()}}var browserReadablestreamToIt=browserReadableStreamToIt$1;const all$2=async t=>{const e=[];for await(const n of t)e.push(n);return e};var itAll=all$2;async function last(t){let e;for await(const n of t)e=n;return e}function dbOpenFailedError(t){return t=t||new Error("Cannot open database"),errCode$1(t,"ERR_DB_OPEN_FAILED")}function dbDeleteFailedError(t){return t=t||new Error("Delete failed"),errCode$1(t,"ERR_DB_DELETE_FAILED")}function dbWriteFailedError(t){return t=t||new Error("Write failed"),errCode$1(t,"ERR_DB_WRITE_FAILED")}function notFoundError(t){return t=t||new Error("Not Found"),errCode$1(t,"ERR_NOT_FOUND")}var timestamp_min={exports:{}};(function(t){(function(){t.exports=A;var e=86400,n=3200,a=146097*n/400,o=e*a,c=1e3*o,u=864e13,l=4294967296,p=1e6,b="000000000",v=Math.trunc||function(ee){var de=ee-ee%1;return de==0&&(ee<0||ee===0&&1/ee!=1/0)?-0:de},x=A.prototype,_=(A.fromDate=function(ee){return new A(+ee)},A.fromInt64BE=G(0,1,2,3,0,4),A.fromInt64LE=G(3,2,1,0,4,0),A.fromString=function(L){var de,ae=new A,L=(L+="").replace(/^\s*[+\-]?\d+/,function(T){var T=+T,C=1970+(T-1970)%400;return ae.year=T-C,C}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(P,T,C){return T<0&&(C*=-1),de=6e4*(60*+T+ +C),""}).replace(/\.\d+$/,function(P){return ae.nano=+(P+b).substr(1,9),""}).split(/\D+/);if(1<L.length?L[1]--:L[1]=0,ae.time=de=Date.UTC.apply(Date,L)-(de||0),isNaN(de))throw new TypeError("Invalid Date");return I(ae)},A.fromTimeT=function(ee){return F(ee,0)},x.year=0,x.time=0,x.nano=0,x.addNano=function(ee){return this.nano+=+ee||0,this},x.getNano=function(){var ee=I(this);return(ee.time%1e3*p+ +ee.nano+1e9)%1e9},x.getTimeT=function(){var de=I(this),ee=Math.floor(de.time/1e3),de=de.year;return de&&(ee+=de*a*e/n),ee},x.getYear=function(){return this.toDate().getUTCFullYear()+this.year},x.toDate=function(){return O(I(this).time)},x.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},x.toString=function(ee){var de=this,ae=de.toDate(),L={H:function(){return k(ae.getUTCHours())},L:function(){return ne(ae.getUTCMilliseconds(),3)},M:function(){return k(ae.getUTCMinutes())},N:function(){return ne(de.getNano(),9)},S:function(){return k(ae.getUTCSeconds())},Y:function(){var P=de.getYear();return 999999<P?"+"+P:9999<P?"+"+ne(P,6):0<=P?ne(P,4):-999999<=P?"-"+ne(-P,6):P},a:function(){return $[ae.getUTCDay()]},b:function(){return E[ae.getUTCMonth()]},d:function(){return k(ae.getUTCDate())},e:function(){return function(P){return(9<P?"":" ")+(0|P)}(ae.getUTCDate())},m:function(){return k(ae.getUTCMonth()+1)}};return function P(T){return T.replace(/%./g,function(C){var z=C[1],q=S[z],z=L[z];return q?P(q):z?z():C})}(ee||_)},x.writeInt64BE=U(0,1,2,3,0,4),x.writeInt64LE=U(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],$=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],S={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return A;function A(ee,de,ae){var L=this;if(!(L instanceof A))return new A(ee,de,ae);L.time=+ee||0,L.nano=+de||0,L.year=+ae||0,I(L)}function I(ee){var de,ae,L,P=ee.year,T=ee.time,C=ee.nano,q=((C<0||p<=C)&&(C-=(ae=Math.floor(C/p))*p,T+=ae,ae=1),P%n);return(T<-u||u<T||q)&&((de=v(T/c))&&(P+=de*n,T-=de*c),(L=O(T)).setUTCFullYear(q+L.getUTCFullYear()),L=(T=+L)+(de=v((P-=q)/n))*c,de&&-u<=L&&L<=u&&(P-=de*n,T=L),ae=1),ae&&(ee.year=P,ee.time=T,ee.nano=C),ee}function O(ee){var de=new Date(0);return de.setTime(ee),de}function F(P,L){P=+P||0;var ae=v((L=(L|0)*l)/o)+v(P/o),L=L%o+P%o,P=v(L/o);return P&&(ae+=P,L-=P*o),new A(1e3*L,0,ae*n)}function U(ee,de,ae,L,P,T){return function(q,z){var W=I(this);q=q||new Array(8),J(q,z|=0);var M=Math.floor(W.time/1e3),W=W.year*(a*e/n),X=v(W/l)+v(M/l),W=W%l+M%l,M=Math.floor(W/l);return M&&(X+=M,W-=M*l),C(q,z+P,X),C(q,z+T,W),q};function C(q,z,X){q[z+ee]=X>>24&255,q[z+de]=X>>16&255,q[z+ae]=X>>8&255,q[z+L]=255&X}}function G(ee,de,ae,L,P,T){return function(q,z){J(q,z|=0);var X=C(q,z+P);return F(C(q,z+T),X)};function C(q,z){return 16777216*q[z+ee]+(q[z+de]<<16|q[z+ae]<<8|q[z+L])}}function J(ee,de){if(ee=ee&&ee.length,ee==null)throw new TypeError("Invalid Buffer");if(ee<de+8)throw new RangeError("Out of range")}function k(ee){return(9<ee?"":"0")+(0|ee)}function ne(ee,de){return(b+(0|ee)).substr(-de)}})()})(timestamp_min);var timestamp_minExports=timestamp_min.exports;const NanoDate=getDefaultExportFromCjs(timestamp_minExports);var forge$s={options:{usePureJavaScript:!1}};const forge$t=getDefaultExportFromCjs(forge$s);var util$5={exports:{}},api$1={},baseN$1=api$1,_reverseAlphabets={};api$1.encode=function(t,e,n){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var a="";if(!(t instanceof Uint8Array))a=_encodeWithByteBuffer(t,e);else{var o=0,c=e.length,u=e.charAt(0),l=[0];for(o=0;o<t.length;++o){for(var p=0,b=t[o];p<l.length;++p)b+=l[p]<<8,l[p]=b%c,b=b/c|0;for(;b>0;)l.push(b%c),b=b/c|0}for(o=0;t[o]===0&&o<t.length-1;++o)a+=u;for(o=l.length-1;o>=0;--o)a+=e[l[o]]}if(n){var v=new RegExp(".{1,"+n+"}","g");a=a.match(v).join(`\r
`)}return a};api$1.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var n=_reverseAlphabets[e];if(!n){n=_reverseAlphabets[e]=[];for(var a=0;a<e.length;++a)n[e.charCodeAt(a)]=a}t=t.replace(/\s/g,"");for(var o=e.length,c=e.charAt(0),u=[0],a=0;a<t.length;a++){var l=n[t.charCodeAt(a)];if(l===void 0)return;for(var p=0,b=l;p<u.length;++p)b+=u[p]*o,u[p]=b&255,b>>=8;for(;b>0;)u.push(b&255),b>>=8}for(var v=0;t[v]===c&&v<t.length-1;++v)u.push(0);return typeof buffer$2.Buffer<"u"?buffer$2.Buffer.from(u.reverse()):new Uint8Array(u.reverse())};function _encodeWithByteBuffer(t,e){var n=0,a=e.length,o=e.charAt(0),c=[0];for(n=0;n<t.length();++n){for(var u=0,l=t.at(n);u<c.length;++u)l+=c[u]<<8,c[u]=l%a,l=l/a|0;for(;l>0;)c.push(l%a),l=l/a|0}var p="";for(n=0;t.at(n)===0&&n<t.length()-1;++n)p+=o;for(n=c.length-1;n>=0;--n)p+=e[c[n]];return p}var forge$r=forge$s,baseN=baseN$1,util$4=util$5.exports=forge$r.util=forge$r.util||{};(function(){if(typeof process$1<"u"&&process$1.nextTick&&!process$1.browser){util$4.nextTick=process$1.nextTick,typeof setImmediate=="function"?util$4.setImmediate=setImmediate:util$4.setImmediate=util$4.nextTick;return}if(typeof setImmediate=="function"){util$4.setImmediate=function(){return setImmediate.apply(void 0,arguments)},util$4.nextTick=function(u){return setImmediate(u)};return}if(util$4.setImmediate=function(u){setTimeout(u,0)},typeof window<"u"&&typeof window.postMessage=="function"){let u=function(l){if(l.source===window&&l.data===t){l.stopPropagation();var p=e.slice();e.length=0,p.forEach(function(b){b()})}};var t="forge.setImmediate",e=[];util$4.setImmediate=function(l){e.push(l),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",u,!0)}if(typeof MutationObserver<"u"){var n=Date.now(),a=!0,o=document.createElement("div"),e=[];new MutationObserver(function(){var l=e.slice();e.length=0,l.forEach(function(p){p()})}).observe(o,{attributes:!0});var c=util$4.setImmediate;util$4.setImmediate=function(l){Date.now()-n>15?(n=Date.now(),c(l)):(e.push(l),e.length===1&&o.setAttribute("a",a=!a))}}util$4.nextTick=util$4.setImmediate})();util$4.isNodejs=typeof process$1<"u"&&process$1.versions&&process$1.versions.node;util$4.globalScope=function(){return util$4.isNodejs?commonjsGlobal:typeof self>"u"?window:self}();util$4.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};util$4.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};util$4.isArrayBufferView=function(t){return t&&util$4.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function _checkBitsParam(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}util$4.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(util$4.isArrayBuffer(t)||util$4.isArrayBufferView(t))if(typeof buffer$2.Buffer<"u"&&t instanceof buffer$2.Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var n=0;n<e.length;++n)this.putByte(e[n])}}else(t instanceof ByteStringBuffer||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}util$4.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util$4.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)};util$4.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};util$4.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};util$4.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};util$4.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var n=this.data;e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return this.data=n,this._optimizeConstructedString(e),this};util$4.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};util$4.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(util$4.encodeUtf8(t))};util$4.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$4.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$4.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$4.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};util$4.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};util$4.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};util$4.ByteStringBuffer.prototype.putInt=function(t,e){_checkBitsParam(e);var n="";do e-=8,n+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(n)};util$4.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};util$4.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};util$4.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};util$4.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};util$4.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};util$4.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};util$4.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};util$4.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};util$4.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};util$4.ByteStringBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};util$4.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};util$4.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};util$4.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};util$4.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};util$4.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};util$4.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util$4.ByteStringBuffer.prototype.copy=function(){var t=util$4.createBuffer(this.data);return t.read=this.read,t};util$4.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};util$4.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};util$4.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};util$4.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t};util$4.ByteStringBuffer.prototype.toString=function(){return util$4.decodeUtf8(this.bytes())};function DataBuffer(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var n=util$4.isArrayBuffer(t),a=util$4.isArrayBufferView(t);if(n||a){n?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}util$4.DataBuffer=DataBuffer;util$4.DataBuffer.prototype.length=function(){return this.write-this.read};util$4.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};util$4.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),a=new Uint8Array(this.length()+e);return a.set(n),this.data=new DataView(a.buffer),this};util$4.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};util$4.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var n=0;n<e;++n)this.data.setUint8(t);return this};util$4.DataBuffer.prototype.putBytes=function(t,e){if(util$4.isArrayBufferView(t)){var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=n.byteLength-n.byteOffset;this.accommodate(a);var o=new Uint8Array(this.data.buffer,this.write);return o.set(n),this.write+=a,this}if(util$4.isArrayBuffer(t)){var n=new Uint8Array(t);this.accommodate(n.byteLength);var o=new Uint8Array(this.data.buffer);return o.set(n,this.write),this.write+=n.byteLength,this}if(t instanceof util$4.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&util$4.isArrayBufferView(t.data)){var n=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(n.byteLength);var o=new Uint8Array(t.data.byteLength,this.write);return o.set(n),this.write+=n.byteLength,this}if(t instanceof util$4.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var c;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),c=new Uint8Array(this.data.buffer,this.write),this.write+=util$4.binary.hex.decode(t,c,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),c=new Uint8Array(this.data.buffer,this.write),this.write+=util$4.binary.base64.decode(t,c,this.write),this;if(e==="utf8"&&(t=util$4.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),c=new Uint8Array(this.data.buffer,this.write),this.write+=util$4.binary.raw.decode(c),this;if(e==="utf16")return this.accommodate(t.length*2),c=new Uint16Array(this.data.buffer,this.write),this.write+=util$4.text.utf16.encode(c),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};util$4.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};util$4.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};util$4.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};util$4.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};util$4.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};util$4.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};util$4.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};util$4.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};util$4.DataBuffer.prototype.putInt=function(t,e){_checkBitsParam(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};util$4.DataBuffer.prototype.putSignedInt=function(t,e){return _checkBitsParam(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};util$4.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};util$4.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};util$4.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};util$4.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};util$4.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};util$4.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};util$4.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};util$4.DataBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};util$4.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};util$4.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};util$4.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};util$4.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};util$4.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};util$4.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};util$4.DataBuffer.prototype.copy=function(){return new util$4.DataBuffer(this)};util$4.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};util$4.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};util$4.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};util$4.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var n=this.data.getUint8(e);n<16&&(t+="0"),t+=n.toString(16)}return t};util$4.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return util$4.binary.raw.encode(e);if(t==="hex")return util$4.binary.hex.encode(e);if(t==="base64")return util$4.binary.base64.encode(e);if(t==="utf8")return util$4.text.utf8.decode(e);if(t==="utf16")return util$4.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};util$4.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=util$4.encodeUtf8(t)),new util$4.ByteBuffer(t)};util$4.fillString=function(t,e){for(var n="";e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return n};util$4.xorBytes=function(t,e,n){for(var a="",o="",c="",u=0,l=0;n>0;--n,++u)o=t.charCodeAt(u)^e.charCodeAt(u),l>=10&&(a+=c,c="",l=0),c+=String.fromCharCode(o),++l;return a+=c,a};util$4.hexToBytes=function(t){var e="",n=0;for(t.length&!0&&(n=1,e+=String.fromCharCode(parseInt(t[0],16)));n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e};util$4.bytesToHex=function(t){return util$4.createBuffer(t).toHex()};util$4.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util$4.encode64=function(t,e){for(var n="",a="",o,c,u,l=0;l<t.length;)o=t.charCodeAt(l++),c=t.charCodeAt(l++),u=t.charCodeAt(l++),n+=_base64.charAt(o>>2),n+=_base64.charAt((o&3)<<4|c>>4),isNaN(c)?n+="==":(n+=_base64.charAt((c&15)<<2|u>>6),n+=isNaN(u)?"=":_base64.charAt(u&63)),e&&n.length>e&&(a+=n.substr(0,e)+`\r
`,n=n.substr(e));return a+=n,a};util$4.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",n,a,o,c,u=0;u<t.length;)n=_base64Idx[t.charCodeAt(u++)-43],a=_base64Idx[t.charCodeAt(u++)-43],o=_base64Idx[t.charCodeAt(u++)-43],c=_base64Idx[t.charCodeAt(u++)-43],e+=String.fromCharCode(n<<2|a>>4),o!==64&&(e+=String.fromCharCode((a&15)<<4|o>>2),c!==64&&(e+=String.fromCharCode((o&3)<<6|c)));return e};util$4.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};util$4.decodeUtf8=function(t){return decodeURIComponent(escape(t))};util$4.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util$4.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};util$4.binary.raw.decode=function(t,e,n){var a=e;a||(a=new Uint8Array(t.length)),n=n||0;for(var o=n,c=0;c<t.length;++c)a[o++]=t.charCodeAt(c);return e?o-n:a};util$4.binary.hex.encode=util$4.bytesToHex;util$4.binary.hex.decode=function(t,e,n){var a=e;a||(a=new Uint8Array(Math.ceil(t.length/2))),n=n||0;var o=0,c=n;for(t.length&1&&(o=1,a[c++]=parseInt(t[0],16));o<t.length;o+=2)a[c++]=parseInt(t.substr(o,2),16);return e?c-n:a};util$4.binary.base64.encode=function(t,e){for(var n="",a="",o,c,u,l=0;l<t.byteLength;)o=t[l++],c=t[l++],u=t[l++],n+=_base64.charAt(o>>2),n+=_base64.charAt((o&3)<<4|c>>4),isNaN(c)?n+="==":(n+=_base64.charAt((c&15)<<2|u>>6),n+=isNaN(u)?"=":_base64.charAt(u&63)),e&&n.length>e&&(a+=n.substr(0,e)+`\r
`,n=n.substr(e));return a+=n,a};util$4.binary.base64.decode=function(t,e,n){var a=e;a||(a=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var o,c,u,l,p=0,b=n;p<t.length;)o=_base64Idx[t.charCodeAt(p++)-43],c=_base64Idx[t.charCodeAt(p++)-43],u=_base64Idx[t.charCodeAt(p++)-43],l=_base64Idx[t.charCodeAt(p++)-43],a[b++]=o<<2|c>>4,u!==64&&(a[b++]=(c&15)<<4|u>>2,l!==64&&(a[b++]=(u&3)<<6|l));return e?b-n:a.subarray(0,b)};util$4.binary.base58.encode=function(t,e){return util$4.binary.baseN.encode(t,_base58,e)};util$4.binary.base58.decode=function(t,e){return util$4.binary.baseN.decode(t,_base58,e)};util$4.text={utf8:{},utf16:{}};util$4.text.utf8.encode=function(t,e,n){t=util$4.encodeUtf8(t);var a=e;a||(a=new Uint8Array(t.length)),n=n||0;for(var o=n,c=0;c<t.length;++c)a[o++]=t.charCodeAt(c);return e?o-n:a};util$4.text.utf8.decode=function(t){return util$4.decodeUtf8(String.fromCharCode.apply(null,t))};util$4.text.utf16.encode=function(t,e,n){var a=e;a||(a=new Uint8Array(t.length*2));var o=new Uint16Array(a.buffer);n=n||0;for(var c=n,u=n,l=0;l<t.length;++l)o[u++]=t.charCodeAt(l),c+=2;return e?c-n:a};util$4.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};util$4.deflate=function(t,e,n){if(e=util$4.decode64(t.deflate(util$4.encode64(e)).rval),n){var a=2,o=e.charCodeAt(1);o&32&&(a=6),e=e.substring(a,e.length-4)}return e};util$4.inflate=function(t,e,n){var a=t.inflate(util$4.encode64(e)).rval;return a===null?null:util$4.decode64(a)};var _setStorageObject=function(t,e,n){if(!t)throw new Error("WebStorage not available.");var a;if(n===null?a=t.removeItem(e):(n=util$4.encode64(JSON.stringify(n)),a=t.setItem(e,n)),typeof a<"u"&&a.rval!==!0){var o=new Error(a.error.message);throw o.id=a.error.id,o.name=a.error.name,o}},_getStorageObject=function(t,e){if(!t)throw new Error("WebStorage not available.");var n=t.getItem(e);if(t.init)if(n.rval===null){if(n.error){var a=new Error(n.error.message);throw a.id=n.error.id,a.name=n.error.name,a}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(util$4.decode64(n))),n},_setItem=function(t,e,n,a){var o=_getStorageObject(t,e);o===null&&(o={}),o[n]=a,_setStorageObject(t,e,o)},_getItem=function(t,e,n){var a=_getStorageObject(t,e);return a!==null&&(a=n in a?a[n]:null),a},_removeItem=function(t,e,n){var a=_getStorageObject(t,e);if(a!==null&&n in a){delete a[n];var o=!0;for(var c in a){o=!1;break}o&&(a=null),_setStorageObject(t,e,a)}},_clearItems=function(t,e){_setStorageObject(t,e,null)},_callStorageFunction=function(t,e,n){var a=null;typeof n>"u"&&(n=["web","flash"]);var o,c=!1,u=null;for(var l in n){o=n[l];try{if(o==="flash"||o==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");a=t.apply(this,e),c=o==="flash"}(o==="web"||o==="both")&&(e[0]=localStorage,a=t.apply(this,e),c=!0)}catch(p){u=p}if(c)break}if(!c)throw u;return a};util$4.setItem=function(t,e,n,a,o){_callStorageFunction(_setItem,arguments,o)};util$4.getItem=function(t,e,n,a){return _callStorageFunction(_getItem,arguments,a)};util$4.removeItem=function(t,e,n,a){_callStorageFunction(_removeItem,arguments,a)};util$4.clearItems=function(t,e,n){_callStorageFunction(_clearItems,arguments,n)};util$4.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};util$4.format=function(t){for(var e=/%./g,n,a,o=0,c=[],u=0;n=e.exec(t);){a=t.substring(u,e.lastIndex-2),a.length>0&&c.push(a),u=e.lastIndex;var l=n[0][1];switch(l){case"s":case"o":o<arguments.length?c.push(arguments[o+++1]):c.push("<?>");break;case"%":c.push("%");break;default:c.push("<%"+l+"?>")}}return c.push(t.substring(u)),c.join("")};util$4.formatNumber=function(t,e,n,a){var o=t,c=isNaN(e=Math.abs(e))?2:e,u=n===void 0?",":n,l=a===void 0?".":a,p=o<0?"-":"",b=parseInt(o=Math.abs(+o||0).toFixed(c),10)+"",v=b.length>3?b.length%3:0;return p+(v?b.substr(0,v)+l:"")+b.substr(v).replace(/(\d{3})(?=\d)/g,"$1"+l)+(c?u+Math.abs(o-b).toFixed(c).slice(2):"")};util$4.formatSize=function(t){return t>=1073741824?t=util$4.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=util$4.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=util$4.formatNumber(t/1024,0)+" KiB":t=util$4.formatNumber(t,0)+" bytes",t};util$4.bytesFromIP=function(t){return t.indexOf(".")!==-1?util$4.bytesFromIPv4(t):t.indexOf(":")!==-1?util$4.bytesFromIPv6(t):null};util$4.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=util$4.createBuffer(),n=0;n<t.length;++n){var a=parseInt(t[n],10);if(isNaN(a))return null;e.putByte(a)}return e.getBytes()};util$4.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(u){return u.length===0&&++e,!0});for(var n=(8-t.length+e)*2,a=util$4.createBuffer(),o=0;o<8;++o){if(!t[o]||t[o].length===0){a.fillWithByte(0,n),n=0;continue}var c=util$4.hexToBytes(t[o]);c.length<2&&a.putByte(0),a.putBytes(c)}return a.getBytes()};util$4.bytesToIP=function(t){return t.length===4?util$4.bytesToIPv4(t):t.length===16?util$4.bytesToIPv6(t):null};util$4.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e.join(".")};util$4.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],n=[],a=0,o=0;o<t.length;o+=2){for(var c=util$4.bytesToHex(t[o]+t[o+1]);c[0]==="0"&&c!=="0";)c=c.substr(1);if(c==="0"){var u=n[n.length-1],l=e.length;!u||l!==u.end+1?n.push({start:l,end:l}):(u.end=l,u.end-u.start>n[a].end-n[a].start&&(a=n.length-1))}e.push(c)}if(n.length>0){var p=n[a];p.end-p.start>0&&(e.splice(p.start,p.end-p.start+1,""),p.start===0&&e.unshift(""),p.end===7&&e.push(""))}return e.join(":")};util$4.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in util$4&&!t.update)return e(null,util$4.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util$4.cores=navigator.hardwareConcurrency,e(null,util$4.cores);if(typeof Worker>"u")return util$4.cores=1,e(null,util$4.cores);if(typeof Blob>"u")return util$4.cores=2,e(null,util$4.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(u){var l=Date.now(),p=l+4;self.postMessage({st:l,et:p})})}.toString(),")()"],{type:"application/javascript"}));a([],5,16);function a(u,l,p){if(l===0){var b=Math.floor(u.reduce(function(v,x){return v+x},0)/u.length);return util$4.cores=Math.max(1,b),URL.revokeObjectURL(n),e(null,util$4.cores)}o(p,function(v,x){u.push(c(p,x)),a(u,l-1,p)})}function o(u,l){for(var p=[],b=[],v=0;v<u;++v){var x=new Worker(n);x.addEventListener("message",function(_){if(b.push(_.data),b.length===u){for(var E=0;E<u;++E)p[E].terminate();l(null,b)}}),p.push(x)}for(var v=0;v<u;++v)p[v].postMessage(v)}function c(u,l){for(var p=[],b=0;b<u;++b)for(var v=l[b],x=p[b]=[],_=0;_<u;++_)if(b!==_){var E=l[_];(v.st>E.st&&v.st<E.et||E.st>v.st&&E.st<v.et)&&x.push(_)}return p.reduce(function($,S){return Math.max($,S.length)},0)}};var utilExports=util$5.exports;const forgeUtil=getDefaultExportFromCjs(utilExports);var forge$q=forge$s;forge$q.pki=forge$q.pki||{};var oids$2=forge$q.pki.oids=forge$q.oids=forge$q.oids||{};function _IN(t,e){oids$2[t]=e,oids$2[e]=t}function _I_(t,e){oids$2[t]=e}_IN("1.2.840.113549.1.1.1","rsaEncryption");_IN("1.2.840.113549.1.1.4","md5WithRSAEncryption");_IN("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_IN("1.2.840.113549.1.1.7","RSAES-OAEP");_IN("1.2.840.113549.1.1.8","mgf1");_IN("1.2.840.113549.1.1.9","pSpecified");_IN("1.2.840.113549.1.1.10","RSASSA-PSS");_IN("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_IN("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_IN("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_IN("1.3.101.112","EdDSA25519");_IN("1.2.840.10040.4.3","dsa-with-sha1");_IN("1.3.14.3.2.7","desCBC");_IN("1.3.14.3.2.26","sha1");_IN("1.3.14.3.2.29","sha1WithRSASignature");_IN("2.16.840.1.101.3.4.2.1","sha256");_IN("2.16.840.1.101.3.4.2.2","sha384");_IN("2.16.840.1.101.3.4.2.3","sha512");_IN("2.16.840.1.101.3.4.2.4","sha224");_IN("2.16.840.1.101.3.4.2.5","sha512-224");_IN("2.16.840.1.101.3.4.2.6","sha512-256");_IN("1.2.840.113549.2.2","md2");_IN("1.2.840.113549.2.5","md5");_IN("1.2.840.113549.1.7.1","data");_IN("1.2.840.113549.1.7.2","signedData");_IN("1.2.840.113549.1.7.3","envelopedData");_IN("1.2.840.113549.1.7.4","signedAndEnvelopedData");_IN("1.2.840.113549.1.7.5","digestedData");_IN("1.2.840.113549.1.7.6","encryptedData");_IN("1.2.840.113549.1.9.1","emailAddress");_IN("1.2.840.113549.1.9.2","unstructuredName");_IN("1.2.840.113549.1.9.3","contentType");_IN("1.2.840.113549.1.9.4","messageDigest");_IN("1.2.840.113549.1.9.5","signingTime");_IN("1.2.840.113549.1.9.6","counterSignature");_IN("1.2.840.113549.1.9.7","challengePassword");_IN("1.2.840.113549.1.9.8","unstructuredAddress");_IN("1.2.840.113549.1.9.14","extensionRequest");_IN("1.2.840.113549.1.9.20","friendlyName");_IN("1.2.840.113549.1.9.21","localKeyId");_IN("1.2.840.113549.1.9.22.1","x509Certificate");_IN("1.2.840.113549.1.12.10.1.1","keyBag");_IN("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_IN("1.2.840.113549.1.12.10.1.3","certBag");_IN("1.2.840.113549.1.12.10.1.4","crlBag");_IN("1.2.840.113549.1.12.10.1.5","secretBag");_IN("1.2.840.113549.1.12.10.1.6","safeContentsBag");_IN("1.2.840.113549.1.5.13","pkcs5PBES2");_IN("1.2.840.113549.1.5.12","pkcs5PBKDF2");_IN("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_IN("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_IN("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_IN("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_IN("1.2.840.113549.2.7","hmacWithSHA1");_IN("1.2.840.113549.2.8","hmacWithSHA224");_IN("1.2.840.113549.2.9","hmacWithSHA256");_IN("1.2.840.113549.2.10","hmacWithSHA384");_IN("1.2.840.113549.2.11","hmacWithSHA512");_IN("1.2.840.113549.3.7","des-EDE3-CBC");_IN("2.16.840.1.101.3.4.1.2","aes128-CBC");_IN("2.16.840.1.101.3.4.1.22","aes192-CBC");_IN("2.16.840.1.101.3.4.1.42","aes256-CBC");_IN("2.5.4.3","commonName");_IN("2.5.4.4","surname");_IN("2.5.4.5","serialNumber");_IN("2.5.4.6","countryName");_IN("2.5.4.7","localityName");_IN("2.5.4.8","stateOrProvinceName");_IN("2.5.4.9","streetAddress");_IN("2.5.4.10","organizationName");_IN("2.5.4.11","organizationalUnitName");_IN("2.5.4.12","title");_IN("2.5.4.13","description");_IN("2.5.4.15","businessCategory");_IN("2.5.4.17","postalCode");_IN("2.5.4.42","givenName");_IN("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_IN("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_IN("2.16.840.1.113730.1.1","nsCertType");_IN("2.16.840.1.113730.1.13","nsComment");_I_("2.5.29.1","authorityKeyIdentifier");_I_("2.5.29.2","keyAttributes");_I_("2.5.29.3","certificatePolicies");_I_("2.5.29.4","keyUsageRestriction");_I_("2.5.29.5","policyMapping");_I_("2.5.29.6","subtreesConstraint");_I_("2.5.29.7","subjectAltName");_I_("2.5.29.8","issuerAltName");_I_("2.5.29.9","subjectDirectoryAttributes");_I_("2.5.29.10","basicConstraints");_I_("2.5.29.11","nameConstraints");_I_("2.5.29.12","policyConstraints");_I_("2.5.29.13","basicConstraints");_IN("2.5.29.14","subjectKeyIdentifier");_IN("2.5.29.15","keyUsage");_I_("2.5.29.16","privateKeyUsagePeriod");_IN("2.5.29.17","subjectAltName");_IN("2.5.29.18","issuerAltName");_IN("2.5.29.19","basicConstraints");_I_("2.5.29.20","cRLNumber");_I_("2.5.29.21","cRLReason");_I_("2.5.29.22","expirationDate");_I_("2.5.29.23","instructionCode");_I_("2.5.29.24","invalidityDate");_I_("2.5.29.25","cRLDistributionPoints");_I_("2.5.29.26","issuingDistributionPoint");_I_("2.5.29.27","deltaCRLIndicator");_I_("2.5.29.28","issuingDistributionPoint");_I_("2.5.29.29","certificateIssuer");_I_("2.5.29.30","nameConstraints");_IN("2.5.29.31","cRLDistributionPoints");_IN("2.5.29.32","certificatePolicies");_I_("2.5.29.33","policyMappings");_I_("2.5.29.34","policyConstraints");_IN("2.5.29.35","authorityKeyIdentifier");_I_("2.5.29.36","policyConstraints");_IN("2.5.29.37","extKeyUsage");_I_("2.5.29.46","freshestCRL");_I_("2.5.29.54","inhibitAnyPolicy");_IN("1.3.6.1.4.1.11129.2.4.2","timestampList");_IN("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_IN("1.3.6.1.5.5.7.3.1","serverAuth");_IN("1.3.6.1.5.5.7.3.2","clientAuth");_IN("1.3.6.1.5.5.7.3.3","codeSigning");_IN("1.3.6.1.5.5.7.3.4","emailProtection");_IN("1.3.6.1.5.5.7.3.8","timeStamping");var forge$p=forge$s,asn1$7=forge$p.asn1=forge$p.asn1||{};asn1$7.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};asn1$7.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1$7.create=function(t,e,n,a,o){if(forge$p.util.isArray(a)){for(var c=[],u=0;u<a.length;++u)a[u]!==void 0&&c.push(a[u]);a=c}var l={tagClass:t,type:e,constructed:n,composed:n||forge$p.util.isArray(a),value:a};return o&&"bitStringContents"in o&&(l.bitStringContents=o.bitStringContents,l.original=asn1$7.copy(l)),l};asn1$7.copy=function(t,e){var n;if(forge$p.util.isArray(t)){n=[];for(var a=0;a<t.length;++a)n.push(asn1$7.copy(t[a],e));return n}return typeof t=="string"?t:(n={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:asn1$7.copy(t.value,e)},e&&!e.excludeBitStringContents&&(n.bitStringContents=t.bitStringContents),n)};asn1$7.equals=function(t,e,n){if(forge$p.util.isArray(t)){if(!forge$p.util.isArray(e)||t.length!==e.length)return!1;for(var a=0;a<t.length;++a)if(!asn1$7.equals(t[a],e[a]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var o=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&asn1$7.equals(t.value,e.value);return n&&n.includeBitStringContents&&(o=o&&t.bitStringContents===e.bitStringContents),o};asn1$7.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var n,a=e&128;return a?n=t.getInt((e&127)<<3):n=e,n}};function _checkBufferLength(t,e,n){if(n>e){var a=new Error("Too few bytes to parse DER.");throw a.available=t.length(),a.remaining=e,a.requested=n,a}}var _getValueLength=function(t,e){var n=t.getByte();if(e--,n!==128){var a,o=n&128;if(!o)a=n;else{var c=n&127;_checkBufferLength(t,e,c),a=t.getInt(c<<3)}if(a<0)throw new Error("Negative length: "+a);return a}};asn1$7.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=forge$p.util.createBuffer(t));var n=t.length(),a=_fromDer(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var o=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw o.byteCount=n,o.remaining=t.length(),o}return a};function _fromDer(t,e,n,a){var o;_checkBufferLength(t,e,2);var c=t.getByte();e--;var u=c&192,l=c&31;o=t.length();var p=_getValueLength(t,e);if(e-=o-t.length(),p!==void 0&&p>e){if(a.strict){var b=new Error("Too few bytes to read ASN.1 value.");throw b.available=t.length(),b.remaining=e,b.requested=p,b}p=e}var v,x,_=(c&32)===32;if(_)if(v=[],p===void 0)for(;;){if(_checkBufferLength(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}o=t.length(),v.push(_fromDer(t,e,n+1,a)),e-=o-t.length()}else for(;p>0;)o=t.length(),v.push(_fromDer(t,p,n+1,a)),e-=o-t.length(),p-=o-t.length();if(v===void 0&&u===asn1$7.Class.UNIVERSAL&&l===asn1$7.Type.BITSTRING&&(x=t.bytes(p)),v===void 0&&a.decodeBitStrings&&u===asn1$7.Class.UNIVERSAL&&l===asn1$7.Type.BITSTRING&&p>1){var E=t.read,$=e,S=0;if(l===asn1$7.Type.BITSTRING&&(_checkBufferLength(t,e,1),S=t.getByte(),e--),S===0)try{o=t.length();var A={strict:!0,decodeBitStrings:!0},I=_fromDer(t,e,n+1,A),O=o-t.length();e-=O,l==asn1$7.Type.BITSTRING&&O++;var F=I.tagClass;O===p&&(F===asn1$7.Class.UNIVERSAL||F===asn1$7.Class.CONTEXT_SPECIFIC)&&(v=[I])}catch{}v===void 0&&(t.read=E,e=$)}if(v===void 0){if(p===void 0){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");p=e}if(l===asn1$7.Type.BMPSTRING)for(v="";p>0;p-=2)_checkBufferLength(t,e,2),v+=String.fromCharCode(t.getInt16()),e-=2;else v=t.getBytes(p),e-=p}var U=x===void 0?null:{bitStringContents:x};return asn1$7.create(u,l,_,v,U)}asn1$7.toDer=function(t){var e=forge$p.util.createBuffer(),n=t.tagClass|t.type,a=forge$p.util.createBuffer(),o=!1;if("bitStringContents"in t&&(o=!0,t.original&&(o=asn1$7.equals(t,t.original))),o)a.putBytes(t.bitStringContents);else if(t.composed){t.constructed?n|=32:a.putByte(0);for(var c=0;c<t.value.length;++c)t.value[c]!==void 0&&a.putBuffer(asn1$7.toDer(t.value[c]))}else if(t.type===asn1$7.Type.BMPSTRING)for(var c=0;c<t.value.length;++c)a.putInt16(t.value.charCodeAt(c));else t.type===asn1$7.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?a.putBytes(t.value.substr(1)):a.putBytes(t.value);if(e.putByte(n),a.length()<=127)e.putByte(a.length()&127);else{var u=a.length(),l="";do l+=String.fromCharCode(u&255),u=u>>>8;while(u>0);e.putByte(l.length|128);for(var c=l.length-1;c>=0;--c)e.putByte(l.charCodeAt(c))}return e.putBuffer(a),e};asn1$7.oidToDer=function(t){var e=t.split("."),n=forge$p.util.createBuffer();n.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var a,o,c,u,l=2;l<e.length;++l){a=!0,o=[],c=parseInt(e[l],10);do u=c&127,c=c>>>7,a||(u|=128),o.push(u),a=!1;while(c>0);for(var p=o.length-1;p>=0;--p)n.putByte(o[p])}return n};asn1$7.derToOid=function(t){var e;typeof t=="string"&&(t=forge$p.util.createBuffer(t));var n=t.getByte();e=Math.floor(n/40)+"."+n%40;for(var a=0;t.length()>0;)n=t.getByte(),a=a<<7,n&128?a+=n&127:(e+="."+(a+n),a=0);return e};asn1$7.utcTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,2),10);n=n>=50?1900+n:2e3+n;var a=parseInt(t.substr(2,2),10)-1,o=parseInt(t.substr(4,2),10),c=parseInt(t.substr(6,2),10),u=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var p=t.charAt(10),b=10;p!=="+"&&p!=="-"&&(l=parseInt(t.substr(10,2),10),b+=2)}if(e.setUTCFullYear(n,a,o),e.setUTCHours(c,u,l,0),b&&(p=t.charAt(b),p==="+"||p==="-")){var v=parseInt(t.substr(b+1,2),10),x=parseInt(t.substr(b+4,2),10),_=v*60+x;_*=6e4,p==="+"?e.setTime(+e-_):e.setTime(+e+_)}return e};asn1$7.generalizedTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,4),10),a=parseInt(t.substr(4,2),10)-1,o=parseInt(t.substr(6,2),10),c=parseInt(t.substr(8,2),10),u=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),p=0,b=0,v=!1;t.charAt(t.length-1)==="Z"&&(v=!0);var x=t.length-5,_=t.charAt(x);if(_==="+"||_==="-"){var E=parseInt(t.substr(x+1,2),10),$=parseInt(t.substr(x+4,2),10);b=E*60+$,b*=6e4,_==="+"&&(b*=-1),v=!0}return t.charAt(14)==="."&&(p=parseFloat(t.substr(14),10)*1e3),v?(e.setUTCFullYear(n,a,o),e.setUTCHours(c,u,l,p),e.setTime(+e+b)):(e.setFullYear(n,a,o),e.setHours(c,u,l,p)),e};asn1$7.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push((""+t.getUTCFullYear()).substr(2)),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var a=0;a<n.length;++a)n[a].length<2&&(e+="0"),e+=n[a];return e+="Z",e};asn1$7.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push(""+t.getUTCFullYear()),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var a=0;a<n.length;++a)n[a].length<2&&(e+="0"),e+=n[a];return e+="Z",e};asn1$7.integerToDer=function(t){var e=forge$p.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=t,n};asn1$7.derToInteger=function(t){typeof t=="string"&&(t=forge$p.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};asn1$7.validate=function(t,e,n,a){var o=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(o=!0,e.value&&forge$p.util.isArray(e.value))for(var c=0,u=0;o&&u<e.value.length;++u)o=e.value[u].optional||!1,t.value[c]&&(o=asn1$7.validate(t.value[c],e.value[u],n,a),o?++c:e.value[u].optional&&(o=!0)),!o&&a&&a.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(o&&n&&(e.capture&&(n[e.capture]=t.value),e.captureAsn1&&(n[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(n[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)n[e.captureBitStringValue]="";else{var l=t.bitStringContents.charCodeAt(0);if(l!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else a&&a.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else a&&(t.tagClass!==e.tagClass&&a.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&a.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return o};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1$7.prettyPrint=function(t,e,n){var a="";e=e||0,n=n||2,e>0&&(a+=`
`);for(var o="",c=0;c<e*n;++c)o+=" ";switch(a+=o+"Tag: ",t.tagClass){case asn1$7.Class.UNIVERSAL:a+="Universal:";break;case asn1$7.Class.APPLICATION:a+="Application:";break;case asn1$7.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case asn1$7.Class.PRIVATE:a+="Private:";break}if(t.tagClass===asn1$7.Class.UNIVERSAL)switch(a+=t.type,t.type){case asn1$7.Type.NONE:a+=" (None)";break;case asn1$7.Type.BOOLEAN:a+=" (Boolean)";break;case asn1$7.Type.INTEGER:a+=" (Integer)";break;case asn1$7.Type.BITSTRING:a+=" (Bit string)";break;case asn1$7.Type.OCTETSTRING:a+=" (Octet string)";break;case asn1$7.Type.NULL:a+=" (Null)";break;case asn1$7.Type.OID:a+=" (Object Identifier)";break;case asn1$7.Type.ODESC:a+=" (Object Descriptor)";break;case asn1$7.Type.EXTERNAL:a+=" (External or Instance of)";break;case asn1$7.Type.REAL:a+=" (Real)";break;case asn1$7.Type.ENUMERATED:a+=" (Enumerated)";break;case asn1$7.Type.EMBEDDED:a+=" (Embedded PDV)";break;case asn1$7.Type.UTF8:a+=" (UTF8)";break;case asn1$7.Type.ROID:a+=" (Relative Object Identifier)";break;case asn1$7.Type.SEQUENCE:a+=" (Sequence)";break;case asn1$7.Type.SET:a+=" (Set)";break;case asn1$7.Type.PRINTABLESTRING:a+=" (Printable String)";break;case asn1$7.Type.IA5String:a+=" (IA5String (ASCII))";break;case asn1$7.Type.UTCTIME:a+=" (UTC time)";break;case asn1$7.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case asn1$7.Type.BMPSTRING:a+=" (BMP String)";break}else a+=t.type;if(a+=`
`,a+=o+"Constructed: "+t.constructed+`
`,t.composed){for(var u=0,l="",c=0;c<t.value.length;++c)t.value[c]!==void 0&&(u+=1,l+=asn1$7.prettyPrint(t.value[c],e+1,n),c+1<t.value.length&&(l+=","));a+=o+"Sub values: "+u+l}else{if(a+=o+"Value: ",t.type===asn1$7.Type.OID){var p=asn1$7.derToOid(t.value);a+=p,forge$p.pki&&forge$p.pki.oids&&p in forge$p.pki.oids&&(a+=" ("+forge$p.pki.oids[p]+") ")}if(t.type===asn1$7.Type.INTEGER)try{a+=asn1$7.derToInteger(t.value)}catch{a+="0x"+forge$p.util.bytesToHex(t.value)}else if(t.type===asn1$7.Type.BITSTRING){if(t.value.length>1?a+="0x"+forge$p.util.bytesToHex(t.value.slice(1)):a+="(none)",t.value.length>0){var b=t.value.charCodeAt(0);b==1?a+=" (1 unused bit shown)":b>1&&(a+=" ("+b+" unused bits shown)")}}else if(t.type===asn1$7.Type.OCTETSTRING)_nonLatinRegex.test(t.value)||(a+="("+t.value+") "),a+="0x"+forge$p.util.bytesToHex(t.value);else if(t.type===asn1$7.Type.UTF8)try{a+=forge$p.util.decodeUtf8(t.value)}catch(v){if(v.message==="URI malformed")a+="0x"+forge$p.util.bytesToHex(t.value)+" (malformed UTF8)";else throw v}else t.type===asn1$7.Type.PRINTABLESTRING||t.type===asn1$7.Type.IA5String?a+=t.value:_nonLatinRegex.test(t.value)?a+="0x"+forge$p.util.bytesToHex(t.value):t.value.length===0?a+="[null]":a+=t.value}return a};var forge$o=forge$s;forge$o.cipher=forge$o.cipher||{};forge$o.cipher.algorithms=forge$o.cipher.algorithms||{};forge$o.cipher.createCipher=function(t,e){var n=t;if(typeof n=="string"&&(n=forge$o.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new forge$o.cipher.BlockCipher({algorithm:n,key:e,decrypt:!1})};forge$o.cipher.createDecipher=function(t,e){var n=t;if(typeof n=="string"&&(n=forge$o.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new forge$o.cipher.BlockCipher({algorithm:n,key:e,decrypt:!0})};forge$o.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),forge$o.cipher.algorithms[t]=e};forge$o.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in forge$o.cipher.algorithms?forge$o.cipher.algorithms[t]:null};var BlockCipher=forge$o.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};BlockCipher.prototype.start=function(t){t=t||{};var e={};for(var n in t)e[n]=t[n];e.decrypt=this._decrypt,this._finish=!1,this._input=forge$o.util.createBuffer(),this.output=t.output||forge$o.util.createBuffer(),this.mode.start(e)};BlockCipher.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BlockCipher.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return t(this.blockSize,n,!1)},this.mode.unpad=function(n){return t(this.blockSize,n,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))};var forge$n=forge$s;forge$n.cipher=forge$n.cipher||{};var modes$1=forge$n.cipher.modes=forge$n.cipher.modes||{};modes$1.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.ecb.prototype.start=function(t){};modes$1.ecb.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a])};modes$1.ecb.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a])};modes$1.ecb.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};modes$1.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),a=t.at(n-1);return a>this.blockSize<<2?!1:(t.truncate(a),!0)};modes$1.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes$1.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=transformIV(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};modes$1.cbc.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=this._prev[a]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a]);this._prev=this._outBlock};modes$1.cbc.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._prev[a]^this._outBlock[a]);this._prev=this._inBlock.slice(0)};modes$1.cbc.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};modes$1.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),a=t.at(n-1);return a>this.blockSize<<2?!1:(t.truncate(a),!0)};modes$1.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$n.util.createBuffer(),this._partialBytes=0};modes$1.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.cfb.prototype.encrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32()^this._outBlock[o],e.putInt32(this._inBlock[o]);return}var c=(this.blockSize-a)%this.blockSize;c>0&&(c=this.blockSize-c),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(c>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),c>0&&!n)return e.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=c,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0};modes$1.cfb.prototype.decrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32(),e.putInt32(this._inBlock[o]^this._outBlock[o]);return}var c=(this.blockSize-a)%this.blockSize;c>0&&(c=this.blockSize-c),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(c>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),c>0&&!n)return e.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=c,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0};modes$1.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$n.util.createBuffer(),this._partialBytes=0};modes$1.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ofb.prototype.encrypt=function(t,e,n){var a=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];return}var c=(this.blockSize-a)%this.blockSize;c>0&&(c=this.blockSize-c),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(c>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),c>0&&!n)return e.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=c,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0};modes$1.ofb.prototype.decrypt=modes$1.ofb.prototype.encrypt;modes$1.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$n.util.createBuffer(),this._partialBytes=0};modes$1.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes$1.ctr.prototype.encrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var c=(this.blockSize-a)%this.blockSize;c>0&&(c=this.blockSize-c),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(c>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),c>0&&!n)return e.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=c,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)};modes$1.ctr.prototype.decrypt=modes$1.ctr.prototype.encrypt;modes$1.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$n.util.createBuffer(),this._partialBytes=0,this._R=3774873600};modes$1.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=forge$n.util.createBuffer(t.iv);this._cipherLength=0;var n;if("additionalData"in t?n=forge$n.util.createBuffer(t.additionalData):n=forge$n.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=forge$n.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=e.length();if(a===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(a*8)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,n=forge$n.util.createBuffer(n),this._aDataLength=from64To32(n.length()*8);var o=n.length()%this.blockSize;for(o&&n.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};modes$1.gcm.prototype.encrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var c=(this.blockSize-a)%this.blockSize;c>0&&(c=this.blockSize-c),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(c<=0||n){if(n){var u=a%this.blockSize;this._cipherLength+=u,this._partialOutput.truncate(this.blockSize-u)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),c>0&&!n)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=c,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)};modes$1.gcm.prototype.decrypt=function(t,e,n){var a=t.length();if(a<this.blockSize&&!(n&&a>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);a<this.blockSize?this._cipherLength+=a%this.blockSize:this._cipherLength+=this.blockSize};modes$1.gcm.prototype.afterFinish=function(t,e){var n=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=forge$n.util.createBuffer();var a=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,a);var o=[];this.cipher.encrypt(this._j0,o);for(var c=0;c<this._ints;++c)this.tag.putInt32(this._s[c]^o[c]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};modes$1.gcm.prototype.multiply=function(t,e){for(var n=[0,0,0,0],a=e.slice(0),o=0;o<128;++o){var c=t[o/32|0]&1<<31-o%32;c&&(n[0]^=a[0],n[1]^=a[1],n[2]^=a[2],n[3]^=a[3]),this.pow(a,a)}return n};modes$1.gcm.prototype.pow=function(t,e){for(var n=t[3]&1,a=3;a>0;--a)e[a]=t[a]>>>1|(t[a-1]&1)<<31;e[0]=t[0]>>>1,n&&(e[0]^=this._R)};modes$1.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],n=0;n<32;++n){var a=n/8|0,o=t[a]>>>(7-n%8)*4&15,c=this._m[n][o];e[0]^=c[0],e[1]^=c[1],e[2]^=c[2],e[3]^=c[3]}return e};modes$1.gcm.prototype.ghash=function(t,e,n){return e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],this.tableMultiply(e)};modes$1.gcm.prototype.generateHashTable=function(t,e){for(var n=8/e,a=4*n,o=16*n,c=new Array(o),u=0;u<o;++u){var l=[0,0,0,0],p=u/a|0,b=(a-1-u%a)*e;l[p]=1<<e-1<<b,c[u]=this.generateSubHashTable(this.multiply(l,t),e)}return c};modes$1.gcm.prototype.generateSubHashTable=function(t,e){var n=1<<e,a=n>>>1,o=new Array(n);o[a]=t.slice(0);for(var c=a>>>1;c>0;)this.pow(o[2*c],o[c]=[]),c>>=1;for(c=2;c<a;){for(var u=1;u<c;++u){var l=o[c],p=o[u];o[c+u]=[l[0]^p[0],l[1]^p[1],l[2]^p[2],l[3]^p[3]]}c*=2}for(o[0]=[0,0,0,0],c=a+1;c<n;++c){var b=o[c^a];o[c]=[t[0]^b[0],t[1]^b[1],t[2]^b[2],t[3]^b[3]]}return o};function transformIV(t,e){if(typeof t=="string"&&(t=forge$n.util.createBuffer(t)),forge$n.util.isArray(t)&&t.length>4){var n=t;t=forge$n.util.createBuffer();for(var a=0;a<n.length;++a)t.putByte(n[a])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!forge$n.util.isArray(t)){for(var o=[],c=e/4,a=0;a<c;++a)o.push(t.getInt32());t=o}return t}function inc32(t){t[t.length-1]=t[t.length-1]+1&4294967295}function from64To32(t){return[t/4294967296|0,t&4294967295]}var forge$m=forge$s;forge$m.aes=forge$m.aes||{};forge$m.aes.startEncrypting=function(t,e,n,a){var o=_createCipher$1({key:t,output:n,decrypt:!1,mode:a});return o.start(e),o};forge$m.aes.createEncryptionCipher=function(t,e){return _createCipher$1({key:t,output:null,decrypt:!1,mode:e})};forge$m.aes.startDecrypting=function(t,e,n,a){var o=_createCipher$1({key:t,output:n,decrypt:!0,mode:a});return o.start(e),o};forge$m.aes.createDecryptionCipher=function(t,e){return _createCipher$1({key:t,output:null,decrypt:!0,mode:e})};forge$m.aes.Algorithm=function(t,e){init||initialize();var n=this;n.name=t,n.mode=new e({blockSize:16,cipher:{encrypt:function(a,o){return _updateBlock$1(n._w,a,o,!1)},decrypt:function(a,o){return _updateBlock$1(n._w,a,o,!0)}}}),n._init=!1};forge$m.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,n;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=forge$m.util.createBuffer(e);else if(forge$m.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){n=e,e=forge$m.util.createBuffer();for(var a=0;a<n.length;++a)e.putByte(n[a])}if(!forge$m.util.isArray(e)){n=e,e=[];var o=n.length();if(o===16||o===24||o===32){o=o>>>2;for(var a=0;a<o;++a)e.push(n.getInt32())}}if(!forge$m.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var c=this.mode.name,u=["CFB","OFB","CTR","GCM"].indexOf(c)!==-1;this._w=_expandKey(e,t.decrypt&&!u),this._init=!0}};forge$m.aes._expandKey=function(t,e){return init||initialize(),_expandKey(t,e)};forge$m.aes._updateBlock=_updateBlock$1;registerAlgorithm$1("AES-ECB",forge$m.cipher.modes.ecb);registerAlgorithm$1("AES-CBC",forge$m.cipher.modes.cbc);registerAlgorithm$1("AES-CFB",forge$m.cipher.modes.cfb);registerAlgorithm$1("AES-OFB",forge$m.cipher.modes.ofb);registerAlgorithm$1("AES-CTR",forge$m.cipher.modes.ctr);registerAlgorithm$1("AES-GCM",forge$m.cipher.modes.gcm);function registerAlgorithm$1(t,e){var n=function(){return new forge$m.aes.Algorithm(t,e)};forge$m.cipher.registerAlgorithm(t,n)}var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(var e=0;e<4;++e)mix[e]=new Array(256),imix[e]=new Array(256);for(var n=0,a=0,o,c,u,l,p,b,v,e=0;e<256;++e){l=a^a<<1^a<<2^a<<3^a<<4,l=l>>8^l&255^99,sbox[n]=l,isbox[l]=n,p=t[l],o=t[n],c=t[o],u=t[c],b=p<<24^l<<16^l<<8^(l^p),v=(o^c^u)<<24^(n^u)<<16^(n^c^u)<<8^(n^o^u);for(var x=0;x<4;++x)mix[x][n]=b,imix[x][l]=v,b=b<<24|b>>>8,v=v<<24|v>>>8;n===0?n=a=1:(n=o^t[t[t[o^u]]],a^=t[t[a]])}}function _expandKey(t,e){for(var n=t.slice(0),a,o=1,c=n.length,u=c+6+1,l=Nb*u,p=c;p<l;++p)a=n[p-1],p%c===0?(a=sbox[a>>>16&255]<<24^sbox[a>>>8&255]<<16^sbox[a&255]<<8^sbox[a>>>24]^rcon[o]<<24,o++):c>6&&p%c===4&&(a=sbox[a>>>24]<<24^sbox[a>>>16&255]<<16^sbox[a>>>8&255]<<8^sbox[a&255]),n[p]=n[p-c]^a;if(e){var b,v=imix[0],x=imix[1],_=imix[2],E=imix[3],$=n.slice(0);l=n.length;for(var p=0,S=l-Nb;p<l;p+=Nb,S-=Nb)if(p===0||p===l-Nb)$[p]=n[S],$[p+1]=n[S+3],$[p+2]=n[S+2],$[p+3]=n[S+1];else for(var A=0;A<Nb;++A)b=n[S+A],$[p+(3&-A)]=v[sbox[b>>>24]]^x[sbox[b>>>16&255]]^_[sbox[b>>>8&255]]^E[sbox[b&255]];n=$}return n}function _updateBlock$1(t,e,n,a){var o=t.length/4-1,c,u,l,p,b;a?(c=imix[0],u=imix[1],l=imix[2],p=imix[3],b=isbox):(c=mix[0],u=mix[1],l=mix[2],p=mix[3],b=sbox);var v,x,_,E,$,S,A;v=e[0]^t[0],x=e[a?3:1]^t[1],_=e[2]^t[2],E=e[a?1:3]^t[3];for(var I=3,O=1;O<o;++O)$=c[v>>>24]^u[x>>>16&255]^l[_>>>8&255]^p[E&255]^t[++I],S=c[x>>>24]^u[_>>>16&255]^l[E>>>8&255]^p[v&255]^t[++I],A=c[_>>>24]^u[E>>>16&255]^l[v>>>8&255]^p[x&255]^t[++I],E=c[E>>>24]^u[v>>>16&255]^l[x>>>8&255]^p[_&255]^t[++I],v=$,x=S,_=A;n[0]=b[v>>>24]<<24^b[x>>>16&255]<<16^b[_>>>8&255]<<8^b[E&255]^t[++I],n[a?3:1]=b[x>>>24]<<24^b[_>>>16&255]<<16^b[E>>>8&255]<<8^b[v&255]^t[++I],n[2]=b[_>>>24]<<24^b[E>>>16&255]<<16^b[v>>>8&255]<<8^b[x&255]^t[++I],n[a?1:3]=b[E>>>24]<<24^b[v>>>16&255]<<16^b[x>>>8&255]<<8^b[_&255]^t[++I]}function _createCipher$1(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="AES-"+e,a;t.decrypt?a=forge$m.cipher.createDecipher(n,t.key):a=forge$m.cipher.createCipher(n,t.key);var o=a.start;return a.start=function(c,u){var l=null;u instanceof forge$m.util.ByteBuffer&&(l=u,u={}),u=u||{},u.output=l,u.iv=c,o.call(a,u)},a}var forge$l=forge$s;forge$l.des=forge$l.des||{};forge$l.des.startEncrypting=function(t,e,n,a){var o=_createCipher({key:t,output:n,decrypt:!1,mode:a||(e===null?"ECB":"CBC")});return o.start(e),o};forge$l.des.createEncryptionCipher=function(t,e){return _createCipher({key:t,output:null,decrypt:!1,mode:e})};forge$l.des.startDecrypting=function(t,e,n,a){var o=_createCipher({key:t,output:n,decrypt:!0,mode:a||(e===null?"ECB":"CBC")});return o.start(e),o};forge$l.des.createDecryptionCipher=function(t,e){return _createCipher({key:t,output:null,decrypt:!0,mode:e})};forge$l.des.Algorithm=function(t,e){var n=this;n.name=t,n.mode=new e({blockSize:8,cipher:{encrypt:function(a,o){return _updateBlock(n._keys,a,o,!1)},decrypt:function(a,o){return _updateBlock(n._keys,a,o,!0)}}}),n._init=!1};forge$l.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=forge$l.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=_createKeys(e),this._init=!0}};registerAlgorithm("DES-ECB",forge$l.cipher.modes.ecb);registerAlgorithm("DES-CBC",forge$l.cipher.modes.cbc);registerAlgorithm("DES-CFB",forge$l.cipher.modes.cfb);registerAlgorithm("DES-OFB",forge$l.cipher.modes.ofb);registerAlgorithm("DES-CTR",forge$l.cipher.modes.ctr);registerAlgorithm("3DES-ECB",forge$l.cipher.modes.ecb);registerAlgorithm("3DES-CBC",forge$l.cipher.modes.cbc);registerAlgorithm("3DES-CFB",forge$l.cipher.modes.cfb);registerAlgorithm("3DES-OFB",forge$l.cipher.modes.ofb);registerAlgorithm("3DES-CTR",forge$l.cipher.modes.ctr);function registerAlgorithm(t,e){var n=function(){return new forge$l.des.Algorithm(t,e)};forge$l.cipher.registerAlgorithm(t,n)}var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],c=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],u=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],p=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],b=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],v=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],x=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],_=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],E=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],$=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],S=t.length()>8?3:1,A=[],I=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],O=0,F,U=0;U<S;U++){var G=t.getInt32(),J=t.getInt32();F=(G>>>4^J)&252645135,J^=F,G^=F<<4,F=(J>>>-16^G)&65535,G^=F,J^=F<<-16,F=(G>>>2^J)&858993459,J^=F,G^=F<<2,F=(J>>>-16^G)&65535,G^=F,J^=F<<-16,F=(G>>>1^J)&1431655765,J^=F,G^=F<<1,F=(J>>>8^G)&16711935,G^=F,J^=F<<8,F=(G>>>1^J)&1431655765,J^=F,G^=F<<1,F=G<<8|J>>>20&240,G=J<<24|J<<8&16711680|J>>>8&65280|J>>>24&240,J=F;for(var k=0;k<I.length;++k){I[k]?(G=G<<2|G>>>26,J=J<<2|J>>>26):(G=G<<1|G>>>27,J=J<<1|J>>>27),G&=-15,J&=-15;var ne=e[G>>>28]|n[G>>>24&15]|a[G>>>20&15]|o[G>>>16&15]|c[G>>>12&15]|u[G>>>8&15]|l[G>>>4&15],ee=p[J>>>28]|b[J>>>24&15]|v[J>>>20&15]|x[J>>>16&15]|_[J>>>12&15]|E[J>>>8&15]|$[J>>>4&15];F=(ee>>>16^ne)&65535,A[O++]=ne^F,A[O++]=ee^F<<16}}return A}function _updateBlock(t,e,n,a){var o=t.length===32?3:9,c;o===3?c=a?[30,-2,-2]:[0,32,2]:c=a?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var u,l=e[0],p=e[1];u=(l>>>4^p)&252645135,p^=u,l^=u<<4,u=(l>>>16^p)&65535,p^=u,l^=u<<16,u=(p>>>2^l)&858993459,l^=u,p^=u<<2,u=(p>>>8^l)&16711935,l^=u,p^=u<<8,u=(l>>>1^p)&1431655765,p^=u,l^=u<<1,l=l<<1|l>>>31,p=p<<1|p>>>31;for(var b=0;b<o;b+=3){for(var v=c[b+1],x=c[b+2],_=c[b];_!=v;_+=x){var E=p^t[_],$=(p>>>4|p<<28)^t[_+1];u=l,l=p,p=u^(spfunction2[E>>>24&63]|spfunction4[E>>>16&63]|spfunction6[E>>>8&63]|spfunction8[E&63]|spfunction1[$>>>24&63]|spfunction3[$>>>16&63]|spfunction5[$>>>8&63]|spfunction7[$&63])}u=l,l=p,p=u}l=l>>>1|l<<31,p=p>>>1|p<<31,u=(l>>>1^p)&1431655765,p^=u,l^=u<<1,u=(p>>>8^l)&16711935,l^=u,p^=u<<8,u=(p>>>2^l)&858993459,l^=u,p^=u<<2,u=(l>>>16^p)&65535,p^=u,l^=u<<16,u=(l>>>4^p)&252645135,p^=u,l^=u<<4,n[0]=l,n[1]=p}function _createCipher(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="DES-"+e,a;t.decrypt?a=forge$l.cipher.createDecipher(n,t.key):a=forge$l.cipher.createCipher(n,t.key);var o=a.start;return a.start=function(c,u){var l=null;u instanceof forge$l.util.ByteBuffer&&(l=u,u={}),u=u||{},u.output=l,u.iv=c,o.call(a,u)},a}var forge$k=forge$s;forge$k.md=forge$k.md||{};forge$k.md.algorithms=forge$k.md.algorithms||{};var forge$j=forge$s,hmac$3=forge$j.hmac=forge$j.hmac||{};hmac$3.create=function(){var t=null,e=null,n=null,a=null,o={};return o.start=function(c,u){if(c!==null)if(typeof c=="string")if(c=c.toLowerCase(),c in forge$j.md.algorithms)e=forge$j.md.algorithms[c].create();else throw new Error('Unknown hash algorithm "'+c+'"');else e=c;if(u===null)u=t;else{if(typeof u=="string")u=forge$j.util.createBuffer(u);else if(forge$j.util.isArray(u)){var l=u;u=forge$j.util.createBuffer();for(var p=0;p<l.length;++p)u.putByte(l[p])}var b=u.length();b>e.blockLength&&(e.start(),e.update(u.bytes()),u=e.digest()),n=forge$j.util.createBuffer(),a=forge$j.util.createBuffer(),b=u.length();for(var p=0;p<b;++p){var l=u.at(p);n.putByte(54^l),a.putByte(92^l)}if(b<e.blockLength)for(var l=e.blockLength-b,p=0;p<l;++p)n.putByte(54),a.putByte(92);t=u,n=n.bytes(),a=a.bytes()}e.start(),e.update(n)},o.update=function(c){e.update(c)},o.getMac=function(){var c=e.digest().bytes();return e.start(),e.update(a),e.update(c),e.digest()},o.digest=o.getMac,o};var cryptoBrowserify={},browser$f={exports:{}},safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=buffer$2,a=n.Buffer;function o(u,l){for(var p in u)l[p]=u[p]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=c);function c(u,l,p){return a(u,l,p)}c.prototype=Object.create(a.prototype),o(a,c),c.from=function(u,l,p){if(typeof u=="number")throw new TypeError("Argument must not be a number");return a(u,l,p)},c.alloc=function(u,l,p){if(typeof u!="number")throw new TypeError("Argument must be a number");var b=a(u);return l!==void 0?typeof p=="string"?b.fill(l,p):b.fill(l):b.fill(0),b},c.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return a(u)},c.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(u)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports,hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$f.exports;hasRequiredBrowser$b=1;var t=65536,e=4294967295;function n(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var a=safeBufferExports.Buffer,o=commonjsGlobal.crypto||commonjsGlobal.msCrypto;o&&o.getRandomValues?browser$f.exports=c:browser$f.exports=n;function c(u,l){if(u>e)throw new RangeError("requested too many random bytes");var p=a.allocUnsafe(u);if(u>0)if(u>t)for(var b=0;b<u;b+=t)o.getRandomValues(p.slice(b,b+t));else o.getRandomValues(p);return typeof l=="function"?process$1.nextTick(function(){l(null,p)}):p}return browser$f.exports}var inherits_browser$1={exports:{}};typeof Object.create=="function"?inherits_browser$1.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser$1.exports=function(e,n){if(n){e.super_=n;var a=function(){};a.prototype=n.prototype,e.prototype=new a,e.prototype.constructor=e}};var inherits_browserExports=inherits_browser$1.exports,readableBrowser={exports:{}},events$2={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function t(e,n,a){return Function.prototype.apply.call(e,n,a)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}var NumberIsNaN=Number.isNaN||function t(e){return e!==e};function EventEmitter$3(){EventEmitter$3.init.call(this)}events$2.exports=EventEmitter$3;events$2.exports.once=once;EventEmitter$3.EventEmitter=EventEmitter$3;EventEmitter$3.prototype._events=void 0;EventEmitter$3.prototype._eventsCount=0;EventEmitter$3.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(EventEmitter$3,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}});EventEmitter$3.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$3.prototype.setMaxListeners=function t(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(t){return t._maxListeners===void 0?EventEmitter$3.defaultMaxListeners:t._maxListeners}EventEmitter$3.prototype.getMaxListeners=function t(){return _getMaxListeners(this)};EventEmitter$3.prototype.emit=function t(e){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var u;if(n.length>0&&(u=n[0]),u instanceof Error)throw u;var l=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw l.context=u,l}var p=c[e];if(p===void 0)return!1;if(typeof p=="function")ReflectApply(p,this,n);else for(var b=p.length,v=arrayClone(p,b),a=0;a<b;++a)ReflectApply(v[a],this,n);return!0};function _addListener(t,e,n,a){var o,c,u;if(checkListener(n),c=t._events,c===void 0?(c=t._events=Object.create(null),t._eventsCount=0):(c.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),c=t._events),u=c[e]),u===void 0)u=c[e]=n,++t._eventsCount;else if(typeof u=="function"?u=c[e]=a?[n,u]:[u,n]:a?u.unshift(n):u.push(n),o=_getMaxListeners(t),o>0&&u.length>o&&!u.warned){u.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=u.length,ProcessEmitWarning(l)}return t}EventEmitter$3.prototype.addListener=function t(e,n){return _addListener(this,e,n,!1)};EventEmitter$3.prototype.on=EventEmitter$3.prototype.addListener;EventEmitter$3.prototype.prependListener=function t(e,n){return _addListener(this,e,n,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,e,n){var a={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=onceWrapper.bind(a);return o.listener=n,a.wrapFn=o,o}EventEmitter$3.prototype.once=function t(e,n){return checkListener(n),this.on(e,_onceWrap(this,e,n)),this};EventEmitter$3.prototype.prependOnceListener=function t(e,n){return checkListener(n),this.prependListener(e,_onceWrap(this,e,n)),this};EventEmitter$3.prototype.removeListener=function t(e,n){var a,o,c,u,l;if(checkListener(n),o=this._events,o===void 0)return this;if(a=o[e],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,a.listener||n));else if(typeof a!="function"){for(c=-1,u=a.length-1;u>=0;u--)if(a[u]===n||a[u].listener===n){l=a[u].listener,c=u;break}if(c<0)return this;c===0?a.shift():spliceOne(a,c),a.length===1&&(o[e]=a[0]),o.removeListener!==void 0&&this.emit("removeListener",e,l||n)}return this};EventEmitter$3.prototype.off=EventEmitter$3.prototype.removeListener;EventEmitter$3.prototype.removeAllListeners=function t(e){var n,a,o;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[e]),this;if(arguments.length===0){var c=Object.keys(a),u;for(o=0;o<c.length;++o)u=c[o],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(o=n.length-1;o>=0;o--)this.removeListener(e,n[o]);return this};function _listeners(t,e,n){var a=t._events;if(a===void 0)return[];var o=a[e];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?unwrapListeners(o):arrayClone(o,o.length)}EventEmitter$3.prototype.listeners=function t(e){return _listeners(this,e,!0)};EventEmitter$3.prototype.rawListeners=function t(e){return _listeners(this,e,!1)};EventEmitter$3.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):listenerCount.call(t,e)};EventEmitter$3.prototype.listenerCount=listenerCount;function listenerCount(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}EventEmitter$3.prototype.eventNames=function t(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(t,e){for(var n=new Array(e),a=0;a<e;++a)n[a]=t[a];return n}function spliceOne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function unwrapListeners(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function once(t,e){return new Promise(function(n,a){function o(u){t.removeListener(e,c),a(u)}function c(){typeof t.removeListener=="function"&&t.removeListener("error",o),n([].slice.call(arguments))}eventTargetAgnosticAddListener(t,e,c,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(t,o,{once:!0})})}function addErrorHandlerIfEventEmitter(t,e,n){typeof t.on=="function"&&eventTargetAgnosticAddListener(t,"error",e,n)}function eventTargetAgnosticAddListener(t,e,n,a){if(typeof t.on=="function")a.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(c){a.once&&t.removeEventListener(e,o),n(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var eventsExports=events$2.exports;const EventEmitter$4=getDefaultExportFromCjs(eventsExports);var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=eventsExports.EventEmitter),streamBrowser}var util$3={},types={},shams$1=function t(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),a=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var o=42;e[n]=o;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(e,n);if(u.value!==o||u.enumerable!==!0)return!1}return!0},hasSymbols$2=shams$1,shams=function t(){return hasSymbols$2()&&!!Symbol.toStringTag},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$1=function t(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={foo:{}},$Object=Object,hasProto$1=function t(){return{__proto__:test}.foo===test.foo&&!({__proto__:null}instanceof $Object)},bind$1=functionBind,src$4=bind$1.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError=SyntaxError,$Function=Function,$TypeError=TypeError,getEvalledConstructor=function(t){try{return $Function('"use strict"; return ('+t+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto$1=Object.getPrototypeOf||(hasProto?function(t){return t.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto$1?undefined$1:getProto$1(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto$1?getProto$1([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto$1?getProto$1(getProto$1([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto$1?undefined$1:getProto$1(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto$1?getProto$1(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto$1)try{null.error}catch(t){var errorProto=getProto$1(getProto$1(t));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function t(e){var n;if(e==="%AsyncFunction%")n=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")n=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var a=t("%AsyncGeneratorFunction%");a&&(n=a.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&getProto$1&&(n=getProto$1(o.prototype))}return INTRINSICS[e]=n,n},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn=src$4,$concat=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function t(e){var n=$strSlice(e,0,1),a=$strSlice(e,-1);if(n==="%"&&a!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected closing `%`");if(a==="%"&&n!=="%")throw new $SyntaxError("invalid intrinsic syntax, expected opening `%`");var o=[];return $replace(e,rePropName,function(c,u,l,p){o[o.length]=l?$replace(p,reEscapeChar,"$1"):u||c}),o},getBaseIntrinsic=function t(e,n){var a=e,o;if(hasOwn(LEGACY_ALIASES,a)&&(o=LEGACY_ALIASES[a],a="%"+o[0]+"%"),hasOwn(INTRINSICS,a)){var c=INTRINSICS[a];if(c===needsEval&&(c=doEval(a)),typeof c>"u"&&!n)throw new $TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:a,value:c}}throw new $SyntaxError("intrinsic "+e+" does not exist!")},getIntrinsic=function t(e,n){if(typeof e!="string"||e.length===0)throw new $TypeError("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new $TypeError('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=stringToPath(e),o=a.length>0?a[0]:"",c=getBaseIntrinsic("%"+o+"%",n),u=c.name,l=c.value,p=!1,b=c.alias;b&&(o=b[0],$spliceApply(a,$concat([0,1],b)));for(var v=1,x=!0;v<a.length;v+=1){var _=a[v],E=$strSlice(_,0,1),$=$strSlice(_,-1);if((E==='"'||E==="'"||E==="`"||$==='"'||$==="'"||$==="`")&&E!==$)throw new $SyntaxError("property names with quotes must have matching quotes");if((_==="constructor"||!x)&&(p=!0),o+="."+_,u="%"+o+"%",hasOwn(INTRINSICS,u))l=INTRINSICS[u];else if(l!=null){if(!(_ in l)){if(!n)throw new $TypeError("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD$1&&v+1>=a.length){var S=$gOPD$1(l,_);x=!!S,x&&"get"in S&&!("originalValue"in S.get)?l=S.get:l=l[_]}else x=hasOwn(l,_),l=l[_];x&&!p&&(INTRINSICS[u]=l)}}return l},callBind$1={exports:{}};(function(t){var e=functionBind,n=getIntrinsic,a=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),c=n("%Reflect.apply%",!0)||e.call(o,a),u=n("%Object.getOwnPropertyDescriptor%",!0),l=n("%Object.defineProperty%",!0),p=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(x){var _=c(e,o,arguments);if(u&&l){var E=u(_,"length");E.configurable&&l(_,"length",{value:1+p(0,x.length-(arguments.length-1))})}return _};var b=function(){return c(e,a,arguments)};l?l(t.exports,"apply",{value:b}):t.exports.apply=b})(callBind$1);var callBindExports=callBind$1.exports,GetIntrinsic$1=getIntrinsic,callBind=callBindExports,$indexOf$1=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$3=function t(e,n){var a=GetIntrinsic$1(e,!!n);return typeof a=="function"&&$indexOf$1(e,".prototype.")>-1?callBind(a):a},hasToStringTag$4=shams(),callBound$2=callBound$3,$toString$2=callBound$2("Object.prototype.toString"),isStandardArguments=function t(e){return hasToStringTag$4&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:$toString$2(e)==="[object Arguments]"},isLegacyArguments=function t(e){return isStandardArguments(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&$toString$2(e)!=="[object Array]"&&$toString$2(e.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments=supportsStandardArguments?isStandardArguments:isLegacyArguments,toStr$2=Object.prototype.toString,fnToStr$1=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag$3=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag$3)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function t(e){if(typeof e!="function")return!1;if(isFnRegex.test(fnToStr$1.call(e)))return!0;if(!hasToStringTag$3){var n=toStr$2.call(e);return n==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var a=getGeneratorFunc();GeneratorFunction=a?getProto(a):!1}return getProto(e)===GeneratorFunction},fnToStr=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(t){t!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function t(e){try{var n=fnToStr.call(e);return constructorRegex.test(n)}catch{return!1}},tryFunctionObject=function t(e){try{return isES6ClassFn(e)?!1:(fnToStr.call(e),!0)}catch{return!1}},toStr$1=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$2=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function t(){return!1};if(typeof document=="object"){var all$1=document.all;toStr$1.call(all$1)===toStr$1.call(document.all)&&(isDDA=function(e){if((isIE68||!e)&&(typeof e>"u"||typeof e=="object"))try{var n=toStr$1.call(e);return(n===ddaClass||n===ddaClass2||n===ddaClass3||n===objectClass)&&e("")==null}catch{}return!1})}var isCallable$1=reflectApply?function t(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{reflectApply(e,null,badArrayLike)}catch(n){if(n!==isCallableMarker)return!1}return!isES6ClassFn(e)&&tryFunctionObject(e)}:function t(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(hasToStringTag$2)return tryFunctionObject(e);if(isES6ClassFn(e))return!1;var n=toStr$1.call(e);return n!==fnClass&&n!==genClass&&!/^\[object HTML/.test(n)?!1:tryFunctionObject(e)},isCallable=isCallable$1,toStr=Object.prototype.toString,hasOwnProperty$1=Object.prototype.hasOwnProperty,forEachArray=function t(e,n,a){for(var o=0,c=e.length;o<c;o++)hasOwnProperty$1.call(e,o)&&(a==null?n(e[o],o,e):n.call(a,e[o],o,e))},forEachString=function t(e,n,a){for(var o=0,c=e.length;o<c;o++)a==null?n(e.charAt(o),o,e):n.call(a,e.charAt(o),o,e)},forEachObject=function t(e,n,a){for(var o in e)hasOwnProperty$1.call(e,o)&&(a==null?n(e[o],o,e):n.call(a,e[o],o,e))},forEach$2=function t(e,n,a){if(!isCallable(n))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=a),toStr.call(e)==="[object Array]"?forEachArray(e,n,o):typeof e=="string"?forEachString(e,n,o):forEachObject(e,n,o)},forEach_1=forEach$2,possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g$2=typeof globalThis>"u"?commonjsGlobal:globalThis,availableTypedArrays$2=function t(){for(var e=[],n=0;n<possibleNames.length;n++)typeof g$2[possibleNames[n]]=="function"&&(e[e.length]=possibleNames[n]);return e},GetIntrinsic=getIntrinsic,$gOPD=GetIntrinsic("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd=$gOPD,forEach$1=forEach_1,availableTypedArrays$1=availableTypedArrays$2,callBound$1=callBound$3,$toString$1=callBound$1("Object.prototype.toString"),hasToStringTag$1=shams(),gOPD$1=gopd,g$1=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays$1=availableTypedArrays$1(),$indexOf=callBound$1("Array.prototype.indexOf",!0)||function t(e,n){for(var a=0;a<e.length;a+=1)if(e[a]===n)return a;return-1},$slice$1=callBound$1("String.prototype.slice"),toStrTags$1={},getPrototypeOf$1=Object.getPrototypeOf;hasToStringTag$1&&gOPD$1&&getPrototypeOf$1&&forEach$1(typedArrays$1,function(t){var e=new g$1[t];if(Symbol.toStringTag in e){var n=getPrototypeOf$1(e),a=gOPD$1(n,Symbol.toStringTag);if(!a){var o=getPrototypeOf$1(n);a=gOPD$1(o,Symbol.toStringTag)}toStrTags$1[t]=a.get}});var tryTypedArrays$1=function t(e){var n=!1;return forEach$1(toStrTags$1,function(a,o){if(!n)try{n=a.call(e)===o}catch{}}),n},isTypedArray$1=function t(e){if(!e||typeof e!="object")return!1;if(!hasToStringTag$1||!(Symbol.toStringTag in e)){var n=$slice$1($toString$1(e),8,-1);return $indexOf(typedArrays$1,n)>-1}return gOPD$1?tryTypedArrays$1(e):!1},forEach=forEach_1,availableTypedArrays=availableTypedArrays$2,callBound=callBound$3,gOPD=gopd,$toString=callBound("Object.prototype.toString"),hasToStringTag=shams(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays=availableTypedArrays(),$slice=callBound("String.prototype.slice"),toStrTags={},getPrototypeOf=Object.getPrototypeOf;hasToStringTag&&gOPD&&getPrototypeOf&&forEach(typedArrays,function(t){if(typeof g[t]=="function"){var e=new g[t];if(Symbol.toStringTag in e){var n=getPrototypeOf(e),a=gOPD(n,Symbol.toStringTag);if(!a){var o=getPrototypeOf(n);a=gOPD(o,Symbol.toStringTag)}toStrTags[t]=a.get}}});var tryTypedArrays=function t(e){var n=!1;return forEach(toStrTags,function(a,o){if(!n)try{var c=a.call(e);c===o&&(n=c)}catch{}}),n},isTypedArray=isTypedArray$1,whichTypedArray=function t(e){return isTypedArray(e)?!hasToStringTag||!(Symbol.toStringTag in e)?$slice($toString(e),8,-1):tryTypedArrays(e):!1};(function(t){var e=isArguments,n=isGeneratorFunction,a=whichTypedArray,o=isTypedArray$1;function c(ue){return ue.call.bind(ue)}var u=typeof BigInt<"u",l=typeof Symbol<"u",p=c(Object.prototype.toString),b=c(Number.prototype.valueOf),v=c(String.prototype.valueOf),x=c(Boolean.prototype.valueOf);if(u)var _=c(BigInt.prototype.valueOf);if(l)var E=c(Symbol.prototype.valueOf);function $(ue,pe){if(typeof ue!="object")return!1;try{return pe(ue),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=n,t.isTypedArray=o;function S(ue){return typeof Promise<"u"&&ue instanceof Promise||ue!==null&&typeof ue=="object"&&typeof ue.then=="function"&&typeof ue.catch=="function"}t.isPromise=S;function A(ue){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ue):o(ue)||Z(ue)}t.isArrayBufferView=A;function I(ue){return a(ue)==="Uint8Array"}t.isUint8Array=I;function O(ue){return a(ue)==="Uint8ClampedArray"}t.isUint8ClampedArray=O;function F(ue){return a(ue)==="Uint16Array"}t.isUint16Array=F;function U(ue){return a(ue)==="Uint32Array"}t.isUint32Array=U;function G(ue){return a(ue)==="Int8Array"}t.isInt8Array=G;function J(ue){return a(ue)==="Int16Array"}t.isInt16Array=J;function k(ue){return a(ue)==="Int32Array"}t.isInt32Array=k;function ne(ue){return a(ue)==="Float32Array"}t.isFloat32Array=ne;function ee(ue){return a(ue)==="Float64Array"}t.isFloat64Array=ee;function de(ue){return a(ue)==="BigInt64Array"}t.isBigInt64Array=de;function ae(ue){return a(ue)==="BigUint64Array"}t.isBigUint64Array=ae;function L(ue){return p(ue)==="[object Map]"}L.working=typeof Map<"u"&&L(new Map);function P(ue){return typeof Map>"u"?!1:L.working?L(ue):ue instanceof Map}t.isMap=P;function T(ue){return p(ue)==="[object Set]"}T.working=typeof Set<"u"&&T(new Set);function C(ue){return typeof Set>"u"?!1:T.working?T(ue):ue instanceof Set}t.isSet=C;function q(ue){return p(ue)==="[object WeakMap]"}q.working=typeof WeakMap<"u"&&q(new WeakMap);function z(ue){return typeof WeakMap>"u"?!1:q.working?q(ue):ue instanceof WeakMap}t.isWeakMap=z;function X(ue){return p(ue)==="[object WeakSet]"}X.working=typeof WeakSet<"u"&&X(new WeakSet);function W(ue){return X(ue)}t.isWeakSet=W;function M(ue){return p(ue)==="[object ArrayBuffer]"}M.working=typeof ArrayBuffer<"u"&&M(new ArrayBuffer);function D(ue){return typeof ArrayBuffer>"u"?!1:M.working?M(ue):ue instanceof ArrayBuffer}t.isArrayBuffer=D;function B(ue){return p(ue)==="[object DataView]"}B.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&B(new DataView(new ArrayBuffer(1),0,1));function Z(ue){return typeof DataView>"u"?!1:B.working?B(ue):ue instanceof DataView}t.isDataView=Z;var he=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function j(ue){return p(ue)==="[object SharedArrayBuffer]"}function fe(ue){return typeof he>"u"?!1:(typeof j.working>"u"&&(j.working=j(new he)),j.working?j(ue):ue instanceof he)}t.isSharedArrayBuffer=fe;function ie(ue){return p(ue)==="[object AsyncFunction]"}t.isAsyncFunction=ie;function oe(ue){return p(ue)==="[object Map Iterator]"}t.isMapIterator=oe;function ce(ue){return p(ue)==="[object Set Iterator]"}t.isSetIterator=ce;function V(ue){return p(ue)==="[object Generator]"}t.isGeneratorObject=V;function Q(ue){return p(ue)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=Q;function se(ue){return $(ue,b)}t.isNumberObject=se;function ye(ue){return $(ue,v)}t.isStringObject=ye;function be(ue){return $(ue,x)}t.isBooleanObject=be;function ve(ue){return u&&$(ue,_)}t.isBigIntObject=ve;function le(ue){return l&&$(ue,E)}t.isSymbolObject=le;function Y(ue){return se(ue)||ye(ue)||be(ue)||ve(ue)||le(ue)}t.isBoxedPrimitive=Y;function te(ue){return typeof Uint8Array<"u"&&(D(ue)||fe(ue))}t.isAnyArrayBuffer=te,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ue){Object.defineProperty(t,ue,{enumerable:!1,value:function(){throw new Error(ue+" is not supported in userland")}})})})(types);var isBufferBrowser=function t(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"};(function(t){var e=Object.getOwnPropertyDescriptors||function(Z){for(var he=Object.keys(Z),j={},fe=0;fe<he.length;fe++)j[he[fe]]=Object.getOwnPropertyDescriptor(Z,he[fe]);return j},n=/%[sdj%]/g;t.format=function(B){if(!G(B)){for(var Z=[],he=0;he<arguments.length;he++)Z.push(u(arguments[he]));return Z.join(" ")}for(var he=1,j=arguments,fe=j.length,ie=String(B).replace(n,function(ce){if(ce==="%%")return"%";if(he>=fe)return ce;switch(ce){case"%s":return String(j[he++]);case"%d":return Number(j[he++]);case"%j":try{return JSON.stringify(j[he++])}catch{return"[Circular]"}default:return ce}}),oe=j[he];he<fe;oe=j[++he])O(oe)||!ee(oe)?ie+=" "+oe:ie+=" "+u(oe);return ie},t.deprecate=function(B,Z){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return B;if(typeof process$1>"u")return function(){return t.deprecate(B,Z).apply(this,arguments)};var he=!1;function j(){if(!he){if(process$1.throwDeprecation)throw new Error(Z);process$1.traceDeprecation?console.trace(Z):console.error(Z),he=!0}return B.apply(this,arguments)}return j};var a={},o=/^$/;if({}.NODE_DEBUG){var c={}.NODE_DEBUG;c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+c+"$","i")}t.debuglog=function(B){if(B=B.toUpperCase(),!a[B])if(o.test(B)){var Z=process$1.pid;a[B]=function(){var he=t.format.apply(t,arguments);console.error("%s %d: %s",B,Z,he)}}else a[B]=function(){};return a[B]};function u(B,Z){var he={seen:[],stylize:p};return arguments.length>=3&&(he.depth=arguments[2]),arguments.length>=4&&(he.colors=arguments[3]),I(Z)?he.showHidden=Z:Z&&t._extend(he,Z),k(he.showHidden)&&(he.showHidden=!1),k(he.depth)&&(he.depth=2),k(he.colors)&&(he.colors=!1),k(he.customInspect)&&(he.customInspect=!0),he.colors&&(he.stylize=l),v(he,B,he.depth)}t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(B,Z){var he=u.styles[Z];return he?"\x1B["+u.colors[he][0]+"m"+B+"\x1B["+u.colors[he][1]+"m":B}function p(B,Z){return B}function b(B){var Z={};return B.forEach(function(he,j){Z[he]=!0}),Z}function v(B,Z,he){if(B.customInspect&&Z&&L(Z.inspect)&&Z.inspect!==t.inspect&&!(Z.constructor&&Z.constructor.prototype===Z)){var j=Z.inspect(he,B);return G(j)||(j=v(B,j,he)),j}var fe=x(B,Z);if(fe)return fe;var ie=Object.keys(Z),oe=b(ie);if(B.showHidden&&(ie=Object.getOwnPropertyNames(Z)),ae(Z)&&(ie.indexOf("message")>=0||ie.indexOf("description")>=0))return _(Z);if(ie.length===0){if(L(Z)){var ce=Z.name?": "+Z.name:"";return B.stylize("[Function"+ce+"]","special")}if(ne(Z))return B.stylize(RegExp.prototype.toString.call(Z),"regexp");if(de(Z))return B.stylize(Date.prototype.toString.call(Z),"date");if(ae(Z))return _(Z)}var V="",Q=!1,se=["{","}"];if(A(Z)&&(Q=!0,se=["[","]"]),L(Z)){var ye=Z.name?": "+Z.name:"";V=" [Function"+ye+"]"}if(ne(Z)&&(V=" "+RegExp.prototype.toString.call(Z)),de(Z)&&(V=" "+Date.prototype.toUTCString.call(Z)),ae(Z)&&(V=" "+_(Z)),ie.length===0&&(!Q||Z.length==0))return se[0]+V+se[1];if(he<0)return ne(Z)?B.stylize(RegExp.prototype.toString.call(Z),"regexp"):B.stylize("[Object]","special");B.seen.push(Z);var be;return Q?be=E(B,Z,he,oe,ie):be=ie.map(function(ve){return $(B,Z,he,oe,ve,Q)}),B.seen.pop(),S(be,V,se)}function x(B,Z){if(k(Z))return B.stylize("undefined","undefined");if(G(Z)){var he="'"+JSON.stringify(Z).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return B.stylize(he,"string")}if(U(Z))return B.stylize(""+Z,"number");if(I(Z))return B.stylize(""+Z,"boolean");if(O(Z))return B.stylize("null","null")}function _(B){return"["+Error.prototype.toString.call(B)+"]"}function E(B,Z,he,j,fe){for(var ie=[],oe=0,ce=Z.length;oe<ce;++oe)X(Z,String(oe))?ie.push($(B,Z,he,j,String(oe),!0)):ie.push("");return fe.forEach(function(V){V.match(/^\d+$/)||ie.push($(B,Z,he,j,V,!0))}),ie}function $(B,Z,he,j,fe,ie){var oe,ce,V;if(V=Object.getOwnPropertyDescriptor(Z,fe)||{value:Z[fe]},V.get?V.set?ce=B.stylize("[Getter/Setter]","special"):ce=B.stylize("[Getter]","special"):V.set&&(ce=B.stylize("[Setter]","special")),X(j,fe)||(oe="["+fe+"]"),ce||(B.seen.indexOf(V.value)<0?(O(he)?ce=v(B,V.value,null):ce=v(B,V.value,he-1),ce.indexOf(`
`)>-1&&(ie?ce=ce.split(`
`).map(function(Q){return"  "+Q}).join(`
`).slice(2):ce=`
`+ce.split(`
`).map(function(Q){return"   "+Q}).join(`
`))):ce=B.stylize("[Circular]","special")),k(oe)){if(ie&&fe.match(/^\d+$/))return ce;oe=JSON.stringify(""+fe),oe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(oe=oe.slice(1,-1),oe=B.stylize(oe,"name")):(oe=oe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),oe=B.stylize(oe,"string"))}return oe+": "+ce}function S(B,Z,he){var j=B.reduce(function(fe,ie){return ie.indexOf(`
`)>=0,fe+ie.replace(/\u001b\[\d\d?m/g,"").length+1},0);return j>60?he[0]+(Z===""?"":Z+`
 `)+" "+B.join(`,
  `)+" "+he[1]:he[0]+Z+" "+B.join(", ")+" "+he[1]}t.types=types;function A(B){return Array.isArray(B)}t.isArray=A;function I(B){return typeof B=="boolean"}t.isBoolean=I;function O(B){return B===null}t.isNull=O;function F(B){return B==null}t.isNullOrUndefined=F;function U(B){return typeof B=="number"}t.isNumber=U;function G(B){return typeof B=="string"}t.isString=G;function J(B){return typeof B=="symbol"}t.isSymbol=J;function k(B){return B===void 0}t.isUndefined=k;function ne(B){return ee(B)&&T(B)==="[object RegExp]"}t.isRegExp=ne,t.types.isRegExp=ne;function ee(B){return typeof B=="object"&&B!==null}t.isObject=ee;function de(B){return ee(B)&&T(B)==="[object Date]"}t.isDate=de,t.types.isDate=de;function ae(B){return ee(B)&&(T(B)==="[object Error]"||B instanceof Error)}t.isError=ae,t.types.isNativeError=ae;function L(B){return typeof B=="function"}t.isFunction=L;function P(B){return B===null||typeof B=="boolean"||typeof B=="number"||typeof B=="string"||typeof B=="symbol"||typeof B>"u"}t.isPrimitive=P,t.isBuffer=isBufferBrowser;function T(B){return Object.prototype.toString.call(B)}function C(B){return B<10?"0"+B.toString(10):B.toString(10)}var q=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function z(){var B=new Date,Z=[C(B.getHours()),C(B.getMinutes()),C(B.getSeconds())].join(":");return[B.getDate(),q[B.getMonth()],Z].join(" ")}t.log=function(){console.log("%s - %s",z(),t.format.apply(t,arguments))},t.inherits=inherits_browserExports,t._extend=function(B,Z){if(!Z||!ee(Z))return B;for(var he=Object.keys(Z),j=he.length;j--;)B[he[j]]=Z[he[j]];return B};function X(B,Z){return Object.prototype.hasOwnProperty.call(B,Z)}var W=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(Z){if(typeof Z!="function")throw new TypeError('The "original" argument must be of type Function');if(W&&Z[W]){var he=Z[W];if(typeof he!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(he,W,{value:he,enumerable:!1,writable:!1,configurable:!0}),he}function he(){for(var j,fe,ie=new Promise(function(V,Q){j=V,fe=Q}),oe=[],ce=0;ce<arguments.length;ce++)oe.push(arguments[ce]);oe.push(function(V,Q){V?fe(V):j(Q)});try{Z.apply(this,oe)}catch(V){fe(V)}return ie}return Object.setPrototypeOf(he,Object.getPrototypeOf(Z)),W&&Object.defineProperty(he,W,{value:he,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(he,e(Z))},t.promisify.custom=W;function M(B,Z){if(!B){var he=new Error("Promise was rejected with a falsy value");he.reason=B,B=he}return Z(B)}function D(B){if(typeof B!="function")throw new TypeError('The "original" argument must be of type Function');function Z(){for(var he=[],j=0;j<arguments.length;j++)he.push(arguments[j]);var fe=he.pop();if(typeof fe!="function")throw new TypeError("The last argument must be of type Function");var ie=this,oe=function(){return fe.apply(ie,arguments)};B.apply(this,he).then(function(ce){process$1.nextTick(oe.bind(null,null,ce))},function(ce){process$1.nextTick(M.bind(null,ce,oe))})}return Object.setPrototypeOf(Z,Object.getPrototypeOf(B)),Object.defineProperties(Z,e(B)),Z}t.callbackify=D})(util$3);var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t($,S){var A=Object.keys($);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols($);S&&(I=I.filter(function(O){return Object.getOwnPropertyDescriptor($,O).enumerable})),A.push.apply(A,I)}return A}function e($){for(var S=1;S<arguments.length;S++){var A=arguments[S]!=null?arguments[S]:{};S%2?t(Object(A),!0).forEach(function(I){n($,I,A[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties($,Object.getOwnPropertyDescriptors(A)):t(Object(A)).forEach(function(I){Object.defineProperty($,I,Object.getOwnPropertyDescriptor(A,I))})}return $}function n($,S,A){return S=u(S),S in $?Object.defineProperty($,S,{value:A,enumerable:!0,configurable:!0,writable:!0}):$[S]=A,$}function a($,S){if(!($ instanceof S))throw new TypeError("Cannot call a class as a function")}function o($,S){for(var A=0;A<S.length;A++){var I=S[A];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty($,u(I.key),I)}}function c($,S,A){return S&&o($.prototype,S),A&&o($,A),Object.defineProperty($,"prototype",{writable:!1}),$}function u($){var S=l($,"string");return typeof S=="symbol"?S:String(S)}function l($,S){if(typeof $!="object"||$===null)return $;var A=$[Symbol.toPrimitive];if(A!==void 0){var I=A.call($,S||"default");if(typeof I!="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)($)}var p=buffer$2,b=p.Buffer,v=util$3,x=v.inspect,_=x&&x.custom||"inspect";function E($,S,A){b.prototype.copy.call($,S,A)}return buffer_list=function(){function $(){a(this,$),this.head=null,this.tail=null,this.length=0}return c($,[{key:"push",value:function(A){var I={data:A,next:null};this.length>0?this.tail.next=I:this.head=I,this.tail=I,++this.length}},{key:"unshift",value:function(A){var I={data:A,next:this.head};this.length===0&&(this.tail=I),this.head=I,++this.length}},{key:"shift",value:function(){if(this.length!==0){var A=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,A}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(A){if(this.length===0)return"";for(var I=this.head,O=""+I.data;I=I.next;)O+=A+I.data;return O}},{key:"concat",value:function(A){if(this.length===0)return b.alloc(0);for(var I=b.allocUnsafe(A>>>0),O=this.head,F=0;O;)E(O.data,I,F),F+=O.data.length,O=O.next;return I}},{key:"consume",value:function(A,I){var O;return A<this.head.data.length?(O=this.head.data.slice(0,A),this.head.data=this.head.data.slice(A)):A===this.head.data.length?O=this.shift():O=I?this._getString(A):this._getBuffer(A),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(A){var I=this.head,O=1,F=I.data;for(A-=F.length;I=I.next;){var U=I.data,G=A>U.length?U.length:A;if(G===U.length?F+=U:F+=U.slice(0,A),A-=G,A===0){G===U.length?(++O,I.next?this.head=I.next:this.head=this.tail=null):(this.head=I,I.data=U.slice(G));break}++O}return this.length-=O,F}},{key:"_getBuffer",value:function(A){var I=b.allocUnsafe(A),O=this.head,F=1;for(O.data.copy(I),A-=O.data.length;O=O.next;){var U=O.data,G=A>U.length?U.length:A;if(U.copy(I,I.length-A,0,G),A-=G,A===0){G===U.length?(++F,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=U.slice(G));break}++F}return this.length-=F,I}},{key:_,value:function(A,I){return x(this,e(e({},I),{},{depth:0,customInspect:!1}))}}]),$}(),buffer_list}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;function t(u,l){var p=this,b=this._readableState&&this._readableState.destroyed,v=this._writableState&&this._writableState.destroyed;return b||v?(l?l(u):u&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(o,this,u)):process$1.nextTick(o,this,u)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(u||null,function(x){!l&&x?p._writableState?p._writableState.errorEmitted?process$1.nextTick(n,p):(p._writableState.errorEmitted=!0,process$1.nextTick(e,p,x)):process$1.nextTick(e,p,x):l?(process$1.nextTick(n,p),l(x)):process$1.nextTick(n,p)}),this)}function e(u,l){o(u,l),n(u)}function n(u){u._writableState&&!u._writableState.emitClose||u._readableState&&!u._readableState.emitClose||u.emit("close")}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(u,l){u.emit("error",l)}function c(u,l){var p=u._readableState,b=u._writableState;p&&p.autoDestroy||b&&b.autoDestroy?u.destroy(l):u.emit("error",l)}return destroy_1={destroy:t,undestroy:a,errorOrDestroy:c},destroy_1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function t(l,p){l.prototype=Object.create(p.prototype),l.prototype.constructor=l,l.__proto__=p}var e={};function n(l,p,b){b||(b=Error);function v(_,E,$){return typeof p=="string"?p:p(_,E,$)}var x=function(_){t(E,_);function E($,S,A){return _.call(this,v($,S,A))||this}return E}(b);x.prototype.name=b.name,x.prototype.code=l,e[l]=x}function a(l,p){if(Array.isArray(l)){var b=l.length;return l=l.map(function(v){return String(v)}),b>2?"one of ".concat(p," ").concat(l.slice(0,b-1).join(", "),", or ")+l[b-1]:b===2?"one of ".concat(p," ").concat(l[0]," or ").concat(l[1]):"of ".concat(p," ").concat(l[0])}else return"of ".concat(p," ").concat(String(l))}function o(l,p,b){return l.substr(!b||b<0?0:+b,p.length)===p}function c(l,p,b){return(b===void 0||b>l.length)&&(b=l.length),l.substring(b-p.length,b)===p}function u(l,p,b){return typeof b!="number"&&(b=0),b+p.length>l.length?!1:l.indexOf(p,b)!==-1}return n("ERR_INVALID_OPT_VALUE",function(l,p){return'The value "'+p+'" is invalid for option "'+l+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(l,p,b){var v;typeof p=="string"&&o(p,"not ")?(v="must not be",p=p.replace(/^not /,"")):v="must be";var x;if(c(l," argument"))x="The ".concat(l," ").concat(v," ").concat(a(p,"type"));else{var _=u(l,".")?"property":"argument";x='The "'.concat(l,'" ').concat(_," ").concat(v," ").concat(a(p,"type"))}return x+=". Received type ".concat(typeof b),x},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var t=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function e(a,o,c){return a.highWaterMark!=null?a.highWaterMark:o?a[c]:null}function n(a,o,c,u){var l=e(o,u,c);if(l!=null){if(!(isFinite(l)&&Math.floor(l)===l)||l<0){var p=u?c:"highWaterMark";throw new t(p,l)}return Math.floor(l)}return a.objectMode?16:16*1024}return state={getHighWaterMark:n},state}var browser$e,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$e;hasRequiredBrowser$a=1,browser$e=t;function t(n,a){if(e("noDeprecation"))return n;var o=!1;function c(){if(!o){if(e("throwDeprecation"))throw new Error(a);e("traceDeprecation")?console.trace(a):console.warn(a),o=!0}return n.apply(this,arguments)}return c}function e(n){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var a=commonjsGlobal.localStorage[n];return a==null?!1:String(a).toLowerCase()==="true"}return browser$e}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=ne;function t(fe){var ie=this;this.next=null,this.entry=null,this.finish=function(){j(ie,fe)}}var e;ne.WritableState=J;var n={deprecate:requireBrowser$a()},a=requireStreamBrowser(),o=buffer$2.Buffer,c=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function u(fe){return o.from(fe)}function l(fe){return o.isBuffer(fe)||fe instanceof c}var p=requireDestroy(),b=requireState(),v=b.getHighWaterMark,x=requireErrorsBrowser().codes,_=x.ERR_INVALID_ARG_TYPE,E=x.ERR_METHOD_NOT_IMPLEMENTED,$=x.ERR_MULTIPLE_CALLBACK,S=x.ERR_STREAM_CANNOT_PIPE,A=x.ERR_STREAM_DESTROYED,I=x.ERR_STREAM_NULL_VALUES,O=x.ERR_STREAM_WRITE_AFTER_END,F=x.ERR_UNKNOWN_ENCODING,U=p.errorOrDestroy;inherits_browserExports(ne,a);function G(){}function J(fe,ie,oe){e=e||require_stream_duplex(),fe=fe||{},typeof oe!="boolean"&&(oe=ie instanceof e),this.objectMode=!!fe.objectMode,oe&&(this.objectMode=this.objectMode||!!fe.writableObjectMode),this.highWaterMark=v(this,fe,"writableHighWaterMark",oe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ce=fe.decodeStrings===!1;this.decodeStrings=!ce,this.defaultEncoding=fe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(V){q(ie,V)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=fe.emitClose!==!1,this.autoDestroy=!!fe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}J.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,oe=[];ie;)oe.push(ie),ie=ie.next;return oe},function(){try{Object.defineProperty(J.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var k;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(ne,Symbol.hasInstance,{value:function(ie){return k.call(this,ie)?!0:this!==ne?!1:ie&&ie._writableState instanceof J}})):k=function(ie){return ie instanceof this};function ne(fe){e=e||require_stream_duplex();var ie=this instanceof e;if(!ie&&!k.call(ne,this))return new ne(fe);this._writableState=new J(fe,this,ie),this.writable=!0,fe&&(typeof fe.write=="function"&&(this._write=fe.write),typeof fe.writev=="function"&&(this._writev=fe.writev),typeof fe.destroy=="function"&&(this._destroy=fe.destroy),typeof fe.final=="function"&&(this._final=fe.final)),a.call(this)}ne.prototype.pipe=function(){U(this,new S)};function ee(fe,ie){var oe=new O;U(fe,oe),process$1.nextTick(ie,oe)}function de(fe,ie,oe,ce){var V;return oe===null?V=new I:typeof oe!="string"&&!ie.objectMode&&(V=new _("chunk",["string","Buffer"],oe)),V?(U(fe,V),process$1.nextTick(ce,V),!1):!0}ne.prototype.write=function(fe,ie,oe){var ce=this._writableState,V=!1,Q=!ce.objectMode&&l(fe);return Q&&!o.isBuffer(fe)&&(fe=u(fe)),typeof ie=="function"&&(oe=ie,ie=null),Q?ie="buffer":ie||(ie=ce.defaultEncoding),typeof oe!="function"&&(oe=G),ce.ending?ee(this,oe):(Q||de(this,ce,fe,oe))&&(ce.pendingcb++,V=L(this,ce,Q,fe,ie,oe)),V},ne.prototype.cork=function(){this._writableState.corked++},ne.prototype.uncork=function(){var fe=this._writableState;fe.corked&&(fe.corked--,!fe.writing&&!fe.corked&&!fe.bufferProcessing&&fe.bufferedRequest&&W(this,fe))},ne.prototype.setDefaultEncoding=function(ie){if(typeof ie=="string"&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new F(ie);return this._writableState.defaultEncoding=ie,this},Object.defineProperty(ne.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ae(fe,ie,oe){return!fe.objectMode&&fe.decodeStrings!==!1&&typeof ie=="string"&&(ie=o.from(ie,oe)),ie}Object.defineProperty(ne.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function L(fe,ie,oe,ce,V,Q){if(!oe){var se=ae(ie,ce,V);ce!==se&&(oe=!0,V="buffer",ce=se)}var ye=ie.objectMode?1:ce.length;ie.length+=ye;var be=ie.length<ie.highWaterMark;if(be||(ie.needDrain=!0),ie.writing||ie.corked){var ve=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:ce,encoding:V,isBuf:oe,callback:Q,next:null},ve?ve.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else P(fe,ie,!1,ye,ce,V,Q);return be}function P(fe,ie,oe,ce,V,Q,se){ie.writelen=ce,ie.writecb=se,ie.writing=!0,ie.sync=!0,ie.destroyed?ie.onwrite(new A("write")):oe?fe._writev(V,ie.onwrite):fe._write(V,Q,ie.onwrite),ie.sync=!1}function T(fe,ie,oe,ce,V){--ie.pendingcb,oe?(process$1.nextTick(V,ce),process$1.nextTick(Z,fe,ie),fe._writableState.errorEmitted=!0,U(fe,ce)):(V(ce),fe._writableState.errorEmitted=!0,U(fe,ce),Z(fe,ie))}function C(fe){fe.writing=!1,fe.writecb=null,fe.length-=fe.writelen,fe.writelen=0}function q(fe,ie){var oe=fe._writableState,ce=oe.sync,V=oe.writecb;if(typeof V!="function")throw new $;if(C(oe),ie)T(fe,oe,ce,ie,V);else{var Q=M(oe)||fe.destroyed;!Q&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&W(fe,oe),ce?process$1.nextTick(z,fe,oe,Q,V):z(fe,oe,Q,V)}}function z(fe,ie,oe,ce){oe||X(fe,ie),ie.pendingcb--,ce(),Z(fe,ie)}function X(fe,ie){ie.length===0&&ie.needDrain&&(ie.needDrain=!1,fe.emit("drain"))}function W(fe,ie){ie.bufferProcessing=!0;var oe=ie.bufferedRequest;if(fe._writev&&oe&&oe.next){var ce=ie.bufferedRequestCount,V=new Array(ce),Q=ie.corkedRequestsFree;Q.entry=oe;for(var se=0,ye=!0;oe;)V[se]=oe,oe.isBuf||(ye=!1),oe=oe.next,se+=1;V.allBuffers=ye,P(fe,ie,!0,ie.length,V,"",Q.finish),ie.pendingcb++,ie.lastBufferedRequest=null,Q.next?(ie.corkedRequestsFree=Q.next,Q.next=null):ie.corkedRequestsFree=new t(ie),ie.bufferedRequestCount=0}else{for(;oe;){var be=oe.chunk,ve=oe.encoding,le=oe.callback,Y=ie.objectMode?1:be.length;if(P(fe,ie,!1,Y,be,ve,le),oe=oe.next,ie.bufferedRequestCount--,ie.writing)break}oe===null&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=oe,ie.bufferProcessing=!1}ne.prototype._write=function(fe,ie,oe){oe(new E("_write()"))},ne.prototype._writev=null,ne.prototype.end=function(fe,ie,oe){var ce=this._writableState;return typeof fe=="function"?(oe=fe,fe=null,ie=null):typeof ie=="function"&&(oe=ie,ie=null),fe!=null&&this.write(fe,ie),ce.corked&&(ce.corked=1,this.uncork()),ce.ending||he(this,ce,oe),this},Object.defineProperty(ne.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function M(fe){return fe.ending&&fe.length===0&&fe.bufferedRequest===null&&!fe.finished&&!fe.writing}function D(fe,ie){fe._final(function(oe){ie.pendingcb--,oe&&U(fe,oe),ie.prefinished=!0,fe.emit("prefinish"),Z(fe,ie)})}function B(fe,ie){!ie.prefinished&&!ie.finalCalled&&(typeof fe._final=="function"&&!ie.destroyed?(ie.pendingcb++,ie.finalCalled=!0,process$1.nextTick(D,fe,ie)):(ie.prefinished=!0,fe.emit("prefinish")))}function Z(fe,ie){var oe=M(ie);if(oe&&(B(fe,ie),ie.pendingcb===0&&(ie.finished=!0,fe.emit("finish"),ie.autoDestroy))){var ce=fe._readableState;(!ce||ce.autoDestroy&&ce.endEmitted)&&fe.destroy()}return oe}function he(fe,ie,oe){ie.ending=!0,Z(fe,ie),oe&&(ie.finished?process$1.nextTick(oe):fe.once("finish",oe)),ie.ended=!0,fe.writable=!1}function j(fe,ie,oe){var ce=fe.entry;for(fe.entry=null;ce;){var V=ce.callback;ie.pendingcb--,V(oe),ce=ce.next}ie.corkedRequestsFree.next=fe}return Object.defineProperty(ne.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ie){this._writableState&&(this._writableState.destroyed=ie)}}),ne.prototype.destroy=p.destroy,ne.prototype._undestroy=p.undestroy,ne.prototype._destroy=function(fe,ie){ie(fe)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=Object.keys||function(b){var v=[];for(var x in b)v.push(x);return v};_stream_duplex=u;var e=require_stream_readable(),n=require_stream_writable();inherits_browserExports(u,e);for(var a=t(n.prototype),o=0;o<a.length;o++){var c=a[o];u.prototype[c]||(u.prototype[c]=n.prototype[c])}function u(b){if(!(this instanceof u))return new u(b);e.call(this,b),n.call(this,b),this.allowHalfOpen=!0,b&&(b.readable===!1&&(this.readable=!1),b.writable===!1&&(this.writable=!1),b.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",l)))}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function l(){this._writableState.ended||process$1.nextTick(p,this)}function p(b){b.end()}return Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(v){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=v,this._writableState.destroyed=v)}}),_stream_duplex}var string_decoder={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var t=safeBufferExports.Buffer,e=t.isEncoding||function(I){switch(I=""+I,I&&I.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(I){if(!I)return"utf8";for(var O;;)switch(I){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return I;default:if(O)return;I=(""+I).toLowerCase(),O=!0}}function a(I){var O=n(I);if(typeof O!="string"&&(t.isEncoding===e||!e(I)))throw new Error("Unknown encoding: "+I);return O||I}string_decoder.StringDecoder=o;function o(I){this.encoding=a(I);var O;switch(this.encoding){case"utf16le":this.text=x,this.end=_,O=4;break;case"utf8":this.fillLast=p,O=4;break;case"base64":this.text=E,this.end=$,O=3;break;default:this.write=S,this.end=A;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(O)}o.prototype.write=function(I){if(I.length===0)return"";var O,F;if(this.lastNeed){if(O=this.fillLast(I),O===void 0)return"";F=this.lastNeed,this.lastNeed=0}else F=0;return F<I.length?O?O+this.text(I,F):this.text(I,F):O||""},o.prototype.end=v,o.prototype.text=b,o.prototype.fillLast=function(I){if(this.lastNeed<=I.length)return I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,this.lastTotal-this.lastNeed,0,I.length),this.lastNeed-=I.length};function c(I){return I<=127?0:I>>5===6?2:I>>4===14?3:I>>3===30?4:I>>6===2?-1:-2}function u(I,O,F){var U=O.length-1;if(U<F)return 0;var G=c(O[U]);return G>=0?(G>0&&(I.lastNeed=G-1),G):--U<F||G===-2?0:(G=c(O[U]),G>=0?(G>0&&(I.lastNeed=G-2),G):--U<F||G===-2?0:(G=c(O[U]),G>=0?(G>0&&(G===2?G=0:I.lastNeed=G-3),G):0))}function l(I,O,F){if((O[0]&192)!==128)return I.lastNeed=0,"�";if(I.lastNeed>1&&O.length>1){if((O[1]&192)!==128)return I.lastNeed=1,"�";if(I.lastNeed>2&&O.length>2&&(O[2]&192)!==128)return I.lastNeed=2,"�"}}function p(I){var O=this.lastTotal-this.lastNeed,F=l(this,I);if(F!==void 0)return F;if(this.lastNeed<=I.length)return I.copy(this.lastChar,O,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);I.copy(this.lastChar,O,0,I.length),this.lastNeed-=I.length}function b(I,O){var F=u(this,I,O);if(!this.lastNeed)return I.toString("utf8",O);this.lastTotal=F;var U=I.length-(F-this.lastNeed);return I.copy(this.lastChar,0,U),I.toString("utf8",O,U)}function v(I){var O=I&&I.length?this.write(I):"";return this.lastNeed?O+"�":O}function x(I,O){if((I.length-O)%2===0){var F=I.toString("utf16le",O);if(F){var U=F.charCodeAt(F.length-1);if(U>=55296&&U<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1],F.slice(0,-1)}return F}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=I[I.length-1],I.toString("utf16le",O,I.length-1)}function _(I){var O=I&&I.length?this.write(I):"";if(this.lastNeed){var F=this.lastTotal-this.lastNeed;return O+this.lastChar.toString("utf16le",0,F)}return O}function E(I,O){var F=(I.length-O)%3;return F===0?I.toString("base64",O):(this.lastNeed=3-F,this.lastTotal=3,F===1?this.lastChar[0]=I[I.length-1]:(this.lastChar[0]=I[I.length-2],this.lastChar[1]=I[I.length-1]),I.toString("base64",O,I.length-F))}function $(I){var O=I&&I.length?this.write(I):"";return this.lastNeed?O+this.lastChar.toString("base64",0,3-this.lastNeed):O}function S(I){return I.toString(this.encoding)}function A(I){return I&&I.length?this.write(I):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var t=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function e(c){var u=!1;return function(){if(!u){u=!0;for(var l=arguments.length,p=new Array(l),b=0;b<l;b++)p[b]=arguments[b];c.apply(this,p)}}}function n(){}function a(c){return c.setHeader&&typeof c.abort=="function"}function o(c,u,l){if(typeof u=="function")return o(c,null,u);u||(u={}),l=e(l||n);var p=u.readable||u.readable!==!1&&c.readable,b=u.writable||u.writable!==!1&&c.writable,v=function(){c.writable||_()},x=c._writableState&&c._writableState.finished,_=function(){b=!1,x=!0,p||l.call(c)},E=c._readableState&&c._readableState.endEmitted,$=function(){p=!1,E=!0,b||l.call(c)},S=function(F){l.call(c,F)},A=function(){var F;if(p&&!E)return(!c._readableState||!c._readableState.ended)&&(F=new t),l.call(c,F);if(b&&!x)return(!c._writableState||!c._writableState.ended)&&(F=new t),l.call(c,F)},I=function(){c.req.on("finish",_)};return a(c)?(c.on("complete",_),c.on("abort",A),c.req?I():c.on("request",I)):b&&!c._writableState&&(c.on("end",v),c.on("close",v)),c.on("end",$),c.on("finish",_),u.error!==!1&&c.on("error",S),c.on("close",A),function(){c.removeListener("complete",_),c.removeListener("abort",A),c.removeListener("request",I),c.req&&c.req.removeListener("finish",_),c.removeListener("end",v),c.removeListener("close",v),c.removeListener("finish",_),c.removeListener("end",$),c.removeListener("error",S),c.removeListener("close",A)}}return endOfStream=o,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(F,U,G){return U=n(U),U in F?Object.defineProperty(F,U,{value:G,enumerable:!0,configurable:!0,writable:!0}):F[U]=G,F}function n(F){var U=a(F,"string");return typeof U=="symbol"?U:String(U)}function a(F,U){if(typeof F!="object"||F===null)return F;var G=F[Symbol.toPrimitive];if(G!==void 0){var J=G.call(F,U||"default");if(typeof J!="object")return J;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(F)}var o=requireEndOfStream(),c=Symbol("lastResolve"),u=Symbol("lastReject"),l=Symbol("error"),p=Symbol("ended"),b=Symbol("lastPromise"),v=Symbol("handlePromise"),x=Symbol("stream");function _(F,U){return{value:F,done:U}}function E(F){var U=F[c];if(U!==null){var G=F[x].read();G!==null&&(F[b]=null,F[c]=null,F[u]=null,U(_(G,!1)))}}function $(F){process$1.nextTick(E,F)}function S(F,U){return function(G,J){F.then(function(){if(U[p]){G(_(void 0,!0));return}U[v](G,J)},J)}}var A=Object.getPrototypeOf(function(){}),I=Object.setPrototypeOf((t={get stream(){return this[x]},next:function(){var U=this,G=this[l];if(G!==null)return Promise.reject(G);if(this[p])return Promise.resolve(_(void 0,!0));if(this[x].destroyed)return new Promise(function(ee,de){process$1.nextTick(function(){U[l]?de(U[l]):ee(_(void 0,!0))})});var J=this[b],k;if(J)k=new Promise(S(J,this));else{var ne=this[x].read();if(ne!==null)return Promise.resolve(_(ne,!1));k=new Promise(this[v])}return this[b]=k,k}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var U=this;return new Promise(function(G,J){U[x].destroy(null,function(k){if(k){J(k);return}G(_(void 0,!0))})})}),t),A),O=function(U){var G,J=Object.create(I,(G={},e(G,x,{value:U,writable:!0}),e(G,c,{value:null,writable:!0}),e(G,u,{value:null,writable:!0}),e(G,l,{value:null,writable:!0}),e(G,p,{value:U._readableState.endEmitted,writable:!0}),e(G,v,{value:function(ne,ee){var de=J[x].read();de?(J[b]=null,J[c]=null,J[u]=null,ne(_(de,!1))):(J[c]=ne,J[u]=ee)},writable:!0}),G));return J[b]=null,o(U,function(k){if(k&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ne=J[u];ne!==null&&(J[b]=null,J[c]=null,J[u]=null,ne(k)),J[l]=k;return}var ee=J[c];ee!==null&&(J[b]=null,J[c]=null,J[u]=null,ee(_(void 0,!0))),J[p]=!0}),U.on("readable",$.bind(null,J)),J};return async_iterator=O,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=ee;var t;ee.ReadableState=ne,eventsExports.EventEmitter;var e=function(se,ye){return se.listeners(ye).length},n=requireStreamBrowser(),a=buffer$2.Buffer,o=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function c(Q){return a.from(Q)}function u(Q){return a.isBuffer(Q)||Q instanceof o}var l=util$3,p;l&&l.debuglog?p=l.debuglog("stream"):p=function(){};var b=requireBuffer_list(),v=requireDestroy(),x=requireState(),_=x.getHighWaterMark,E=requireErrorsBrowser().codes,$=E.ERR_INVALID_ARG_TYPE,S=E.ERR_STREAM_PUSH_AFTER_EOF,A=E.ERR_METHOD_NOT_IMPLEMENTED,I=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,O,F,U;inherits_browserExports(ee,n);var G=v.errorOrDestroy,J=["error","close","destroy","pause","resume"];function k(Q,se,ye){if(typeof Q.prependListener=="function")return Q.prependListener(se,ye);!Q._events||!Q._events[se]?Q.on(se,ye):Array.isArray(Q._events[se])?Q._events[se].unshift(ye):Q._events[se]=[ye,Q._events[se]]}function ne(Q,se,ye){t=t||require_stream_duplex(),Q=Q||{},typeof ye!="boolean"&&(ye=se instanceof t),this.objectMode=!!Q.objectMode,ye&&(this.objectMode=this.objectMode||!!Q.readableObjectMode),this.highWaterMark=_(this,Q,"readableHighWaterMark",ye),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Q.emitClose!==!1,this.autoDestroy=!!Q.autoDestroy,this.destroyed=!1,this.defaultEncoding=Q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Q.encoding&&(O||(O=requireString_decoder().StringDecoder),this.decoder=new O(Q.encoding),this.encoding=Q.encoding)}function ee(Q){if(t=t||require_stream_duplex(),!(this instanceof ee))return new ee(Q);var se=this instanceof t;this._readableState=new ne(Q,this,se),this.readable=!0,Q&&(typeof Q.read=="function"&&(this._read=Q.read),typeof Q.destroy=="function"&&(this._destroy=Q.destroy)),n.call(this)}Object.defineProperty(ee.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(se){this._readableState&&(this._readableState.destroyed=se)}}),ee.prototype.destroy=v.destroy,ee.prototype._undestroy=v.undestroy,ee.prototype._destroy=function(Q,se){se(Q)},ee.prototype.push=function(Q,se){var ye=this._readableState,be;return ye.objectMode?be=!0:typeof Q=="string"&&(se=se||ye.defaultEncoding,se!==ye.encoding&&(Q=a.from(Q,se),se=""),be=!0),de(this,Q,se,!1,be)},ee.prototype.unshift=function(Q){return de(this,Q,null,!0,!1)};function de(Q,se,ye,be,ve){p("readableAddChunk",se);var le=Q._readableState;if(se===null)le.reading=!1,q(Q,le);else{var Y;if(ve||(Y=L(le,se)),Y)G(Q,Y);else if(le.objectMode||se&&se.length>0)if(typeof se!="string"&&!le.objectMode&&Object.getPrototypeOf(se)!==a.prototype&&(se=c(se)),be)le.endEmitted?G(Q,new I):ae(Q,le,se,!0);else if(le.ended)G(Q,new S);else{if(le.destroyed)return!1;le.reading=!1,le.decoder&&!ye?(se=le.decoder.write(se),le.objectMode||se.length!==0?ae(Q,le,se,!1):W(Q,le)):ae(Q,le,se,!1)}else be||(le.reading=!1,W(Q,le))}return!le.ended&&(le.length<le.highWaterMark||le.length===0)}function ae(Q,se,ye,be){se.flowing&&se.length===0&&!se.sync?(se.awaitDrain=0,Q.emit("data",ye)):(se.length+=se.objectMode?1:ye.length,be?se.buffer.unshift(ye):se.buffer.push(ye),se.needReadable&&z(Q)),W(Q,se)}function L(Q,se){var ye;return!u(se)&&typeof se!="string"&&se!==void 0&&!Q.objectMode&&(ye=new $("chunk",["string","Buffer","Uint8Array"],se)),ye}ee.prototype.isPaused=function(){return this._readableState.flowing===!1},ee.prototype.setEncoding=function(Q){O||(O=requireString_decoder().StringDecoder);var se=new O(Q);this._readableState.decoder=se,this._readableState.encoding=this._readableState.decoder.encoding;for(var ye=this._readableState.buffer.head,be="";ye!==null;)be+=se.write(ye.data),ye=ye.next;return this._readableState.buffer.clear(),be!==""&&this._readableState.buffer.push(be),this._readableState.length=be.length,this};var P=1073741824;function T(Q){return Q>=P?Q=P:(Q--,Q|=Q>>>1,Q|=Q>>>2,Q|=Q>>>4,Q|=Q>>>8,Q|=Q>>>16,Q++),Q}function C(Q,se){return Q<=0||se.length===0&&se.ended?0:se.objectMode?1:Q!==Q?se.flowing&&se.length?se.buffer.head.data.length:se.length:(Q>se.highWaterMark&&(se.highWaterMark=T(Q)),Q<=se.length?Q:se.ended?se.length:(se.needReadable=!0,0))}ee.prototype.read=function(Q){p("read",Q),Q=parseInt(Q,10);var se=this._readableState,ye=Q;if(Q!==0&&(se.emittedReadable=!1),Q===0&&se.needReadable&&((se.highWaterMark!==0?se.length>=se.highWaterMark:se.length>0)||se.ended))return p("read: emitReadable",se.length,se.ended),se.length===0&&se.ended?oe(this):z(this),null;if(Q=C(Q,se),Q===0&&se.ended)return se.length===0&&oe(this),null;var be=se.needReadable;p("need readable",be),(se.length===0||se.length-Q<se.highWaterMark)&&(be=!0,p("length less than watermark",be)),se.ended||se.reading?(be=!1,p("reading or ended",be)):be&&(p("do read"),se.reading=!0,se.sync=!0,se.length===0&&(se.needReadable=!0),this._read(se.highWaterMark),se.sync=!1,se.reading||(Q=C(ye,se)));var ve;return Q>0?ve=ie(Q,se):ve=null,ve===null?(se.needReadable=se.length<=se.highWaterMark,Q=0):(se.length-=Q,se.awaitDrain=0),se.length===0&&(se.ended||(se.needReadable=!0),ye!==Q&&se.ended&&oe(this)),ve!==null&&this.emit("data",ve),ve};function q(Q,se){if(p("onEofChunk"),!se.ended){if(se.decoder){var ye=se.decoder.end();ye&&ye.length&&(se.buffer.push(ye),se.length+=se.objectMode?1:ye.length)}se.ended=!0,se.sync?z(Q):(se.needReadable=!1,se.emittedReadable||(se.emittedReadable=!0,X(Q)))}}function z(Q){var se=Q._readableState;p("emitReadable",se.needReadable,se.emittedReadable),se.needReadable=!1,se.emittedReadable||(p("emitReadable",se.flowing),se.emittedReadable=!0,process$1.nextTick(X,Q))}function X(Q){var se=Q._readableState;p("emitReadable_",se.destroyed,se.length,se.ended),!se.destroyed&&(se.length||se.ended)&&(Q.emit("readable"),se.emittedReadable=!1),se.needReadable=!se.flowing&&!se.ended&&se.length<=se.highWaterMark,fe(Q)}function W(Q,se){se.readingMore||(se.readingMore=!0,process$1.nextTick(M,Q,se))}function M(Q,se){for(;!se.reading&&!se.ended&&(se.length<se.highWaterMark||se.flowing&&se.length===0);){var ye=se.length;if(p("maybeReadMore read 0"),Q.read(0),ye===se.length)break}se.readingMore=!1}ee.prototype._read=function(Q){G(this,new A("_read()"))},ee.prototype.pipe=function(Q,se){var ye=this,be=this._readableState;switch(be.pipesCount){case 0:be.pipes=Q;break;case 1:be.pipes=[be.pipes,Q];break;default:be.pipes.push(Q);break}be.pipesCount+=1,p("pipe count=%d opts=%j",be.pipesCount,se);var ve=(!se||se.end!==!1)&&Q!==process$1.stdout&&Q!==process$1.stderr,le=ve?te:$e;be.endEmitted?process$1.nextTick(le):ye.once("end",le),Q.on("unpipe",Y);function Y(_e,Te){p("onunpipe"),_e===ye&&Te&&Te.hasUnpiped===!1&&(Te.hasUnpiped=!0,ge())}function te(){p("onend"),Q.end()}var ue=D(ye);Q.on("drain",ue);var pe=!1;function ge(){p("cleanup"),Q.removeListener("close",xe),Q.removeListener("finish",Ee),Q.removeListener("drain",ue),Q.removeListener("error",we),Q.removeListener("unpipe",Y),ye.removeListener("end",te),ye.removeListener("end",$e),ye.removeListener("data",me),pe=!0,be.awaitDrain&&(!Q._writableState||Q._writableState.needDrain)&&ue()}ye.on("data",me);function me(_e){p("ondata");var Te=Q.write(_e);p("dest.write",Te),Te===!1&&((be.pipesCount===1&&be.pipes===Q||be.pipesCount>1&&V(be.pipes,Q)!==-1)&&!pe&&(p("false write response, pause",be.awaitDrain),be.awaitDrain++),ye.pause())}function we(_e){p("onerror",_e),$e(),Q.removeListener("error",we),e(Q,"error")===0&&G(Q,_e)}k(Q,"error",we);function xe(){Q.removeListener("finish",Ee),$e()}Q.once("close",xe);function Ee(){p("onfinish"),Q.removeListener("close",xe),$e()}Q.once("finish",Ee);function $e(){p("unpipe"),ye.unpipe(Q)}return Q.emit("pipe",ye),be.flowing||(p("pipe resume"),ye.resume()),Q};function D(Q){return function(){var ye=Q._readableState;p("pipeOnDrain",ye.awaitDrain),ye.awaitDrain&&ye.awaitDrain--,ye.awaitDrain===0&&e(Q,"data")&&(ye.flowing=!0,fe(Q))}}ee.prototype.unpipe=function(Q){var se=this._readableState,ye={hasUnpiped:!1};if(se.pipesCount===0)return this;if(se.pipesCount===1)return Q&&Q!==se.pipes?this:(Q||(Q=se.pipes),se.pipes=null,se.pipesCount=0,se.flowing=!1,Q&&Q.emit("unpipe",this,ye),this);if(!Q){var be=se.pipes,ve=se.pipesCount;se.pipes=null,se.pipesCount=0,se.flowing=!1;for(var le=0;le<ve;le++)be[le].emit("unpipe",this,{hasUnpiped:!1});return this}var Y=V(se.pipes,Q);return Y===-1?this:(se.pipes.splice(Y,1),se.pipesCount-=1,se.pipesCount===1&&(se.pipes=se.pipes[0]),Q.emit("unpipe",this,ye),this)},ee.prototype.on=function(Q,se){var ye=n.prototype.on.call(this,Q,se),be=this._readableState;return Q==="data"?(be.readableListening=this.listenerCount("readable")>0,be.flowing!==!1&&this.resume()):Q==="readable"&&!be.endEmitted&&!be.readableListening&&(be.readableListening=be.needReadable=!0,be.flowing=!1,be.emittedReadable=!1,p("on readable",be.length,be.reading),be.length?z(this):be.reading||process$1.nextTick(Z,this)),ye},ee.prototype.addListener=ee.prototype.on,ee.prototype.removeListener=function(Q,se){var ye=n.prototype.removeListener.call(this,Q,se);return Q==="readable"&&process$1.nextTick(B,this),ye},ee.prototype.removeAllListeners=function(Q){var se=n.prototype.removeAllListeners.apply(this,arguments);return(Q==="readable"||Q===void 0)&&process$1.nextTick(B,this),se};function B(Q){var se=Q._readableState;se.readableListening=Q.listenerCount("readable")>0,se.resumeScheduled&&!se.paused?se.flowing=!0:Q.listenerCount("data")>0&&Q.resume()}function Z(Q){p("readable nexttick read 0"),Q.read(0)}ee.prototype.resume=function(){var Q=this._readableState;return Q.flowing||(p("resume"),Q.flowing=!Q.readableListening,he(this,Q)),Q.paused=!1,this};function he(Q,se){se.resumeScheduled||(se.resumeScheduled=!0,process$1.nextTick(j,Q,se))}function j(Q,se){p("resume",se.reading),se.reading||Q.read(0),se.resumeScheduled=!1,Q.emit("resume"),fe(Q),se.flowing&&!se.reading&&Q.read(0)}ee.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function fe(Q){var se=Q._readableState;for(p("flow",se.flowing);se.flowing&&Q.read()!==null;);}ee.prototype.wrap=function(Q){var se=this,ye=this._readableState,be=!1;Q.on("end",function(){if(p("wrapped end"),ye.decoder&&!ye.ended){var Y=ye.decoder.end();Y&&Y.length&&se.push(Y)}se.push(null)}),Q.on("data",function(Y){if(p("wrapped data"),ye.decoder&&(Y=ye.decoder.write(Y)),!(ye.objectMode&&Y==null)&&!(!ye.objectMode&&(!Y||!Y.length))){var te=se.push(Y);te||(be=!0,Q.pause())}});for(var ve in Q)this[ve]===void 0&&typeof Q[ve]=="function"&&(this[ve]=function(te){return function(){return Q[te].apply(Q,arguments)}}(ve));for(var le=0;le<J.length;le++)Q.on(J[le],this.emit.bind(this,J[le]));return this._read=function(Y){p("wrapped _read",Y),be&&(be=!1,Q.resume())},this},typeof Symbol=="function"&&(ee.prototype[Symbol.asyncIterator]=function(){return F===void 0&&(F=requireAsync_iterator()),F(this)}),Object.defineProperty(ee.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(ee.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(ee.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(se){this._readableState&&(this._readableState.flowing=se)}}),ee._fromList=ie,Object.defineProperty(ee.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ie(Q,se){if(se.length===0)return null;var ye;return se.objectMode?ye=se.buffer.shift():!Q||Q>=se.length?(se.decoder?ye=se.buffer.join(""):se.buffer.length===1?ye=se.buffer.first():ye=se.buffer.concat(se.length),se.buffer.clear()):ye=se.buffer.consume(Q,se.decoder),ye}function oe(Q){var se=Q._readableState;p("endReadable",se.endEmitted),se.endEmitted||(se.ended=!0,process$1.nextTick(ce,se,Q))}function ce(Q,se){if(p("endReadableNT",Q.endEmitted,Q.length),!Q.endEmitted&&Q.length===0&&(Q.endEmitted=!0,se.readable=!1,se.emit("end"),Q.autoDestroy)){var ye=se._writableState;(!ye||ye.autoDestroy&&ye.finished)&&se.destroy()}}typeof Symbol=="function"&&(ee.from=function(Q,se){return U===void 0&&(U=requireFromBrowser()),U(ee,Q,se)});function V(Q,se){for(var ye=0,be=Q.length;ye<be;ye++)if(Q[ye]===se)return ye;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=l;var t=requireErrorsBrowser().codes,e=t.ERR_METHOD_NOT_IMPLEMENTED,n=t.ERR_MULTIPLE_CALLBACK,a=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=t.ERR_TRANSFORM_WITH_LENGTH_0,c=require_stream_duplex();inherits_browserExports(l,c);function u(v,x){var _=this._transformState;_.transforming=!1;var E=_.writecb;if(E===null)return this.emit("error",new n);_.writechunk=null,_.writecb=null,x!=null&&this.push(x),E(v);var $=this._readableState;$.reading=!1,($.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}function l(v){if(!(this instanceof l))return new l(v);c.call(this,v),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&(typeof v.transform=="function"&&(this._transform=v.transform),typeof v.flush=="function"&&(this._flush=v.flush)),this.on("prefinish",p)}function p(){var v=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(x,_){b(v,x,_)}):b(this,null,null)}l.prototype.push=function(v,x){return this._transformState.needTransform=!1,c.prototype.push.call(this,v,x)},l.prototype._transform=function(v,x,_){_(new e("_transform()"))},l.prototype._write=function(v,x,_){var E=this._transformState;if(E.writecb=_,E.writechunk=v,E.writeencoding=x,!E.transforming){var $=this._readableState;(E.needTransform||$.needReadable||$.length<$.highWaterMark)&&this._read($.highWaterMark)}},l.prototype._read=function(v){var x=this._transformState;x.writechunk!==null&&!x.transforming?(x.transforming=!0,this._transform(x.writechunk,x.writeencoding,x.afterTransform)):x.needTransform=!0},l.prototype._destroy=function(v,x){c.prototype._destroy.call(this,v,function(_){x(_)})};function b(v,x,_){if(x)return v.emit("error",x);if(_!=null&&v.push(_),v._writableState.length)throw new o;if(v._transformState.transforming)throw new a;return v.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=e;var t=require_stream_transform();inherits_browserExports(e,t);function e(n){if(!(this instanceof e))return new e(n);t.call(this,n)}return e.prototype._transform=function(n,a,o){o(null,n)},_stream_passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var t;function e(_){var E=!1;return function(){E||(E=!0,_.apply(void 0,arguments))}}var n=requireErrorsBrowser().codes,a=n.ERR_MISSING_ARGS,o=n.ERR_STREAM_DESTROYED;function c(_){if(_)throw _}function u(_){return _.setHeader&&typeof _.abort=="function"}function l(_,E,$,S){S=e(S);var A=!1;_.on("close",function(){A=!0}),t===void 0&&(t=requireEndOfStream()),t(_,{readable:E,writable:$},function(O){if(O)return S(O);A=!0,S()});var I=!1;return function(O){if(!A&&!I){if(I=!0,u(_))return _.abort();if(typeof _.destroy=="function")return _.destroy();S(O||new o("pipe"))}}}function p(_){_()}function b(_,E){return _.pipe(E)}function v(_){return!_.length||typeof _[_.length-1]!="function"?c:_.pop()}function x(){for(var _=arguments.length,E=new Array(_),$=0;$<_;$++)E[$]=arguments[$];var S=v(E);if(Array.isArray(E[0])&&(E=E[0]),E.length<2)throw new a("streams");var A,I=E.map(function(O,F){var U=F<E.length-1,G=F>0;return l(O,U,G,function(J){A||(A=J),J&&I.forEach(p),!U&&(I.forEach(p),S(A))})});return E.reduce(b)}return pipeline_1=x,pipeline_1}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(t,e){e=t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=require_stream_transform(),e.PassThrough=require_stream_passthrough(),e.finished=requireEndOfStream(),e.pipeline=requirePipeline()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var t=safeBufferExports.Buffer,e=requireReadableBrowser().Transform,n=inherits_browserExports;function a(c,u){if(!t.isBuffer(c)&&typeof c!="string")throw new TypeError(u+" must be a string or a buffer")}function o(c){e.call(this),this._block=t.allocUnsafe(c),this._blockSize=c,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return n(o,e),o.prototype._transform=function(c,u,l){var p=null;try{this.update(c,u)}catch(b){p=b}l(p)},o.prototype._flush=function(c){var u=null;try{this.push(this.digest())}catch(l){u=l}c(u)},o.prototype.update=function(c,u){if(a(c,"Data"),this._finalized)throw new Error("Digest already called");t.isBuffer(c)||(c=t.from(c,u));for(var l=this._block,p=0;this._blockOffset+c.length-p>=this._blockSize;){for(var b=this._blockOffset;b<this._blockSize;)l[b++]=c[p++];this._update(),this._blockOffset=0}for(;p<c.length;)l[this._blockOffset++]=c[p++];for(var v=0,x=c.length*8;x>0;++v)this._length[v]+=x,x=this._length[v]/4294967296|0,x>0&&(this._length[v]-=4294967296*x);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(c){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var u=this._digest();c!==void 0&&(u=u.toString(c)),this._block.fill(0),this._blockOffset=0;for(var l=0;l<4;++l)this._length[l]=0;return u},o.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=o,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var t=inherits_browserExports,e=requireHashBase(),n=safeBufferExports.Buffer,a=new Array(16);function o(){e.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}t(o,e),o.prototype._update=function(){for(var v=a,x=0;x<16;++x)v[x]=this._block.readInt32LE(x*4);var _=this._a,E=this._b,$=this._c,S=this._d;_=u(_,E,$,S,v[0],3614090360,7),S=u(S,_,E,$,v[1],3905402710,12),$=u($,S,_,E,v[2],606105819,17),E=u(E,$,S,_,v[3],3250441966,22),_=u(_,E,$,S,v[4],4118548399,7),S=u(S,_,E,$,v[5],1200080426,12),$=u($,S,_,E,v[6],2821735955,17),E=u(E,$,S,_,v[7],4249261313,22),_=u(_,E,$,S,v[8],1770035416,7),S=u(S,_,E,$,v[9],2336552879,12),$=u($,S,_,E,v[10],4294925233,17),E=u(E,$,S,_,v[11],2304563134,22),_=u(_,E,$,S,v[12],1804603682,7),S=u(S,_,E,$,v[13],4254626195,12),$=u($,S,_,E,v[14],2792965006,17),E=u(E,$,S,_,v[15],1236535329,22),_=l(_,E,$,S,v[1],4129170786,5),S=l(S,_,E,$,v[6],3225465664,9),$=l($,S,_,E,v[11],643717713,14),E=l(E,$,S,_,v[0],3921069994,20),_=l(_,E,$,S,v[5],3593408605,5),S=l(S,_,E,$,v[10],38016083,9),$=l($,S,_,E,v[15],3634488961,14),E=l(E,$,S,_,v[4],3889429448,20),_=l(_,E,$,S,v[9],568446438,5),S=l(S,_,E,$,v[14],3275163606,9),$=l($,S,_,E,v[3],4107603335,14),E=l(E,$,S,_,v[8],1163531501,20),_=l(_,E,$,S,v[13],2850285829,5),S=l(S,_,E,$,v[2],4243563512,9),$=l($,S,_,E,v[7],1735328473,14),E=l(E,$,S,_,v[12],2368359562,20),_=p(_,E,$,S,v[5],4294588738,4),S=p(S,_,E,$,v[8],2272392833,11),$=p($,S,_,E,v[11],1839030562,16),E=p(E,$,S,_,v[14],4259657740,23),_=p(_,E,$,S,v[1],2763975236,4),S=p(S,_,E,$,v[4],1272893353,11),$=p($,S,_,E,v[7],4139469664,16),E=p(E,$,S,_,v[10],3200236656,23),_=p(_,E,$,S,v[13],681279174,4),S=p(S,_,E,$,v[0],3936430074,11),$=p($,S,_,E,v[3],3572445317,16),E=p(E,$,S,_,v[6],76029189,23),_=p(_,E,$,S,v[9],3654602809,4),S=p(S,_,E,$,v[12],3873151461,11),$=p($,S,_,E,v[15],530742520,16),E=p(E,$,S,_,v[2],3299628645,23),_=b(_,E,$,S,v[0],4096336452,6),S=b(S,_,E,$,v[7],1126891415,10),$=b($,S,_,E,v[14],2878612391,15),E=b(E,$,S,_,v[5],4237533241,21),_=b(_,E,$,S,v[12],1700485571,6),S=b(S,_,E,$,v[3],2399980690,10),$=b($,S,_,E,v[10],4293915773,15),E=b(E,$,S,_,v[1],2240044497,21),_=b(_,E,$,S,v[8],1873313359,6),S=b(S,_,E,$,v[15],4264355552,10),$=b($,S,_,E,v[6],2734768916,15),E=b(E,$,S,_,v[13],1309151649,21),_=b(_,E,$,S,v[4],4149444226,6),S=b(S,_,E,$,v[11],3174756917,10),$=b($,S,_,E,v[2],718787259,15),E=b(E,$,S,_,v[9],3951481745,21),this._a=this._a+_|0,this._b=this._b+E|0,this._c=this._c+$|0,this._d=this._d+S|0},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var v=n.allocUnsafe(16);return v.writeInt32LE(this._a,0),v.writeInt32LE(this._b,4),v.writeInt32LE(this._c,8),v.writeInt32LE(this._d,12),v};function c(v,x){return v<<x|v>>>32-x}function u(v,x,_,E,$,S,A){return c(v+(x&_|~x&E)+$+S|0,A)+x|0}function l(v,x,_,E,$,S,A){return c(v+(x&E|_&~E)+$+S|0,A)+x|0}function p(v,x,_,E,$,S,A){return c(v+(x^_^E)+$+S|0,A)+x|0}function b(v,x,_,E,$,S,A){return c(v+(_^(x|~E))+$+S|0,A)+x|0}return md5_js=o,md5_js}var ripemd160$2,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160$2;hasRequiredRipemd160=1;var t=buffer$2.Buffer,e=inherits_browserExports,n=requireHashBase(),a=new Array(16),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],u=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],l=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],b=[1352829926,1548603684,1836072691,2053994217,0];function v(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}e(v,n),v.prototype._update=function(){for(var I=a,O=0;O<16;++O)I[O]=this._block.readInt32LE(O*4);for(var F=this._a|0,U=this._b|0,G=this._c|0,J=this._d|0,k=this._e|0,ne=this._a|0,ee=this._b|0,de=this._c|0,ae=this._d|0,L=this._e|0,P=0;P<80;P+=1){var T,C;P<16?(T=_(F,U,G,J,k,I[o[P]],p[0],u[P]),C=A(ne,ee,de,ae,L,I[c[P]],b[0],l[P])):P<32?(T=E(F,U,G,J,k,I[o[P]],p[1],u[P]),C=S(ne,ee,de,ae,L,I[c[P]],b[1],l[P])):P<48?(T=$(F,U,G,J,k,I[o[P]],p[2],u[P]),C=$(ne,ee,de,ae,L,I[c[P]],b[2],l[P])):P<64?(T=S(F,U,G,J,k,I[o[P]],p[3],u[P]),C=E(ne,ee,de,ae,L,I[c[P]],b[3],l[P])):(T=A(F,U,G,J,k,I[o[P]],p[4],u[P]),C=_(ne,ee,de,ae,L,I[c[P]],b[4],l[P])),F=k,k=J,J=x(G,10),G=U,U=T,ne=L,L=ae,ae=x(de,10),de=ee,ee=C}var q=this._b+G+ae|0;this._b=this._c+J+L|0,this._c=this._d+k+ne|0,this._d=this._e+F+ee|0,this._e=this._a+U+de|0,this._a=q},v.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var I=t.alloc?t.alloc(20):new t(20);return I.writeInt32LE(this._a,0),I.writeInt32LE(this._b,4),I.writeInt32LE(this._c,8),I.writeInt32LE(this._d,12),I.writeInt32LE(this._e,16),I};function x(I,O){return I<<O|I>>>32-O}function _(I,O,F,U,G,J,k,ne){return x(I+(O^F^U)+J+k|0,ne)+G|0}function E(I,O,F,U,G,J,k,ne){return x(I+(O&F|~O&U)+J+k|0,ne)+G|0}function $(I,O,F,U,G,J,k,ne){return x(I+((O|~F)^U)+J+k|0,ne)+G|0}function S(I,O,F,U,G,J,k,ne){return x(I+(O&U|F&~U)+J+k|0,ne)+G|0}function A(I,O,F,U,G,J,k,ne){return x(I+(O^(F|~U))+J+k|0,ne)+G|0}return ripemd160$2=v,ripemd160$2}var sha_js={exports:{}},hash$6,hasRequiredHash;function requireHash(){if(hasRequiredHash)return hash$6;hasRequiredHash=1;var t=safeBufferExports.Buffer;function e(n,a){this._block=t.alloc(n),this._finalSize=a,this._blockSize=n,this._len=0}return e.prototype.update=function(n,a){typeof n=="string"&&(a=a||"utf8",n=t.from(n,a));for(var o=this._block,c=this._blockSize,u=n.length,l=this._len,p=0;p<u;){for(var b=l%c,v=Math.min(u-p,c-b),x=0;x<v;x++)o[b+x]=n[p+x];l+=v,p+=v,l%c===0&&this._update(o)}return this._len+=u,this},e.prototype.digest=function(n){var a=this._len%this._blockSize;this._block[a]=128,this._block.fill(0,a+1),a>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=this._len*8;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var c=(o&4294967295)>>>0,u=(o-c)/4294967296;this._block.writeUInt32BE(u,this._blockSize-8),this._block.writeUInt32BE(c,this._blockSize-4)}this._update(this._block);var l=this._hash();return n?l.toString(n):l},e.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$6=e,hash$6}var sha$1,hasRequiredSha;function requireSha(){if(hasRequiredSha)return sha$1;hasRequiredSha=1;var t=inherits_browserExports,e=requireHash(),n=safeBufferExports.Buffer,a=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function c(){this.init(),this._w=o,e.call(this,64,56)}t(c,e),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function u(b){return b<<5|b>>>27}function l(b){return b<<30|b>>>2}function p(b,v,x,_){return b===0?v&x|~v&_:b===2?v&x|v&_|x&_:v^x^_}return c.prototype._update=function(b){for(var v=this._w,x=this._a|0,_=this._b|0,E=this._c|0,$=this._d|0,S=this._e|0,A=0;A<16;++A)v[A]=b.readInt32BE(A*4);for(;A<80;++A)v[A]=v[A-3]^v[A-8]^v[A-14]^v[A-16];for(var I=0;I<80;++I){var O=~~(I/20),F=u(x)+p(O,_,E,$)+S+v[I]+a[O]|0;S=$,$=E,E=l(_),_=x,x=F}this._a=x+this._a|0,this._b=_+this._b|0,this._c=E+this._c|0,this._d=$+this._d|0,this._e=S+this._e|0},c.prototype._hash=function(){var b=n.allocUnsafe(20);return b.writeInt32BE(this._a|0,0),b.writeInt32BE(this._b|0,4),b.writeInt32BE(this._c|0,8),b.writeInt32BE(this._d|0,12),b.writeInt32BE(this._e|0,16),b},sha$1=c,sha$1}var sha1$1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1$1;hasRequiredSha1=1;var t=inherits_browserExports,e=requireHash(),n=safeBufferExports.Buffer,a=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function c(){this.init(),this._w=o,e.call(this,64,56)}t(c,e),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function u(v){return v<<1|v>>>31}function l(v){return v<<5|v>>>27}function p(v){return v<<30|v>>>2}function b(v,x,_,E){return v===0?x&_|~x&E:v===2?x&_|x&E|_&E:x^_^E}return c.prototype._update=function(v){for(var x=this._w,_=this._a|0,E=this._b|0,$=this._c|0,S=this._d|0,A=this._e|0,I=0;I<16;++I)x[I]=v.readInt32BE(I*4);for(;I<80;++I)x[I]=u(x[I-3]^x[I-8]^x[I-14]^x[I-16]);for(var O=0;O<80;++O){var F=~~(O/20),U=l(_)+b(F,E,$,S)+A+x[O]+a[F]|0;A=S,S=$,$=p(E),E=_,_=U}this._a=_+this._a|0,this._b=E+this._b|0,this._c=$+this._c|0,this._d=S+this._d|0,this._e=A+this._e|0},c.prototype._hash=function(){var v=n.allocUnsafe(20);return v.writeInt32BE(this._a|0,0),v.writeInt32BE(this._b|0,4),v.writeInt32BE(this._c|0,8),v.writeInt32BE(this._d|0,12),v.writeInt32BE(this._e|0,16),v},sha1$1=c,sha1$1}var sha256$5,hasRequiredSha256;function requireSha256(){if(hasRequiredSha256)return sha256$5;hasRequiredSha256=1;var t=inherits_browserExports,e=requireHash(),n=safeBufferExports.Buffer,a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function c(){this.init(),this._w=o,e.call(this,64,56)}t(c,e),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function u(_,E,$){return $^_&(E^$)}function l(_,E,$){return _&E|$&(_|E)}function p(_){return(_>>>2|_<<30)^(_>>>13|_<<19)^(_>>>22|_<<10)}function b(_){return(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7)}function v(_){return(_>>>7|_<<25)^(_>>>18|_<<14)^_>>>3}function x(_){return(_>>>17|_<<15)^(_>>>19|_<<13)^_>>>10}return c.prototype._update=function(_){for(var E=this._w,$=this._a|0,S=this._b|0,A=this._c|0,I=this._d|0,O=this._e|0,F=this._f|0,U=this._g|0,G=this._h|0,J=0;J<16;++J)E[J]=_.readInt32BE(J*4);for(;J<64;++J)E[J]=x(E[J-2])+E[J-7]+v(E[J-15])+E[J-16]|0;for(var k=0;k<64;++k){var ne=G+b(O)+u(O,F,U)+a[k]+E[k]|0,ee=p($)+l($,S,A)|0;G=U,U=F,F=O,O=I+ne|0,I=A,A=S,S=$,$=ne+ee|0}this._a=$+this._a|0,this._b=S+this._b|0,this._c=A+this._c|0,this._d=I+this._d|0,this._e=O+this._e|0,this._f=F+this._f|0,this._g=U+this._g|0,this._h=G+this._h|0},c.prototype._hash=function(){var _=n.allocUnsafe(32);return _.writeInt32BE(this._a,0),_.writeInt32BE(this._b,4),_.writeInt32BE(this._c,8),_.writeInt32BE(this._d,12),_.writeInt32BE(this._e,16),_.writeInt32BE(this._f,20),_.writeInt32BE(this._g,24),_.writeInt32BE(this._h,28),_},sha256$5=c,sha256$5}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var t=inherits_browserExports,e=requireSha256(),n=requireHash(),a=safeBufferExports.Buffer,o=new Array(64);function c(){this.init(),this._w=o,n.call(this,64,56)}return t(c,e),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var u=a.allocUnsafe(28);return u.writeInt32BE(this._a,0),u.writeInt32BE(this._b,4),u.writeInt32BE(this._c,8),u.writeInt32BE(this._d,12),u.writeInt32BE(this._e,16),u.writeInt32BE(this._f,20),u.writeInt32BE(this._g,24),u},sha224$1=c,sha224$1}var sha512$3,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$3;hasRequiredSha512=1;var t=inherits_browserExports,e=requireHash(),n=safeBufferExports.Buffer,a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function c(){this.init(),this._w=o,e.call(this,128,112)}t(c,e),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function u(S,A,I){return I^S&(A^I)}function l(S,A,I){return S&A|I&(S|A)}function p(S,A){return(S>>>28|A<<4)^(A>>>2|S<<30)^(A>>>7|S<<25)}function b(S,A){return(S>>>14|A<<18)^(S>>>18|A<<14)^(A>>>9|S<<23)}function v(S,A){return(S>>>1|A<<31)^(S>>>8|A<<24)^S>>>7}function x(S,A){return(S>>>1|A<<31)^(S>>>8|A<<24)^(S>>>7|A<<25)}function _(S,A){return(S>>>19|A<<13)^(A>>>29|S<<3)^S>>>6}function E(S,A){return(S>>>19|A<<13)^(A>>>29|S<<3)^(S>>>6|A<<26)}function $(S,A){return S>>>0<A>>>0?1:0}return c.prototype._update=function(S){for(var A=this._w,I=this._ah|0,O=this._bh|0,F=this._ch|0,U=this._dh|0,G=this._eh|0,J=this._fh|0,k=this._gh|0,ne=this._hh|0,ee=this._al|0,de=this._bl|0,ae=this._cl|0,L=this._dl|0,P=this._el|0,T=this._fl|0,C=this._gl|0,q=this._hl|0,z=0;z<32;z+=2)A[z]=S.readInt32BE(z*4),A[z+1]=S.readInt32BE(z*4+4);for(;z<160;z+=2){var X=A[z-30],W=A[z-15*2+1],M=v(X,W),D=x(W,X);X=A[z-2*2],W=A[z-2*2+1];var B=_(X,W),Z=E(W,X),he=A[z-7*2],j=A[z-7*2+1],fe=A[z-16*2],ie=A[z-16*2+1],oe=D+j|0,ce=M+he+$(oe,D)|0;oe=oe+Z|0,ce=ce+B+$(oe,Z)|0,oe=oe+ie|0,ce=ce+fe+$(oe,ie)|0,A[z]=ce,A[z+1]=oe}for(var V=0;V<160;V+=2){ce=A[V],oe=A[V+1];var Q=l(I,O,F),se=l(ee,de,ae),ye=p(I,ee),be=p(ee,I),ve=b(G,P),le=b(P,G),Y=a[V],te=a[V+1],ue=u(G,J,k),pe=u(P,T,C),ge=q+le|0,me=ne+ve+$(ge,q)|0;ge=ge+pe|0,me=me+ue+$(ge,pe)|0,ge=ge+te|0,me=me+Y+$(ge,te)|0,ge=ge+oe|0,me=me+ce+$(ge,oe)|0;var we=be+se|0,xe=ye+Q+$(we,be)|0;ne=k,q=C,k=J,C=T,J=G,T=P,P=L+ge|0,G=U+me+$(P,L)|0,U=F,L=ae,F=O,ae=de,O=I,de=ee,ee=ge+we|0,I=me+xe+$(ee,ge)|0}this._al=this._al+ee|0,this._bl=this._bl+de|0,this._cl=this._cl+ae|0,this._dl=this._dl+L|0,this._el=this._el+P|0,this._fl=this._fl+T|0,this._gl=this._gl+C|0,this._hl=this._hl+q|0,this._ah=this._ah+I+$(this._al,ee)|0,this._bh=this._bh+O+$(this._bl,de)|0,this._ch=this._ch+F+$(this._cl,ae)|0,this._dh=this._dh+U+$(this._dl,L)|0,this._eh=this._eh+G+$(this._el,P)|0,this._fh=this._fh+J+$(this._fl,T)|0,this._gh=this._gh+k+$(this._gl,C)|0,this._hh=this._hh+ne+$(this._hl,q)|0},c.prototype._hash=function(){var S=n.allocUnsafe(64);function A(I,O,F){S.writeInt32BE(I,F),S.writeInt32BE(O,F+4)}return A(this._ah,this._al,0),A(this._bh,this._bl,8),A(this._ch,this._cl,16),A(this._dh,this._dl,24),A(this._eh,this._el,32),A(this._fh,this._fl,40),A(this._gh,this._gl,48),A(this._hh,this._hl,56),S},sha512$3=c,sha512$3}var sha384$2,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$2;hasRequiredSha384=1;var t=inherits_browserExports,e=requireSha512(),n=requireHash(),a=safeBufferExports.Buffer,o=new Array(160);function c(){this.init(),this._w=o,n.call(this,128,112)}return t(c,e),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var u=a.allocUnsafe(48);function l(p,b,v){u.writeInt32BE(p,v),u.writeInt32BE(b,v+4)}return l(this._ah,this._al,0),l(this._bh,this._bl,8),l(this._ch,this._cl,16),l(this._dh,this._dl,24),l(this._eh,this._el,32),l(this._fh,this._fl,40),u},sha384$2=c,sha384$2}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var t=sha_js.exports=function(n){n=n.toLowerCase();var a=t[n];if(!a)throw new Error(n+" is not supported (we accept pull requests)");return new a};return t.sha=requireSha(),t.sha1=requireSha1(),t.sha224=requireSha224(),t.sha256=requireSha256(),t.sha384=requireSha384(),t.sha512=requireSha512(),sha_js.exports}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=n;var t=eventsExports.EventEmitter,e=inherits_browserExports;e(n,t),n.Readable=require_stream_readable(),n.Writable=require_stream_writable(),n.Duplex=require_stream_duplex(),n.Transform=require_stream_transform(),n.PassThrough=require_stream_passthrough(),n.finished=requireEndOfStream(),n.pipeline=requirePipeline(),n.Stream=n;function n(){t.call(this)}return n.prototype.pipe=function(a,o){var c=this;function u(E){a.writable&&a.write(E)===!1&&c.pause&&c.pause()}c.on("data",u);function l(){c.readable&&c.resume&&c.resume()}a.on("drain",l),!a._isStdio&&(!o||o.end!==!1)&&(c.on("end",b),c.on("close",v));var p=!1;function b(){p||(p=!0,a.end())}function v(){p||(p=!0,typeof a.destroy=="function"&&a.destroy())}function x(E){if(_(),t.listenerCount(this,"error")===0)throw E}c.on("error",x),a.on("error",x);function _(){c.removeListener("data",u),a.removeListener("drain",l),c.removeListener("end",b),c.removeListener("close",v),c.removeListener("error",x),a.removeListener("error",x),c.removeListener("end",_),c.removeListener("close",_),a.removeListener("close",_)}return c.on("end",_),c.on("close",_),a.on("close",_),a.emit("pipe",c),a},streamBrowserify}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var t=safeBufferExports.Buffer,e=requireStreamBrowserify().Transform,n=requireString_decoder().StringDecoder,a=inherits_browserExports;function o(c){e.call(this),this.hashMode=typeof c=="string",this.hashMode?this[c]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}return a(o,e),o.prototype.update=function(c,u,l){typeof c=="string"&&(c=t.from(c,u));var p=this._update(c);return this.hashMode?this:(l&&(p=this._toString(p,l)),p)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(c,u,l){var p;try{this.hashMode?this._update(c):this.push(this._update(c))}catch(b){p=b}finally{l(p)}},o.prototype._flush=function(c){var u;try{this.push(this.__final())}catch(l){u=l}c(u)},o.prototype._finalOrDigest=function(c){var u=this.__final()||t.alloc(0);return c&&(u=this._toString(u,c,!0)),u},o.prototype._toString=function(c,u,l){if(this._decoder||(this._decoder=new n(u),this._encoding=u),this._encoding!==u)throw new Error("can't switch encodings");var p=this._decoder.write(c);return l&&(p+=this._decoder.end()),p},cipherBase=o,cipherBase}var browser$d,hasRequiredBrowser$9;function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$d;hasRequiredBrowser$9=1;var t=inherits_browserExports,e=requireMd5_js(),n=requireRipemd160(),a=requireSha_js(),o=requireCipherBase();function c(u){o.call(this,"digest"),this._hash=u}return t(c,o),c.prototype._update=function(u){this._hash.update(u)},c.prototype._final=function(){return this._hash.digest()},browser$d=function(l){return l=l.toLowerCase(),l==="md5"?new e:l==="rmd160"||l==="ripemd160"?new n:new c(a(l))},browser$d}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var t=inherits_browserExports,e=safeBufferExports.Buffer,n=requireCipherBase(),a=e.alloc(128),o=64;function c(u,l){n.call(this,"digest"),typeof l=="string"&&(l=e.from(l)),this._alg=u,this._key=l,l.length>o?l=u(l):l.length<o&&(l=e.concat([l,a],o));for(var p=this._ipad=e.allocUnsafe(o),b=this._opad=e.allocUnsafe(o),v=0;v<o;v++)p[v]=l[v]^54,b[v]=l[v]^92;this._hash=[p]}return t(c,n),c.prototype._update=function(u){this._hash.push(u)},c.prototype._final=function(){var u=this._alg(e.concat(this._hash));return this._alg(e.concat([this._opad,u]))},legacy=c,legacy}var md5,hasRequiredMd5;function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1;var t=requireMd5_js();return md5=function(e){return new t().update(e).digest()},md5}var browser$c,hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$c;hasRequiredBrowser$8=1;var t=inherits_browserExports,e=requireLegacy(),n=requireCipherBase(),a=safeBufferExports.Buffer,o=requireMd5(),c=requireRipemd160(),u=requireSha_js(),l=a.alloc(128);function p(b,v){n.call(this,"digest"),typeof v=="string"&&(v=a.from(v));var x=b==="sha512"||b==="sha384"?128:64;if(this._alg=b,this._key=v,v.length>x){var _=b==="rmd160"?new c:u(b);v=_.update(v).digest()}else v.length<x&&(v=a.concat([v,l],x));for(var E=this._ipad=a.allocUnsafe(x),$=this._opad=a.allocUnsafe(x),S=0;S<x;S++)E[S]=v[S]^54,$[S]=v[S]^92;this._hash=b==="rmd160"?new c:u(b),this._hash.update(E)}return t(p,n),p.prototype._update=function(b){this._hash.update(b)},p.prototype._final=function(){var b=this._hash.digest(),v=this._alg==="rmd160"?new c:u(this._alg);return v.update(this._opad).update(b).digest()},browser$c=function(v,x){return v=v.toLowerCase(),v==="rmd160"||v==="ripemd160"?new p("rmd160",x):v==="md5"?new e(o,x):new p(v,x)},browser$c}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$4={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384$1={sign:"ecdsa",hash:"sha384",id:""},sha512$2={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$4,sha224,sha384:sha384$1,sha512:sha512$2,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$b={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var t=Math.pow(2,30)-1;return precondition=function(e,n){if(typeof e!="number")throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if(typeof n!="number")throw new TypeError("Key length not a number");if(n<0||n>t||n!==n)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var t;if(commonjsGlobal.process&&commonjsGlobal.process.browser)t="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var e=parseInt(process$1.version.split(".")[0].slice(1),10);t=e>=6?"utf-8":"binary"}else t="utf-8";return defaultEncoding_1=t,defaultEncoding_1}var toBuffer$1,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer$1;hasRequiredToBuffer=1;var t=safeBufferExports.Buffer;return toBuffer$1=function(e,n,a){if(t.isBuffer(e))return e;if(typeof e=="string")return t.from(e,n);if(ArrayBuffer.isView(e))return t.from(e.buffer);throw new TypeError(a+" must be a string, a Buffer, a typed array or a DataView")},toBuffer$1}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var t=requireMd5(),e=requireRipemd160(),n=requireSha_js(),a=safeBufferExports.Buffer,o=requirePrecondition(),c=requireDefaultEncoding(),u=requireToBuffer(),l=a.alloc(128),p={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function b(_,E,$){var S=v(_),A=_==="sha512"||_==="sha384"?128:64;E.length>A?E=S(E):E.length<A&&(E=a.concat([E,l],A));for(var I=a.allocUnsafe(A+p[_]),O=a.allocUnsafe(A+p[_]),F=0;F<A;F++)I[F]=E[F]^54,O[F]=E[F]^92;var U=a.allocUnsafe(A+$+4);I.copy(U,0,0,A),this.ipad1=U,this.ipad2=I,this.opad=O,this.alg=_,this.blocksize=A,this.hash=S,this.size=p[_]}b.prototype.run=function(_,E){_.copy(E,this.blocksize);var $=this.hash(E);return $.copy(this.opad,this.blocksize),this.hash(this.opad)};function v(_){function E(S){return n(_).update(S).digest()}function $(S){return new e().update(S).digest()}return _==="rmd160"||_==="ripemd160"?$:_==="md5"?t:E}function x(_,E,$,S,A){o($,S),_=u(_,c,"Password"),E=u(E,c,"Salt"),A=A||"sha1";var I=new b(A,_,E.length),O=a.allocUnsafe(S),F=a.allocUnsafe(E.length+4);E.copy(F,0,0,E.length);for(var U=0,G=p[A],J=Math.ceil(S/G),k=1;k<=J;k++){F.writeUInt32BE(k,E.length);for(var ne=I.run(F,I.ipad1),ee=ne,de=1;de<$;de++){ee=I.run(ee,I.ipad2);for(var ae=0;ae<G;ae++)ne[ae]^=ee[ae]}ne.copy(O,U),U+=G}return O}return syncBrowser=x,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var t=safeBufferExports.Buffer,e=requirePrecondition(),n=requireDefaultEncoding(),a=requireSyncBrowser(),o=requireToBuffer(),c,u=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,l={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},p=[];function b($){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(p[$]!==void 0)return p[$];c=c||t.alloc(8);var S=_(c,c,10,128,$).then(function(){return!0}).catch(function(){return!1});return p[$]=S,S}var v;function x(){return v||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?v=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?v=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?v=commonjsGlobal.setImmediate:v=commonjsGlobal.setTimeout,v)}function _($,S,A,I,O){return u.importKey("raw",$,{name:"PBKDF2"},!1,["deriveBits"]).then(function(F){return u.deriveBits({name:"PBKDF2",salt:S,iterations:A,hash:{name:O}},F,I<<3)}).then(function(F){return t.from(F)})}function E($,S){$.then(function(A){x()(function(){S(null,A)})},function(A){x()(function(){S(A)})})}return async=function($,S,A,I,O,F){typeof O=="function"&&(F=O,O=void 0),O=O||"sha1";var U=l[O.toLowerCase()];if(!U||typeof commonjsGlobal.Promise!="function"){x()(function(){var G;try{G=a($,S,A,I,O)}catch(J){return F(J)}F(null,G)});return}if(e(A,I),$=o($,n,"Password"),S=o(S,n,"Salt"),typeof F!="function")throw new Error("No callback provided to pbkdf2");E(b(U).then(function(G){return G?_($,S,A,I,U):a($,S,A,I,O)}),F)},async}var hasRequiredBrowser$7;function requireBrowser$7(){return hasRequiredBrowser$7||(hasRequiredBrowser$7=1,browser$b.pbkdf2=requireAsync(),browser$b.pbkdf2Sync=requireSyncBrowser()),browser$b}var browser$a={},des$1={},utils$p={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils$p;hasRequiredUtils=1,utils$p.readUInt32BE=function(o,c){var u=o[0+c]<<24|o[1+c]<<16|o[2+c]<<8|o[3+c];return u>>>0},utils$p.writeUInt32BE=function(o,c,u){o[0+u]=c>>>24,o[1+u]=c>>>16&255,o[2+u]=c>>>8&255,o[3+u]=c&255},utils$p.ip=function(o,c,u,l){for(var p=0,b=0,v=6;v>=0;v-=2){for(var x=0;x<=24;x+=8)p<<=1,p|=c>>>x+v&1;for(var x=0;x<=24;x+=8)p<<=1,p|=o>>>x+v&1}for(var v=6;v>=0;v-=2){for(var x=1;x<=25;x+=8)b<<=1,b|=c>>>x+v&1;for(var x=1;x<=25;x+=8)b<<=1,b|=o>>>x+v&1}u[l+0]=p>>>0,u[l+1]=b>>>0},utils$p.rip=function(o,c,u,l){for(var p=0,b=0,v=0;v<4;v++)for(var x=24;x>=0;x-=8)p<<=1,p|=c>>>x+v&1,p<<=1,p|=o>>>x+v&1;for(var v=4;v<8;v++)for(var x=24;x>=0;x-=8)b<<=1,b|=c>>>x+v&1,b<<=1,b|=o>>>x+v&1;u[l+0]=p>>>0,u[l+1]=b>>>0},utils$p.pc1=function(o,c,u,l){for(var p=0,b=0,v=7;v>=5;v--){for(var x=0;x<=24;x+=8)p<<=1,p|=c>>x+v&1;for(var x=0;x<=24;x+=8)p<<=1,p|=o>>x+v&1}for(var x=0;x<=24;x+=8)p<<=1,p|=c>>x+v&1;for(var v=1;v<=3;v++){for(var x=0;x<=24;x+=8)b<<=1,b|=c>>x+v&1;for(var x=0;x<=24;x+=8)b<<=1,b|=o>>x+v&1}for(var x=0;x<=24;x+=8)b<<=1,b|=o>>x+v&1;u[l+0]=p>>>0,u[l+1]=b>>>0},utils$p.r28shl=function(o,c){return o<<c&268435455|o>>>28-c};var t=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$p.pc2=function(o,c,u,l){for(var p=0,b=0,v=t.length>>>1,x=0;x<v;x++)p<<=1,p|=o>>>t[x]&1;for(var x=v;x<t.length;x++)b<<=1,b|=c>>>t[x]&1;u[l+0]=p>>>0,u[l+1]=b>>>0},utils$p.expand=function(o,c,u){var l=0,p=0;l=(o&1)<<5|o>>>27;for(var b=23;b>=15;b-=4)l<<=6,l|=o>>>b&63;for(var b=11;b>=3;b-=4)p|=o>>>b&63,p<<=6;p|=(o&31)<<1|o>>>31,c[u+0]=l>>>0,c[u+1]=p>>>0};var e=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$p.substitute=function(o,c){for(var u=0,l=0;l<4;l++){var p=o>>>18-l*6&63,b=e[l*64+p];u<<=4,u|=b}for(var l=0;l<4;l++){var p=c>>>18-l*6&63,b=e[4*64+l*64+p];u<<=4,u|=b}return u>>>0};var n=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$p.permute=function(o){for(var c=0,u=0;u<n.length;u++)c<<=1,c|=o>>>n[u]&1;return c>>>0},utils$p.padSplit=function(o,c,u){for(var l=o.toString(2);l.length<c;)l="0"+l;for(var p=[],b=0;b<c;b+=u)p.push(l.slice(b,b+u));return p.join(" ")},utils$p}var minimalisticAssert$1=assert$l;function assert$l(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$l.equal=function t(e,n,a){if(e!=n)throw new Error(a||"Assertion failed: "+e+" != "+n)};var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var t=minimalisticAssert$1;function e(n){this.options=n,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}return cipher=e,e.prototype._init=function(){},e.prototype.update=function(a){return a.length===0?[]:this.type==="decrypt"?this._updateDecrypt(a):this._updateEncrypt(a)},e.prototype._buffer=function(a,o){for(var c=Math.min(this.buffer.length-this.bufferOff,a.length-o),u=0;u<c;u++)this.buffer[this.bufferOff+u]=a[o+u];return this.bufferOff+=c,c},e.prototype._flushBuffer=function(a,o){return this._update(this.buffer,0,a,o),this.bufferOff=0,this.blockSize},e.prototype._updateEncrypt=function(a){var o=0,c=0,u=(this.bufferOff+a.length)/this.blockSize|0,l=new Array(u*this.blockSize);this.bufferOff!==0&&(o+=this._buffer(a,o),this.bufferOff===this.buffer.length&&(c+=this._flushBuffer(l,c)));for(var p=a.length-(a.length-o)%this.blockSize;o<p;o+=this.blockSize)this._update(a,o,l,c),c+=this.blockSize;for(;o<a.length;o++,this.bufferOff++)this.buffer[this.bufferOff]=a[o];return l},e.prototype._updateDecrypt=function(a){for(var o=0,c=0,u=Math.ceil((this.bufferOff+a.length)/this.blockSize)-1,l=new Array(u*this.blockSize);u>0;u--)o+=this._buffer(a,o),c+=this._flushBuffer(l,c);return o+=this._buffer(a,o),l},e.prototype.final=function(a){var o;a&&(o=this.update(a));var c;return this.type==="encrypt"?c=this._finalEncrypt():c=this._finalDecrypt(),o?o.concat(c):c},e.prototype._pad=function(a,o){if(o===0)return!1;for(;o<a.length;)a[o++]=0;return!0},e.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var a=new Array(this.blockSize);return this._update(this.buffer,0,a,0),a},e.prototype._unpad=function(a){return a},e.prototype._finalDecrypt=function(){t.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var a=new Array(this.blockSize);return this._flushBuffer(a,0),this._unpad(a)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var t=minimalisticAssert$1,e=inherits_browserExports,n=requireUtils(),a=requireCipher();function o(){this.tmp=new Array(2),this.keys=null}function c(l){a.call(this,l);var p=new o;this._desState=p,this.deriveKeys(p,l.key)}e(c,a),des=c,c.create=function(p){return new c(p)};var u=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return c.prototype.deriveKeys=function(p,b){p.keys=new Array(16*2),t.equal(b.length,this.blockSize,"Invalid key length");var v=n.readUInt32BE(b,0),x=n.readUInt32BE(b,4);n.pc1(v,x,p.tmp,0),v=p.tmp[0],x=p.tmp[1];for(var _=0;_<p.keys.length;_+=2){var E=u[_>>>1];v=n.r28shl(v,E),x=n.r28shl(x,E),n.pc2(v,x,p.keys,_)}},c.prototype._update=function(p,b,v,x){var _=this._desState,E=n.readUInt32BE(p,b),$=n.readUInt32BE(p,b+4);n.ip(E,$,_.tmp,0),E=_.tmp[0],$=_.tmp[1],this.type==="encrypt"?this._encrypt(_,E,$,_.tmp,0):this._decrypt(_,E,$,_.tmp,0),E=_.tmp[0],$=_.tmp[1],n.writeUInt32BE(v,E,x),n.writeUInt32BE(v,$,x+4)},c.prototype._pad=function(p,b){for(var v=p.length-b,x=b;x<p.length;x++)p[x]=v;return!0},c.prototype._unpad=function(p){for(var b=p[p.length-1],v=p.length-b;v<p.length;v++)t.equal(p[v],b);return p.slice(0,p.length-b)},c.prototype._encrypt=function(p,b,v,x,_){for(var E=b,$=v,S=0;S<p.keys.length;S+=2){var A=p.keys[S],I=p.keys[S+1];n.expand($,p.tmp,0),A^=p.tmp[0],I^=p.tmp[1];var O=n.substitute(A,I),F=n.permute(O),U=$;$=(E^F)>>>0,E=U}n.rip($,E,x,_)},c.prototype._decrypt=function(p,b,v,x,_){for(var E=v,$=b,S=p.keys.length-2;S>=0;S-=2){var A=p.keys[S],I=p.keys[S+1];n.expand(E,p.tmp,0),A^=p.tmp[0],I^=p.tmp[1];var O=n.substitute(A,I),F=n.permute(O),U=E;E=($^F)>>>0,$=U}n.rip(E,$,x,_)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var t=minimalisticAssert$1,e=inherits_browserExports,n={};function a(c){t.equal(c.length,8,"Invalid IV length"),this.iv=new Array(8);for(var u=0;u<this.iv.length;u++)this.iv[u]=c[u]}function o(c){function u(v){c.call(this,v),this._cbcInit()}e(u,c);for(var l=Object.keys(n),p=0;p<l.length;p++){var b=l[p];u.prototype[b]=n[b]}return u.create=function(x){return new u(x)},u}return cbc$1.instantiate=o,n._cbcInit=function(){var u=new a(this.options.iv);this._cbcState=u},n._update=function(u,l,p,b){var v=this._cbcState,x=this.constructor.super_.prototype,_=v.iv;if(this.type==="encrypt"){for(var E=0;E<this.blockSize;E++)_[E]^=u[l+E];x._update.call(this,_,0,p,b);for(var E=0;E<this.blockSize;E++)_[E]=p[b+E]}else{x._update.call(this,u,l,p,b);for(var E=0;E<this.blockSize;E++)p[b+E]^=_[E];for(var E=0;E<this.blockSize;E++)_[E]=u[l+E]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var t=minimalisticAssert$1,e=inherits_browserExports,n=requireCipher(),a=requireDes$1();function o(u,l){t.equal(l.length,24,"Invalid key length");var p=l.slice(0,8),b=l.slice(8,16),v=l.slice(16,24);u==="encrypt"?this.ciphers=[a.create({type:"encrypt",key:p}),a.create({type:"decrypt",key:b}),a.create({type:"encrypt",key:v})]:this.ciphers=[a.create({type:"decrypt",key:v}),a.create({type:"encrypt",key:b}),a.create({type:"decrypt",key:p})]}function c(u){n.call(this,u);var l=new o(this.type,this.options.key);this._edeState=l}return e(c,n),ede=c,c.create=function(l){return new c(l)},c.prototype._update=function(l,p,b,v){var x=this._edeState;x.ciphers[0]._update(l,p,b,v),x.ciphers[1]._update(b,v,b,v),x.ciphers[2]._update(b,v,b,v)},c.prototype._pad=a.prototype._pad,c.prototype._unpad=a.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var t=requireCipherBase(),e=requireDes(),n=inherits_browserExports,a=safeBufferExports.Buffer,o={"des-ede3-cbc":e.CBC.instantiate(e.EDE),"des-ede3":e.EDE,"des-ede-cbc":e.CBC.instantiate(e.EDE),"des-ede":e.EDE,"des-cbc":e.CBC.instantiate(e.DES),"des-ecb":e.DES};o.des=o["des-cbc"],o.des3=o["des-ede3-cbc"],browserifyDes=c,n(c,t);function c(u){t.call(this);var l=u.mode.toLowerCase(),p=o[l],b;u.decrypt?b="decrypt":b="encrypt";var v=u.key;a.isBuffer(v)||(v=a.from(v)),(l==="des-ede"||l==="des-ede-cbc")&&(v=a.concat([v,v.slice(0,8)]));var x=u.iv;a.isBuffer(x)||(x=a.from(x)),this._des=p.create({key:v,iv:x,type:b})}return c.prototype._update=function(u){return a.from(this._des.update(u))},c.prototype._final=function(){return a.from(this._des.final())},browserifyDes}var browser$9={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(t,e){return t._cipher.encryptBlock(e)},ecb.decrypt=function(t,e){return t._cipher.decryptBlock(e)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(e,n){for(var a=Math.min(e.length,n.length),o=new buffer$2.Buffer(a),c=0;c<a;++c)o[c]=e[c]^n[c];return o}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var t=requireBufferXor();return cbc.encrypt=function(e,n){var a=t(n,e._prev);return e._prev=e._cipher.encryptBlock(a),e._prev},cbc.decrypt=function(e,n){var a=e._prev;e._prev=n;var o=e._cipher.decryptBlock(n);return t(o,a)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var t=safeBufferExports.Buffer,e=requireBufferXor();function n(a,o,c){var u=o.length,l=e(o,a._cache);return a._cache=a._cache.slice(u),a._prev=t.concat([a._prev,c?o:l]),l}return cfb.encrypt=function(a,o,c){for(var u=t.allocUnsafe(0),l;o.length;)if(a._cache.length===0&&(a._cache=a._cipher.encryptBlock(a._prev),a._prev=t.allocUnsafe(0)),a._cache.length<=o.length)l=a._cache.length,u=t.concat([u,n(a,o.slice(0,l),c)]),o=o.slice(l);else{u=t.concat([u,n(a,o,c)]);break}return u},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var t=safeBufferExports.Buffer;function e(n,a,o){var c=n._cipher.encryptBlock(n._prev),u=c[0]^a;return n._prev=t.concat([n._prev.slice(1),t.from([o?a:u])]),u}return cfb8.encrypt=function(n,a,o){for(var c=a.length,u=t.allocUnsafe(c),l=-1;++l<c;)u[l]=e(n,a[l],o);return u},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var t=safeBufferExports.Buffer;function e(a,o,c){for(var u,l=-1,p=8,b=0,v,x;++l<p;)u=a._cipher.encryptBlock(a._prev),v=o&1<<7-l?128:0,x=u[0]^v,b+=(x&128)>>l%8,a._prev=n(a._prev,c?v:x);return b}function n(a,o){var c=a.length,u=-1,l=t.allocUnsafe(a.length);for(a=t.concat([a,t.from([o])]);++u<c;)l[u]=a[u]<<1|a[u+1]>>7;return l}return cfb1.encrypt=function(a,o,c){for(var u=o.length,l=t.allocUnsafe(u),p=-1;++p<u;)l[p]=e(a,o[p],c);return l},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var t=requireBufferXor();function e(n){return n._prev=n._cipher.encryptBlock(n._prev),n._prev}return ofb.encrypt=function(n,a){for(;n._cache.length<a.length;)n._cache=buffer$2.Buffer.concat([n._cache,e(n)]);var o=n._cache.slice(0,a.length);return n._cache=n._cache.slice(a.length),t(a,o)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function t(e){for(var n=e.length,a;n--;)if(a=e.readUInt8(n),a===255)e.writeUInt8(0,n);else{a++,e.writeUInt8(a,n);break}}return incr32_1=t,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var t=requireBufferXor(),e=safeBufferExports.Buffer,n=requireIncr32();function a(c){var u=c._cipher.encryptBlockRaw(c._prev);return n(c._prev),u}var o=16;return ctr.encrypt=function(c,u){var l=Math.ceil(u.length/o),p=c._cache.length;c._cache=e.concat([c._cache,e.allocUnsafe(l*o)]);for(var b=0;b<l;b++){var v=a(c),x=p+b*o;c._cache.writeUInt32BE(v[0],x+0),c._cache.writeUInt32BE(v[1],x+4),c._cache.writeUInt32BE(v[2],x+8),c._cache.writeUInt32BE(v[3],x+12)}var _=c._cache.slice(0,u.length);return c._cache=c._cache.slice(u.length),t(u,_)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var t={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},e=require$$2;for(var n in e)e[n].module=t[e[n].mode];return modes_1=e,modes_1}var aes$1={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes$1;hasRequiredAes=1;var t=safeBufferExports.Buffer;function e(l){t.isBuffer(l)||(l=t.from(l));for(var p=l.length/4|0,b=new Array(p),v=0;v<p;v++)b[v]=l.readUInt32BE(v*4);return b}function n(l){for(var p=0;p<l.length;l++)l[p]=0}function a(l,p,b,v,x){for(var _=b[0],E=b[1],$=b[2],S=b[3],A=l[0]^p[0],I=l[1]^p[1],O=l[2]^p[2],F=l[3]^p[3],U,G,J,k,ne=4,ee=1;ee<x;ee++)U=_[A>>>24]^E[I>>>16&255]^$[O>>>8&255]^S[F&255]^p[ne++],G=_[I>>>24]^E[O>>>16&255]^$[F>>>8&255]^S[A&255]^p[ne++],J=_[O>>>24]^E[F>>>16&255]^$[A>>>8&255]^S[I&255]^p[ne++],k=_[F>>>24]^E[A>>>16&255]^$[I>>>8&255]^S[O&255]^p[ne++],A=U,I=G,O=J,F=k;return U=(v[A>>>24]<<24|v[I>>>16&255]<<16|v[O>>>8&255]<<8|v[F&255])^p[ne++],G=(v[I>>>24]<<24|v[O>>>16&255]<<16|v[F>>>8&255]<<8|v[A&255])^p[ne++],J=(v[O>>>24]<<24|v[F>>>16&255]<<16|v[A>>>8&255]<<8|v[I&255])^p[ne++],k=(v[F>>>24]<<24|v[A>>>16&255]<<16|v[I>>>8&255]<<8|v[O&255])^p[ne++],U=U>>>0,G=G>>>0,J=J>>>0,k=k>>>0,[U,G,J,k]}var o=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var l=new Array(256),p=0;p<256;p++)p<128?l[p]=p<<1:l[p]=p<<1^283;for(var b=[],v=[],x=[[],[],[],[]],_=[[],[],[],[]],E=0,$=0,S=0;S<256;++S){var A=$^$<<1^$<<2^$<<3^$<<4;A=A>>>8^A&255^99,b[E]=A,v[A]=E;var I=l[E],O=l[I],F=l[O],U=l[A]*257^A*16843008;x[0][E]=U<<24|U>>>8,x[1][E]=U<<16|U>>>16,x[2][E]=U<<8|U>>>24,x[3][E]=U,U=F*16843009^O*65537^I*257^E*16843008,_[0][A]=U<<24|U>>>8,_[1][A]=U<<16|U>>>16,_[2][A]=U<<8|U>>>24,_[3][A]=U,E===0?E=$=1:(E=I^l[l[l[F^I]]],$^=l[l[$]])}return{SBOX:b,INV_SBOX:v,SUB_MIX:x,INV_SUB_MIX:_}}();function u(l){this._key=e(l),this._reset()}return u.blockSize=4*4,u.keySize=256/8,u.prototype.blockSize=u.blockSize,u.prototype.keySize=u.keySize,u.prototype._reset=function(){for(var l=this._key,p=l.length,b=p+6,v=(b+1)*4,x=[],_=0;_<p;_++)x[_]=l[_];for(_=p;_<v;_++){var E=x[_-1];_%p===0?(E=E<<8|E>>>24,E=c.SBOX[E>>>24]<<24|c.SBOX[E>>>16&255]<<16|c.SBOX[E>>>8&255]<<8|c.SBOX[E&255],E^=o[_/p|0]<<24):p>6&&_%p===4&&(E=c.SBOX[E>>>24]<<24|c.SBOX[E>>>16&255]<<16|c.SBOX[E>>>8&255]<<8|c.SBOX[E&255]),x[_]=x[_-p]^E}for(var $=[],S=0;S<v;S++){var A=v-S,I=x[A-(S%4?0:4)];S<4||A<=4?$[S]=I:$[S]=c.INV_SUB_MIX[0][c.SBOX[I>>>24]]^c.INV_SUB_MIX[1][c.SBOX[I>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[I>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[I&255]]}this._nRounds=b,this._keySchedule=x,this._invKeySchedule=$},u.prototype.encryptBlockRaw=function(l){return l=e(l),a(l,this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},u.prototype.encryptBlock=function(l){var p=this.encryptBlockRaw(l),b=t.allocUnsafe(16);return b.writeUInt32BE(p[0],0),b.writeUInt32BE(p[1],4),b.writeUInt32BE(p[2],8),b.writeUInt32BE(p[3],12),b},u.prototype.decryptBlock=function(l){l=e(l);var p=l[1];l[1]=l[3],l[3]=p;var b=a(l,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),v=t.allocUnsafe(16);return v.writeUInt32BE(b[0],0),v.writeUInt32BE(b[3],4),v.writeUInt32BE(b[2],8),v.writeUInt32BE(b[1],12),v},u.prototype.scrub=function(){n(this._keySchedule),n(this._invKeySchedule),n(this._key)},aes$1.AES=u,aes$1}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var t=safeBufferExports.Buffer,e=t.alloc(16,0);function n(c){return[c.readUInt32BE(0),c.readUInt32BE(4),c.readUInt32BE(8),c.readUInt32BE(12)]}function a(c){var u=t.allocUnsafe(16);return u.writeUInt32BE(c[0]>>>0,0),u.writeUInt32BE(c[1]>>>0,4),u.writeUInt32BE(c[2]>>>0,8),u.writeUInt32BE(c[3]>>>0,12),u}function o(c){this.h=c,this.state=t.alloc(16,0),this.cache=t.allocUnsafe(0)}return o.prototype.ghash=function(c){for(var u=-1;++u<c.length;)this.state[u]^=c[u];this._multiply()},o.prototype._multiply=function(){for(var c=n(this.h),u=[0,0,0,0],l,p,b,v=-1;++v<128;){for(p=(this.state[~~(v/8)]&1<<7-v%8)!==0,p&&(u[0]^=c[0],u[1]^=c[1],u[2]^=c[2],u[3]^=c[3]),b=(c[3]&1)!==0,l=3;l>0;l--)c[l]=c[l]>>>1|(c[l-1]&1)<<31;c[0]=c[0]>>>1,b&&(c[0]=c[0]^225<<24)}this.state=a(u)},o.prototype.update=function(c){this.cache=t.concat([this.cache,c]);for(var u;this.cache.length>=16;)u=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(u)},o.prototype.final=function(c,u){return this.cache.length&&this.ghash(t.concat([this.cache,e],16)),this.ghash(a([0,c,0,u])),this.state},ghash=o,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var t=requireAes(),e=safeBufferExports.Buffer,n=requireCipherBase(),a=inherits_browserExports,o=requireGhash(),c=requireBufferXor(),u=requireIncr32();function l(v,x){var _=0;v.length!==x.length&&_++;for(var E=Math.min(v.length,x.length),$=0;$<E;++$)_+=v[$]^x[$];return _}function p(v,x,_){if(x.length===12)return v._finID=e.concat([x,e.from([0,0,0,1])]),e.concat([x,e.from([0,0,0,2])]);var E=new o(_),$=x.length,S=$%16;E.update(x),S&&(S=16-S,E.update(e.alloc(S,0))),E.update(e.alloc(8,0));var A=$*8,I=e.alloc(8);I.writeUIntBE(A,0,8),E.update(I),v._finID=E.state;var O=e.from(v._finID);return u(O),O}function b(v,x,_,E){n.call(this);var $=e.alloc(4,0);this._cipher=new t.AES(x);var S=this._cipher.encryptBlock($);this._ghash=new o(S),_=p(this,_,S),this._prev=e.from(_),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=E,this._alen=0,this._len=0,this._mode=v,this._authTag=null,this._called=!1}return a(b,n),b.prototype._update=function(v){if(!this._called&&this._alen){var x=16-this._alen%16;x<16&&(x=e.alloc(x,0),this._ghash.update(x))}this._called=!0;var _=this._mode.encrypt(this,v);return this._decrypt?this._ghash.update(v):this._ghash.update(_),this._len+=v.length,_},b.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var v=c(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&l(v,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=v,this._cipher.scrub()},b.prototype.getAuthTag=function(){if(this._decrypt||!e.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},b.prototype.setAuthTag=function(x){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=x},b.prototype.setAAD=function(x){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(x),this._alen+=x.length},authCipher=b,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var t=requireAes(),e=safeBufferExports.Buffer,n=requireCipherBase(),a=inherits_browserExports;function o(c,u,l,p){n.call(this),this._cipher=new t.AES(u),this._prev=e.from(l),this._cache=e.allocUnsafe(0),this._secCache=e.allocUnsafe(0),this._decrypt=p,this._mode=c}return a(o,n),o.prototype._update=function(c){return this._mode.encrypt(this,c,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},streamCipher=o,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var t=safeBufferExports.Buffer,e=requireMd5_js();function n(a,o,c,u){if(t.isBuffer(a)||(a=t.from(a,"binary")),o&&(t.isBuffer(o)||(o=t.from(o,"binary")),o.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var l=c/8,p=t.alloc(l),b=t.alloc(u||0),v=t.alloc(0);l>0||u>0;){var x=new e;x.update(v),x.update(a),o&&x.update(o),v=x.digest();var _=0;if(l>0){var E=p.length-l;_=Math.min(l,v.length),v.copy(p,E,0,_),l-=_}if(_<v.length&&u>0){var $=b.length-u,S=Math.min(u,v.length-_);v.copy(b,$,_,_+S),u-=S}}return v.fill(0),{key:p,iv:b}}return evp_bytestokey=n,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var t=requireModes$1(),e=requireAuthCipher(),n=safeBufferExports.Buffer,a=requireStreamCipher(),o=requireCipherBase(),c=requireAes(),u=requireEvp_bytestokey(),l=inherits_browserExports;function p(E,$,S){o.call(this),this._cache=new v,this._cipher=new c.AES($),this._prev=n.from(S),this._mode=E,this._autopadding=!0}l(p,o),p.prototype._update=function(E){this._cache.add(E);for(var $,S,A=[];$=this._cache.get();)S=this._mode.encrypt(this,$),A.push(S);return n.concat(A)};var b=n.alloc(16,16);p.prototype._final=function(){var E=this._cache.flush();if(this._autopadding)return E=this._mode.encrypt(this,E),this._cipher.scrub(),E;if(!E.equals(b))throw this._cipher.scrub(),new Error("data not multiple of block length")},p.prototype.setAutoPadding=function(E){return this._autopadding=!!E,this};function v(){this.cache=n.allocUnsafe(0)}v.prototype.add=function(E){this.cache=n.concat([this.cache,E])},v.prototype.get=function(){if(this.cache.length>15){var E=this.cache.slice(0,16);return this.cache=this.cache.slice(16),E}return null},v.prototype.flush=function(){for(var E=16-this.cache.length,$=n.allocUnsafe(E),S=-1;++S<E;)$.writeUInt8(E,S);return n.concat([this.cache,$])};function x(E,$,S){var A=t[E.toLowerCase()];if(!A)throw new TypeError("invalid suite type");if(typeof $=="string"&&($=n.from($)),$.length!==A.key/8)throw new TypeError("invalid key length "+$.length);if(typeof S=="string"&&(S=n.from(S)),A.mode!=="GCM"&&S.length!==A.iv)throw new TypeError("invalid iv length "+S.length);return A.type==="stream"?new a(A.module,$,S):A.type==="auth"?new e(A.module,$,S):new p(A.module,$,S)}function _(E,$){var S=t[E.toLowerCase()];if(!S)throw new TypeError("invalid suite type");var A=u($,!1,S.key,S.iv);return x(E,A.key,A.iv)}return encrypter.createCipheriv=x,encrypter.createCipher=_,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var t=requireAuthCipher(),e=safeBufferExports.Buffer,n=requireModes$1(),a=requireStreamCipher(),o=requireCipherBase(),c=requireAes(),u=requireEvp_bytestokey(),l=inherits_browserExports;function p(E,$,S){o.call(this),this._cache=new b,this._last=void 0,this._cipher=new c.AES($),this._prev=e.from(S),this._mode=E,this._autopadding=!0}l(p,o),p.prototype._update=function(E){this._cache.add(E);for(var $,S,A=[];$=this._cache.get(this._autopadding);)S=this._mode.decrypt(this,$),A.push(S);return e.concat(A)},p.prototype._final=function(){var E=this._cache.flush();if(this._autopadding)return v(this._mode.decrypt(this,E));if(E)throw new Error("data not multiple of block length")},p.prototype.setAutoPadding=function(E){return this._autopadding=!!E,this};function b(){this.cache=e.allocUnsafe(0)}b.prototype.add=function(E){this.cache=e.concat([this.cache,E])},b.prototype.get=function(E){var $;if(E){if(this.cache.length>16)return $=this.cache.slice(0,16),this.cache=this.cache.slice(16),$}else if(this.cache.length>=16)return $=this.cache.slice(0,16),this.cache=this.cache.slice(16),$;return null},b.prototype.flush=function(){if(this.cache.length)return this.cache};function v(E){var $=E[15];if($<1||$>16)throw new Error("unable to decrypt data");for(var S=-1;++S<$;)if(E[S+(16-$)]!==$)throw new Error("unable to decrypt data");if($!==16)return E.slice(0,16-$)}function x(E,$,S){var A=n[E.toLowerCase()];if(!A)throw new TypeError("invalid suite type");if(typeof S=="string"&&(S=e.from(S)),A.mode!=="GCM"&&S.length!==A.iv)throw new TypeError("invalid iv length "+S.length);if(typeof $=="string"&&($=e.from($)),$.length!==A.key/8)throw new TypeError("invalid key length "+$.length);return A.type==="stream"?new a(A.module,$,S,!0):A.type==="auth"?new t(A.module,$,S,!0):new p(A.module,$,S)}function _(E,$){var S=n[E.toLowerCase()];if(!S)throw new TypeError("invalid suite type");var A=u($,!1,S.key,S.iv);return x(E,A.key,A.iv)}return decrypter.createDecipher=_,decrypter.createDecipheriv=x,decrypter}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$9;hasRequiredBrowser$6=1;var t=requireEncrypter(),e=requireDecrypter(),n=require$$2;function a(){return Object.keys(n)}return browser$9.createCipher=browser$9.Cipher=t.createCipher,browser$9.createCipheriv=browser$9.Cipheriv=t.createCipheriv,browser$9.createDecipher=browser$9.Decipher=e.createDecipher,browser$9.createDecipheriv=browser$9.Decipheriv=e.createDecipheriv,browser$9.listCiphers=browser$9.getCiphers=a,browser$9}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$a;hasRequiredBrowser$5=1;var t=requireBrowserifyDes(),e=requireBrowser$6(),n=requireModes$1(),a=requireModes(),o=requireEvp_bytestokey();function c(v,x){v=v.toLowerCase();var _,E;if(n[v])_=n[v].key,E=n[v].iv;else if(a[v])_=a[v].key*8,E=a[v].iv;else throw new TypeError("invalid suite type");var $=o(x,!1,_,E);return l(v,$.key,$.iv)}function u(v,x){v=v.toLowerCase();var _,E;if(n[v])_=n[v].key,E=n[v].iv;else if(a[v])_=a[v].key*8,E=a[v].iv;else throw new TypeError("invalid suite type");var $=o(x,!1,_,E);return p(v,$.key,$.iv)}function l(v,x,_){if(v=v.toLowerCase(),n[v])return e.createCipheriv(v,x,_);if(a[v])return new t({key:x,iv:_,mode:v});throw new TypeError("invalid suite type")}function p(v,x,_){if(v=v.toLowerCase(),n[v])return e.createDecipheriv(v,x,_);if(a[v])return new t({key:x,iv:_,mode:v,decrypt:!0});throw new TypeError("invalid suite type")}function b(){return Object.keys(a).concat(e.getCiphers())}return browser$a.createCipher=browser$a.Cipher=c,browser$a.createCipheriv=browser$a.Cipheriv=l,browser$a.createDecipher=browser$a.Decipher=u,browser$a.createDecipheriv=browser$a.Decipheriv=p,browser$a.listCiphers=browser$a.getCiphers=b,browser$a}var browser$8={},bn$1={exports:{}};bn$1.exports;(function(t){(function(e,n){function a(ae,L){if(!ae)throw new Error(L||"Assertion failed")}function o(ae,L){ae.super_=L;var P=function(){};P.prototype=L.prototype,ae.prototype=new P,ae.prototype.constructor=ae}function c(ae,L,P){if(c.isBN(ae))return ae;this.negative=0,this.words=null,this.length=0,this.red=null,ae!==null&&((L==="le"||L==="be")&&(P=L,L=10),this._init(ae||0,L||10,P||"be"))}typeof e=="object"?e.exports=c:n.BN=c,c.BN=c,c.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=buffer$2.Buffer}catch{}c.isBN=function(L){return L instanceof c?!0:L!==null&&typeof L=="object"&&L.constructor.wordSize===c.wordSize&&Array.isArray(L.words)},c.max=function(L,P){return L.cmp(P)>0?L:P},c.min=function(L,P){return L.cmp(P)<0?L:P},c.prototype._init=function(L,P,T){if(typeof L=="number")return this._initNumber(L,P,T);if(typeof L=="object")return this._initArray(L,P,T);P==="hex"&&(P=16),a(P===(P|0)&&P>=2&&P<=36),L=L.toString().replace(/\s+/g,"");var C=0;L[0]==="-"&&(C++,this.negative=1),C<L.length&&(P===16?this._parseHex(L,C,T):(this._parseBase(L,P,C),T==="le"&&this._initArray(this.toArray(),P,T)))},c.prototype._initNumber=function(L,P,T){L<0&&(this.negative=1,L=-L),L<67108864?(this.words=[L&67108863],this.length=1):L<4503599627370496?(this.words=[L&67108863,L/67108864&67108863],this.length=2):(a(L<9007199254740992),this.words=[L&67108863,L/67108864&67108863,1],this.length=3),T==="le"&&this._initArray(this.toArray(),P,T)},c.prototype._initArray=function(L,P,T){if(a(typeof L.length=="number"),L.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(L.length/3),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var q,z,X=0;if(T==="be")for(C=L.length-1,q=0;C>=0;C-=3)z=L[C]|L[C-1]<<8|L[C-2]<<16,this.words[q]|=z<<X&67108863,this.words[q+1]=z>>>26-X&67108863,X+=24,X>=26&&(X-=26,q++);else if(T==="le")for(C=0,q=0;C<L.length;C+=3)z=L[C]|L[C+1]<<8|L[C+2]<<16,this.words[q]|=z<<X&67108863,this.words[q+1]=z>>>26-X&67108863,X+=24,X>=26&&(X-=26,q++);return this.strip()};function l(ae,L){var P=ae.charCodeAt(L);return P>=65&&P<=70?P-55:P>=97&&P<=102?P-87:P-48&15}function p(ae,L,P){var T=l(ae,P);return P-1>=L&&(T|=l(ae,P-1)<<4),T}c.prototype._parseHex=function(L,P,T){this.length=Math.ceil((L.length-P)/6),this.words=new Array(this.length);for(var C=0;C<this.length;C++)this.words[C]=0;var q=0,z=0,X;if(T==="be")for(C=L.length-1;C>=P;C-=2)X=p(L,P,C)<<q,this.words[z]|=X&67108863,q>=18?(q-=18,z+=1,this.words[z]|=X>>>26):q+=8;else{var W=L.length-P;for(C=W%2===0?P+1:P;C<L.length;C+=2)X=p(L,P,C)<<q,this.words[z]|=X&67108863,q>=18?(q-=18,z+=1,this.words[z]|=X>>>26):q+=8}this.strip()};function b(ae,L,P,T){for(var C=0,q=Math.min(ae.length,P),z=L;z<q;z++){var X=ae.charCodeAt(z)-48;C*=T,X>=49?C+=X-49+10:X>=17?C+=X-17+10:C+=X}return C}c.prototype._parseBase=function(L,P,T){this.words=[0],this.length=1;for(var C=0,q=1;q<=67108863;q*=P)C++;C--,q=q/P|0;for(var z=L.length-T,X=z%C,W=Math.min(z,z-X)+T,M=0,D=T;D<W;D+=C)M=b(L,D,D+C,P),this.imuln(q),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M);if(X!==0){var B=1;for(M=b(L,D,L.length,P),D=0;D<X;D++)B*=P;this.imuln(B),this.words[0]+M<67108864?this.words[0]+=M:this._iaddn(M)}this.strip()},c.prototype.copy=function(L){L.words=new Array(this.length);for(var P=0;P<this.length;P++)L.words[P]=this.words[P];L.length=this.length,L.negative=this.negative,L.red=this.red},c.prototype.clone=function(){var L=new c(null);return this.copy(L),L},c.prototype._expand=function(L){for(;this.length<L;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var v=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(L,P){L=L||10,P=P|0||1;var T;if(L===16||L==="hex"){T="";for(var C=0,q=0,z=0;z<this.length;z++){var X=this.words[z],W=((X<<C|q)&16777215).toString(16);q=X>>>24-C&16777215,q!==0||z!==this.length-1?T=v[6-W.length]+W+T:T=W+T,C+=2,C>=26&&(C-=26,z--)}for(q!==0&&(T=q.toString(16)+T);T.length%P!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}if(L===(L|0)&&L>=2&&L<=36){var M=x[L],D=_[L];T="";var B=this.clone();for(B.negative=0;!B.isZero();){var Z=B.modn(D).toString(L);B=B.idivn(D),B.isZero()?T=Z+T:T=v[M-Z.length]+Z+T}for(this.isZero()&&(T="0"+T);T.length%P!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var L=this.words[0];return this.length===2?L+=this.words[1]*67108864:this.length===3&&this.words[2]===1?L+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-L:L},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(L,P){return a(typeof u<"u"),this.toArrayLike(u,L,P)},c.prototype.toArray=function(L,P){return this.toArrayLike(Array,L,P)},c.prototype.toArrayLike=function(L,P,T){var C=this.byteLength(),q=T||Math.max(1,C);a(C<=q,"byte array longer than desired length"),a(q>0,"Requested array length <= 0"),this.strip();var z=P==="le",X=new L(q),W,M,D=this.clone();if(z){for(M=0;!D.isZero();M++)W=D.andln(255),D.iushrn(8),X[M]=W;for(;M<q;M++)X[M]=0}else{for(M=0;M<q-C;M++)X[M]=0;for(M=0;!D.isZero();M++)W=D.andln(255),D.iushrn(8),X[q-M-1]=W}return X},Math.clz32?c.prototype._countBits=function(L){return 32-Math.clz32(L)}:c.prototype._countBits=function(L){var P=L,T=0;return P>=4096&&(T+=13,P>>>=13),P>=64&&(T+=7,P>>>=7),P>=8&&(T+=4,P>>>=4),P>=2&&(T+=2,P>>>=2),T+P},c.prototype._zeroBits=function(L){if(L===0)return 26;var P=L,T=0;return P&8191||(T+=13,P>>>=13),P&127||(T+=7,P>>>=7),P&15||(T+=4,P>>>=4),P&3||(T+=2,P>>>=2),P&1||T++,T},c.prototype.bitLength=function(){var L=this.words[this.length-1],P=this._countBits(L);return(this.length-1)*26+P};function E(ae){for(var L=new Array(ae.bitLength()),P=0;P<L.length;P++){var T=P/26|0,C=P%26;L[P]=(ae.words[T]&1<<C)>>>C}return L}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var L=0,P=0;P<this.length;P++){var T=this._zeroBits(this.words[P]);if(L+=T,T!==26)break}return L},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(L){return this.negative!==0?this.abs().inotn(L).iaddn(1):this.clone()},c.prototype.fromTwos=function(L){return this.testn(L-1)?this.notn(L).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(L){for(;this.length<L.length;)this.words[this.length++]=0;for(var P=0;P<L.length;P++)this.words[P]=this.words[P]|L.words[P];return this.strip()},c.prototype.ior=function(L){return a((this.negative|L.negative)===0),this.iuor(L)},c.prototype.or=function(L){return this.length>L.length?this.clone().ior(L):L.clone().ior(this)},c.prototype.uor=function(L){return this.length>L.length?this.clone().iuor(L):L.clone().iuor(this)},c.prototype.iuand=function(L){var P;this.length>L.length?P=L:P=this;for(var T=0;T<P.length;T++)this.words[T]=this.words[T]&L.words[T];return this.length=P.length,this.strip()},c.prototype.iand=function(L){return a((this.negative|L.negative)===0),this.iuand(L)},c.prototype.and=function(L){return this.length>L.length?this.clone().iand(L):L.clone().iand(this)},c.prototype.uand=function(L){return this.length>L.length?this.clone().iuand(L):L.clone().iuand(this)},c.prototype.iuxor=function(L){var P,T;this.length>L.length?(P=this,T=L):(P=L,T=this);for(var C=0;C<T.length;C++)this.words[C]=P.words[C]^T.words[C];if(this!==P)for(;C<P.length;C++)this.words[C]=P.words[C];return this.length=P.length,this.strip()},c.prototype.ixor=function(L){return a((this.negative|L.negative)===0),this.iuxor(L)},c.prototype.xor=function(L){return this.length>L.length?this.clone().ixor(L):L.clone().ixor(this)},c.prototype.uxor=function(L){return this.length>L.length?this.clone().iuxor(L):L.clone().iuxor(this)},c.prototype.inotn=function(L){a(typeof L=="number"&&L>=0);var P=Math.ceil(L/26)|0,T=L%26;this._expand(P),T>0&&P--;for(var C=0;C<P;C++)this.words[C]=~this.words[C]&67108863;return T>0&&(this.words[C]=~this.words[C]&67108863>>26-T),this.strip()},c.prototype.notn=function(L){return this.clone().inotn(L)},c.prototype.setn=function(L,P){a(typeof L=="number"&&L>=0);var T=L/26|0,C=L%26;return this._expand(T+1),P?this.words[T]=this.words[T]|1<<C:this.words[T]=this.words[T]&~(1<<C),this.strip()},c.prototype.iadd=function(L){var P;if(this.negative!==0&&L.negative===0)return this.negative=0,P=this.isub(L),this.negative^=1,this._normSign();if(this.negative===0&&L.negative!==0)return L.negative=0,P=this.isub(L),L.negative=1,P._normSign();var T,C;this.length>L.length?(T=this,C=L):(T=L,C=this);for(var q=0,z=0;z<C.length;z++)P=(T.words[z]|0)+(C.words[z]|0)+q,this.words[z]=P&67108863,q=P>>>26;for(;q!==0&&z<T.length;z++)P=(T.words[z]|0)+q,this.words[z]=P&67108863,q=P>>>26;if(this.length=T.length,q!==0)this.words[this.length]=q,this.length++;else if(T!==this)for(;z<T.length;z++)this.words[z]=T.words[z];return this},c.prototype.add=function(L){var P;return L.negative!==0&&this.negative===0?(L.negative=0,P=this.sub(L),L.negative^=1,P):L.negative===0&&this.negative!==0?(this.negative=0,P=L.sub(this),this.negative=1,P):this.length>L.length?this.clone().iadd(L):L.clone().iadd(this)},c.prototype.isub=function(L){if(L.negative!==0){L.negative=0;var P=this.iadd(L);return L.negative=1,P._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(L),this.negative=1,this._normSign();var T=this.cmp(L);if(T===0)return this.negative=0,this.length=1,this.words[0]=0,this;var C,q;T>0?(C=this,q=L):(C=L,q=this);for(var z=0,X=0;X<q.length;X++)P=(C.words[X]|0)-(q.words[X]|0)+z,z=P>>26,this.words[X]=P&67108863;for(;z!==0&&X<C.length;X++)P=(C.words[X]|0)+z,z=P>>26,this.words[X]=P&67108863;if(z===0&&X<C.length&&C!==this)for(;X<C.length;X++)this.words[X]=C.words[X];return this.length=Math.max(this.length,X),C!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(L){return this.clone().isub(L)};function $(ae,L,P){P.negative=L.negative^ae.negative;var T=ae.length+L.length|0;P.length=T,T=T-1|0;var C=ae.words[0]|0,q=L.words[0]|0,z=C*q,X=z&67108863,W=z/67108864|0;P.words[0]=X;for(var M=1;M<T;M++){for(var D=W>>>26,B=W&67108863,Z=Math.min(M,L.length-1),he=Math.max(0,M-ae.length+1);he<=Z;he++){var j=M-he|0;C=ae.words[j]|0,q=L.words[he]|0,z=C*q+B,D+=z/67108864|0,B=z&67108863}P.words[M]=B|0,W=D|0}return W!==0?P.words[M]=W|0:P.length--,P.strip()}var S=function(L,P,T){var C=L.words,q=P.words,z=T.words,X=0,W,M,D,B=C[0]|0,Z=B&8191,he=B>>>13,j=C[1]|0,fe=j&8191,ie=j>>>13,oe=C[2]|0,ce=oe&8191,V=oe>>>13,Q=C[3]|0,se=Q&8191,ye=Q>>>13,be=C[4]|0,ve=be&8191,le=be>>>13,Y=C[5]|0,te=Y&8191,ue=Y>>>13,pe=C[6]|0,ge=pe&8191,me=pe>>>13,we=C[7]|0,xe=we&8191,Ee=we>>>13,$e=C[8]|0,_e=$e&8191,Te=$e>>>13,Ie=C[9]|0,Se=Ie&8191,Ne=Ie>>>13,Le=q[0]|0,Ae=Le&8191,Me=Le>>>13,Oe=q[1]|0,De=Oe&8191,Je=Oe>>>13,et=q[2]|0,Fe=et&8191,tt=et>>>13,rt=q[3]|0,Ue=rt&8191,Ke=rt>>>13,He=q[4]|0,Ce=He&8191,Ve=He>>>13,ze=q[5]|0,Be=ze&8191,Ge=ze>>>13,je=q[6]|0,Re=je&8191,We=je>>>13,Ze=q[7]|0,ke=Ze&8191,Qe=Ze>>>13,Ye=q[8]|0,Pe=Ye&8191,Xe=Ye>>>13,at=q[9]|0,qe=at&8191,st=at>>>13;T.negative=L.negative^P.negative,T.length=19,W=Math.imul(Z,Ae),M=Math.imul(Z,Me),M=M+Math.imul(he,Ae)|0,D=Math.imul(he,Me);var nt=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(nt>>>26)|0,nt&=67108863,W=Math.imul(fe,Ae),M=Math.imul(fe,Me),M=M+Math.imul(ie,Ae)|0,D=Math.imul(ie,Me),W=W+Math.imul(Z,De)|0,M=M+Math.imul(Z,Je)|0,M=M+Math.imul(he,De)|0,D=D+Math.imul(he,Je)|0;var it=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(it>>>26)|0,it&=67108863,W=Math.imul(ce,Ae),M=Math.imul(ce,Me),M=M+Math.imul(V,Ae)|0,D=Math.imul(V,Me),W=W+Math.imul(fe,De)|0,M=M+Math.imul(fe,Je)|0,M=M+Math.imul(ie,De)|0,D=D+Math.imul(ie,Je)|0,W=W+Math.imul(Z,Fe)|0,M=M+Math.imul(Z,tt)|0,M=M+Math.imul(he,Fe)|0,D=D+Math.imul(he,tt)|0;var ot=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(ot>>>26)|0,ot&=67108863,W=Math.imul(se,Ae),M=Math.imul(se,Me),M=M+Math.imul(ye,Ae)|0,D=Math.imul(ye,Me),W=W+Math.imul(ce,De)|0,M=M+Math.imul(ce,Je)|0,M=M+Math.imul(V,De)|0,D=D+Math.imul(V,Je)|0,W=W+Math.imul(fe,Fe)|0,M=M+Math.imul(fe,tt)|0,M=M+Math.imul(ie,Fe)|0,D=D+Math.imul(ie,tt)|0,W=W+Math.imul(Z,Ue)|0,M=M+Math.imul(Z,Ke)|0,M=M+Math.imul(he,Ue)|0,D=D+Math.imul(he,Ke)|0;var ft=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(ft>>>26)|0,ft&=67108863,W=Math.imul(ve,Ae),M=Math.imul(ve,Me),M=M+Math.imul(le,Ae)|0,D=Math.imul(le,Me),W=W+Math.imul(se,De)|0,M=M+Math.imul(se,Je)|0,M=M+Math.imul(ye,De)|0,D=D+Math.imul(ye,Je)|0,W=W+Math.imul(ce,Fe)|0,M=M+Math.imul(ce,tt)|0,M=M+Math.imul(V,Fe)|0,D=D+Math.imul(V,tt)|0,W=W+Math.imul(fe,Ue)|0,M=M+Math.imul(fe,Ke)|0,M=M+Math.imul(ie,Ue)|0,D=D+Math.imul(ie,Ke)|0,W=W+Math.imul(Z,Ce)|0,M=M+Math.imul(Z,Ve)|0,M=M+Math.imul(he,Ce)|0,D=D+Math.imul(he,Ve)|0;var ct=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(ct>>>26)|0,ct&=67108863,W=Math.imul(te,Ae),M=Math.imul(te,Me),M=M+Math.imul(ue,Ae)|0,D=Math.imul(ue,Me),W=W+Math.imul(ve,De)|0,M=M+Math.imul(ve,Je)|0,M=M+Math.imul(le,De)|0,D=D+Math.imul(le,Je)|0,W=W+Math.imul(se,Fe)|0,M=M+Math.imul(se,tt)|0,M=M+Math.imul(ye,Fe)|0,D=D+Math.imul(ye,tt)|0,W=W+Math.imul(ce,Ue)|0,M=M+Math.imul(ce,Ke)|0,M=M+Math.imul(V,Ue)|0,D=D+Math.imul(V,Ke)|0,W=W+Math.imul(fe,Ce)|0,M=M+Math.imul(fe,Ve)|0,M=M+Math.imul(ie,Ce)|0,D=D+Math.imul(ie,Ve)|0,W=W+Math.imul(Z,Be)|0,M=M+Math.imul(Z,Ge)|0,M=M+Math.imul(he,Be)|0,D=D+Math.imul(he,Ge)|0;var ut=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(ut>>>26)|0,ut&=67108863,W=Math.imul(ge,Ae),M=Math.imul(ge,Me),M=M+Math.imul(me,Ae)|0,D=Math.imul(me,Me),W=W+Math.imul(te,De)|0,M=M+Math.imul(te,Je)|0,M=M+Math.imul(ue,De)|0,D=D+Math.imul(ue,Je)|0,W=W+Math.imul(ve,Fe)|0,M=M+Math.imul(ve,tt)|0,M=M+Math.imul(le,Fe)|0,D=D+Math.imul(le,tt)|0,W=W+Math.imul(se,Ue)|0,M=M+Math.imul(se,Ke)|0,M=M+Math.imul(ye,Ue)|0,D=D+Math.imul(ye,Ke)|0,W=W+Math.imul(ce,Ce)|0,M=M+Math.imul(ce,Ve)|0,M=M+Math.imul(V,Ce)|0,D=D+Math.imul(V,Ve)|0,W=W+Math.imul(fe,Be)|0,M=M+Math.imul(fe,Ge)|0,M=M+Math.imul(ie,Be)|0,D=D+Math.imul(ie,Ge)|0,W=W+Math.imul(Z,Re)|0,M=M+Math.imul(Z,We)|0,M=M+Math.imul(he,Re)|0,D=D+Math.imul(he,We)|0;var lt=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(lt>>>26)|0,lt&=67108863,W=Math.imul(xe,Ae),M=Math.imul(xe,Me),M=M+Math.imul(Ee,Ae)|0,D=Math.imul(Ee,Me),W=W+Math.imul(ge,De)|0,M=M+Math.imul(ge,Je)|0,M=M+Math.imul(me,De)|0,D=D+Math.imul(me,Je)|0,W=W+Math.imul(te,Fe)|0,M=M+Math.imul(te,tt)|0,M=M+Math.imul(ue,Fe)|0,D=D+Math.imul(ue,tt)|0,W=W+Math.imul(ve,Ue)|0,M=M+Math.imul(ve,Ke)|0,M=M+Math.imul(le,Ue)|0,D=D+Math.imul(le,Ke)|0,W=W+Math.imul(se,Ce)|0,M=M+Math.imul(se,Ve)|0,M=M+Math.imul(ye,Ce)|0,D=D+Math.imul(ye,Ve)|0,W=W+Math.imul(ce,Be)|0,M=M+Math.imul(ce,Ge)|0,M=M+Math.imul(V,Be)|0,D=D+Math.imul(V,Ge)|0,W=W+Math.imul(fe,Re)|0,M=M+Math.imul(fe,We)|0,M=M+Math.imul(ie,Re)|0,D=D+Math.imul(ie,We)|0,W=W+Math.imul(Z,ke)|0,M=M+Math.imul(Z,Qe)|0,M=M+Math.imul(he,ke)|0,D=D+Math.imul(he,Qe)|0;var gt=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(gt>>>26)|0,gt&=67108863,W=Math.imul(_e,Ae),M=Math.imul(_e,Me),M=M+Math.imul(Te,Ae)|0,D=Math.imul(Te,Me),W=W+Math.imul(xe,De)|0,M=M+Math.imul(xe,Je)|0,M=M+Math.imul(Ee,De)|0,D=D+Math.imul(Ee,Je)|0,W=W+Math.imul(ge,Fe)|0,M=M+Math.imul(ge,tt)|0,M=M+Math.imul(me,Fe)|0,D=D+Math.imul(me,tt)|0,W=W+Math.imul(te,Ue)|0,M=M+Math.imul(te,Ke)|0,M=M+Math.imul(ue,Ue)|0,D=D+Math.imul(ue,Ke)|0,W=W+Math.imul(ve,Ce)|0,M=M+Math.imul(ve,Ve)|0,M=M+Math.imul(le,Ce)|0,D=D+Math.imul(le,Ve)|0,W=W+Math.imul(se,Be)|0,M=M+Math.imul(se,Ge)|0,M=M+Math.imul(ye,Be)|0,D=D+Math.imul(ye,Ge)|0,W=W+Math.imul(ce,Re)|0,M=M+Math.imul(ce,We)|0,M=M+Math.imul(V,Re)|0,D=D+Math.imul(V,We)|0,W=W+Math.imul(fe,ke)|0,M=M+Math.imul(fe,Qe)|0,M=M+Math.imul(ie,ke)|0,D=D+Math.imul(ie,Qe)|0,W=W+Math.imul(Z,Pe)|0,M=M+Math.imul(Z,Xe)|0,M=M+Math.imul(he,Pe)|0,D=D+Math.imul(he,Xe)|0;var bt=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(bt>>>26)|0,bt&=67108863,W=Math.imul(Se,Ae),M=Math.imul(Se,Me),M=M+Math.imul(Ne,Ae)|0,D=Math.imul(Ne,Me),W=W+Math.imul(_e,De)|0,M=M+Math.imul(_e,Je)|0,M=M+Math.imul(Te,De)|0,D=D+Math.imul(Te,Je)|0,W=W+Math.imul(xe,Fe)|0,M=M+Math.imul(xe,tt)|0,M=M+Math.imul(Ee,Fe)|0,D=D+Math.imul(Ee,tt)|0,W=W+Math.imul(ge,Ue)|0,M=M+Math.imul(ge,Ke)|0,M=M+Math.imul(me,Ue)|0,D=D+Math.imul(me,Ke)|0,W=W+Math.imul(te,Ce)|0,M=M+Math.imul(te,Ve)|0,M=M+Math.imul(ue,Ce)|0,D=D+Math.imul(ue,Ve)|0,W=W+Math.imul(ve,Be)|0,M=M+Math.imul(ve,Ge)|0,M=M+Math.imul(le,Be)|0,D=D+Math.imul(le,Ge)|0,W=W+Math.imul(se,Re)|0,M=M+Math.imul(se,We)|0,M=M+Math.imul(ye,Re)|0,D=D+Math.imul(ye,We)|0,W=W+Math.imul(ce,ke)|0,M=M+Math.imul(ce,Qe)|0,M=M+Math.imul(V,ke)|0,D=D+Math.imul(V,Qe)|0,W=W+Math.imul(fe,Pe)|0,M=M+Math.imul(fe,Xe)|0,M=M+Math.imul(ie,Pe)|0,D=D+Math.imul(ie,Xe)|0,W=W+Math.imul(Z,qe)|0,M=M+Math.imul(Z,st)|0,M=M+Math.imul(he,qe)|0,D=D+Math.imul(he,st)|0;var mt=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(mt>>>26)|0,mt&=67108863,W=Math.imul(Se,De),M=Math.imul(Se,Je),M=M+Math.imul(Ne,De)|0,D=Math.imul(Ne,Je),W=W+Math.imul(_e,Fe)|0,M=M+Math.imul(_e,tt)|0,M=M+Math.imul(Te,Fe)|0,D=D+Math.imul(Te,tt)|0,W=W+Math.imul(xe,Ue)|0,M=M+Math.imul(xe,Ke)|0,M=M+Math.imul(Ee,Ue)|0,D=D+Math.imul(Ee,Ke)|0,W=W+Math.imul(ge,Ce)|0,M=M+Math.imul(ge,Ve)|0,M=M+Math.imul(me,Ce)|0,D=D+Math.imul(me,Ve)|0,W=W+Math.imul(te,Be)|0,M=M+Math.imul(te,Ge)|0,M=M+Math.imul(ue,Be)|0,D=D+Math.imul(ue,Ge)|0,W=W+Math.imul(ve,Re)|0,M=M+Math.imul(ve,We)|0,M=M+Math.imul(le,Re)|0,D=D+Math.imul(le,We)|0,W=W+Math.imul(se,ke)|0,M=M+Math.imul(se,Qe)|0,M=M+Math.imul(ye,ke)|0,D=D+Math.imul(ye,Qe)|0,W=W+Math.imul(ce,Pe)|0,M=M+Math.imul(ce,Xe)|0,M=M+Math.imul(V,Pe)|0,D=D+Math.imul(V,Xe)|0,W=W+Math.imul(fe,qe)|0,M=M+Math.imul(fe,st)|0,M=M+Math.imul(ie,qe)|0,D=D+Math.imul(ie,st)|0;var vt=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(vt>>>26)|0,vt&=67108863,W=Math.imul(Se,Fe),M=Math.imul(Se,tt),M=M+Math.imul(Ne,Fe)|0,D=Math.imul(Ne,tt),W=W+Math.imul(_e,Ue)|0,M=M+Math.imul(_e,Ke)|0,M=M+Math.imul(Te,Ue)|0,D=D+Math.imul(Te,Ke)|0,W=W+Math.imul(xe,Ce)|0,M=M+Math.imul(xe,Ve)|0,M=M+Math.imul(Ee,Ce)|0,D=D+Math.imul(Ee,Ve)|0,W=W+Math.imul(ge,Be)|0,M=M+Math.imul(ge,Ge)|0,M=M+Math.imul(me,Be)|0,D=D+Math.imul(me,Ge)|0,W=W+Math.imul(te,Re)|0,M=M+Math.imul(te,We)|0,M=M+Math.imul(ue,Re)|0,D=D+Math.imul(ue,We)|0,W=W+Math.imul(ve,ke)|0,M=M+Math.imul(ve,Qe)|0,M=M+Math.imul(le,ke)|0,D=D+Math.imul(le,Qe)|0,W=W+Math.imul(se,Pe)|0,M=M+Math.imul(se,Xe)|0,M=M+Math.imul(ye,Pe)|0,D=D+Math.imul(ye,Xe)|0,W=W+Math.imul(ce,qe)|0,M=M+Math.imul(ce,st)|0,M=M+Math.imul(V,qe)|0,D=D+Math.imul(V,st)|0;var xt=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(xt>>>26)|0,xt&=67108863,W=Math.imul(Se,Ue),M=Math.imul(Se,Ke),M=M+Math.imul(Ne,Ue)|0,D=Math.imul(Ne,Ke),W=W+Math.imul(_e,Ce)|0,M=M+Math.imul(_e,Ve)|0,M=M+Math.imul(Te,Ce)|0,D=D+Math.imul(Te,Ve)|0,W=W+Math.imul(xe,Be)|0,M=M+Math.imul(xe,Ge)|0,M=M+Math.imul(Ee,Be)|0,D=D+Math.imul(Ee,Ge)|0,W=W+Math.imul(ge,Re)|0,M=M+Math.imul(ge,We)|0,M=M+Math.imul(me,Re)|0,D=D+Math.imul(me,We)|0,W=W+Math.imul(te,ke)|0,M=M+Math.imul(te,Qe)|0,M=M+Math.imul(ue,ke)|0,D=D+Math.imul(ue,Qe)|0,W=W+Math.imul(ve,Pe)|0,M=M+Math.imul(ve,Xe)|0,M=M+Math.imul(le,Pe)|0,D=D+Math.imul(le,Xe)|0,W=W+Math.imul(se,qe)|0,M=M+Math.imul(se,st)|0,M=M+Math.imul(ye,qe)|0,D=D+Math.imul(ye,st)|0;var _t=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(_t>>>26)|0,_t&=67108863,W=Math.imul(Se,Ce),M=Math.imul(Se,Ve),M=M+Math.imul(Ne,Ce)|0,D=Math.imul(Ne,Ve),W=W+Math.imul(_e,Be)|0,M=M+Math.imul(_e,Ge)|0,M=M+Math.imul(Te,Be)|0,D=D+Math.imul(Te,Ge)|0,W=W+Math.imul(xe,Re)|0,M=M+Math.imul(xe,We)|0,M=M+Math.imul(Ee,Re)|0,D=D+Math.imul(Ee,We)|0,W=W+Math.imul(ge,ke)|0,M=M+Math.imul(ge,Qe)|0,M=M+Math.imul(me,ke)|0,D=D+Math.imul(me,Qe)|0,W=W+Math.imul(te,Pe)|0,M=M+Math.imul(te,Xe)|0,M=M+Math.imul(ue,Pe)|0,D=D+Math.imul(ue,Xe)|0,W=W+Math.imul(ve,qe)|0,M=M+Math.imul(ve,st)|0,M=M+Math.imul(le,qe)|0,D=D+Math.imul(le,st)|0;var wt=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(wt>>>26)|0,wt&=67108863,W=Math.imul(Se,Be),M=Math.imul(Se,Ge),M=M+Math.imul(Ne,Be)|0,D=Math.imul(Ne,Ge),W=W+Math.imul(_e,Re)|0,M=M+Math.imul(_e,We)|0,M=M+Math.imul(Te,Re)|0,D=D+Math.imul(Te,We)|0,W=W+Math.imul(xe,ke)|0,M=M+Math.imul(xe,Qe)|0,M=M+Math.imul(Ee,ke)|0,D=D+Math.imul(Ee,Qe)|0,W=W+Math.imul(ge,Pe)|0,M=M+Math.imul(ge,Xe)|0,M=M+Math.imul(me,Pe)|0,D=D+Math.imul(me,Xe)|0,W=W+Math.imul(te,qe)|0,M=M+Math.imul(te,st)|0,M=M+Math.imul(ue,qe)|0,D=D+Math.imul(ue,st)|0;var Et=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(Et>>>26)|0,Et&=67108863,W=Math.imul(Se,Re),M=Math.imul(Se,We),M=M+Math.imul(Ne,Re)|0,D=Math.imul(Ne,We),W=W+Math.imul(_e,ke)|0,M=M+Math.imul(_e,Qe)|0,M=M+Math.imul(Te,ke)|0,D=D+Math.imul(Te,Qe)|0,W=W+Math.imul(xe,Pe)|0,M=M+Math.imul(xe,Xe)|0,M=M+Math.imul(Ee,Pe)|0,D=D+Math.imul(Ee,Xe)|0,W=W+Math.imul(ge,qe)|0,M=M+Math.imul(ge,st)|0,M=M+Math.imul(me,qe)|0,D=D+Math.imul(me,st)|0;var $t=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+($t>>>26)|0,$t&=67108863,W=Math.imul(Se,ke),M=Math.imul(Se,Qe),M=M+Math.imul(Ne,ke)|0,D=Math.imul(Ne,Qe),W=W+Math.imul(_e,Pe)|0,M=M+Math.imul(_e,Xe)|0,M=M+Math.imul(Te,Pe)|0,D=D+Math.imul(Te,Xe)|0,W=W+Math.imul(xe,qe)|0,M=M+Math.imul(xe,st)|0,M=M+Math.imul(Ee,qe)|0,D=D+Math.imul(Ee,st)|0;var St=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(St>>>26)|0,St&=67108863,W=Math.imul(Se,Pe),M=Math.imul(Se,Xe),M=M+Math.imul(Ne,Pe)|0,D=Math.imul(Ne,Xe),W=W+Math.imul(_e,qe)|0,M=M+Math.imul(_e,st)|0,M=M+Math.imul(Te,qe)|0,D=D+Math.imul(Te,st)|0;var At=(X+W|0)+((M&8191)<<13)|0;X=(D+(M>>>13)|0)+(At>>>26)|0,At&=67108863,W=Math.imul(Se,qe),M=Math.imul(Se,st),M=M+Math.imul(Ne,qe)|0,D=Math.imul(Ne,st);var Tt=(X+W|0)+((M&8191)<<13)|0;return X=(D+(M>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,z[0]=nt,z[1]=it,z[2]=ot,z[3]=ft,z[4]=ct,z[5]=ut,z[6]=lt,z[7]=gt,z[8]=bt,z[9]=mt,z[10]=vt,z[11]=xt,z[12]=_t,z[13]=wt,z[14]=Et,z[15]=$t,z[16]=St,z[17]=At,z[18]=Tt,X!==0&&(z[19]=X,T.length++),T};Math.imul||(S=$);function A(ae,L,P){P.negative=L.negative^ae.negative,P.length=ae.length+L.length;for(var T=0,C=0,q=0;q<P.length-1;q++){var z=C;C=0;for(var X=T&67108863,W=Math.min(q,L.length-1),M=Math.max(0,q-ae.length+1);M<=W;M++){var D=q-M,B=ae.words[D]|0,Z=L.words[M]|0,he=B*Z,j=he&67108863;z=z+(he/67108864|0)|0,j=j+X|0,X=j&67108863,z=z+(j>>>26)|0,C+=z>>>26,z&=67108863}P.words[q]=X,T=z,z=C}return T!==0?P.words[q]=T:P.length--,P.strip()}function I(ae,L,P){var T=new O;return T.mulp(ae,L,P)}c.prototype.mulTo=function(L,P){var T,C=this.length+L.length;return this.length===10&&L.length===10?T=S(this,L,P):C<63?T=$(this,L,P):C<1024?T=A(this,L,P):T=I(this,L,P),T};function O(ae,L){this.x=ae,this.y=L}O.prototype.makeRBT=function(L){for(var P=new Array(L),T=c.prototype._countBits(L)-1,C=0;C<L;C++)P[C]=this.revBin(C,T,L);return P},O.prototype.revBin=function(L,P,T){if(L===0||L===T-1)return L;for(var C=0,q=0;q<P;q++)C|=(L&1)<<P-q-1,L>>=1;return C},O.prototype.permute=function(L,P,T,C,q,z){for(var X=0;X<z;X++)C[X]=P[L[X]],q[X]=T[L[X]]},O.prototype.transform=function(L,P,T,C,q,z){this.permute(z,L,P,T,C,q);for(var X=1;X<q;X<<=1)for(var W=X<<1,M=Math.cos(2*Math.PI/W),D=Math.sin(2*Math.PI/W),B=0;B<q;B+=W)for(var Z=M,he=D,j=0;j<X;j++){var fe=T[B+j],ie=C[B+j],oe=T[B+j+X],ce=C[B+j+X],V=Z*oe-he*ce;ce=Z*ce+he*oe,oe=V,T[B+j]=fe+oe,C[B+j]=ie+ce,T[B+j+X]=fe-oe,C[B+j+X]=ie-ce,j!==W&&(V=M*Z-D*he,he=M*he+D*Z,Z=V)}},O.prototype.guessLen13b=function(L,P){var T=Math.max(P,L)|1,C=T&1,q=0;for(T=T/2|0;T;T=T>>>1)q++;return 1<<q+1+C},O.prototype.conjugate=function(L,P,T){if(!(T<=1))for(var C=0;C<T/2;C++){var q=L[C];L[C]=L[T-C-1],L[T-C-1]=q,q=P[C],P[C]=-P[T-C-1],P[T-C-1]=-q}},O.prototype.normalize13b=function(L,P){for(var T=0,C=0;C<P/2;C++){var q=Math.round(L[2*C+1]/P)*8192+Math.round(L[2*C]/P)+T;L[C]=q&67108863,q<67108864?T=0:T=q/67108864|0}return L},O.prototype.convert13b=function(L,P,T,C){for(var q=0,z=0;z<P;z++)q=q+(L[z]|0),T[2*z]=q&8191,q=q>>>13,T[2*z+1]=q&8191,q=q>>>13;for(z=2*P;z<C;++z)T[z]=0;a(q===0),a((q&-8192)===0)},O.prototype.stub=function(L){for(var P=new Array(L),T=0;T<L;T++)P[T]=0;return P},O.prototype.mulp=function(L,P,T){var C=2*this.guessLen13b(L.length,P.length),q=this.makeRBT(C),z=this.stub(C),X=new Array(C),W=new Array(C),M=new Array(C),D=new Array(C),B=new Array(C),Z=new Array(C),he=T.words;he.length=C,this.convert13b(L.words,L.length,X,C),this.convert13b(P.words,P.length,D,C),this.transform(X,z,W,M,C,q),this.transform(D,z,B,Z,C,q);for(var j=0;j<C;j++){var fe=W[j]*B[j]-M[j]*Z[j];M[j]=W[j]*Z[j]+M[j]*B[j],W[j]=fe}return this.conjugate(W,M,C),this.transform(W,M,he,z,C,q),this.conjugate(he,z,C),this.normalize13b(he,C),T.negative=L.negative^P.negative,T.length=L.length+P.length,T.strip()},c.prototype.mul=function(L){var P=new c(null);return P.words=new Array(this.length+L.length),this.mulTo(L,P)},c.prototype.mulf=function(L){var P=new c(null);return P.words=new Array(this.length+L.length),I(this,L,P)},c.prototype.imul=function(L){return this.clone().mulTo(L,this)},c.prototype.imuln=function(L){a(typeof L=="number"),a(L<67108864);for(var P=0,T=0;T<this.length;T++){var C=(this.words[T]|0)*L,q=(C&67108863)+(P&67108863);P>>=26,P+=C/67108864|0,P+=q>>>26,this.words[T]=q&67108863}return P!==0&&(this.words[T]=P,this.length++),this},c.prototype.muln=function(L){return this.clone().imuln(L)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(L){var P=E(L);if(P.length===0)return new c(1);for(var T=this,C=0;C<P.length&&P[C]===0;C++,T=T.sqr());if(++C<P.length)for(var q=T.sqr();C<P.length;C++,q=q.sqr())P[C]!==0&&(T=T.mul(q));return T},c.prototype.iushln=function(L){a(typeof L=="number"&&L>=0);var P=L%26,T=(L-P)/26,C=67108863>>>26-P<<26-P,q;if(P!==0){var z=0;for(q=0;q<this.length;q++){var X=this.words[q]&C,W=(this.words[q]|0)-X<<P;this.words[q]=W|z,z=X>>>26-P}z&&(this.words[q]=z,this.length++)}if(T!==0){for(q=this.length-1;q>=0;q--)this.words[q+T]=this.words[q];for(q=0;q<T;q++)this.words[q]=0;this.length+=T}return this.strip()},c.prototype.ishln=function(L){return a(this.negative===0),this.iushln(L)},c.prototype.iushrn=function(L,P,T){a(typeof L=="number"&&L>=0);var C;P?C=(P-P%26)/26:C=0;var q=L%26,z=Math.min((L-q)/26,this.length),X=67108863^67108863>>>q<<q,W=T;if(C-=z,C=Math.max(0,C),W){for(var M=0;M<z;M++)W.words[M]=this.words[M];W.length=z}if(z!==0)if(this.length>z)for(this.length-=z,M=0;M<this.length;M++)this.words[M]=this.words[M+z];else this.words[0]=0,this.length=1;var D=0;for(M=this.length-1;M>=0&&(D!==0||M>=C);M--){var B=this.words[M]|0;this.words[M]=D<<26-q|B>>>q,D=B&X}return W&&D!==0&&(W.words[W.length++]=D),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(L,P,T){return a(this.negative===0),this.iushrn(L,P,T)},c.prototype.shln=function(L){return this.clone().ishln(L)},c.prototype.ushln=function(L){return this.clone().iushln(L)},c.prototype.shrn=function(L){return this.clone().ishrn(L)},c.prototype.ushrn=function(L){return this.clone().iushrn(L)},c.prototype.testn=function(L){a(typeof L=="number"&&L>=0);var P=L%26,T=(L-P)/26,C=1<<P;if(this.length<=T)return!1;var q=this.words[T];return!!(q&C)},c.prototype.imaskn=function(L){a(typeof L=="number"&&L>=0);var P=L%26,T=(L-P)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=T)return this;if(P!==0&&T++,this.length=Math.min(T,this.length),P!==0){var C=67108863^67108863>>>P<<P;this.words[this.length-1]&=C}return this.strip()},c.prototype.maskn=function(L){return this.clone().imaskn(L)},c.prototype.iaddn=function(L){return a(typeof L=="number"),a(L<67108864),L<0?this.isubn(-L):this.negative!==0?this.length===1&&(this.words[0]|0)<L?(this.words[0]=L-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(L),this.negative=1,this):this._iaddn(L)},c.prototype._iaddn=function(L){this.words[0]+=L;for(var P=0;P<this.length&&this.words[P]>=67108864;P++)this.words[P]-=67108864,P===this.length-1?this.words[P+1]=1:this.words[P+1]++;return this.length=Math.max(this.length,P+1),this},c.prototype.isubn=function(L){if(a(typeof L=="number"),a(L<67108864),L<0)return this.iaddn(-L);if(this.negative!==0)return this.negative=0,this.iaddn(L),this.negative=1,this;if(this.words[0]-=L,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var P=0;P<this.length&&this.words[P]<0;P++)this.words[P]+=67108864,this.words[P+1]-=1;return this.strip()},c.prototype.addn=function(L){return this.clone().iaddn(L)},c.prototype.subn=function(L){return this.clone().isubn(L)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(L,P,T){var C=L.length+T,q;this._expand(C);var z,X=0;for(q=0;q<L.length;q++){z=(this.words[q+T]|0)+X;var W=(L.words[q]|0)*P;z-=W&67108863,X=(z>>26)-(W/67108864|0),this.words[q+T]=z&67108863}for(;q<this.length-T;q++)z=(this.words[q+T]|0)+X,X=z>>26,this.words[q+T]=z&67108863;if(X===0)return this.strip();for(a(X===-1),X=0,q=0;q<this.length;q++)z=-(this.words[q]|0)+X,X=z>>26,this.words[q]=z&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(L,P){var T=this.length-L.length,C=this.clone(),q=L,z=q.words[q.length-1]|0,X=this._countBits(z);T=26-X,T!==0&&(q=q.ushln(T),C.iushln(T),z=q.words[q.length-1]|0);var W=C.length-q.length,M;if(P!=="mod"){M=new c(null),M.length=W+1,M.words=new Array(M.length);for(var D=0;D<M.length;D++)M.words[D]=0}var B=C.clone()._ishlnsubmul(q,1,W);B.negative===0&&(C=B,M&&(M.words[W]=1));for(var Z=W-1;Z>=0;Z--){var he=(C.words[q.length+Z]|0)*67108864+(C.words[q.length+Z-1]|0);for(he=Math.min(he/z|0,67108863),C._ishlnsubmul(q,he,Z);C.negative!==0;)he--,C.negative=0,C._ishlnsubmul(q,1,Z),C.isZero()||(C.negative^=1);M&&(M.words[Z]=he)}return M&&M.strip(),C.strip(),P!=="div"&&T!==0&&C.iushrn(T),{div:M||null,mod:C}},c.prototype.divmod=function(L,P,T){if(a(!L.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var C,q,z;return this.negative!==0&&L.negative===0?(z=this.neg().divmod(L,P),P!=="mod"&&(C=z.div.neg()),P!=="div"&&(q=z.mod.neg(),T&&q.negative!==0&&q.iadd(L)),{div:C,mod:q}):this.negative===0&&L.negative!==0?(z=this.divmod(L.neg(),P),P!=="mod"&&(C=z.div.neg()),{div:C,mod:z.mod}):this.negative&L.negative?(z=this.neg().divmod(L.neg(),P),P!=="div"&&(q=z.mod.neg(),T&&q.negative!==0&&q.isub(L)),{div:z.div,mod:q}):L.length>this.length||this.cmp(L)<0?{div:new c(0),mod:this}:L.length===1?P==="div"?{div:this.divn(L.words[0]),mod:null}:P==="mod"?{div:null,mod:new c(this.modn(L.words[0]))}:{div:this.divn(L.words[0]),mod:new c(this.modn(L.words[0]))}:this._wordDiv(L,P)},c.prototype.div=function(L){return this.divmod(L,"div",!1).div},c.prototype.mod=function(L){return this.divmod(L,"mod",!1).mod},c.prototype.umod=function(L){return this.divmod(L,"mod",!0).mod},c.prototype.divRound=function(L){var P=this.divmod(L);if(P.mod.isZero())return P.div;var T=P.div.negative!==0?P.mod.isub(L):P.mod,C=L.ushrn(1),q=L.andln(1),z=T.cmp(C);return z<0||q===1&&z===0?P.div:P.div.negative!==0?P.div.isubn(1):P.div.iaddn(1)},c.prototype.modn=function(L){a(L<=67108863);for(var P=(1<<26)%L,T=0,C=this.length-1;C>=0;C--)T=(P*T+(this.words[C]|0))%L;return T},c.prototype.idivn=function(L){a(L<=67108863);for(var P=0,T=this.length-1;T>=0;T--){var C=(this.words[T]|0)+P*67108864;this.words[T]=C/L|0,P=C%L}return this.strip()},c.prototype.divn=function(L){return this.clone().idivn(L)},c.prototype.egcd=function(L){a(L.negative===0),a(!L.isZero());var P=this,T=L.clone();P.negative!==0?P=P.umod(L):P=P.clone();for(var C=new c(1),q=new c(0),z=new c(0),X=new c(1),W=0;P.isEven()&&T.isEven();)P.iushrn(1),T.iushrn(1),++W;for(var M=T.clone(),D=P.clone();!P.isZero();){for(var B=0,Z=1;!(P.words[0]&Z)&&B<26;++B,Z<<=1);if(B>0)for(P.iushrn(B);B-- >0;)(C.isOdd()||q.isOdd())&&(C.iadd(M),q.isub(D)),C.iushrn(1),q.iushrn(1);for(var he=0,j=1;!(T.words[0]&j)&&he<26;++he,j<<=1);if(he>0)for(T.iushrn(he);he-- >0;)(z.isOdd()||X.isOdd())&&(z.iadd(M),X.isub(D)),z.iushrn(1),X.iushrn(1);P.cmp(T)>=0?(P.isub(T),C.isub(z),q.isub(X)):(T.isub(P),z.isub(C),X.isub(q))}return{a:z,b:X,gcd:T.iushln(W)}},c.prototype._invmp=function(L){a(L.negative===0),a(!L.isZero());var P=this,T=L.clone();P.negative!==0?P=P.umod(L):P=P.clone();for(var C=new c(1),q=new c(0),z=T.clone();P.cmpn(1)>0&&T.cmpn(1)>0;){for(var X=0,W=1;!(P.words[0]&W)&&X<26;++X,W<<=1);if(X>0)for(P.iushrn(X);X-- >0;)C.isOdd()&&C.iadd(z),C.iushrn(1);for(var M=0,D=1;!(T.words[0]&D)&&M<26;++M,D<<=1);if(M>0)for(T.iushrn(M);M-- >0;)q.isOdd()&&q.iadd(z),q.iushrn(1);P.cmp(T)>=0?(P.isub(T),C.isub(q)):(T.isub(P),q.isub(C))}var B;return P.cmpn(1)===0?B=C:B=q,B.cmpn(0)<0&&B.iadd(L),B},c.prototype.gcd=function(L){if(this.isZero())return L.abs();if(L.isZero())return this.abs();var P=this.clone(),T=L.clone();P.negative=0,T.negative=0;for(var C=0;P.isEven()&&T.isEven();C++)P.iushrn(1),T.iushrn(1);do{for(;P.isEven();)P.iushrn(1);for(;T.isEven();)T.iushrn(1);var q=P.cmp(T);if(q<0){var z=P;P=T,T=z}else if(q===0||T.cmpn(1)===0)break;P.isub(T)}while(!0);return T.iushln(C)},c.prototype.invm=function(L){return this.egcd(L).a.umod(L)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(L){return this.words[0]&L},c.prototype.bincn=function(L){a(typeof L=="number");var P=L%26,T=(L-P)/26,C=1<<P;if(this.length<=T)return this._expand(T+1),this.words[T]|=C,this;for(var q=C,z=T;q!==0&&z<this.length;z++){var X=this.words[z]|0;X+=q,q=X>>>26,X&=67108863,this.words[z]=X}return q!==0&&(this.words[z]=q,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(L){var P=L<0;if(this.negative!==0&&!P)return-1;if(this.negative===0&&P)return 1;this.strip();var T;if(this.length>1)T=1;else{P&&(L=-L),a(L<=67108863,"Number is too big");var C=this.words[0]|0;T=C===L?0:C<L?-1:1}return this.negative!==0?-T|0:T},c.prototype.cmp=function(L){if(this.negative!==0&&L.negative===0)return-1;if(this.negative===0&&L.negative!==0)return 1;var P=this.ucmp(L);return this.negative!==0?-P|0:P},c.prototype.ucmp=function(L){if(this.length>L.length)return 1;if(this.length<L.length)return-1;for(var P=0,T=this.length-1;T>=0;T--){var C=this.words[T]|0,q=L.words[T]|0;if(C!==q){C<q?P=-1:C>q&&(P=1);break}}return P},c.prototype.gtn=function(L){return this.cmpn(L)===1},c.prototype.gt=function(L){return this.cmp(L)===1},c.prototype.gten=function(L){return this.cmpn(L)>=0},c.prototype.gte=function(L){return this.cmp(L)>=0},c.prototype.ltn=function(L){return this.cmpn(L)===-1},c.prototype.lt=function(L){return this.cmp(L)===-1},c.prototype.lten=function(L){return this.cmpn(L)<=0},c.prototype.lte=function(L){return this.cmp(L)<=0},c.prototype.eqn=function(L){return this.cmpn(L)===0},c.prototype.eq=function(L){return this.cmp(L)===0},c.red=function(L){return new ee(L)},c.prototype.toRed=function(L){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),L.convertTo(this)._forceRed(L)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(L){return this.red=L,this},c.prototype.forceRed=function(L){return a(!this.red,"Already a number in reduction context"),this._forceRed(L)},c.prototype.redAdd=function(L){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,L)},c.prototype.redIAdd=function(L){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,L)},c.prototype.redSub=function(L){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,L)},c.prototype.redISub=function(L){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,L)},c.prototype.redShl=function(L){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,L)},c.prototype.redMul=function(L){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,L),this.red.mul(this,L)},c.prototype.redIMul=function(L){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,L),this.red.imul(this,L)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(L){return a(this.red&&!L.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,L)};var F={k256:null,p224:null,p192:null,p25519:null};function U(ae,L){this.name=ae,this.p=new c(L,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var L=new c(null);return L.words=new Array(Math.ceil(this.n/13)),L},U.prototype.ireduce=function(L){var P=L,T;do this.split(P,this.tmp),P=this.imulK(P),P=P.iadd(this.tmp),T=P.bitLength();while(T>this.n);var C=T<this.n?-1:P.ucmp(this.p);return C===0?(P.words[0]=0,P.length=1):C>0?P.isub(this.p):P.strip!==void 0?P.strip():P._strip(),P},U.prototype.split=function(L,P){L.iushrn(this.n,0,P)},U.prototype.imulK=function(L){return L.imul(this.k)};function G(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(G,U),G.prototype.split=function(L,P){for(var T=4194303,C=Math.min(L.length,9),q=0;q<C;q++)P.words[q]=L.words[q];if(P.length=C,L.length<=9){L.words[0]=0,L.length=1;return}var z=L.words[9];for(P.words[P.length++]=z&T,q=10;q<L.length;q++){var X=L.words[q]|0;L.words[q-10]=(X&T)<<4|z>>>22,z=X}z>>>=22,L.words[q-10]=z,z===0&&L.length>10?L.length-=10:L.length-=9},G.prototype.imulK=function(L){L.words[L.length]=0,L.words[L.length+1]=0,L.length+=2;for(var P=0,T=0;T<L.length;T++){var C=L.words[T]|0;P+=C*977,L.words[T]=P&67108863,P=C*64+(P/67108864|0)}return L.words[L.length-1]===0&&(L.length--,L.words[L.length-1]===0&&L.length--),L};function J(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(J,U);function k(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(k,U);function ne(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(ne,U),ne.prototype.imulK=function(L){for(var P=0,T=0;T<L.length;T++){var C=(L.words[T]|0)*19+P,q=C&67108863;C>>>=26,L.words[T]=q,P=C}return P!==0&&(L.words[L.length++]=P),L},c._prime=function(L){if(F[L])return F[L];var P;if(L==="k256")P=new G;else if(L==="p224")P=new J;else if(L==="p192")P=new k;else if(L==="p25519")P=new ne;else throw new Error("Unknown prime "+L);return F[L]=P,P};function ee(ae){if(typeof ae=="string"){var L=c._prime(ae);this.m=L.p,this.prime=L}else a(ae.gtn(1),"modulus must be greater than 1"),this.m=ae,this.prime=null}ee.prototype._verify1=function(L){a(L.negative===0,"red works only with positives"),a(L.red,"red works only with red numbers")},ee.prototype._verify2=function(L,P){a((L.negative|P.negative)===0,"red works only with positives"),a(L.red&&L.red===P.red,"red works only with red numbers")},ee.prototype.imod=function(L){return this.prime?this.prime.ireduce(L)._forceRed(this):L.umod(this.m)._forceRed(this)},ee.prototype.neg=function(L){return L.isZero()?L.clone():this.m.sub(L)._forceRed(this)},ee.prototype.add=function(L,P){this._verify2(L,P);var T=L.add(P);return T.cmp(this.m)>=0&&T.isub(this.m),T._forceRed(this)},ee.prototype.iadd=function(L,P){this._verify2(L,P);var T=L.iadd(P);return T.cmp(this.m)>=0&&T.isub(this.m),T},ee.prototype.sub=function(L,P){this._verify2(L,P);var T=L.sub(P);return T.cmpn(0)<0&&T.iadd(this.m),T._forceRed(this)},ee.prototype.isub=function(L,P){this._verify2(L,P);var T=L.isub(P);return T.cmpn(0)<0&&T.iadd(this.m),T},ee.prototype.shl=function(L,P){return this._verify1(L),this.imod(L.ushln(P))},ee.prototype.imul=function(L,P){return this._verify2(L,P),this.imod(L.imul(P))},ee.prototype.mul=function(L,P){return this._verify2(L,P),this.imod(L.mul(P))},ee.prototype.isqr=function(L){return this.imul(L,L.clone())},ee.prototype.sqr=function(L){return this.mul(L,L)},ee.prototype.sqrt=function(L){if(L.isZero())return L.clone();var P=this.m.andln(3);if(a(P%2===1),P===3){var T=this.m.add(new c(1)).iushrn(2);return this.pow(L,T)}for(var C=this.m.subn(1),q=0;!C.isZero()&&C.andln(1)===0;)q++,C.iushrn(1);a(!C.isZero());var z=new c(1).toRed(this),X=z.redNeg(),W=this.m.subn(1).iushrn(1),M=this.m.bitLength();for(M=new c(2*M*M).toRed(this);this.pow(M,W).cmp(X)!==0;)M.redIAdd(X);for(var D=this.pow(M,C),B=this.pow(L,C.addn(1).iushrn(1)),Z=this.pow(L,C),he=q;Z.cmp(z)!==0;){for(var j=Z,fe=0;j.cmp(z)!==0;fe++)j=j.redSqr();a(fe<he);var ie=this.pow(D,new c(1).iushln(he-fe-1));B=B.redMul(ie),D=ie.redSqr(),Z=Z.redMul(D),he=fe}return B},ee.prototype.invm=function(L){var P=L._invmp(this.m);return P.negative!==0?(P.negative=0,this.imod(P).redNeg()):this.imod(P)},ee.prototype.pow=function(L,P){if(P.isZero())return new c(1).toRed(this);if(P.cmpn(1)===0)return L.clone();var T=4,C=new Array(1<<T);C[0]=new c(1).toRed(this),C[1]=L;for(var q=2;q<C.length;q++)C[q]=this.mul(C[q-1],L);var z=C[0],X=0,W=0,M=P.bitLength()%26;for(M===0&&(M=26),q=P.length-1;q>=0;q--){for(var D=P.words[q],B=M-1;B>=0;B--){var Z=D>>B&1;if(z!==C[0]&&(z=this.sqr(z)),Z===0&&X===0){W=0;continue}X<<=1,X|=Z,W++,!(W!==T&&(q!==0||B!==0))&&(z=this.mul(z,C[X]),W=0,X=0)}M=26}return z},ee.prototype.convertTo=function(L){var P=L.umod(this.m);return P===L?P.clone():P},ee.prototype.convertFrom=function(L){var P=L.clone();return P.red=null,P},c.mont=function(L){return new de(L)};function de(ae){ee.call(this,ae),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(de,ee),de.prototype.convertTo=function(L){return this.imod(L.ushln(this.shift))},de.prototype.convertFrom=function(L){var P=this.imod(L.mul(this.rinv));return P.red=null,P},de.prototype.imul=function(L,P){if(L.isZero()||P.isZero())return L.words[0]=0,L.length=1,L;var T=L.imul(P),C=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),q=T.isub(C).iushrn(this.shift),z=q;return q.cmp(this.m)>=0?z=q.isub(this.m):q.cmpn(0)<0&&(z=q.iadd(this.m)),z._forceRed(this)},de.prototype.mul=function(L,P){if(L.isZero()||P.isZero())return new c(0)._forceRed(this);var T=L.mul(P),C=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),q=T.isub(C).iushrn(this.shift),z=q;return q.cmp(this.m)>=0?z=q.isub(this.m):q.cmpn(0)<0&&(z=q.iadd(this.m)),z._forceRed(this)},de.prototype.invm=function(L){var P=this.imod(L._invmp(this.m).mul(this.r2));return P._forceRed(this)}})(t,commonjsGlobal)})(bn$1);var bnExports$1=bn$1.exports,brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var t;brorand.exports=function(o){return t||(t=new e(null)),t.generate(o)};function e(a){this.rand=a}if(brorand.exports.Rand=e,e.prototype.generate=function(o){return this._rand(o)},e.prototype._rand=function(o){if(this.rand.getBytes)return this.rand.getBytes(o);for(var c=new Uint8Array(o),u=0;u<c.length;u++)c[u]=this.rand.getByte();return c},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(o){var c=new Uint8Array(o);return self.crypto.getRandomValues(c),c}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(o){var c=new Uint8Array(o);return self.msCrypto.getRandomValues(c),c}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var n=requireCryptoBrowserify();if(typeof n.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(o){return n.randomBytes(o)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var t=bnExports$1,e=requireBrorand();function n(a){this.rand=a||new e.Rand}return mr=n,n.create=function(o){return new n(o)},n.prototype._randbelow=function(o){var c=o.bitLength(),u=Math.ceil(c/8);do var l=new t(this.rand.generate(u));while(l.cmp(o)>=0);return l},n.prototype._randrange=function(o,c){var u=c.sub(o);return o.add(this._randbelow(u))},n.prototype.test=function(o,c,u){var l=o.bitLength(),p=t.mont(o),b=new t(1).toRed(p);c||(c=Math.max(1,l/48|0));for(var v=o.subn(1),x=0;!v.testn(x);x++);for(var _=o.shrn(x),E=v.toRed(p),$=!0;c>0;c--){var S=this._randrange(new t(2),v);u&&u(S);var A=S.toRed(p).redPow(_);if(!(A.cmp(b)===0||A.cmp(E)===0)){for(var I=1;I<x;I++){if(A=A.redSqr(),A.cmp(b)===0)return!1;if(A.cmp(E)===0)break}if(I===x)return!1}}return $},n.prototype.getDivisor=function(o,c){var u=o.bitLength(),l=t.mont(o),p=new t(1).toRed(l);c||(c=Math.max(1,u/48|0));for(var b=o.subn(1),v=0;!b.testn(v);v++);for(var x=o.shrn(v),_=b.toRed(l);c>0;c--){var E=this._randrange(new t(2),b),$=o.gcd(E);if($.cmpn(1)!==0)return $;var S=E.toRed(l).redPow(x);if(!(S.cmp(p)===0||S.cmp(_)===0)){for(var A=1;A<v;A++){if(S=S.redSqr(),S.cmp(p)===0)return S.fromRed().subn(1).gcd(o);if(S.cmp(_)===0)break}if(A===v)return S=S.redSqr(),S.fromRed().subn(1).gcd(o)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var t=requireBrowser$b();generatePrime=A,A.simpleSieve=$,A.fermatTest=S;var e=bnExports$1,n=new e(24),a=requireMr(),o=new a,c=new e(1),u=new e(2),l=new e(5);new e(16),new e(8);var p=new e(10),b=new e(3);new e(7);var v=new e(11),x=new e(4);new e(12);var _=null;function E(){if(_!==null)return _;var I=1048576,O=[];O[0]=2;for(var F=1,U=3;U<I;U+=2){for(var G=Math.ceil(Math.sqrt(U)),J=0;J<F&&O[J]<=G&&U%O[J]!==0;J++);F!==J&&O[J]<=G||(O[F++]=U)}return _=O,O}function $(I){for(var O=E(),F=0;F<O.length;F++)if(I.modn(O[F])===0)return I.cmpn(O[F])===0;return!0}function S(I){var O=e.mont(I);return u.toRed(O).redPow(I.subn(1)).fromRed().cmpn(1)===0}function A(I,O){if(I<16)return O===2||O===5?new e([140,123]):new e([140,39]);O=new e(O);for(var F,U;;){for(F=new e(t(Math.ceil(I/8)));F.bitLength()>I;)F.ishrn(1);if(F.isEven()&&F.iadd(c),F.testn(1)||F.iadd(u),O.cmp(u)){if(!O.cmp(l))for(;F.mod(p).cmp(b);)F.iadd(x)}else for(;F.mod(n).cmp(v);)F.iadd(x);if(U=F.shrn(1),$(U)&&$(F)&&S(U)&&S(F)&&o.test(U)&&o.test(F))return F}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var t=bnExports$1,e=requireMr(),n=new e,a=new t(24),o=new t(11),c=new t(10),u=new t(3),l=new t(7),p=requireGeneratePrime(),b=requireBrowser$b();dh=$;function v(A,I){return I=I||"utf8",buffer$2.Buffer.isBuffer(A)||(A=new buffer$2.Buffer(A,I)),this._pub=new t(A),this}function x(A,I){return I=I||"utf8",buffer$2.Buffer.isBuffer(A)||(A=new buffer$2.Buffer(A,I)),this._priv=new t(A),this}var _={};function E(A,I){var O=I.toString("hex"),F=[O,A.toString(16)].join("_");if(F in _)return _[F];var U=0;if(A.isEven()||!p.simpleSieve||!p.fermatTest(A)||!n.test(A))return U+=1,O==="02"||O==="05"?U+=8:U+=4,_[F]=U,U;n.test(A.shrn(1))||(U+=2);var G;switch(O){case"02":A.mod(a).cmp(o)&&(U+=8);break;case"05":G=A.mod(c),G.cmp(u)&&G.cmp(l)&&(U+=8);break;default:U+=4}return _[F]=U,U}function $(A,I,O){this.setGenerator(I),this.__prime=new t(A),this._prime=t.mont(this.__prime),this._primeLen=A.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,O?(this.setPublicKey=v,this.setPrivateKey=x):this._primeCode=8}Object.defineProperty($.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=E(this.__prime,this.__gen)),this._primeCode}}),$.prototype.generateKeys=function(){return this._priv||(this._priv=new t(b(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},$.prototype.computeSecret=function(A){A=new t(A),A=A.toRed(this._prime);var I=A.redPow(this._priv).fromRed(),O=new buffer$2.Buffer(I.toArray()),F=this.getPrime();if(O.length<F.length){var U=new buffer$2.Buffer(F.length-O.length);U.fill(0),O=buffer$2.Buffer.concat([U,O])}return O},$.prototype.getPublicKey=function(I){return S(this._pub,I)},$.prototype.getPrivateKey=function(I){return S(this._priv,I)},$.prototype.getPrime=function(A){return S(this.__prime,A)},$.prototype.getGenerator=function(A){return S(this._gen,A)},$.prototype.setGenerator=function(A,I){return I=I||"utf8",buffer$2.Buffer.isBuffer(A)||(A=new buffer$2.Buffer(A,I)),this.__gen=A,this._gen=new t(A),this};function S(A,I){var O=new buffer$2.Buffer(A.toArray());return I?O.toString(I):O}return dh}var hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$8;hasRequiredBrowser$4=1;var t=requireGeneratePrime(),e=require$$1$1,n=requireDh();function a(u){var l=new buffer$2.Buffer(e[u].prime,"hex"),p=new buffer$2.Buffer(e[u].gen,"hex");return new n(l,p)}var o={binary:!0,hex:!0,base64:!0};function c(u,l,p,b){return buffer$2.Buffer.isBuffer(l)||o[l]===void 0?c(u,"binary",l,p):(l=l||"binary",b=b||"binary",p=p||new buffer$2.Buffer([2]),buffer$2.Buffer.isBuffer(p)||(p=new buffer$2.Buffer(p,b)),typeof u=="number"?new n(t(u,p),p,!0):(buffer$2.Buffer.isBuffer(u)||(u=new buffer$2.Buffer(u,l)),new n(u,p,!0)))}return browser$8.DiffieHellmanGroup=browser$8.createDiffieHellmanGroup=browser$8.getDiffieHellman=a,browser$8.createDiffieHellman=browser$8.DiffieHellman=c,browser$8}var sign$2={exports:{}},bn={exports:{}};bn.exports;var hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(t){(function(e,n){function a(P,T){if(!P)throw new Error(T||"Assertion failed")}function o(P,T){P.super_=T;var C=function(){};C.prototype=T.prototype,P.prototype=new C,P.prototype.constructor=P}function c(P,T,C){if(c.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((T==="le"||T==="be")&&(C=T,T=10),this._init(P||0,T||10,C||"be"))}typeof e=="object"?e.exports=c:n.BN=c,c.BN=c,c.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=buffer$2.Buffer}catch{}c.isBN=function(T){return T instanceof c?!0:T!==null&&typeof T=="object"&&T.constructor.wordSize===c.wordSize&&Array.isArray(T.words)},c.max=function(T,C){return T.cmp(C)>0?T:C},c.min=function(T,C){return T.cmp(C)<0?T:C},c.prototype._init=function(T,C,q){if(typeof T=="number")return this._initNumber(T,C,q);if(typeof T=="object")return this._initArray(T,C,q);C==="hex"&&(C=16),a(C===(C|0)&&C>=2&&C<=36),T=T.toString().replace(/\s+/g,"");var z=0;T[0]==="-"&&(z++,this.negative=1),z<T.length&&(C===16?this._parseHex(T,z,q):(this._parseBase(T,C,z),q==="le"&&this._initArray(this.toArray(),C,q)))},c.prototype._initNumber=function(T,C,q){T<0&&(this.negative=1,T=-T),T<67108864?(this.words=[T&67108863],this.length=1):T<4503599627370496?(this.words=[T&67108863,T/67108864&67108863],this.length=2):(a(T<9007199254740992),this.words=[T&67108863,T/67108864&67108863,1],this.length=3),q==="le"&&this._initArray(this.toArray(),C,q)},c.prototype._initArray=function(T,C,q){if(a(typeof T.length=="number"),T.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(T.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var X,W,M=0;if(q==="be")for(z=T.length-1,X=0;z>=0;z-=3)W=T[z]|T[z-1]<<8|T[z-2]<<16,this.words[X]|=W<<M&67108863,this.words[X+1]=W>>>26-M&67108863,M+=24,M>=26&&(M-=26,X++);else if(q==="le")for(z=0,X=0;z<T.length;z+=3)W=T[z]|T[z+1]<<8|T[z+2]<<16,this.words[X]|=W<<M&67108863,this.words[X+1]=W>>>26-M&67108863,M+=24,M>=26&&(M-=26,X++);return this._strip()};function l(P,T){var C=P.charCodeAt(T);if(C>=48&&C<=57)return C-48;if(C>=65&&C<=70)return C-55;if(C>=97&&C<=102)return C-87;a(!1,"Invalid character in "+P)}function p(P,T,C){var q=l(P,C);return C-1>=T&&(q|=l(P,C-1)<<4),q}c.prototype._parseHex=function(T,C,q){this.length=Math.ceil((T.length-C)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var X=0,W=0,M;if(q==="be")for(z=T.length-1;z>=C;z-=2)M=p(T,C,z)<<X,this.words[W]|=M&67108863,X>=18?(X-=18,W+=1,this.words[W]|=M>>>26):X+=8;else{var D=T.length-C;for(z=D%2===0?C+1:C;z<T.length;z+=2)M=p(T,C,z)<<X,this.words[W]|=M&67108863,X>=18?(X-=18,W+=1,this.words[W]|=M>>>26):X+=8}this._strip()};function b(P,T,C,q){for(var z=0,X=0,W=Math.min(P.length,C),M=T;M<W;M++){var D=P.charCodeAt(M)-48;z*=q,D>=49?X=D-49+10:D>=17?X=D-17+10:X=D,a(D>=0&&X<q,"Invalid character"),z+=X}return z}c.prototype._parseBase=function(T,C,q){this.words=[0],this.length=1;for(var z=0,X=1;X<=67108863;X*=C)z++;z--,X=X/C|0;for(var W=T.length-q,M=W%z,D=Math.min(W,W-M)+q,B=0,Z=q;Z<D;Z+=z)B=b(T,Z,Z+z,C),this.imuln(X),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B);if(M!==0){var he=1;for(B=b(T,Z,T.length,C),Z=0;Z<M;Z++)he*=C;this.imuln(he),this.words[0]+B<67108864?this.words[0]+=B:this._iaddn(B)}this._strip()},c.prototype.copy=function(T){T.words=new Array(this.length);for(var C=0;C<this.length;C++)T.words[C]=this.words[C];T.length=this.length,T.negative=this.negative,T.red=this.red};function v(P,T){P.words=T.words,P.length=T.length,P.negative=T.negative,P.red=T.red}if(c.prototype._move=function(T){v(T,this)},c.prototype.clone=function(){var T=new c(null);return this.copy(T),T},c.prototype._expand=function(T){for(;this.length<T;)this.words[this.length++]=0;return this},c.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{c.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{c.prototype.inspect=x}else c.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],$=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(T,C){T=T||10,C=C|0||1;var q;if(T===16||T==="hex"){q="";for(var z=0,X=0,W=0;W<this.length;W++){var M=this.words[W],D=((M<<z|X)&16777215).toString(16);X=M>>>24-z&16777215,z+=2,z>=26&&(z-=26,W--),X!==0||W!==this.length-1?q=_[6-D.length]+D+q:q=D+q}for(X!==0&&(q=X.toString(16)+q);q.length%C!==0;)q="0"+q;return this.negative!==0&&(q="-"+q),q}if(T===(T|0)&&T>=2&&T<=36){var B=E[T],Z=$[T];q="";var he=this.clone();for(he.negative=0;!he.isZero();){var j=he.modrn(Z).toString(T);he=he.idivn(Z),he.isZero()?q=j+q:q=_[B-j.length]+j+q}for(this.isZero()&&(q="0"+q);q.length%C!==0;)q="0"+q;return this.negative!==0&&(q="-"+q),q}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var T=this.words[0];return this.length===2?T+=this.words[1]*67108864:this.length===3&&this.words[2]===1?T+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-T:T},c.prototype.toJSON=function(){return this.toString(16,2)},u&&(c.prototype.toBuffer=function(T,C){return this.toArrayLike(u,T,C)}),c.prototype.toArray=function(T,C){return this.toArrayLike(Array,T,C)};var S=function(T,C){return T.allocUnsafe?T.allocUnsafe(C):new T(C)};c.prototype.toArrayLike=function(T,C,q){this._strip();var z=this.byteLength(),X=q||Math.max(1,z);a(z<=X,"byte array longer than desired length"),a(X>0,"Requested array length <= 0");var W=S(T,X),M=C==="le"?"LE":"BE";return this["_toArrayLike"+M](W,z),W},c.prototype._toArrayLikeLE=function(T,C){for(var q=0,z=0,X=0,W=0;X<this.length;X++){var M=this.words[X]<<W|z;T[q++]=M&255,q<T.length&&(T[q++]=M>>8&255),q<T.length&&(T[q++]=M>>16&255),W===6?(q<T.length&&(T[q++]=M>>24&255),z=0,W=0):(z=M>>>24,W+=2)}if(q<T.length)for(T[q++]=z;q<T.length;)T[q++]=0},c.prototype._toArrayLikeBE=function(T,C){for(var q=T.length-1,z=0,X=0,W=0;X<this.length;X++){var M=this.words[X]<<W|z;T[q--]=M&255,q>=0&&(T[q--]=M>>8&255),q>=0&&(T[q--]=M>>16&255),W===6?(q>=0&&(T[q--]=M>>24&255),z=0,W=0):(z=M>>>24,W+=2)}if(q>=0)for(T[q--]=z;q>=0;)T[q--]=0},Math.clz32?c.prototype._countBits=function(T){return 32-Math.clz32(T)}:c.prototype._countBits=function(T){var C=T,q=0;return C>=4096&&(q+=13,C>>>=13),C>=64&&(q+=7,C>>>=7),C>=8&&(q+=4,C>>>=4),C>=2&&(q+=2,C>>>=2),q+C},c.prototype._zeroBits=function(T){if(T===0)return 26;var C=T,q=0;return C&8191||(q+=13,C>>>=13),C&127||(q+=7,C>>>=7),C&15||(q+=4,C>>>=4),C&3||(q+=2,C>>>=2),C&1||q++,q},c.prototype.bitLength=function(){var T=this.words[this.length-1],C=this._countBits(T);return(this.length-1)*26+C};function A(P){for(var T=new Array(P.bitLength()),C=0;C<T.length;C++){var q=C/26|0,z=C%26;T[C]=P.words[q]>>>z&1}return T}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var T=0,C=0;C<this.length;C++){var q=this._zeroBits(this.words[C]);if(T+=q,q!==26)break}return T},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(T){return this.negative!==0?this.abs().inotn(T).iaddn(1):this.clone()},c.prototype.fromTwos=function(T){return this.testn(T-1)?this.notn(T).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(T){for(;this.length<T.length;)this.words[this.length++]=0;for(var C=0;C<T.length;C++)this.words[C]=this.words[C]|T.words[C];return this._strip()},c.prototype.ior=function(T){return a((this.negative|T.negative)===0),this.iuor(T)},c.prototype.or=function(T){return this.length>T.length?this.clone().ior(T):T.clone().ior(this)},c.prototype.uor=function(T){return this.length>T.length?this.clone().iuor(T):T.clone().iuor(this)},c.prototype.iuand=function(T){var C;this.length>T.length?C=T:C=this;for(var q=0;q<C.length;q++)this.words[q]=this.words[q]&T.words[q];return this.length=C.length,this._strip()},c.prototype.iand=function(T){return a((this.negative|T.negative)===0),this.iuand(T)},c.prototype.and=function(T){return this.length>T.length?this.clone().iand(T):T.clone().iand(this)},c.prototype.uand=function(T){return this.length>T.length?this.clone().iuand(T):T.clone().iuand(this)},c.prototype.iuxor=function(T){var C,q;this.length>T.length?(C=this,q=T):(C=T,q=this);for(var z=0;z<q.length;z++)this.words[z]=C.words[z]^q.words[z];if(this!==C)for(;z<C.length;z++)this.words[z]=C.words[z];return this.length=C.length,this._strip()},c.prototype.ixor=function(T){return a((this.negative|T.negative)===0),this.iuxor(T)},c.prototype.xor=function(T){return this.length>T.length?this.clone().ixor(T):T.clone().ixor(this)},c.prototype.uxor=function(T){return this.length>T.length?this.clone().iuxor(T):T.clone().iuxor(this)},c.prototype.inotn=function(T){a(typeof T=="number"&&T>=0);var C=Math.ceil(T/26)|0,q=T%26;this._expand(C),q>0&&C--;for(var z=0;z<C;z++)this.words[z]=~this.words[z]&67108863;return q>0&&(this.words[z]=~this.words[z]&67108863>>26-q),this._strip()},c.prototype.notn=function(T){return this.clone().inotn(T)},c.prototype.setn=function(T,C){a(typeof T=="number"&&T>=0);var q=T/26|0,z=T%26;return this._expand(q+1),C?this.words[q]=this.words[q]|1<<z:this.words[q]=this.words[q]&~(1<<z),this._strip()},c.prototype.iadd=function(T){var C;if(this.negative!==0&&T.negative===0)return this.negative=0,C=this.isub(T),this.negative^=1,this._normSign();if(this.negative===0&&T.negative!==0)return T.negative=0,C=this.isub(T),T.negative=1,C._normSign();var q,z;this.length>T.length?(q=this,z=T):(q=T,z=this);for(var X=0,W=0;W<z.length;W++)C=(q.words[W]|0)+(z.words[W]|0)+X,this.words[W]=C&67108863,X=C>>>26;for(;X!==0&&W<q.length;W++)C=(q.words[W]|0)+X,this.words[W]=C&67108863,X=C>>>26;if(this.length=q.length,X!==0)this.words[this.length]=X,this.length++;else if(q!==this)for(;W<q.length;W++)this.words[W]=q.words[W];return this},c.prototype.add=function(T){var C;return T.negative!==0&&this.negative===0?(T.negative=0,C=this.sub(T),T.negative^=1,C):T.negative===0&&this.negative!==0?(this.negative=0,C=T.sub(this),this.negative=1,C):this.length>T.length?this.clone().iadd(T):T.clone().iadd(this)},c.prototype.isub=function(T){if(T.negative!==0){T.negative=0;var C=this.iadd(T);return T.negative=1,C._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(T),this.negative=1,this._normSign();var q=this.cmp(T);if(q===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,X;q>0?(z=this,X=T):(z=T,X=this);for(var W=0,M=0;M<X.length;M++)C=(z.words[M]|0)-(X.words[M]|0)+W,W=C>>26,this.words[M]=C&67108863;for(;W!==0&&M<z.length;M++)C=(z.words[M]|0)+W,W=C>>26,this.words[M]=C&67108863;if(W===0&&M<z.length&&z!==this)for(;M<z.length;M++)this.words[M]=z.words[M];return this.length=Math.max(this.length,M),z!==this&&(this.negative=1),this._strip()},c.prototype.sub=function(T){return this.clone().isub(T)};function I(P,T,C){C.negative=T.negative^P.negative;var q=P.length+T.length|0;C.length=q,q=q-1|0;var z=P.words[0]|0,X=T.words[0]|0,W=z*X,M=W&67108863,D=W/67108864|0;C.words[0]=M;for(var B=1;B<q;B++){for(var Z=D>>>26,he=D&67108863,j=Math.min(B,T.length-1),fe=Math.max(0,B-P.length+1);fe<=j;fe++){var ie=B-fe|0;z=P.words[ie]|0,X=T.words[fe]|0,W=z*X+he,Z+=W/67108864|0,he=W&67108863}C.words[B]=he|0,D=Z|0}return D!==0?C.words[B]=D|0:C.length--,C._strip()}var O=function(T,C,q){var z=T.words,X=C.words,W=q.words,M=0,D,B,Z,he=z[0]|0,j=he&8191,fe=he>>>13,ie=z[1]|0,oe=ie&8191,ce=ie>>>13,V=z[2]|0,Q=V&8191,se=V>>>13,ye=z[3]|0,be=ye&8191,ve=ye>>>13,le=z[4]|0,Y=le&8191,te=le>>>13,ue=z[5]|0,pe=ue&8191,ge=ue>>>13,me=z[6]|0,we=me&8191,xe=me>>>13,Ee=z[7]|0,$e=Ee&8191,_e=Ee>>>13,Te=z[8]|0,Ie=Te&8191,Se=Te>>>13,Ne=z[9]|0,Le=Ne&8191,Ae=Ne>>>13,Me=X[0]|0,Oe=Me&8191,De=Me>>>13,Je=X[1]|0,et=Je&8191,Fe=Je>>>13,tt=X[2]|0,rt=tt&8191,Ue=tt>>>13,Ke=X[3]|0,He=Ke&8191,Ce=Ke>>>13,Ve=X[4]|0,ze=Ve&8191,Be=Ve>>>13,Ge=X[5]|0,je=Ge&8191,Re=Ge>>>13,We=X[6]|0,Ze=We&8191,ke=We>>>13,Qe=X[7]|0,Ye=Qe&8191,Pe=Qe>>>13,Xe=X[8]|0,at=Xe&8191,qe=Xe>>>13,st=X[9]|0,nt=st&8191,it=st>>>13;q.negative=T.negative^C.negative,q.length=19,D=Math.imul(j,Oe),B=Math.imul(j,De),B=B+Math.imul(fe,Oe)|0,Z=Math.imul(fe,De);var ot=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(ot>>>26)|0,ot&=67108863,D=Math.imul(oe,Oe),B=Math.imul(oe,De),B=B+Math.imul(ce,Oe)|0,Z=Math.imul(ce,De),D=D+Math.imul(j,et)|0,B=B+Math.imul(j,Fe)|0,B=B+Math.imul(fe,et)|0,Z=Z+Math.imul(fe,Fe)|0;var ft=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(ft>>>26)|0,ft&=67108863,D=Math.imul(Q,Oe),B=Math.imul(Q,De),B=B+Math.imul(se,Oe)|0,Z=Math.imul(se,De),D=D+Math.imul(oe,et)|0,B=B+Math.imul(oe,Fe)|0,B=B+Math.imul(ce,et)|0,Z=Z+Math.imul(ce,Fe)|0,D=D+Math.imul(j,rt)|0,B=B+Math.imul(j,Ue)|0,B=B+Math.imul(fe,rt)|0,Z=Z+Math.imul(fe,Ue)|0;var ct=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(ct>>>26)|0,ct&=67108863,D=Math.imul(be,Oe),B=Math.imul(be,De),B=B+Math.imul(ve,Oe)|0,Z=Math.imul(ve,De),D=D+Math.imul(Q,et)|0,B=B+Math.imul(Q,Fe)|0,B=B+Math.imul(se,et)|0,Z=Z+Math.imul(se,Fe)|0,D=D+Math.imul(oe,rt)|0,B=B+Math.imul(oe,Ue)|0,B=B+Math.imul(ce,rt)|0,Z=Z+Math.imul(ce,Ue)|0,D=D+Math.imul(j,He)|0,B=B+Math.imul(j,Ce)|0,B=B+Math.imul(fe,He)|0,Z=Z+Math.imul(fe,Ce)|0;var ut=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(ut>>>26)|0,ut&=67108863,D=Math.imul(Y,Oe),B=Math.imul(Y,De),B=B+Math.imul(te,Oe)|0,Z=Math.imul(te,De),D=D+Math.imul(be,et)|0,B=B+Math.imul(be,Fe)|0,B=B+Math.imul(ve,et)|0,Z=Z+Math.imul(ve,Fe)|0,D=D+Math.imul(Q,rt)|0,B=B+Math.imul(Q,Ue)|0,B=B+Math.imul(se,rt)|0,Z=Z+Math.imul(se,Ue)|0,D=D+Math.imul(oe,He)|0,B=B+Math.imul(oe,Ce)|0,B=B+Math.imul(ce,He)|0,Z=Z+Math.imul(ce,Ce)|0,D=D+Math.imul(j,ze)|0,B=B+Math.imul(j,Be)|0,B=B+Math.imul(fe,ze)|0,Z=Z+Math.imul(fe,Be)|0;var lt=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(lt>>>26)|0,lt&=67108863,D=Math.imul(pe,Oe),B=Math.imul(pe,De),B=B+Math.imul(ge,Oe)|0,Z=Math.imul(ge,De),D=D+Math.imul(Y,et)|0,B=B+Math.imul(Y,Fe)|0,B=B+Math.imul(te,et)|0,Z=Z+Math.imul(te,Fe)|0,D=D+Math.imul(be,rt)|0,B=B+Math.imul(be,Ue)|0,B=B+Math.imul(ve,rt)|0,Z=Z+Math.imul(ve,Ue)|0,D=D+Math.imul(Q,He)|0,B=B+Math.imul(Q,Ce)|0,B=B+Math.imul(se,He)|0,Z=Z+Math.imul(se,Ce)|0,D=D+Math.imul(oe,ze)|0,B=B+Math.imul(oe,Be)|0,B=B+Math.imul(ce,ze)|0,Z=Z+Math.imul(ce,Be)|0,D=D+Math.imul(j,je)|0,B=B+Math.imul(j,Re)|0,B=B+Math.imul(fe,je)|0,Z=Z+Math.imul(fe,Re)|0;var gt=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(gt>>>26)|0,gt&=67108863,D=Math.imul(we,Oe),B=Math.imul(we,De),B=B+Math.imul(xe,Oe)|0,Z=Math.imul(xe,De),D=D+Math.imul(pe,et)|0,B=B+Math.imul(pe,Fe)|0,B=B+Math.imul(ge,et)|0,Z=Z+Math.imul(ge,Fe)|0,D=D+Math.imul(Y,rt)|0,B=B+Math.imul(Y,Ue)|0,B=B+Math.imul(te,rt)|0,Z=Z+Math.imul(te,Ue)|0,D=D+Math.imul(be,He)|0,B=B+Math.imul(be,Ce)|0,B=B+Math.imul(ve,He)|0,Z=Z+Math.imul(ve,Ce)|0,D=D+Math.imul(Q,ze)|0,B=B+Math.imul(Q,Be)|0,B=B+Math.imul(se,ze)|0,Z=Z+Math.imul(se,Be)|0,D=D+Math.imul(oe,je)|0,B=B+Math.imul(oe,Re)|0,B=B+Math.imul(ce,je)|0,Z=Z+Math.imul(ce,Re)|0,D=D+Math.imul(j,Ze)|0,B=B+Math.imul(j,ke)|0,B=B+Math.imul(fe,Ze)|0,Z=Z+Math.imul(fe,ke)|0;var bt=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(bt>>>26)|0,bt&=67108863,D=Math.imul($e,Oe),B=Math.imul($e,De),B=B+Math.imul(_e,Oe)|0,Z=Math.imul(_e,De),D=D+Math.imul(we,et)|0,B=B+Math.imul(we,Fe)|0,B=B+Math.imul(xe,et)|0,Z=Z+Math.imul(xe,Fe)|0,D=D+Math.imul(pe,rt)|0,B=B+Math.imul(pe,Ue)|0,B=B+Math.imul(ge,rt)|0,Z=Z+Math.imul(ge,Ue)|0,D=D+Math.imul(Y,He)|0,B=B+Math.imul(Y,Ce)|0,B=B+Math.imul(te,He)|0,Z=Z+Math.imul(te,Ce)|0,D=D+Math.imul(be,ze)|0,B=B+Math.imul(be,Be)|0,B=B+Math.imul(ve,ze)|0,Z=Z+Math.imul(ve,Be)|0,D=D+Math.imul(Q,je)|0,B=B+Math.imul(Q,Re)|0,B=B+Math.imul(se,je)|0,Z=Z+Math.imul(se,Re)|0,D=D+Math.imul(oe,Ze)|0,B=B+Math.imul(oe,ke)|0,B=B+Math.imul(ce,Ze)|0,Z=Z+Math.imul(ce,ke)|0,D=D+Math.imul(j,Ye)|0,B=B+Math.imul(j,Pe)|0,B=B+Math.imul(fe,Ye)|0,Z=Z+Math.imul(fe,Pe)|0;var mt=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(mt>>>26)|0,mt&=67108863,D=Math.imul(Ie,Oe),B=Math.imul(Ie,De),B=B+Math.imul(Se,Oe)|0,Z=Math.imul(Se,De),D=D+Math.imul($e,et)|0,B=B+Math.imul($e,Fe)|0,B=B+Math.imul(_e,et)|0,Z=Z+Math.imul(_e,Fe)|0,D=D+Math.imul(we,rt)|0,B=B+Math.imul(we,Ue)|0,B=B+Math.imul(xe,rt)|0,Z=Z+Math.imul(xe,Ue)|0,D=D+Math.imul(pe,He)|0,B=B+Math.imul(pe,Ce)|0,B=B+Math.imul(ge,He)|0,Z=Z+Math.imul(ge,Ce)|0,D=D+Math.imul(Y,ze)|0,B=B+Math.imul(Y,Be)|0,B=B+Math.imul(te,ze)|0,Z=Z+Math.imul(te,Be)|0,D=D+Math.imul(be,je)|0,B=B+Math.imul(be,Re)|0,B=B+Math.imul(ve,je)|0,Z=Z+Math.imul(ve,Re)|0,D=D+Math.imul(Q,Ze)|0,B=B+Math.imul(Q,ke)|0,B=B+Math.imul(se,Ze)|0,Z=Z+Math.imul(se,ke)|0,D=D+Math.imul(oe,Ye)|0,B=B+Math.imul(oe,Pe)|0,B=B+Math.imul(ce,Ye)|0,Z=Z+Math.imul(ce,Pe)|0,D=D+Math.imul(j,at)|0,B=B+Math.imul(j,qe)|0,B=B+Math.imul(fe,at)|0,Z=Z+Math.imul(fe,qe)|0;var vt=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(vt>>>26)|0,vt&=67108863,D=Math.imul(Le,Oe),B=Math.imul(Le,De),B=B+Math.imul(Ae,Oe)|0,Z=Math.imul(Ae,De),D=D+Math.imul(Ie,et)|0,B=B+Math.imul(Ie,Fe)|0,B=B+Math.imul(Se,et)|0,Z=Z+Math.imul(Se,Fe)|0,D=D+Math.imul($e,rt)|0,B=B+Math.imul($e,Ue)|0,B=B+Math.imul(_e,rt)|0,Z=Z+Math.imul(_e,Ue)|0,D=D+Math.imul(we,He)|0,B=B+Math.imul(we,Ce)|0,B=B+Math.imul(xe,He)|0,Z=Z+Math.imul(xe,Ce)|0,D=D+Math.imul(pe,ze)|0,B=B+Math.imul(pe,Be)|0,B=B+Math.imul(ge,ze)|0,Z=Z+Math.imul(ge,Be)|0,D=D+Math.imul(Y,je)|0,B=B+Math.imul(Y,Re)|0,B=B+Math.imul(te,je)|0,Z=Z+Math.imul(te,Re)|0,D=D+Math.imul(be,Ze)|0,B=B+Math.imul(be,ke)|0,B=B+Math.imul(ve,Ze)|0,Z=Z+Math.imul(ve,ke)|0,D=D+Math.imul(Q,Ye)|0,B=B+Math.imul(Q,Pe)|0,B=B+Math.imul(se,Ye)|0,Z=Z+Math.imul(se,Pe)|0,D=D+Math.imul(oe,at)|0,B=B+Math.imul(oe,qe)|0,B=B+Math.imul(ce,at)|0,Z=Z+Math.imul(ce,qe)|0,D=D+Math.imul(j,nt)|0,B=B+Math.imul(j,it)|0,B=B+Math.imul(fe,nt)|0,Z=Z+Math.imul(fe,it)|0;var xt=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(xt>>>26)|0,xt&=67108863,D=Math.imul(Le,et),B=Math.imul(Le,Fe),B=B+Math.imul(Ae,et)|0,Z=Math.imul(Ae,Fe),D=D+Math.imul(Ie,rt)|0,B=B+Math.imul(Ie,Ue)|0,B=B+Math.imul(Se,rt)|0,Z=Z+Math.imul(Se,Ue)|0,D=D+Math.imul($e,He)|0,B=B+Math.imul($e,Ce)|0,B=B+Math.imul(_e,He)|0,Z=Z+Math.imul(_e,Ce)|0,D=D+Math.imul(we,ze)|0,B=B+Math.imul(we,Be)|0,B=B+Math.imul(xe,ze)|0,Z=Z+Math.imul(xe,Be)|0,D=D+Math.imul(pe,je)|0,B=B+Math.imul(pe,Re)|0,B=B+Math.imul(ge,je)|0,Z=Z+Math.imul(ge,Re)|0,D=D+Math.imul(Y,Ze)|0,B=B+Math.imul(Y,ke)|0,B=B+Math.imul(te,Ze)|0,Z=Z+Math.imul(te,ke)|0,D=D+Math.imul(be,Ye)|0,B=B+Math.imul(be,Pe)|0,B=B+Math.imul(ve,Ye)|0,Z=Z+Math.imul(ve,Pe)|0,D=D+Math.imul(Q,at)|0,B=B+Math.imul(Q,qe)|0,B=B+Math.imul(se,at)|0,Z=Z+Math.imul(se,qe)|0,D=D+Math.imul(oe,nt)|0,B=B+Math.imul(oe,it)|0,B=B+Math.imul(ce,nt)|0,Z=Z+Math.imul(ce,it)|0;var _t=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(_t>>>26)|0,_t&=67108863,D=Math.imul(Le,rt),B=Math.imul(Le,Ue),B=B+Math.imul(Ae,rt)|0,Z=Math.imul(Ae,Ue),D=D+Math.imul(Ie,He)|0,B=B+Math.imul(Ie,Ce)|0,B=B+Math.imul(Se,He)|0,Z=Z+Math.imul(Se,Ce)|0,D=D+Math.imul($e,ze)|0,B=B+Math.imul($e,Be)|0,B=B+Math.imul(_e,ze)|0,Z=Z+Math.imul(_e,Be)|0,D=D+Math.imul(we,je)|0,B=B+Math.imul(we,Re)|0,B=B+Math.imul(xe,je)|0,Z=Z+Math.imul(xe,Re)|0,D=D+Math.imul(pe,Ze)|0,B=B+Math.imul(pe,ke)|0,B=B+Math.imul(ge,Ze)|0,Z=Z+Math.imul(ge,ke)|0,D=D+Math.imul(Y,Ye)|0,B=B+Math.imul(Y,Pe)|0,B=B+Math.imul(te,Ye)|0,Z=Z+Math.imul(te,Pe)|0,D=D+Math.imul(be,at)|0,B=B+Math.imul(be,qe)|0,B=B+Math.imul(ve,at)|0,Z=Z+Math.imul(ve,qe)|0,D=D+Math.imul(Q,nt)|0,B=B+Math.imul(Q,it)|0,B=B+Math.imul(se,nt)|0,Z=Z+Math.imul(se,it)|0;var wt=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(wt>>>26)|0,wt&=67108863,D=Math.imul(Le,He),B=Math.imul(Le,Ce),B=B+Math.imul(Ae,He)|0,Z=Math.imul(Ae,Ce),D=D+Math.imul(Ie,ze)|0,B=B+Math.imul(Ie,Be)|0,B=B+Math.imul(Se,ze)|0,Z=Z+Math.imul(Se,Be)|0,D=D+Math.imul($e,je)|0,B=B+Math.imul($e,Re)|0,B=B+Math.imul(_e,je)|0,Z=Z+Math.imul(_e,Re)|0,D=D+Math.imul(we,Ze)|0,B=B+Math.imul(we,ke)|0,B=B+Math.imul(xe,Ze)|0,Z=Z+Math.imul(xe,ke)|0,D=D+Math.imul(pe,Ye)|0,B=B+Math.imul(pe,Pe)|0,B=B+Math.imul(ge,Ye)|0,Z=Z+Math.imul(ge,Pe)|0,D=D+Math.imul(Y,at)|0,B=B+Math.imul(Y,qe)|0,B=B+Math.imul(te,at)|0,Z=Z+Math.imul(te,qe)|0,D=D+Math.imul(be,nt)|0,B=B+Math.imul(be,it)|0,B=B+Math.imul(ve,nt)|0,Z=Z+Math.imul(ve,it)|0;var Et=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(Et>>>26)|0,Et&=67108863,D=Math.imul(Le,ze),B=Math.imul(Le,Be),B=B+Math.imul(Ae,ze)|0,Z=Math.imul(Ae,Be),D=D+Math.imul(Ie,je)|0,B=B+Math.imul(Ie,Re)|0,B=B+Math.imul(Se,je)|0,Z=Z+Math.imul(Se,Re)|0,D=D+Math.imul($e,Ze)|0,B=B+Math.imul($e,ke)|0,B=B+Math.imul(_e,Ze)|0,Z=Z+Math.imul(_e,ke)|0,D=D+Math.imul(we,Ye)|0,B=B+Math.imul(we,Pe)|0,B=B+Math.imul(xe,Ye)|0,Z=Z+Math.imul(xe,Pe)|0,D=D+Math.imul(pe,at)|0,B=B+Math.imul(pe,qe)|0,B=B+Math.imul(ge,at)|0,Z=Z+Math.imul(ge,qe)|0,D=D+Math.imul(Y,nt)|0,B=B+Math.imul(Y,it)|0,B=B+Math.imul(te,nt)|0,Z=Z+Math.imul(te,it)|0;var $t=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+($t>>>26)|0,$t&=67108863,D=Math.imul(Le,je),B=Math.imul(Le,Re),B=B+Math.imul(Ae,je)|0,Z=Math.imul(Ae,Re),D=D+Math.imul(Ie,Ze)|0,B=B+Math.imul(Ie,ke)|0,B=B+Math.imul(Se,Ze)|0,Z=Z+Math.imul(Se,ke)|0,D=D+Math.imul($e,Ye)|0,B=B+Math.imul($e,Pe)|0,B=B+Math.imul(_e,Ye)|0,Z=Z+Math.imul(_e,Pe)|0,D=D+Math.imul(we,at)|0,B=B+Math.imul(we,qe)|0,B=B+Math.imul(xe,at)|0,Z=Z+Math.imul(xe,qe)|0,D=D+Math.imul(pe,nt)|0,B=B+Math.imul(pe,it)|0,B=B+Math.imul(ge,nt)|0,Z=Z+Math.imul(ge,it)|0;var St=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(St>>>26)|0,St&=67108863,D=Math.imul(Le,Ze),B=Math.imul(Le,ke),B=B+Math.imul(Ae,Ze)|0,Z=Math.imul(Ae,ke),D=D+Math.imul(Ie,Ye)|0,B=B+Math.imul(Ie,Pe)|0,B=B+Math.imul(Se,Ye)|0,Z=Z+Math.imul(Se,Pe)|0,D=D+Math.imul($e,at)|0,B=B+Math.imul($e,qe)|0,B=B+Math.imul(_e,at)|0,Z=Z+Math.imul(_e,qe)|0,D=D+Math.imul(we,nt)|0,B=B+Math.imul(we,it)|0,B=B+Math.imul(xe,nt)|0,Z=Z+Math.imul(xe,it)|0;var At=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(At>>>26)|0,At&=67108863,D=Math.imul(Le,Ye),B=Math.imul(Le,Pe),B=B+Math.imul(Ae,Ye)|0,Z=Math.imul(Ae,Pe),D=D+Math.imul(Ie,at)|0,B=B+Math.imul(Ie,qe)|0,B=B+Math.imul(Se,at)|0,Z=Z+Math.imul(Se,qe)|0,D=D+Math.imul($e,nt)|0,B=B+Math.imul($e,it)|0,B=B+Math.imul(_e,nt)|0,Z=Z+Math.imul(_e,it)|0;var Tt=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,D=Math.imul(Le,at),B=Math.imul(Le,qe),B=B+Math.imul(Ae,at)|0,Z=Math.imul(Ae,qe),D=D+Math.imul(Ie,nt)|0,B=B+Math.imul(Ie,it)|0,B=B+Math.imul(Se,nt)|0,Z=Z+Math.imul(Se,it)|0;var Lt=(M+D|0)+((B&8191)<<13)|0;M=(Z+(B>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,D=Math.imul(Le,nt),B=Math.imul(Le,it),B=B+Math.imul(Ae,nt)|0,Z=Math.imul(Ae,it);var Mt=(M+D|0)+((B&8191)<<13)|0;return M=(Z+(B>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,W[0]=ot,W[1]=ft,W[2]=ct,W[3]=ut,W[4]=lt,W[5]=gt,W[6]=bt,W[7]=mt,W[8]=vt,W[9]=xt,W[10]=_t,W[11]=wt,W[12]=Et,W[13]=$t,W[14]=St,W[15]=At,W[16]=Tt,W[17]=Lt,W[18]=Mt,M!==0&&(W[19]=M,q.length++),q};Math.imul||(O=I);function F(P,T,C){C.negative=T.negative^P.negative,C.length=P.length+T.length;for(var q=0,z=0,X=0;X<C.length-1;X++){var W=z;z=0;for(var M=q&67108863,D=Math.min(X,T.length-1),B=Math.max(0,X-P.length+1);B<=D;B++){var Z=X-B,he=P.words[Z]|0,j=T.words[B]|0,fe=he*j,ie=fe&67108863;W=W+(fe/67108864|0)|0,ie=ie+M|0,M=ie&67108863,W=W+(ie>>>26)|0,z+=W>>>26,W&=67108863}C.words[X]=M,q=W,W=z}return q!==0?C.words[X]=q:C.length--,C._strip()}function U(P,T,C){return F(P,T,C)}c.prototype.mulTo=function(T,C){var q,z=this.length+T.length;return this.length===10&&T.length===10?q=O(this,T,C):z<63?q=I(this,T,C):z<1024?q=F(this,T,C):q=U(this,T,C),q},c.prototype.mul=function(T){var C=new c(null);return C.words=new Array(this.length+T.length),this.mulTo(T,C)},c.prototype.mulf=function(T){var C=new c(null);return C.words=new Array(this.length+T.length),U(this,T,C)},c.prototype.imul=function(T){return this.clone().mulTo(T,this)},c.prototype.imuln=function(T){var C=T<0;C&&(T=-T),a(typeof T=="number"),a(T<67108864);for(var q=0,z=0;z<this.length;z++){var X=(this.words[z]|0)*T,W=(X&67108863)+(q&67108863);q>>=26,q+=X/67108864|0,q+=W>>>26,this.words[z]=W&67108863}return q!==0&&(this.words[z]=q,this.length++),C?this.ineg():this},c.prototype.muln=function(T){return this.clone().imuln(T)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(T){var C=A(T);if(C.length===0)return new c(1);for(var q=this,z=0;z<C.length&&C[z]===0;z++,q=q.sqr());if(++z<C.length)for(var X=q.sqr();z<C.length;z++,X=X.sqr())C[z]!==0&&(q=q.mul(X));return q},c.prototype.iushln=function(T){a(typeof T=="number"&&T>=0);var C=T%26,q=(T-C)/26,z=67108863>>>26-C<<26-C,X;if(C!==0){var W=0;for(X=0;X<this.length;X++){var M=this.words[X]&z,D=(this.words[X]|0)-M<<C;this.words[X]=D|W,W=M>>>26-C}W&&(this.words[X]=W,this.length++)}if(q!==0){for(X=this.length-1;X>=0;X--)this.words[X+q]=this.words[X];for(X=0;X<q;X++)this.words[X]=0;this.length+=q}return this._strip()},c.prototype.ishln=function(T){return a(this.negative===0),this.iushln(T)},c.prototype.iushrn=function(T,C,q){a(typeof T=="number"&&T>=0);var z;C?z=(C-C%26)/26:z=0;var X=T%26,W=Math.min((T-X)/26,this.length),M=67108863^67108863>>>X<<X,D=q;if(z-=W,z=Math.max(0,z),D){for(var B=0;B<W;B++)D.words[B]=this.words[B];D.length=W}if(W!==0)if(this.length>W)for(this.length-=W,B=0;B<this.length;B++)this.words[B]=this.words[B+W];else this.words[0]=0,this.length=1;var Z=0;for(B=this.length-1;B>=0&&(Z!==0||B>=z);B--){var he=this.words[B]|0;this.words[B]=Z<<26-X|he>>>X,Z=he&M}return D&&Z!==0&&(D.words[D.length++]=Z),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},c.prototype.ishrn=function(T,C,q){return a(this.negative===0),this.iushrn(T,C,q)},c.prototype.shln=function(T){return this.clone().ishln(T)},c.prototype.ushln=function(T){return this.clone().iushln(T)},c.prototype.shrn=function(T){return this.clone().ishrn(T)},c.prototype.ushrn=function(T){return this.clone().iushrn(T)},c.prototype.testn=function(T){a(typeof T=="number"&&T>=0);var C=T%26,q=(T-C)/26,z=1<<C;if(this.length<=q)return!1;var X=this.words[q];return!!(X&z)},c.prototype.imaskn=function(T){a(typeof T=="number"&&T>=0);var C=T%26,q=(T-C)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=q)return this;if(C!==0&&q++,this.length=Math.min(q,this.length),C!==0){var z=67108863^67108863>>>C<<C;this.words[this.length-1]&=z}return this._strip()},c.prototype.maskn=function(T){return this.clone().imaskn(T)},c.prototype.iaddn=function(T){return a(typeof T=="number"),a(T<67108864),T<0?this.isubn(-T):this.negative!==0?this.length===1&&(this.words[0]|0)<=T?(this.words[0]=T-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(T),this.negative=1,this):this._iaddn(T)},c.prototype._iaddn=function(T){this.words[0]+=T;for(var C=0;C<this.length&&this.words[C]>=67108864;C++)this.words[C]-=67108864,C===this.length-1?this.words[C+1]=1:this.words[C+1]++;return this.length=Math.max(this.length,C+1),this},c.prototype.isubn=function(T){if(a(typeof T=="number"),a(T<67108864),T<0)return this.iaddn(-T);if(this.negative!==0)return this.negative=0,this.iaddn(T),this.negative=1,this;if(this.words[0]-=T,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var C=0;C<this.length&&this.words[C]<0;C++)this.words[C]+=67108864,this.words[C+1]-=1;return this._strip()},c.prototype.addn=function(T){return this.clone().iaddn(T)},c.prototype.subn=function(T){return this.clone().isubn(T)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(T,C,q){var z=T.length+q,X;this._expand(z);var W,M=0;for(X=0;X<T.length;X++){W=(this.words[X+q]|0)+M;var D=(T.words[X]|0)*C;W-=D&67108863,M=(W>>26)-(D/67108864|0),this.words[X+q]=W&67108863}for(;X<this.length-q;X++)W=(this.words[X+q]|0)+M,M=W>>26,this.words[X+q]=W&67108863;if(M===0)return this._strip();for(a(M===-1),M=0,X=0;X<this.length;X++)W=-(this.words[X]|0)+M,M=W>>26,this.words[X]=W&67108863;return this.negative=1,this._strip()},c.prototype._wordDiv=function(T,C){var q=this.length-T.length,z=this.clone(),X=T,W=X.words[X.length-1]|0,M=this._countBits(W);q=26-M,q!==0&&(X=X.ushln(q),z.iushln(q),W=X.words[X.length-1]|0);var D=z.length-X.length,B;if(C!=="mod"){B=new c(null),B.length=D+1,B.words=new Array(B.length);for(var Z=0;Z<B.length;Z++)B.words[Z]=0}var he=z.clone()._ishlnsubmul(X,1,D);he.negative===0&&(z=he,B&&(B.words[D]=1));for(var j=D-1;j>=0;j--){var fe=(z.words[X.length+j]|0)*67108864+(z.words[X.length+j-1]|0);for(fe=Math.min(fe/W|0,67108863),z._ishlnsubmul(X,fe,j);z.negative!==0;)fe--,z.negative=0,z._ishlnsubmul(X,1,j),z.isZero()||(z.negative^=1);B&&(B.words[j]=fe)}return B&&B._strip(),z._strip(),C!=="div"&&q!==0&&z.iushrn(q),{div:B||null,mod:z}},c.prototype.divmod=function(T,C,q){if(a(!T.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var z,X,W;return this.negative!==0&&T.negative===0?(W=this.neg().divmod(T,C),C!=="mod"&&(z=W.div.neg()),C!=="div"&&(X=W.mod.neg(),q&&X.negative!==0&&X.iadd(T)),{div:z,mod:X}):this.negative===0&&T.negative!==0?(W=this.divmod(T.neg(),C),C!=="mod"&&(z=W.div.neg()),{div:z,mod:W.mod}):this.negative&T.negative?(W=this.neg().divmod(T.neg(),C),C!=="div"&&(X=W.mod.neg(),q&&X.negative!==0&&X.isub(T)),{div:W.div,mod:X}):T.length>this.length||this.cmp(T)<0?{div:new c(0),mod:this}:T.length===1?C==="div"?{div:this.divn(T.words[0]),mod:null}:C==="mod"?{div:null,mod:new c(this.modrn(T.words[0]))}:{div:this.divn(T.words[0]),mod:new c(this.modrn(T.words[0]))}:this._wordDiv(T,C)},c.prototype.div=function(T){return this.divmod(T,"div",!1).div},c.prototype.mod=function(T){return this.divmod(T,"mod",!1).mod},c.prototype.umod=function(T){return this.divmod(T,"mod",!0).mod},c.prototype.divRound=function(T){var C=this.divmod(T);if(C.mod.isZero())return C.div;var q=C.div.negative!==0?C.mod.isub(T):C.mod,z=T.ushrn(1),X=T.andln(1),W=q.cmp(z);return W<0||X===1&&W===0?C.div:C.div.negative!==0?C.div.isubn(1):C.div.iaddn(1)},c.prototype.modrn=function(T){var C=T<0;C&&(T=-T),a(T<=67108863);for(var q=(1<<26)%T,z=0,X=this.length-1;X>=0;X--)z=(q*z+(this.words[X]|0))%T;return C?-z:z},c.prototype.modn=function(T){return this.modrn(T)},c.prototype.idivn=function(T){var C=T<0;C&&(T=-T),a(T<=67108863);for(var q=0,z=this.length-1;z>=0;z--){var X=(this.words[z]|0)+q*67108864;this.words[z]=X/T|0,q=X%T}return this._strip(),C?this.ineg():this},c.prototype.divn=function(T){return this.clone().idivn(T)},c.prototype.egcd=function(T){a(T.negative===0),a(!T.isZero());var C=this,q=T.clone();C.negative!==0?C=C.umod(T):C=C.clone();for(var z=new c(1),X=new c(0),W=new c(0),M=new c(1),D=0;C.isEven()&&q.isEven();)C.iushrn(1),q.iushrn(1),++D;for(var B=q.clone(),Z=C.clone();!C.isZero();){for(var he=0,j=1;!(C.words[0]&j)&&he<26;++he,j<<=1);if(he>0)for(C.iushrn(he);he-- >0;)(z.isOdd()||X.isOdd())&&(z.iadd(B),X.isub(Z)),z.iushrn(1),X.iushrn(1);for(var fe=0,ie=1;!(q.words[0]&ie)&&fe<26;++fe,ie<<=1);if(fe>0)for(q.iushrn(fe);fe-- >0;)(W.isOdd()||M.isOdd())&&(W.iadd(B),M.isub(Z)),W.iushrn(1),M.iushrn(1);C.cmp(q)>=0?(C.isub(q),z.isub(W),X.isub(M)):(q.isub(C),W.isub(z),M.isub(X))}return{a:W,b:M,gcd:q.iushln(D)}},c.prototype._invmp=function(T){a(T.negative===0),a(!T.isZero());var C=this,q=T.clone();C.negative!==0?C=C.umod(T):C=C.clone();for(var z=new c(1),X=new c(0),W=q.clone();C.cmpn(1)>0&&q.cmpn(1)>0;){for(var M=0,D=1;!(C.words[0]&D)&&M<26;++M,D<<=1);if(M>0)for(C.iushrn(M);M-- >0;)z.isOdd()&&z.iadd(W),z.iushrn(1);for(var B=0,Z=1;!(q.words[0]&Z)&&B<26;++B,Z<<=1);if(B>0)for(q.iushrn(B);B-- >0;)X.isOdd()&&X.iadd(W),X.iushrn(1);C.cmp(q)>=0?(C.isub(q),z.isub(X)):(q.isub(C),X.isub(z))}var he;return C.cmpn(1)===0?he=z:he=X,he.cmpn(0)<0&&he.iadd(T),he},c.prototype.gcd=function(T){if(this.isZero())return T.abs();if(T.isZero())return this.abs();var C=this.clone(),q=T.clone();C.negative=0,q.negative=0;for(var z=0;C.isEven()&&q.isEven();z++)C.iushrn(1),q.iushrn(1);do{for(;C.isEven();)C.iushrn(1);for(;q.isEven();)q.iushrn(1);var X=C.cmp(q);if(X<0){var W=C;C=q,q=W}else if(X===0||q.cmpn(1)===0)break;C.isub(q)}while(!0);return q.iushln(z)},c.prototype.invm=function(T){return this.egcd(T).a.umod(T)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(T){return this.words[0]&T},c.prototype.bincn=function(T){a(typeof T=="number");var C=T%26,q=(T-C)/26,z=1<<C;if(this.length<=q)return this._expand(q+1),this.words[q]|=z,this;for(var X=z,W=q;X!==0&&W<this.length;W++){var M=this.words[W]|0;M+=X,X=M>>>26,M&=67108863,this.words[W]=M}return X!==0&&(this.words[W]=X,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(T){var C=T<0;if(this.negative!==0&&!C)return-1;if(this.negative===0&&C)return 1;this._strip();var q;if(this.length>1)q=1;else{C&&(T=-T),a(T<=67108863,"Number is too big");var z=this.words[0]|0;q=z===T?0:z<T?-1:1}return this.negative!==0?-q|0:q},c.prototype.cmp=function(T){if(this.negative!==0&&T.negative===0)return-1;if(this.negative===0&&T.negative!==0)return 1;var C=this.ucmp(T);return this.negative!==0?-C|0:C},c.prototype.ucmp=function(T){if(this.length>T.length)return 1;if(this.length<T.length)return-1;for(var C=0,q=this.length-1;q>=0;q--){var z=this.words[q]|0,X=T.words[q]|0;if(z!==X){z<X?C=-1:z>X&&(C=1);break}}return C},c.prototype.gtn=function(T){return this.cmpn(T)===1},c.prototype.gt=function(T){return this.cmp(T)===1},c.prototype.gten=function(T){return this.cmpn(T)>=0},c.prototype.gte=function(T){return this.cmp(T)>=0},c.prototype.ltn=function(T){return this.cmpn(T)===-1},c.prototype.lt=function(T){return this.cmp(T)===-1},c.prototype.lten=function(T){return this.cmpn(T)<=0},c.prototype.lte=function(T){return this.cmp(T)<=0},c.prototype.eqn=function(T){return this.cmpn(T)===0},c.prototype.eq=function(T){return this.cmp(T)===0},c.red=function(T){return new ae(T)},c.prototype.toRed=function(T){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),T.convertTo(this)._forceRed(T)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(T){return this.red=T,this},c.prototype.forceRed=function(T){return a(!this.red,"Already a number in reduction context"),this._forceRed(T)},c.prototype.redAdd=function(T){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,T)},c.prototype.redIAdd=function(T){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,T)},c.prototype.redSub=function(T){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,T)},c.prototype.redISub=function(T){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,T)},c.prototype.redShl=function(T){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,T)},c.prototype.redMul=function(T){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.mul(this,T)},c.prototype.redIMul=function(T){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,T),this.red.imul(this,T)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(T){return a(this.red&&!T.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,T)};var G={k256:null,p224:null,p192:null,p25519:null};function J(P,T){this.name=P,this.p=new c(T,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}J.prototype._tmp=function(){var T=new c(null);return T.words=new Array(Math.ceil(this.n/13)),T},J.prototype.ireduce=function(T){var C=T,q;do this.split(C,this.tmp),C=this.imulK(C),C=C.iadd(this.tmp),q=C.bitLength();while(q>this.n);var z=q<this.n?-1:C.ucmp(this.p);return z===0?(C.words[0]=0,C.length=1):z>0?C.isub(this.p):C.strip!==void 0?C.strip():C._strip(),C},J.prototype.split=function(T,C){T.iushrn(this.n,0,C)},J.prototype.imulK=function(T){return T.imul(this.k)};function k(){J.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(k,J),k.prototype.split=function(T,C){for(var q=4194303,z=Math.min(T.length,9),X=0;X<z;X++)C.words[X]=T.words[X];if(C.length=z,T.length<=9){T.words[0]=0,T.length=1;return}var W=T.words[9];for(C.words[C.length++]=W&q,X=10;X<T.length;X++){var M=T.words[X]|0;T.words[X-10]=(M&q)<<4|W>>>22,W=M}W>>>=22,T.words[X-10]=W,W===0&&T.length>10?T.length-=10:T.length-=9},k.prototype.imulK=function(T){T.words[T.length]=0,T.words[T.length+1]=0,T.length+=2;for(var C=0,q=0;q<T.length;q++){var z=T.words[q]|0;C+=z*977,T.words[q]=C&67108863,C=z*64+(C/67108864|0)}return T.words[T.length-1]===0&&(T.length--,T.words[T.length-1]===0&&T.length--),T};function ne(){J.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(ne,J);function ee(){J.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(ee,J);function de(){J.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(de,J),de.prototype.imulK=function(T){for(var C=0,q=0;q<T.length;q++){var z=(T.words[q]|0)*19+C,X=z&67108863;z>>>=26,T.words[q]=X,C=z}return C!==0&&(T.words[T.length++]=C),T},c._prime=function(T){if(G[T])return G[T];var C;if(T==="k256")C=new k;else if(T==="p224")C=new ne;else if(T==="p192")C=new ee;else if(T==="p25519")C=new de;else throw new Error("Unknown prime "+T);return G[T]=C,C};function ae(P){if(typeof P=="string"){var T=c._prime(P);this.m=T.p,this.prime=T}else a(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}ae.prototype._verify1=function(T){a(T.negative===0,"red works only with positives"),a(T.red,"red works only with red numbers")},ae.prototype._verify2=function(T,C){a((T.negative|C.negative)===0,"red works only with positives"),a(T.red&&T.red===C.red,"red works only with red numbers")},ae.prototype.imod=function(T){return this.prime?this.prime.ireduce(T)._forceRed(this):(v(T,T.umod(this.m)._forceRed(this)),T)},ae.prototype.neg=function(T){return T.isZero()?T.clone():this.m.sub(T)._forceRed(this)},ae.prototype.add=function(T,C){this._verify2(T,C);var q=T.add(C);return q.cmp(this.m)>=0&&q.isub(this.m),q._forceRed(this)},ae.prototype.iadd=function(T,C){this._verify2(T,C);var q=T.iadd(C);return q.cmp(this.m)>=0&&q.isub(this.m),q},ae.prototype.sub=function(T,C){this._verify2(T,C);var q=T.sub(C);return q.cmpn(0)<0&&q.iadd(this.m),q._forceRed(this)},ae.prototype.isub=function(T,C){this._verify2(T,C);var q=T.isub(C);return q.cmpn(0)<0&&q.iadd(this.m),q},ae.prototype.shl=function(T,C){return this._verify1(T),this.imod(T.ushln(C))},ae.prototype.imul=function(T,C){return this._verify2(T,C),this.imod(T.imul(C))},ae.prototype.mul=function(T,C){return this._verify2(T,C),this.imod(T.mul(C))},ae.prototype.isqr=function(T){return this.imul(T,T.clone())},ae.prototype.sqr=function(T){return this.mul(T,T)},ae.prototype.sqrt=function(T){if(T.isZero())return T.clone();var C=this.m.andln(3);if(a(C%2===1),C===3){var q=this.m.add(new c(1)).iushrn(2);return this.pow(T,q)}for(var z=this.m.subn(1),X=0;!z.isZero()&&z.andln(1)===0;)X++,z.iushrn(1);a(!z.isZero());var W=new c(1).toRed(this),M=W.redNeg(),D=this.m.subn(1).iushrn(1),B=this.m.bitLength();for(B=new c(2*B*B).toRed(this);this.pow(B,D).cmp(M)!==0;)B.redIAdd(M);for(var Z=this.pow(B,z),he=this.pow(T,z.addn(1).iushrn(1)),j=this.pow(T,z),fe=X;j.cmp(W)!==0;){for(var ie=j,oe=0;ie.cmp(W)!==0;oe++)ie=ie.redSqr();a(oe<fe);var ce=this.pow(Z,new c(1).iushln(fe-oe-1));he=he.redMul(ce),Z=ce.redSqr(),j=j.redMul(Z),fe=oe}return he},ae.prototype.invm=function(T){var C=T._invmp(this.m);return C.negative!==0?(C.negative=0,this.imod(C).redNeg()):this.imod(C)},ae.prototype.pow=function(T,C){if(C.isZero())return new c(1).toRed(this);if(C.cmpn(1)===0)return T.clone();var q=4,z=new Array(1<<q);z[0]=new c(1).toRed(this),z[1]=T;for(var X=2;X<z.length;X++)z[X]=this.mul(z[X-1],T);var W=z[0],M=0,D=0,B=C.bitLength()%26;for(B===0&&(B=26),X=C.length-1;X>=0;X--){for(var Z=C.words[X],he=B-1;he>=0;he--){var j=Z>>he&1;if(W!==z[0]&&(W=this.sqr(W)),j===0&&M===0){D=0;continue}M<<=1,M|=j,D++,!(D!==q&&(X!==0||he!==0))&&(W=this.mul(W,z[M]),D=0,M=0)}B=26}return W},ae.prototype.convertTo=function(T){var C=T.umod(this.m);return C===T?C.clone():C},ae.prototype.convertFrom=function(T){var C=T.clone();return C.red=null,C},c.mont=function(T){return new L(T)};function L(P){ae.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(L,ae),L.prototype.convertTo=function(T){return this.imod(T.ushln(this.shift))},L.prototype.convertFrom=function(T){var C=this.imod(T.mul(this.rinv));return C.red=null,C},L.prototype.imul=function(T,C){if(T.isZero()||C.isZero())return T.words[0]=0,T.length=1,T;var q=T.imul(C),z=q.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),X=q.isub(z).iushrn(this.shift),W=X;return X.cmp(this.m)>=0?W=X.isub(this.m):X.cmpn(0)<0&&(W=X.iadd(this.m)),W._forceRed(this)},L.prototype.mul=function(T,C){if(T.isZero()||C.isZero())return new c(0)._forceRed(this);var q=T.mul(C),z=q.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),X=q.isub(z).iushrn(this.shift),W=X;return X.cmp(this.m)>=0?W=X.isub(this.m):X.cmpn(0)<0&&(W=X.iadd(this.m)),W._forceRed(this)},L.prototype.invm=function(T){var C=this.imod(T._invmp(this.m).mul(this.r2));return C._forceRed(this)}})(t,commonjsGlobal)}(bn)),bn.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var t=requireBn(),e=requireBrowser$b();function n(c){var u=a(c),l=u.toRed(t.mont(c.modulus)).redPow(new t(c.publicExponent)).fromRed();return{blinder:l,unblinder:u.invm(c.modulus)}}function a(c){var u=c.modulus.byteLength(),l;do l=new t(e(u));while(l.cmp(c.modulus)>=0||!l.umod(c.prime1)||!l.umod(c.prime2));return l}function o(c,u){var l=n(u),p=u.modulus.byteLength(),b=new t(c).mul(l.blinder).umod(u.modulus),v=b.toRed(t.mont(u.prime1)),x=b.toRed(t.mont(u.prime2)),_=u.coefficient,E=u.prime1,$=u.prime2,S=v.redPow(u.exponent1).fromRed(),A=x.redPow(u.exponent2).fromRed(),I=S.isub(A).imul(_).umod(E).imul($);return A.iadd(I).imul(l.unblinder).umod(u.modulus).toArrayLike(buffer$2.Buffer,"be",p)}return o.getr=a,browserifyRsa=o,browserifyRsa}var elliptic$3={};const name$1="elliptic",version$i="6.5.4",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$2={name:name$1,version:version$i,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$o={},utils$n={};(function(t){var e=t;function n(c,u){if(Array.isArray(c))return c.slice();if(!c)return[];var l=[];if(typeof c!="string"){for(var p=0;p<c.length;p++)l[p]=c[p]|0;return l}if(u==="hex"){c=c.replace(/[^a-z0-9]+/ig,""),c.length%2!==0&&(c="0"+c);for(var p=0;p<c.length;p+=2)l.push(parseInt(c[p]+c[p+1],16))}else for(var p=0;p<c.length;p++){var b=c.charCodeAt(p),v=b>>8,x=b&255;v?l.push(v,x):l.push(x)}return l}e.toArray=n;function a(c){return c.length===1?"0"+c:c}e.zero2=a;function o(c){for(var u="",l=0;l<c.length;l++)u+=a(c[l].toString(16));return u}e.toHex=o,e.encode=function(u,l){return l==="hex"?o(u):u}})(utils$n);(function(t){var e=t,n=bnExports$1,a=minimalisticAssert$1,o=utils$n;e.assert=a,e.toArray=o.toArray,e.zero2=o.zero2,e.toHex=o.toHex,e.encode=o.encode;function c(v,x,_){var E=new Array(Math.max(v.bitLength(),_)+1);E.fill(0);for(var $=1<<x+1,S=v.clone(),A=0;A<E.length;A++){var I,O=S.andln($-1);S.isOdd()?(O>($>>1)-1?I=($>>1)-O:I=O,S.isubn(I)):I=0,E[A]=I,S.iushrn(1)}return E}e.getNAF=c;function u(v,x){var _=[[],[]];v=v.clone(),x=x.clone();for(var E=0,$=0,S;v.cmpn(-E)>0||x.cmpn(-$)>0;){var A=v.andln(3)+E&3,I=x.andln(3)+$&3;A===3&&(A=-1),I===3&&(I=-1);var O;A&1?(S=v.andln(7)+E&7,(S===3||S===5)&&I===2?O=-A:O=A):O=0,_[0].push(O);var F;I&1?(S=x.andln(7)+$&7,(S===3||S===5)&&A===2?F=-I:F=I):F=0,_[1].push(F),2*E===O+1&&(E=1-E),2*$===F+1&&($=1-$),v.iushrn(1),x.iushrn(1)}return _}e.getJSF=u;function l(v,x,_){var E="_"+x;v.prototype[x]=function(){return this[E]!==void 0?this[E]:this[E]=_.call(this)}}e.cachedProperty=l;function p(v){return typeof v=="string"?e.toArray(v,"hex"):v}e.parseBytes=p;function b(v){return new n(v,"hex","le")}e.intFromLE=b})(utils$o);var curve={},BN$9=bnExports$1,utils$m=utils$o,getNAF$1=utils$m.getNAF,getJSF$1=utils$m.getJSF,assert$k=utils$m.assert;function BaseCurve$1(t,e){this.type=t,this.p=new BN$9(e.p,16),this.red=e.prime?BN$9.red(e.prime):BN$9.mont(this.p),this.zero=new BN$9(0).toRed(this.red),this.one=new BN$9(1).toRed(this.red),this.two=new BN$9(2).toRed(this.red),this.n=e.n&&new BN$9(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$2=BaseCurve$1;BaseCurve$1.prototype.point=function t(){throw new Error("Not implemented")};BaseCurve$1.prototype.validate=function t(){throw new Error("Not implemented")};BaseCurve$1.prototype._fixedNafMul=function t(e,n){assert$k(e.precomputed);var a=e._getDoubles(),o=getNAF$1(n,1,this._bitLength),c=(1<<a.step+1)-(a.step%2===0?2:1);c/=3;var u=[],l,p;for(l=0;l<o.length;l+=a.step){p=0;for(var b=l+a.step-1;b>=l;b--)p=(p<<1)+o[b];u.push(p)}for(var v=this.jpoint(null,null,null),x=this.jpoint(null,null,null),_=c;_>0;_--){for(l=0;l<u.length;l++)p=u[l],p===_?x=x.mixedAdd(a.points[l]):p===-_&&(x=x.mixedAdd(a.points[l].neg()));v=v.add(x)}return v.toP()};BaseCurve$1.prototype._wnafMul=function t(e,n){var a=4,o=e._getNAFPoints(a);a=o.wnd;for(var c=o.points,u=getNAF$1(n,a,this._bitLength),l=this.jpoint(null,null,null),p=u.length-1;p>=0;p--){for(var b=0;p>=0&&u[p]===0;p--)b++;if(p>=0&&b++,l=l.dblp(b),p<0)break;var v=u[p];assert$k(v!==0),e.type==="affine"?v>0?l=l.mixedAdd(c[v-1>>1]):l=l.mixedAdd(c[-v-1>>1].neg()):v>0?l=l.add(c[v-1>>1]):l=l.add(c[-v-1>>1].neg())}return e.type==="affine"?l.toP():l};BaseCurve$1.prototype._wnafMulAdd=function t(e,n,a,o,c){var u=this._wnafT1,l=this._wnafT2,p=this._wnafT3,b=0,v,x,_;for(v=0;v<o;v++){_=n[v];var E=_._getNAFPoints(e);u[v]=E.wnd,l[v]=E.points}for(v=o-1;v>=1;v-=2){var $=v-1,S=v;if(u[$]!==1||u[S]!==1){p[$]=getNAF$1(a[$],u[$],this._bitLength),p[S]=getNAF$1(a[S],u[S],this._bitLength),b=Math.max(p[$].length,b),b=Math.max(p[S].length,b);continue}var A=[n[$],null,null,n[S]];n[$].y.cmp(n[S].y)===0?(A[1]=n[$].add(n[S]),A[2]=n[$].toJ().mixedAdd(n[S].neg())):n[$].y.cmp(n[S].y.redNeg())===0?(A[1]=n[$].toJ().mixedAdd(n[S]),A[2]=n[$].add(n[S].neg())):(A[1]=n[$].toJ().mixedAdd(n[S]),A[2]=n[$].toJ().mixedAdd(n[S].neg()));var I=[-3,-1,-5,-7,0,7,5,1,3],O=getJSF$1(a[$],a[S]);for(b=Math.max(O[0].length,b),p[$]=new Array(b),p[S]=new Array(b),x=0;x<b;x++){var F=O[0][x]|0,U=O[1][x]|0;p[$][x]=I[(F+1)*3+(U+1)],p[S][x]=0,l[$]=A}}var G=this.jpoint(null,null,null),J=this._wnafT4;for(v=b;v>=0;v--){for(var k=0;v>=0;){var ne=!0;for(x=0;x<o;x++)J[x]=p[x][v]|0,J[x]!==0&&(ne=!1);if(!ne)break;k++,v--}if(v>=0&&k++,G=G.dblp(k),v<0)break;for(x=0;x<o;x++){var ee=J[x];ee!==0&&(ee>0?_=l[x][ee-1>>1]:ee<0&&(_=l[x][-ee-1>>1].neg()),_.type==="affine"?G=G.mixedAdd(_):G=G.add(_))}}for(v=0;v<o;v++)l[v]=null;return c?G:G.toP()};function BasePoint$1(t,e){this.curve=t,this.type=e,this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1;BasePoint$1.prototype.eq=function t(){throw new Error("Not implemented")};BasePoint$1.prototype.validate=function t(){return this.curve.validate(this)};BaseCurve$1.prototype.decodePoint=function t(e,n){e=utils$m.toArray(e,n);var a=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*a){e[0]===6?assert$k(e[e.length-1]%2===0):e[0]===7&&assert$k(e[e.length-1]%2===1);var o=this.point(e.slice(1,1+a),e.slice(1+a,1+2*a));return o}else if((e[0]===2||e[0]===3)&&e.length-1===a)return this.pointFromX(e.slice(1,1+a),e[0]===3);throw new Error("Unknown point format")};BasePoint$1.prototype.encodeCompressed=function t(e){return this.encode(e,!0)};BasePoint$1.prototype._encode=function t(e){var n=this.curve.p.byteLength(),a=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",n))};BasePoint$1.prototype.encode=function t(e,n){return utils$m.encode(this._encode(n),e)};BasePoint$1.prototype.precompute=function t(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};BasePoint$1.prototype._hasDoubles=function t(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};BasePoint$1.prototype._getDoubles=function t(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],o=this,c=0;c<n;c+=e){for(var u=0;u<e;u++)o=o.dbl();a.push(o)}return{step:e,points:a}};BasePoint$1.prototype._getNAFPoints=function t(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],a=(1<<e)-1,o=a===1?null:this.dbl(),c=1;c<a;c++)n[c]=n[c-1].add(o);return{wnd:e,points:n}};BasePoint$1.prototype._getBeta=function t(){return null};BasePoint$1.prototype.dblp=function t(e){for(var n=this,a=0;a<e;a++)n=n.dbl();return n};var utils$l=utils$o,BN$8=bnExports$1,inherits$4=inherits_browserExports,Base$2=base$2,assert$j=utils$l.assert;function ShortCurve$1(t){Base$2.call(this,"short",t),this.a=new BN$8(t.a,16).toRed(this.red),this.b=new BN$8(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$4(ShortCurve$1,Base$2);var short=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function t(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,a;if(e.beta)n=new BN$8(e.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);n=o[0].cmp(o[1])<0?o[0]:o[1],n=n.toRed(this.red)}if(e.lambda)a=new BN$8(e.lambda,16);else{var c=this._getEndoRoots(this.n);this.g.mul(c[0]).x.cmp(this.g.x.redMul(n))===0?a=c[0]:(a=c[1],assert$j(this.g.mul(a).x.cmp(this.g.x.redMul(n))===0))}var u;return e.basis?u=e.basis.map(function(l){return{a:new BN$8(l.a,16),b:new BN$8(l.b,16)}}):u=this._getEndoBasis(a),{beta:n,lambda:a,basis:u}}};ShortCurve$1.prototype._getEndoRoots=function t(e){var n=e===this.p?this.red:BN$8.mont(e),a=new BN$8(2).toRed(n).redInvm(),o=a.redNeg(),c=new BN$8(3).toRed(n).redNeg().redSqrt().redMul(a),u=o.redAdd(c).fromRed(),l=o.redSub(c).fromRed();return[u,l]};ShortCurve$1.prototype._getEndoBasis=function t(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),a=e,o=this.n.clone(),c=new BN$8(1),u=new BN$8(0),l=new BN$8(0),p=new BN$8(1),b,v,x,_,E,$,S,A=0,I,O;a.cmpn(0)!==0;){var F=o.div(a);I=o.sub(F.mul(a)),O=l.sub(F.mul(c));var U=p.sub(F.mul(u));if(!x&&I.cmp(n)<0)b=S.neg(),v=c,x=I.neg(),_=O;else if(x&&++A===2)break;S=I,o=a,a=I,l=c,c=O,p=u,u=U}E=I.neg(),$=O;var G=x.sqr().add(_.sqr()),J=E.sqr().add($.sqr());return J.cmp(G)>=0&&(E=b,$=v),x.negative&&(x=x.neg(),_=_.neg()),E.negative&&(E=E.neg(),$=$.neg()),[{a:x,b:_},{a:E,b:$}]};ShortCurve$1.prototype._endoSplit=function t(e){var n=this.endo.basis,a=n[0],o=n[1],c=o.b.mul(e).divRound(this.n),u=a.b.neg().mul(e).divRound(this.n),l=c.mul(a.a),p=u.mul(o.a),b=c.mul(a.b),v=u.mul(o.b),x=e.sub(l).sub(p),_=b.add(v).neg();return{k1:x,k2:_}};ShortCurve$1.prototype.pointFromX=function t(e,n){e=new BN$8(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var c=o.fromRed().isOdd();return(n&&!c||!n&&c)&&(o=o.redNeg()),this.point(e,o)};ShortCurve$1.prototype.validate=function t(e){if(e.inf)return!0;var n=e.x,a=e.y,o=this.a.redMul(n),c=n.redSqr().redMul(n).redIAdd(o).redIAdd(this.b);return a.redSqr().redISub(c).cmpn(0)===0};ShortCurve$1.prototype._endoWnafMulAdd=function t(e,n,a){for(var o=this._endoWnafT1,c=this._endoWnafT2,u=0;u<e.length;u++){var l=this._endoSplit(n[u]),p=e[u],b=p._getBeta();l.k1.negative&&(l.k1.ineg(),p=p.neg(!0)),l.k2.negative&&(l.k2.ineg(),b=b.neg(!0)),o[u*2]=p,o[u*2+1]=b,c[u*2]=l.k1,c[u*2+1]=l.k2}for(var v=this._wnafMulAdd(1,o,c,u*2,a),x=0;x<u*2;x++)o[x]=null,c[x]=null;return v};function Point$5(t,e,n,a){Base$2.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$8(e,16),this.y=new BN$8(n,16),a&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$4(Point$5,Base$2.BasePoint);ShortCurve$1.prototype.point=function t(e,n,a){return new Point$5(this,e,n,a)};ShortCurve$1.prototype.pointFromJSON=function t(e,n){return Point$5.fromJSON(this,e,n)};Point$5.prototype._getBeta=function t(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var a=this.curve,o=function(c){return a.point(c.x.redMul(a.endo.beta),c.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(o)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(o)}}}return n}};Point$5.prototype.toJSON=function t(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$5.fromJSON=function t(e,n,a){typeof n=="string"&&(n=JSON.parse(n));var o=e.point(n[0],n[1],a);if(!n[2])return o;function c(l){return e.point(l[0],l[1],a)}var u=n[2];return o.precomputed={beta:null,doubles:u.doubles&&{step:u.doubles.step,points:[o].concat(u.doubles.points.map(c))},naf:u.naf&&{wnd:u.naf.wnd,points:[o].concat(u.naf.points.map(c))}},o};Point$5.prototype.inspect=function t(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$5.prototype.isInfinity=function t(){return this.inf};Point$5.prototype.add=function t(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var a=n.redSqr().redISub(this.x).redISub(e.x),o=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point$5.prototype.dbl=function t(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,a=this.x.redSqr(),o=e.redInvm(),c=a.redAdd(a).redIAdd(a).redIAdd(n).redMul(o),u=c.redSqr().redISub(this.x.redAdd(this.x)),l=c.redMul(this.x.redSub(u)).redISub(this.y);return this.curve.point(u,l)};Point$5.prototype.getX=function t(){return this.x.fromRed()};Point$5.prototype.getY=function t(){return this.y.fromRed()};Point$5.prototype.mul=function t(e){return e=new BN$8(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$5.prototype.mulAdd=function t(e,n,a){var o=[this,n],c=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,c):this.curve._wnafMulAdd(1,o,c,2)};Point$5.prototype.jmulAdd=function t(e,n,a){var o=[this,n],c=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,c,!0):this.curve._wnafMulAdd(1,o,c,2,!0)};Point$5.prototype.eq=function t(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$5.prototype.neg=function t(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var a=this.precomputed,o=function(c){return c.neg()};n.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(o)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(o)}}}return n};Point$5.prototype.toJ=function t(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint$1(t,e,n,a){Base$2.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&a===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$8(0)):(this.x=new BN$8(e,16),this.y=new BN$8(n,16),this.z=new BN$8(a,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$4(JPoint$1,Base$2.BasePoint);ShortCurve$1.prototype.jpoint=function t(e,n,a){return new JPoint$1(this,e,n,a)};JPoint$1.prototype.toP=function t(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),a=this.x.redMul(n),o=this.y.redMul(n).redMul(e);return this.curve.point(a,o)};JPoint$1.prototype.neg=function t(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$1.prototype.add=function t(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),a=this.z.redSqr(),o=this.x.redMul(n),c=e.x.redMul(a),u=this.y.redMul(n.redMul(e.z)),l=e.y.redMul(a.redMul(this.z)),p=o.redSub(c),b=u.redSub(l);if(p.cmpn(0)===0)return b.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=p.redSqr(),x=v.redMul(p),_=o.redMul(v),E=b.redSqr().redIAdd(x).redISub(_).redISub(_),$=b.redMul(_.redISub(E)).redISub(u.redMul(x)),S=this.z.redMul(e.z).redMul(p);return this.curve.jpoint(E,$,S)};JPoint$1.prototype.mixedAdd=function t(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),a=this.x,o=e.x.redMul(n),c=this.y,u=e.y.redMul(n).redMul(this.z),l=a.redSub(o),p=c.redSub(u);if(l.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=l.redSqr(),v=b.redMul(l),x=a.redMul(b),_=p.redSqr().redIAdd(v).redISub(x).redISub(x),E=p.redMul(x.redISub(_)).redISub(c.redMul(v)),$=this.z.redMul(l);return this.curve.jpoint(_,E,$)};JPoint$1.prototype.dblp=function t(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var a=this;for(n=0;n<e;n++)a=a.dbl();return a}var o=this.curve.a,c=this.curve.tinv,u=this.x,l=this.y,p=this.z,b=p.redSqr().redSqr(),v=l.redAdd(l);for(n=0;n<e;n++){var x=u.redSqr(),_=v.redSqr(),E=_.redSqr(),$=x.redAdd(x).redIAdd(x).redIAdd(o.redMul(b)),S=u.redMul(_),A=$.redSqr().redISub(S.redAdd(S)),I=S.redISub(A),O=$.redMul(I);O=O.redIAdd(O).redISub(E);var F=v.redMul(p);n+1<e&&(b=b.redMul(E)),u=A,p=F,v=O}return this.curve.jpoint(u,v.redMul(c),p)};JPoint$1.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint$1.prototype._zeroDbl=function t(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),c=this.y.redSqr(),u=c.redSqr(),l=this.x.redAdd(c).redSqr().redISub(o).redISub(u);l=l.redIAdd(l);var p=o.redAdd(o).redIAdd(o),b=p.redSqr().redISub(l).redISub(l),v=u.redIAdd(u);v=v.redIAdd(v),v=v.redIAdd(v),e=b,n=p.redMul(l.redISub(b)).redISub(v),a=this.y.redAdd(this.y)}else{var x=this.x.redSqr(),_=this.y.redSqr(),E=_.redSqr(),$=this.x.redAdd(_).redSqr().redISub(x).redISub(E);$=$.redIAdd($);var S=x.redAdd(x).redIAdd(x),A=S.redSqr(),I=E.redIAdd(E);I=I.redIAdd(I),I=I.redIAdd(I),e=A.redISub($).redISub($),n=S.redMul($.redISub(e)).redISub(I),a=this.y.redMul(this.z),a=a.redIAdd(a)}return this.curve.jpoint(e,n,a)};JPoint$1.prototype._threeDbl=function t(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),c=this.y.redSqr(),u=c.redSqr(),l=this.x.redAdd(c).redSqr().redISub(o).redISub(u);l=l.redIAdd(l);var p=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),b=p.redSqr().redISub(l).redISub(l);e=b;var v=u.redIAdd(u);v=v.redIAdd(v),v=v.redIAdd(v),n=p.redMul(l.redISub(b)).redISub(v),a=this.y.redAdd(this.y)}else{var x=this.z.redSqr(),_=this.y.redSqr(),E=this.x.redMul(_),$=this.x.redSub(x).redMul(this.x.redAdd(x));$=$.redAdd($).redIAdd($);var S=E.redIAdd(E);S=S.redIAdd(S);var A=S.redAdd(S);e=$.redSqr().redISub(A),a=this.y.redAdd(this.z).redSqr().redISub(_).redISub(x);var I=_.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I),n=$.redMul(S.redISub(e)).redISub(I)}return this.curve.jpoint(e,n,a)};JPoint$1.prototype._dbl=function t(){var e=this.curve.a,n=this.x,a=this.y,o=this.z,c=o.redSqr().redSqr(),u=n.redSqr(),l=a.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(e.redMul(c)),b=n.redAdd(n);b=b.redIAdd(b);var v=b.redMul(l),x=p.redSqr().redISub(v.redAdd(v)),_=v.redISub(x),E=l.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var $=p.redMul(_).redISub(E),S=a.redAdd(a).redMul(o);return this.curve.jpoint(x,$,S)};JPoint$1.prototype.trpl=function t(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),a=this.z.redSqr(),o=n.redSqr(),c=e.redAdd(e).redIAdd(e),u=c.redSqr(),l=this.x.redAdd(n).redSqr().redISub(e).redISub(o);l=l.redIAdd(l),l=l.redAdd(l).redIAdd(l),l=l.redISub(u);var p=l.redSqr(),b=o.redIAdd(o);b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var v=c.redIAdd(l).redSqr().redISub(u).redISub(p).redISub(b),x=n.redMul(v);x=x.redIAdd(x),x=x.redIAdd(x);var _=this.x.redMul(p).redISub(x);_=_.redIAdd(_),_=_.redIAdd(_);var E=this.y.redMul(v.redMul(b.redISub(v)).redISub(l.redMul(p)));E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var $=this.z.redAdd(l).redSqr().redISub(a).redISub(p);return this.curve.jpoint(_,E,$)};JPoint$1.prototype.mul=function t(e,n){return e=new BN$8(e,n),this.curve._wnafMul(this,e)};JPoint$1.prototype.eq=function t(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),a=e.z.redSqr();if(this.x.redMul(a).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var o=n.redMul(this.z),c=a.redMul(e.z);return this.y.redMul(c).redISub(e.y.redMul(o)).cmpn(0)===0};JPoint$1.prototype.eqXToP=function t(e){var n=this.z.redSqr(),a=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(a)===0)return!0;for(var o=e.clone(),c=this.curve.redN.redMul(n);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(a.redIAdd(c),this.x.cmp(a)===0)return!0}};JPoint$1.prototype.inspect=function t(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$1.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};var BN$7=bnExports$1,inherits$3=inherits_browserExports,Base$1=base$2,utils$k=utils$o;function MontCurve(t){Base$1.call(this,"mont",t),this.a=new BN$7(t.a,16).toRed(this.red),this.b=new BN$7(t.b,16).toRed(this.red),this.i4=new BN$7(4).toRed(this.red).redInvm(),this.two=new BN$7(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$3(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function t(e){var n=e.normalize().x,a=n.redSqr(),o=a.redMul(n).redAdd(a.redMul(this.a)).redAdd(n),c=o.redSqrt();return c.redSqr().cmp(o)===0};function Point$4(t,e,n){Base$1.BasePoint.call(this,t,"projective"),e===null&&n===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$7(e,16),this.z=new BN$7(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$3(Point$4,Base$1.BasePoint);MontCurve.prototype.decodePoint=function t(e,n){return this.point(utils$k.toArray(e,n),1)};MontCurve.prototype.point=function t(e,n){return new Point$4(this,e,n)};MontCurve.prototype.pointFromJSON=function t(e){return Point$4.fromJSON(this,e)};Point$4.prototype.precompute=function t(){};Point$4.prototype._encode=function t(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$4.fromJSON=function t(e,n){return new Point$4(e,n[0],n[1]||e.one)};Point$4.prototype.inspect=function t(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$4.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};Point$4.prototype.dbl=function t(){var e=this.x.redAdd(this.z),n=e.redSqr(),a=this.x.redSub(this.z),o=a.redSqr(),c=n.redSub(o),u=n.redMul(o),l=c.redMul(o.redAdd(this.curve.a24.redMul(c)));return this.curve.point(u,l)};Point$4.prototype.add=function t(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.diffAdd=function t(e,n){var a=this.x.redAdd(this.z),o=this.x.redSub(this.z),c=e.x.redAdd(e.z),u=e.x.redSub(e.z),l=u.redMul(a),p=c.redMul(o),b=n.z.redMul(l.redAdd(p).redSqr()),v=n.x.redMul(l.redISub(p).redSqr());return this.curve.point(b,v)};Point$4.prototype.mul=function t(e){for(var n=e.clone(),a=this,o=this.curve.point(null,null),c=this,u=[];n.cmpn(0)!==0;n.iushrn(1))u.push(n.andln(1));for(var l=u.length-1;l>=0;l--)u[l]===0?(a=a.diffAdd(o,c),o=o.dbl()):(o=a.diffAdd(o,c),a=a.dbl());return o};Point$4.prototype.mulAdd=function t(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.jumlAdd=function t(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.eq=function t(e){return this.getX().cmp(e.getX())===0};Point$4.prototype.normalize=function t(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$4.prototype.getX=function t(){return this.normalize(),this.x.fromRed()};var utils$j=utils$o,BN$6=bnExports$1,inherits$2=inherits_browserExports,Base=base$2,assert$i=utils$j.assert;function EdwardsCurve(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",t),this.a=new BN$6(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$6(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$6(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$i(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}inherits$2(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function t(e){return this.mOneA?e.redNeg():this.a.redMul(e)};EdwardsCurve.prototype._mulC=function t(e){return this.oneC?e:this.c.redMul(e)};EdwardsCurve.prototype.jpoint=function t(e,n,a,o){return this.point(e,n,a,o)};EdwardsCurve.prototype.pointFromX=function t(e,n){e=new BN$6(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr(),o=this.c2.redSub(this.a.redMul(a)),c=this.one.redSub(this.c2.redMul(this.d).redMul(a)),u=o.redMul(c.redInvm()),l=u.redSqrt();if(l.redSqr().redSub(u).cmp(this.zero)!==0)throw new Error("invalid point");var p=l.fromRed().isOdd();return(n&&!p||!n&&p)&&(l=l.redNeg()),this.point(e,l)};EdwardsCurve.prototype.pointFromY=function t(e,n){e=new BN$6(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr(),o=a.redSub(this.c2),c=a.redMul(this.d).redMul(this.c2).redSub(this.a),u=o.redMul(c.redInvm());if(u.cmp(this.zero)===0){if(n)throw new Error("invalid point");return this.point(this.zero,e)}var l=u.redSqrt();if(l.redSqr().redSub(u).cmp(this.zero)!==0)throw new Error("invalid point");return l.fromRed().isOdd()!==n&&(l=l.redNeg()),this.point(l,e)};EdwardsCurve.prototype.validate=function t(e){if(e.isInfinity())return!0;e.normalize();var n=e.x.redSqr(),a=e.y.redSqr(),o=n.redMul(this.a).redAdd(a),c=this.c2.redMul(this.one.redAdd(this.d.redMul(n).redMul(a)));return o.cmp(c)===0};function Point$3(t,e,n,a,o){Base.BasePoint.call(this,t,"projective"),e===null&&n===null&&a===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$6(e,16),this.y=new BN$6(n,16),this.z=a?new BN$6(a,16):this.curve.one,this.t=o&&new BN$6(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$2(Point$3,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function t(e){return Point$3.fromJSON(this,e)};EdwardsCurve.prototype.point=function t(e,n,a,o){return new Point$3(this,e,n,a,o)};Point$3.fromJSON=function t(e,n){return new Point$3(e,n[0],n[1],n[2])};Point$3.prototype.inspect=function t(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function t(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point$3.prototype._extDbl=function t(){var e=this.x.redSqr(),n=this.y.redSqr(),a=this.z.redSqr();a=a.redIAdd(a);var o=this.curve._mulA(e),c=this.x.redAdd(this.y).redSqr().redISub(e).redISub(n),u=o.redAdd(n),l=u.redSub(a),p=o.redSub(n),b=c.redMul(l),v=u.redMul(p),x=c.redMul(p),_=l.redMul(u);return this.curve.point(b,v,_,x)};Point$3.prototype._projDbl=function t(){var e=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),a=this.y.redSqr(),o,c,u,l,p,b;if(this.curve.twisted){l=this.curve._mulA(n);var v=l.redAdd(a);this.zOne?(o=e.redSub(n).redSub(a).redMul(v.redSub(this.curve.two)),c=v.redMul(l.redSub(a)),u=v.redSqr().redSub(v).redSub(v)):(p=this.z.redSqr(),b=v.redSub(p).redISub(p),o=e.redSub(n).redISub(a).redMul(b),c=v.redMul(l.redSub(a)),u=v.redMul(b))}else l=n.redAdd(a),p=this.curve._mulC(this.z).redSqr(),b=l.redSub(p).redSub(p),o=this.curve._mulC(e.redISub(l)).redMul(b),c=this.curve._mulC(l).redMul(n.redISub(a)),u=l.redMul(b);return this.curve.point(o,c,u)};Point$3.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point$3.prototype._extAdd=function t(e){var n=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),a=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),o=this.t.redMul(this.curve.dd).redMul(e.t),c=this.z.redMul(e.z.redAdd(e.z)),u=a.redSub(n),l=c.redSub(o),p=c.redAdd(o),b=a.redAdd(n),v=u.redMul(l),x=p.redMul(b),_=u.redMul(b),E=l.redMul(p);return this.curve.point(v,x,E,_)};Point$3.prototype._projAdd=function t(e){var n=this.z.redMul(e.z),a=n.redSqr(),o=this.x.redMul(e.x),c=this.y.redMul(e.y),u=this.curve.d.redMul(o).redMul(c),l=a.redSub(u),p=a.redAdd(u),b=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(c),v=n.redMul(l).redMul(b),x,_;return this.curve.twisted?(x=n.redMul(p).redMul(c.redSub(this.curve._mulA(o))),_=l.redMul(p)):(x=n.redMul(p).redMul(c.redSub(o)),_=this.curve._mulC(l).redMul(p)),this.curve.point(v,x,_)};Point$3.prototype.add=function t(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Point$3.prototype.mul=function t(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Point$3.prototype.mulAdd=function t(e,n,a){return this.curve._wnafMulAdd(1,[this,n],[e,a],2,!1)};Point$3.prototype.jmulAdd=function t(e,n,a){return this.curve._wnafMulAdd(1,[this,n],[e,a],2,!0)};Point$3.prototype.normalize=function t(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Point$3.prototype.neg=function t(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point$3.prototype.getX=function t(){return this.normalize(),this.x.fromRed()};Point$3.prototype.getY=function t(){return this.normalize(),this.y.fromRed()};Point$3.prototype.eq=function t(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Point$3.prototype.eqXToP=function t(e){var n=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(n)===0)return!0;for(var a=e.clone(),o=this.curve.redN.redMul(this.z);;){if(a.iadd(this.curve.n),a.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Point$3.prototype.toP=Point$3.prototype.normalize;Point$3.prototype.mixedAdd=Point$3.prototype.add;(function(t){var e=t;e.base=base$2,e.short=short,e.mont=mont,e.edwards=edwards})(curve);var curves$1={},hash$5={},utils$i={},assert$h=minimalisticAssert$1,inherits$1=inherits_browserExports;utils$i.inherits=inherits$1;function isSurrogatePair(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function toArray(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),o=0;o<t.length;o+=2)n.push(parseInt(t[o]+t[o+1],16))}else for(var a=0,o=0;o<t.length;o++){var c=t.charCodeAt(o);c<128?n[a++]=c:c<2048?(n[a++]=c>>6|192,n[a++]=c&63|128):isSurrogatePair(t,o)?(c=65536+((c&1023)<<10)+(t.charCodeAt(++o)&1023),n[a++]=c>>18|240,n[a++]=c>>12&63|128,n[a++]=c>>6&63|128,n[a++]=c&63|128):(n[a++]=c>>12|224,n[a++]=c>>6&63|128,n[a++]=c&63|128)}else for(o=0;o<t.length;o++)n[o]=t[o]|0;return n}utils$i.toArray=toArray;function toHex$1(t){for(var e="",n=0;n<t.length;n++)e+=zero2(t[n].toString(16));return e}utils$i.toHex=toHex$1;function htonl(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}utils$i.htonl=htonl;function toHex32(t,e){for(var n="",a=0;a<t.length;a++){var o=t[a];e==="little"&&(o=htonl(o)),n+=zero8(o.toString(16))}return n}utils$i.toHex32=toHex32;function zero2(t){return t.length===1?"0"+t:t}utils$i.zero2=zero2;function zero8(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}utils$i.zero8=zero8;function join32(t,e,n,a){var o=n-e;assert$h(o%4===0);for(var c=new Array(o/4),u=0,l=e;u<c.length;u++,l+=4){var p;a==="big"?p=t[l]<<24|t[l+1]<<16|t[l+2]<<8|t[l+3]:p=t[l+3]<<24|t[l+2]<<16|t[l+1]<<8|t[l],c[u]=p>>>0}return c}utils$i.join32=join32;function split32(t,e){for(var n=new Array(t.length*4),a=0,o=0;a<t.length;a++,o+=4){var c=t[a];e==="big"?(n[o]=c>>>24,n[o+1]=c>>>16&255,n[o+2]=c>>>8&255,n[o+3]=c&255):(n[o+3]=c>>>24,n[o+2]=c>>>16&255,n[o+1]=c>>>8&255,n[o]=c&255)}return n}utils$i.split32=split32;function rotr32$1(t,e){return t>>>e|t<<32-e}utils$i.rotr32=rotr32$1;function rotl32$2(t,e){return t<<e|t>>>32-e}utils$i.rotl32=rotl32$2;function sum32$3(t,e){return t+e>>>0}utils$i.sum32=sum32$3;function sum32_3$1(t,e,n){return t+e+n>>>0}utils$i.sum32_3=sum32_3$1;function sum32_4$2(t,e,n,a){return t+e+n+a>>>0}utils$i.sum32_4=sum32_4$2;function sum32_5$2(t,e,n,a,o){return t+e+n+a+o>>>0}utils$i.sum32_5=sum32_5$2;function sum64$1(t,e,n,a){var o=t[e],c=t[e+1],u=a+c>>>0,l=(u<a?1:0)+n+o;t[e]=l>>>0,t[e+1]=u}utils$i.sum64=sum64$1;function sum64_hi$1(t,e,n,a){var o=e+a>>>0,c=(o<e?1:0)+t+n;return c>>>0}utils$i.sum64_hi=sum64_hi$1;function sum64_lo$1(t,e,n,a){var o=e+a;return o>>>0}utils$i.sum64_lo=sum64_lo$1;function sum64_4_hi$1(t,e,n,a,o,c,u,l){var p=0,b=e;b=b+a>>>0,p+=b<e?1:0,b=b+c>>>0,p+=b<c?1:0,b=b+l>>>0,p+=b<l?1:0;var v=t+n+o+u+p;return v>>>0}utils$i.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(t,e,n,a,o,c,u,l){var p=e+a+c+l;return p>>>0}utils$i.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(t,e,n,a,o,c,u,l,p,b){var v=0,x=e;x=x+a>>>0,v+=x<e?1:0,x=x+c>>>0,v+=x<c?1:0,x=x+l>>>0,v+=x<l?1:0,x=x+b>>>0,v+=x<b?1:0;var _=t+n+o+u+p+v;return _>>>0}utils$i.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(t,e,n,a,o,c,u,l,p,b){var v=e+a+c+l+b;return v>>>0}utils$i.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(t,e,n){var a=e<<32-n|t>>>n;return a>>>0}utils$i.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(t,e,n){var a=t<<32-n|e>>>n;return a>>>0}utils$i.rotr64_lo=rotr64_lo$1;function shr64_hi$1(t,e,n){return t>>>n}utils$i.shr64_hi=shr64_hi$1;function shr64_lo$1(t,e,n){var a=t<<32-n|e>>>n;return a>>>0}utils$i.shr64_lo=shr64_lo$1;var common$7={},utils$h=utils$i,assert$g=minimalisticAssert$1;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$7.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function t(e,n){if(e=utils$h.toArray(e,n),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var a=e.length%this._delta8;this.pending=e.slice(e.length-a,e.length),this.pending.length===0&&(this.pending=null),e=utils$h.join32(e,0,e.length-a,this.endian);for(var o=0;o<e.length;o+=this._delta32)this._update(e,o,o+this._delta32)}return this};BlockHash$4.prototype.digest=function t(e){return this.update(this._pad()),assert$g(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function t(){var e=this.pendingTotal,n=this._delta8,a=n-(e+this.padLength)%n,o=new Array(a+this.padLength);o[0]=128;for(var c=1;c<a;c++)o[c]=0;if(e<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)o[c++]=0;o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=e>>>24&255,o[c++]=e>>>16&255,o[c++]=e>>>8&255,o[c++]=e&255}else for(o[c++]=e&255,o[c++]=e>>>8&255,o[c++]=e>>>16&255,o[c++]=e>>>24&255,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,u=8;u<this.padLength;u++)o[c++]=0;return o};var sha={},common$6={},utils$g=utils$i,rotr32=utils$g.rotr32;function ft_1$1(t,e,n,a){if(t===0)return ch32$1(e,n,a);if(t===1||t===3)return p32(e,n,a);if(t===2)return maj32$1(e,n,a)}common$6.ft_1=ft_1$1;function ch32$1(t,e,n){return t&e^~t&n}common$6.ch32=ch32$1;function maj32$1(t,e,n){return t&e^t&n^e&n}common$6.maj32=maj32$1;function p32(t,e,n){return t^e^n}common$6.p32=p32;function s0_256$1(t){return rotr32(t,2)^rotr32(t,13)^rotr32(t,22)}common$6.s0_256=s0_256$1;function s1_256$1(t){return rotr32(t,6)^rotr32(t,11)^rotr32(t,25)}common$6.s1_256=s1_256$1;function g0_256$1(t){return rotr32(t,7)^rotr32(t,18)^t>>>3}common$6.g0_256=g0_256$1;function g1_256$1(t){return rotr32(t,17)^rotr32(t,19)^t>>>10}common$6.g1_256=g1_256$1;var utils$f=utils$i,common$5=common$7,shaCommon$1=common$6,rotl32$1=utils$f.rotl32,sum32$2=utils$f.sum32,sum32_5$1=utils$f.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$5.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$f.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function t(e,n){for(var a=this.W,o=0;o<16;o++)a[o]=e[n+o];for(;o<a.length;o++)a[o]=rotl32$1(a[o-3]^a[o-8]^a[o-14]^a[o-16],1);var c=this.h[0],u=this.h[1],l=this.h[2],p=this.h[3],b=this.h[4];for(o=0;o<a.length;o++){var v=~~(o/20),x=sum32_5$1(rotl32$1(c,5),ft_1(v,u,l,p),b,a[o],sha1_K[v]);b=p,p=l,l=rotl32$1(u,30),u=c,c=x}this.h[0]=sum32$2(this.h[0],c),this.h[1]=sum32$2(this.h[1],u),this.h[2]=sum32$2(this.h[2],l),this.h[3]=sum32$2(this.h[3],p),this.h[4]=sum32$2(this.h[4],b)};SHA1.prototype._digest=function t(e){return e==="hex"?utils$f.toHex32(this.h,"big"):utils$f.split32(this.h,"big")};var utils$e=utils$i,common$4=common$7,shaCommon=common$6,assert$f=minimalisticAssert$1,sum32$1=utils$e.sum32,sum32_4$1=utils$e.sum32_4,sum32_5=utils$e.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$4.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$e.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function t(e,n){for(var a=this.W,o=0;o<16;o++)a[o]=e[n+o];for(;o<a.length;o++)a[o]=sum32_4$1(g1_256(a[o-2]),a[o-7],g0_256(a[o-15]),a[o-16]);var c=this.h[0],u=this.h[1],l=this.h[2],p=this.h[3],b=this.h[4],v=this.h[5],x=this.h[6],_=this.h[7];for(assert$f(this.k.length===a.length),o=0;o<a.length;o++){var E=sum32_5(_,s1_256(b),ch32(b,v,x),this.k[o],a[o]),$=sum32$1(s0_256(c),maj32(c,u,l));_=x,x=v,v=b,b=sum32$1(p,E),p=l,l=u,u=c,c=sum32$1(E,$)}this.h[0]=sum32$1(this.h[0],c),this.h[1]=sum32$1(this.h[1],u),this.h[2]=sum32$1(this.h[2],l),this.h[3]=sum32$1(this.h[3],p),this.h[4]=sum32$1(this.h[4],b),this.h[5]=sum32$1(this.h[5],v),this.h[6]=sum32$1(this.h[6],x),this.h[7]=sum32$1(this.h[7],_)};SHA256$1.prototype._digest=function t(e){return e==="hex"?utils$e.toHex32(this.h,"big"):utils$e.split32(this.h,"big")};var utils$d=utils$i,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$d.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function t(e){return e==="hex"?utils$d.toHex32(this.h.slice(0,7),"big"):utils$d.split32(this.h.slice(0,7),"big")};var utils$c=utils$i,common$3=common$7,assert$e=minimalisticAssert$1,rotr64_hi=utils$c.rotr64_hi,rotr64_lo=utils$c.rotr64_lo,shr64_hi=utils$c.shr64_hi,shr64_lo=utils$c.shr64_lo,sum64=utils$c.sum64,sum64_hi=utils$c.sum64_hi,sum64_lo=utils$c.sum64_lo,sum64_4_hi=utils$c.sum64_4_hi,sum64_4_lo=utils$c.sum64_4_lo,sum64_5_hi=utils$c.sum64_5_hi,sum64_5_lo=utils$c.sum64_5_lo,BlockHash$1=common$3.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$c.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function t(e,n){for(var a=this.W,o=0;o<32;o++)a[o]=e[n+o];for(;o<a.length;o+=2){var c=g1_512_hi(a[o-4],a[o-3]),u=g1_512_lo(a[o-4],a[o-3]),l=a[o-14],p=a[o-13],b=g0_512_hi(a[o-30],a[o-29]),v=g0_512_lo(a[o-30],a[o-29]),x=a[o-32],_=a[o-31];a[o]=sum64_4_hi(c,u,l,p,b,v,x,_),a[o+1]=sum64_4_lo(c,u,l,p,b,v,x,_)}};SHA512$1.prototype._update=function t(e,n){this._prepareBlock(e,n);var a=this.W,o=this.h[0],c=this.h[1],u=this.h[2],l=this.h[3],p=this.h[4],b=this.h[5],v=this.h[6],x=this.h[7],_=this.h[8],E=this.h[9],$=this.h[10],S=this.h[11],A=this.h[12],I=this.h[13],O=this.h[14],F=this.h[15];assert$e(this.k.length===a.length);for(var U=0;U<a.length;U+=2){var G=O,J=F,k=s1_512_hi(_,E),ne=s1_512_lo(_,E),ee=ch64_hi(_,E,$,S,A),de=ch64_lo(_,E,$,S,A,I),ae=this.k[U],L=this.k[U+1],P=a[U],T=a[U+1],C=sum64_5_hi(G,J,k,ne,ee,de,ae,L,P,T),q=sum64_5_lo(G,J,k,ne,ee,de,ae,L,P,T);G=s0_512_hi(o,c),J=s0_512_lo(o,c),k=maj64_hi(o,c,u,l,p),ne=maj64_lo(o,c,u,l,p,b);var z=sum64_hi(G,J,k,ne),X=sum64_lo(G,J,k,ne);O=A,F=I,A=$,I=S,$=_,S=E,_=sum64_hi(v,x,C,q),E=sum64_lo(x,x,C,q),v=p,x=b,p=u,b=l,u=o,l=c,o=sum64_hi(C,q,z,X),c=sum64_lo(C,q,z,X)}sum64(this.h,0,o,c),sum64(this.h,2,u,l),sum64(this.h,4,p,b),sum64(this.h,6,v,x),sum64(this.h,8,_,E),sum64(this.h,10,$,S),sum64(this.h,12,A,I),sum64(this.h,14,O,F)};SHA512$1.prototype._digest=function t(e){return e==="hex"?utils$c.toHex32(this.h,"big"):utils$c.split32(this.h,"big")};function ch64_hi(t,e,n,a,o){var c=t&n^~t&o;return c<0&&(c+=4294967296),c}function ch64_lo(t,e,n,a,o,c){var u=e&a^~e&c;return u<0&&(u+=4294967296),u}function maj64_hi(t,e,n,a,o){var c=t&n^t&o^n&o;return c<0&&(c+=4294967296),c}function maj64_lo(t,e,n,a,o,c){var u=e&a^e&c^a&c;return u<0&&(u+=4294967296),u}function s0_512_hi(t,e){var n=rotr64_hi(t,e,28),a=rotr64_hi(e,t,2),o=rotr64_hi(e,t,7),c=n^a^o;return c<0&&(c+=4294967296),c}function s0_512_lo(t,e){var n=rotr64_lo(t,e,28),a=rotr64_lo(e,t,2),o=rotr64_lo(e,t,7),c=n^a^o;return c<0&&(c+=4294967296),c}function s1_512_hi(t,e){var n=rotr64_hi(t,e,14),a=rotr64_hi(t,e,18),o=rotr64_hi(e,t,9),c=n^a^o;return c<0&&(c+=4294967296),c}function s1_512_lo(t,e){var n=rotr64_lo(t,e,14),a=rotr64_lo(t,e,18),o=rotr64_lo(e,t,9),c=n^a^o;return c<0&&(c+=4294967296),c}function g0_512_hi(t,e){var n=rotr64_hi(t,e,1),a=rotr64_hi(t,e,8),o=shr64_hi(t,e,7),c=n^a^o;return c<0&&(c+=4294967296),c}function g0_512_lo(t,e){var n=rotr64_lo(t,e,1),a=rotr64_lo(t,e,8),o=shr64_lo(t,e,7),c=n^a^o;return c<0&&(c+=4294967296),c}function g1_512_hi(t,e){var n=rotr64_hi(t,e,19),a=rotr64_hi(e,t,29),o=shr64_hi(t,e,6),c=n^a^o;return c<0&&(c+=4294967296),c}function g1_512_lo(t,e){var n=rotr64_lo(t,e,19),a=rotr64_lo(e,t,29),o=shr64_lo(t,e,6),c=n^a^o;return c<0&&(c+=4294967296),c}var utils$b=utils$i,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$b.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function t(e){return e==="hex"?utils$b.toHex32(this.h.slice(0,12),"big"):utils$b.split32(this.h.slice(0,12),"big")};sha.sha1=_1;sha.sha224=_224;sha.sha256=_256;sha.sha384=_384;sha.sha512=_512;var ripemd={},utils$a=utils$i,common$2=common$7,rotl32=utils$a.rotl32,sum32=utils$a.sum32,sum32_3=utils$a.sum32_3,sum32_4=utils$a.sum32_4,BlockHash=common$2.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$a.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function t(e,n){for(var a=this.h[0],o=this.h[1],c=this.h[2],u=this.h[3],l=this.h[4],p=a,b=o,v=c,x=u,_=l,E=0;E<80;E++){var $=sum32(rotl32(sum32_4(a,f(E,o,c,u),e[r[E]+n],K(E)),s$2[E]),l);a=l,l=u,u=rotl32(c,10),c=o,o=$,$=sum32(rotl32(sum32_4(p,f(79-E,b,v,x),e[rh[E]+n],Kh(E)),sh[E]),_),p=_,_=x,x=rotl32(v,10),v=b,b=$}$=sum32_3(this.h[1],c,x),this.h[1]=sum32_3(this.h[2],u,_),this.h[2]=sum32_3(this.h[3],l,p),this.h[3]=sum32_3(this.h[4],a,b),this.h[4]=sum32_3(this.h[0],o,v),this.h[0]=$};RIPEMD160.prototype._digest=function t(e){return e==="hex"?utils$a.toHex32(this.h,"little"):utils$a.split32(this.h,"little")};function f(t,e,n,a){return t<=15?e^n^a:t<=31?e&n|~e&a:t<=47?(e|~n)^a:t<=63?e&a|n&~a:e^(n|~a)}function K(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$2=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$9=utils$i,assert$d=minimalisticAssert$1;function Hmac(t,e,n){if(!(this instanceof Hmac))return new Hmac(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(utils$9.toArray(e,n))}var hmac$2=Hmac;Hmac.prototype._init=function t(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert$d(e.length<=this.blockSize);for(var n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new this.Hash().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function t(e,n){return this.inner.update(e,n),this};Hmac.prototype.digest=function t(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=utils$i,e.common=common$7,e.sha=sha,e.ripemd=ripemd,e.hmac=hmac$2,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash$5);const hash$4=getDefaultExportFromCjs(hash$5);var secp256k1$2,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$2={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$2}(function(t){var e=t,n=hash$5,a=curve,o=utils$o,c=o.assert;function u(b){b.type==="short"?this.curve=new a.short(b):b.type==="edwards"?this.curve=new a.edwards(b):this.curve=new a.mont(b),this.g=this.curve.g,this.n=this.curve.n,this.hash=b.hash,c(this.g.validate(),"Invalid curve"),c(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=u;function l(b,v){Object.defineProperty(e,b,{configurable:!0,enumerable:!0,get:function(){var x=new u(v);return Object.defineProperty(e,b,{configurable:!0,enumerable:!0,value:x}),x}})}l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var p;try{p=requireSecp256k1()}catch{p=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",p]})})(curves$1);var hash$3=hash$5,utils$8=utils$n,assert$c=minimalisticAssert$1;function HmacDRBG$1(t){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils$8.toArray(t.entropy,t.entropyEnc||"hex"),n=utils$8.toArray(t.nonce,t.nonceEnc||"hex"),a=utils$8.toArray(t.pers,t.persEnc||"hex");assert$c(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,a)}var hmacDrbg$1=HmacDRBG$1;HmacDRBG$1.prototype._init=function t(e,n,a){var o=e.concat(n).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var c=0;c<this.V.length;c++)this.K[c]=0,this.V[c]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function t(){return new hash$3.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function t(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function t(e,n,a,o){typeof n!="string"&&(o=a,a=n,n=null),e=utils$8.toArray(e,n),a=utils$8.toArray(a,o),assert$c(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(a||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function t(e,n,a,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(o=a,a=n,n=null),a&&(a=utils$8.toArray(a,o||"hex"),this._update(a));for(var c=[];c.length<e;)this.V=this._hmac().update(this.V).digest(),c=c.concat(this.V);var u=c.slice(0,e);return this._update(a),this._reseed++,utils$8.encode(u,n)};var BN$5=bnExports$1,utils$7=utils$o,assert$b=utils$7.assert;function KeyPair$3(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$2=KeyPair$3;KeyPair$3.fromPublic=function t(e,n,a){return n instanceof KeyPair$3?n:new KeyPair$3(e,{pub:n,pubEnc:a})};KeyPair$3.fromPrivate=function t(e,n,a){return n instanceof KeyPair$3?n:new KeyPair$3(e,{priv:n,privEnc:a})};KeyPair$3.prototype.validate=function t(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function t(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};KeyPair$3.prototype.getPrivate=function t(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function t(e,n){this.priv=new BN$5(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function t(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?assert$b(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$b(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};KeyPair$3.prototype.derive=function t(e){return e.validate()||assert$b(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$3.prototype.sign=function t(e,n,a){return this.ec.sign(e,this,n,a)};KeyPair$3.prototype.verify=function t(e,n){return this.ec.verify(e,n,this)};KeyPair$3.prototype.inspect=function t(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$4=bnExports$1,utils$6=utils$o,assert$a=utils$6.assert;function Signature$5(t,e){if(t instanceof Signature$5)return t;this._importDER(t,e)||(assert$a(t.r&&t.s,"Signature without r or s"),this.r=new BN$4(t.r,16),this.s=new BN$4(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature$2=Signature$5;function Position$1(){this.place=0}function getLength$2(t,e){var n=t[e.place++];if(!(n&128))return n;var a=n&15;if(a===0||a>4)return!1;for(var o=0,c=0,u=e.place;c<a;c++,u++)o<<=8,o|=t[u],o>>>=0;return o<=127?!1:(e.place=u,o)}function rmPadding$1(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}Signature$5.prototype._importDER=function t(e,n){e=utils$6.toArray(e,n);var a=new Position$1;if(e[a.place++]!==48)return!1;var o=getLength$2(e,a);if(o===!1||o+a.place!==e.length||e[a.place++]!==2)return!1;var c=getLength$2(e,a);if(c===!1)return!1;var u=e.slice(a.place,c+a.place);if(a.place+=c,e[a.place++]!==2)return!1;var l=getLength$2(e,a);if(l===!1||e.length!==l+a.place)return!1;var p=e.slice(a.place,l+a.place);if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;if(p[0]===0)if(p[1]&128)p=p.slice(1);else return!1;return this.r=new BN$4(u),this.s=new BN$4(p),this.recoveryParam=null,!0};function constructLength$1(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}Signature$5.prototype.toDER=function t(e){var n=this.r.toArray(),a=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),a[0]&128&&(a=[0].concat(a)),n=rmPadding$1(n),a=rmPadding$1(a);!a[0]&&!(a[1]&128);)a=a.slice(1);var o=[2];constructLength$1(o,n.length),o=o.concat(n),o.push(2),constructLength$1(o,a.length);var c=o.concat(a),u=[48];return constructLength$1(u,c.length),u=u.concat(c),utils$6.encode(u,e)};var ec$2,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec$2;hasRequiredEc=1;var t=bnExports$1,e=hmacDrbg$1,n=utils$o,a=curves$1,o=requireBrorand(),c=n.assert,u=key$2,l=signature$2;function p(b){if(!(this instanceof p))return new p(b);typeof b=="string"&&(c(Object.prototype.hasOwnProperty.call(a,b),"Unknown curve "+b),b=a[b]),b instanceof a.PresetCurve&&(b={curve:b}),this.curve=b.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=b.curve.g,this.g.precompute(b.curve.n.bitLength()+1),this.hash=b.hash||b.curve.hash}return ec$2=p,p.prototype.keyPair=function(v){return new u(this,v)},p.prototype.keyFromPrivate=function(v,x){return u.fromPrivate(this,v,x)},p.prototype.keyFromPublic=function(v,x){return u.fromPublic(this,v,x)},p.prototype.genKeyPair=function(v){v||(v={});for(var x=new e({hash:this.hash,pers:v.pers,persEnc:v.persEnc||"utf8",entropy:v.entropy||o(this.hash.hmacStrength),entropyEnc:v.entropy&&v.entropyEnc||"utf8",nonce:this.n.toArray()}),_=this.n.byteLength(),E=this.n.sub(new t(2));;){var $=new t(x.generate(_));if(!($.cmp(E)>0))return $.iaddn(1),this.keyFromPrivate($)}},p.prototype._truncateToN=function(v,x){var _=v.byteLength()*8-this.n.bitLength();return _>0&&(v=v.ushrn(_)),!x&&v.cmp(this.n)>=0?v.sub(this.n):v},p.prototype.sign=function(v,x,_,E){typeof _=="object"&&(E=_,_=null),E||(E={}),x=this.keyFromPrivate(x,_),v=this._truncateToN(new t(v,16));for(var $=this.n.byteLength(),S=x.getPrivate().toArray("be",$),A=v.toArray("be",$),I=new e({hash:this.hash,entropy:S,nonce:A,pers:E.pers,persEnc:E.persEnc||"utf8"}),O=this.n.sub(new t(1)),F=0;;F++){var U=E.k?E.k(F):new t(I.generate(this.n.byteLength()));if(U=this._truncateToN(U,!0),!(U.cmpn(1)<=0||U.cmp(O)>=0)){var G=this.g.mul(U);if(!G.isInfinity()){var J=G.getX(),k=J.umod(this.n);if(k.cmpn(0)!==0){var ne=U.invm(this.n).mul(k.mul(x.getPrivate()).iadd(v));if(ne=ne.umod(this.n),ne.cmpn(0)!==0){var ee=(G.getY().isOdd()?1:0)|(J.cmp(k)!==0?2:0);return E.canonical&&ne.cmp(this.nh)>0&&(ne=this.n.sub(ne),ee^=1),new l({r:k,s:ne,recoveryParam:ee})}}}}}},p.prototype.verify=function(v,x,_,E){v=this._truncateToN(new t(v,16)),_=this.keyFromPublic(_,E),x=new l(x,"hex");var $=x.r,S=x.s;if($.cmpn(1)<0||$.cmp(this.n)>=0||S.cmpn(1)<0||S.cmp(this.n)>=0)return!1;var A=S.invm(this.n),I=A.mul(v).umod(this.n),O=A.mul($).umod(this.n),F;return this.curve._maxwellTrick?(F=this.g.jmulAdd(I,_.getPublic(),O),F.isInfinity()?!1:F.eqXToP($)):(F=this.g.mulAdd(I,_.getPublic(),O),F.isInfinity()?!1:F.getX().umod(this.n).cmp($)===0)},p.prototype.recoverPubKey=function(b,v,x,_){c((3&x)===x,"The recovery param is more than two bits"),v=new l(v,_);var E=this.n,$=new t(b),S=v.r,A=v.s,I=x&1,O=x>>1;if(S.cmp(this.curve.p.umod(this.curve.n))>=0&&O)throw new Error("Unable to find sencond key candinate");O?S=this.curve.pointFromX(S.add(this.curve.n),I):S=this.curve.pointFromX(S,I);var F=v.r.invm(E),U=E.sub($).mul(F).umod(E),G=A.mul(F).umod(E);return this.g.mulAdd(U,S,G)},p.prototype.getKeyRecoveryParam=function(b,v,x,_){if(v=new l(v,_),v.recoveryParam!==null)return v.recoveryParam;for(var E=0;E<4;E++){var $;try{$=this.recoverPubKey(b,v,E)}catch{continue}if($.eq(x))return E}throw new Error("Unable to find valid recovery factor")},ec$2}var utils$5=utils$o,assert$9=utils$5.assert,parseBytes$2=utils$5.parseBytes,cachedProperty$1=utils$5.cachedProperty;function KeyPair$2(t,e){this.eddsa=t,this._secret=parseBytes$2(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=parseBytes$2(e.pub)}KeyPair$2.fromPublic=function t(e,n){return n instanceof KeyPair$2?n:new KeyPair$2(e,{pub:n})};KeyPair$2.fromSecret=function t(e,n){return n instanceof KeyPair$2?n:new KeyPair$2(e,{secret:n})};KeyPair$2.prototype.secret=function t(){return this._secret};cachedProperty$1(KeyPair$2,"pubBytes",function t(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$2,"pub",function t(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$2,"privBytes",function t(){var e=this.eddsa,n=this.hash(),a=e.encodingLength-1,o=n.slice(0,e.encodingLength);return o[0]&=248,o[a]&=127,o[a]|=64,o});cachedProperty$1(KeyPair$2,"priv",function t(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$2,"hash",function t(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$2,"messagePrefix",function t(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$2.prototype.sign=function t(e){return assert$9(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};KeyPair$2.prototype.verify=function t(e,n){return this.eddsa.verify(e,n,this)};KeyPair$2.prototype.getSecret=function t(e){return assert$9(this._secret,"KeyPair is public only"),utils$5.encode(this.secret(),e)};KeyPair$2.prototype.getPublic=function t(e){return utils$5.encode(this.pubBytes(),e)};var key$1=KeyPair$2,BN$3=bnExports$1,utils$4=utils$o,assert$8=utils$4.assert,cachedProperty=utils$4.cachedProperty,parseBytes$1=utils$4.parseBytes;function Signature$4(t,e){this.eddsa=t,typeof e!="object"&&(e=parseBytes$1(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),assert$8(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof BN$3&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}cachedProperty(Signature$4,"S",function t(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$4,"R",function t(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$4,"Rencoded",function t(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$4,"Sencoded",function t(){return this.eddsa.encodeInt(this.S())});Signature$4.prototype.toBytes=function t(){return this.Rencoded().concat(this.Sencoded())};Signature$4.prototype.toHex=function t(){return utils$4.encode(this.toBytes(),"hex").toUpperCase()};var signature$1=Signature$4,hash$2=hash$5,curves=curves$1,utils$3=utils$o,assert$7=utils$3.assert,parseBytes=utils$3.parseBytes,KeyPair$1=key$1,Signature$3=signature$1;function EDDSA(t){if(assert$7(t==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(t);t=curves[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=hash$2.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function t(e,n){e=parseBytes(e);var a=this.keyFromSecret(n),o=this.hashInt(a.messagePrefix(),e),c=this.g.mul(o),u=this.encodePoint(c),l=this.hashInt(u,a.pubBytes(),e).mul(a.priv()),p=o.add(l).umod(this.curve.n);return this.makeSignature({R:c,S:p,Rencoded:u})};EDDSA.prototype.verify=function t(e,n,a){e=parseBytes(e),n=this.makeSignature(n);var o=this.keyFromPublic(a),c=this.hashInt(n.Rencoded(),o.pubBytes(),e),u=this.g.mul(n.S()),l=n.R().add(o.pub().mul(c));return l.eq(u)};EDDSA.prototype.hashInt=function t(){for(var e=this.hash(),n=0;n<arguments.length;n++)e.update(arguments[n]);return utils$3.intFromLE(e.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function t(e){return KeyPair$1.fromPublic(this,e)};EDDSA.prototype.keyFromSecret=function t(e){return KeyPair$1.fromSecret(this,e)};EDDSA.prototype.makeSignature=function t(e){return e instanceof Signature$3?e:new Signature$3(this,e)};EDDSA.prototype.encodePoint=function t(e){var n=e.getY().toArray("le",this.encodingLength);return n[this.encodingLength-1]|=e.getX().isOdd()?128:0,n};EDDSA.prototype.decodePoint=function t(e){e=utils$3.parseBytes(e);var n=e.length-1,a=e.slice(0,n).concat(e[n]&-129),o=(e[n]&128)!==0,c=utils$3.intFromLE(a);return this.curve.pointFromY(c,o)};EDDSA.prototype.encodeInt=function t(e){return e.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function t(e){return utils$3.intFromLE(e)};EDDSA.prototype.isPoint=function t(e){return e instanceof this.pointClass};var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(t){var e=t;e.version=require$$0$2.version,e.utils=utils$o,e.rand=requireBrorand(),e.curve=curve,e.curves=curves$1,e.ec=requireEc(),e.eddsa=eddsa}(elliptic$3)),elliptic$3}var asn1$6={},asn1$5={},api={},encoders={},safer_1,hasRequiredSafer;function requireSafer(){if(hasRequiredSafer)return safer_1;hasRequiredSafer=1;var t=buffer$2,e=t.Buffer,n={},a;for(a in t)t.hasOwnProperty(a)&&(a==="SlowBuffer"||a==="Buffer"||(n[a]=t[a]));var o=n.Buffer={};for(a in e)e.hasOwnProperty(a)&&(a==="allocUnsafe"||a==="allocUnsafeSlow"||(o[a]=e[a]));if(n.Buffer.prototype=e.prototype,(!o.from||o.from===Uint8Array.from)&&(o.from=function(c,u,l){if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof c);if(c&&typeof c.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);return e(c,u,l)}),o.alloc||(o.alloc=function(c,u,l){if(typeof c!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof c);if(c<0||c>=2*(1<<30))throw new RangeError('The value "'+c+'" is invalid for option "size"');var p=e(c);return!u||u.length===0?p.fill(0):typeof l=="string"?p.fill(u,l):p.fill(u),p}),!n.kStringMaxLength)try{n.kStringMaxLength=process$1.binding("buffer").kStringMaxLength}catch{}return n.constants||(n.constants={MAX_LENGTH:n.kMaxLength},n.kStringMaxLength&&(n.constants.MAX_STRING_LENGTH=n.kStringMaxLength)),safer_1=n,safer_1}var reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;const t=inherits_browserExports;function e(a){this._reporterState={obj:null,path:[],options:a||{},errors:[]}}reporter.Reporter=e,e.prototype.isError=function(o){return o instanceof n},e.prototype.save=function(){const o=this._reporterState;return{obj:o.obj,pathLen:o.path.length}},e.prototype.restore=function(o){const c=this._reporterState;c.obj=o.obj,c.path=c.path.slice(0,o.pathLen)},e.prototype.enterKey=function(o){return this._reporterState.path.push(o)},e.prototype.exitKey=function(o){const c=this._reporterState;c.path=c.path.slice(0,o-1)},e.prototype.leaveKey=function(o,c,u){const l=this._reporterState;this.exitKey(o),l.obj!==null&&(l.obj[c]=u)},e.prototype.path=function(){return this._reporterState.path.join("/")},e.prototype.enterObject=function(){const o=this._reporterState,c=o.obj;return o.obj={},c},e.prototype.leaveObject=function(o){const c=this._reporterState,u=c.obj;return c.obj=o,u},e.prototype.error=function(o){let c;const u=this._reporterState,l=o instanceof n;if(l?c=o:c=new n(u.path.map(function(p){return"["+JSON.stringify(p)+"]"}).join(""),o.message||o,o.stack),!u.options.partial)throw c;return l||u.errors.push(c),c},e.prototype.wrapResult=function(o){const c=this._reporterState;return c.options.partial?{result:this.isError(o)?null:o,errors:c.errors}:o};function n(a,o){this.path=a,this.rethrow(o)}return t(n,Error),n.prototype.rethrow=function(o){if(this.message=o+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,n),!this.stack)try{throw new Error(this.message)}catch(c){this.stack=c.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;const t=inherits_browserExports,e=requireReporter().Reporter,n=requireSafer().Buffer;function a(c,u){if(e.call(this,u),!n.isBuffer(c)){this.error("Input not Buffer");return}this.base=c,this.offset=0,this.length=c.length}t(a,e),buffer.DecoderBuffer=a,a.isDecoderBuffer=function(u){return u instanceof a?!0:typeof u=="object"&&n.isBuffer(u.base)&&u.constructor.name==="DecoderBuffer"&&typeof u.offset=="number"&&typeof u.length=="number"&&typeof u.save=="function"&&typeof u.restore=="function"&&typeof u.isEmpty=="function"&&typeof u.readUInt8=="function"&&typeof u.skip=="function"&&typeof u.raw=="function"},a.prototype.save=function(){return{offset:this.offset,reporter:e.prototype.save.call(this)}},a.prototype.restore=function(u){const l=new a(this.base);return l.offset=u.offset,l.length=this.offset,this.offset=u.offset,e.prototype.restore.call(this,u.reporter),l},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(u){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(u||"DecoderBuffer overrun")},a.prototype.skip=function(u,l){if(!(this.offset+u<=this.length))return this.error(l||"DecoderBuffer overrun");const p=new a(this.base);return p._reporterState=this._reporterState,p.offset=this.offset,p.length=this.offset+u,this.offset+=u,p},a.prototype.raw=function(u){return this.base.slice(u?u.offset:this.offset,this.length)};function o(c,u){if(Array.isArray(c))this.length=0,this.value=c.map(function(l){return o.isEncoderBuffer(l)||(l=new o(l,u)),this.length+=l.length,l},this);else if(typeof c=="number"){if(!(0<=c&&c<=255))return u.error("non-byte EncoderBuffer value");this.value=c,this.length=1}else if(typeof c=="string")this.value=c,this.length=n.byteLength(c);else if(n.isBuffer(c))this.value=c,this.length=c.length;else return u.error("Unsupported type: "+typeof c)}return buffer.EncoderBuffer=o,o.isEncoderBuffer=function(u){return u instanceof o?!0:typeof u=="object"&&u.constructor.name==="EncoderBuffer"&&typeof u.length=="number"&&typeof u.join=="function"},o.prototype.join=function(u,l){return u||(u=n.alloc(this.length)),l||(l=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(p){p.join(u,l),l+=p.length}):(typeof this.value=="number"?u[l]=this.value:typeof this.value=="string"?u.write(this.value,l):n.isBuffer(this.value)&&this.value.copy(u,l),l+=this.length)),u},buffer}var node$1,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node$1;hasRequiredNode=1;const t=requireReporter().Reporter,e=requireBuffer().EncoderBuffer,n=requireBuffer().DecoderBuffer,a=minimalisticAssert$1,o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o),u=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function l(b,v,x){const _={};this._baseState=_,_.name=x,_.enc=b,_.parent=v||null,_.children=null,_.tag=null,_.args=null,_.reverseArgs=null,_.choice=null,_.optional=!1,_.any=!1,_.obj=!1,_.use=null,_.useDecoder=null,_.key=null,_.default=null,_.explicit=null,_.implicit=null,_.contains=null,_.parent||(_.children=[],this._wrap())}node$1=l;const p=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return l.prototype.clone=function(){const v=this._baseState,x={};p.forEach(function(E){x[E]=v[E]});const _=new this.constructor(x.parent);return _._baseState=x,_},l.prototype._wrap=function(){const v=this._baseState;c.forEach(function(x){this[x]=function(){const E=new this.constructor(this);return v.children.push(E),E[x].apply(E,arguments)}},this)},l.prototype._init=function(v){const x=this._baseState;a(x.parent===null),v.call(this),x.children=x.children.filter(function(_){return _._baseState.parent===this},this),a.equal(x.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(v){const x=this._baseState,_=v.filter(function(E){return E instanceof this.constructor},this);v=v.filter(function(E){return!(E instanceof this.constructor)},this),_.length!==0&&(a(x.children===null),x.children=_,_.forEach(function(E){E._baseState.parent=this},this)),v.length!==0&&(a(x.args===null),x.args=v,x.reverseArgs=v.map(function(E){if(typeof E!="object"||E.constructor!==Object)return E;const $={};return Object.keys(E).forEach(function(S){S==(S|0)&&(S|=0);const A=E[S];$[A]=S}),$}))},u.forEach(function(b){l.prototype[b]=function(){const x=this._baseState;throw new Error(b+" not implemented for encoding: "+x.enc)}}),o.forEach(function(b){l.prototype[b]=function(){const x=this._baseState,_=Array.prototype.slice.call(arguments);return a(x.tag===null),x.tag=b,this._useArgs(_),this}}),l.prototype.use=function(v){a(v);const x=this._baseState;return a(x.use===null),x.use=v,this},l.prototype.optional=function(){const v=this._baseState;return v.optional=!0,this},l.prototype.def=function(v){const x=this._baseState;return a(x.default===null),x.default=v,x.optional=!0,this},l.prototype.explicit=function(v){const x=this._baseState;return a(x.explicit===null&&x.implicit===null),x.explicit=v,this},l.prototype.implicit=function(v){const x=this._baseState;return a(x.explicit===null&&x.implicit===null),x.implicit=v,this},l.prototype.obj=function(){const v=this._baseState,x=Array.prototype.slice.call(arguments);return v.obj=!0,x.length!==0&&this._useArgs(x),this},l.prototype.key=function(v){const x=this._baseState;return a(x.key===null),x.key=v,this},l.prototype.any=function(){const v=this._baseState;return v.any=!0,this},l.prototype.choice=function(v){const x=this._baseState;return a(x.choice===null),x.choice=v,this._useArgs(Object.keys(v).map(function(_){return v[_]})),this},l.prototype.contains=function(v){const x=this._baseState;return a(x.use===null),x.contains=v,this},l.prototype._decode=function(v,x){const _=this._baseState;if(_.parent===null)return v.wrapResult(_.children[0]._decode(v,x));let E=_.default,$=!0,S=null;if(_.key!==null&&(S=v.enterKey(_.key)),_.optional){let I=null;if(_.explicit!==null?I=_.explicit:_.implicit!==null?I=_.implicit:_.tag!==null&&(I=_.tag),I===null&&!_.any){const O=v.save();try{_.choice===null?this._decodeGeneric(_.tag,v,x):this._decodeChoice(v,x),$=!0}catch{$=!1}v.restore(O)}else if($=this._peekTag(v,I,_.any),v.isError($))return $}let A;if(_.obj&&$&&(A=v.enterObject()),$){if(_.explicit!==null){const O=this._decodeTag(v,_.explicit);if(v.isError(O))return O;v=O}const I=v.offset;if(_.use===null&&_.choice===null){let O;_.any&&(O=v.save());const F=this._decodeTag(v,_.implicit!==null?_.implicit:_.tag,_.any);if(v.isError(F))return F;_.any?E=v.raw(O):v=F}if(x&&x.track&&_.tag!==null&&x.track(v.path(),I,v.length,"tagged"),x&&x.track&&_.tag!==null&&x.track(v.path(),v.offset,v.length,"content"),_.any||(_.choice===null?E=this._decodeGeneric(_.tag,v,x):E=this._decodeChoice(v,x)),v.isError(E))return E;if(!_.any&&_.choice===null&&_.children!==null&&_.children.forEach(function(F){F._decode(v,x)}),_.contains&&(_.tag==="octstr"||_.tag==="bitstr")){const O=new n(E);E=this._getUse(_.contains,v._reporterState.obj)._decode(O,x)}}return _.obj&&$&&(E=v.leaveObject(A)),_.key!==null&&(E!==null||$===!0)?v.leaveKey(S,_.key,E):S!==null&&v.exitKey(S),E},l.prototype._decodeGeneric=function(v,x,_){const E=this._baseState;return v==="seq"||v==="set"?null:v==="seqof"||v==="setof"?this._decodeList(x,v,E.args[0],_):/str$/.test(v)?this._decodeStr(x,v,_):v==="objid"&&E.args?this._decodeObjid(x,E.args[0],E.args[1],_):v==="objid"?this._decodeObjid(x,null,null,_):v==="gentime"||v==="utctime"?this._decodeTime(x,v,_):v==="null_"?this._decodeNull(x,_):v==="bool"?this._decodeBool(x,_):v==="objDesc"?this._decodeStr(x,v,_):v==="int"||v==="enum"?this._decodeInt(x,E.args&&E.args[0],_):E.use!==null?this._getUse(E.use,x._reporterState.obj)._decode(x,_):x.error("unknown tag: "+v)},l.prototype._getUse=function(v,x){const _=this._baseState;return _.useDecoder=this._use(v,x),a(_.useDecoder._baseState.parent===null),_.useDecoder=_.useDecoder._baseState.children[0],_.implicit!==_.useDecoder._baseState.implicit&&(_.useDecoder=_.useDecoder.clone(),_.useDecoder._baseState.implicit=_.implicit),_.useDecoder},l.prototype._decodeChoice=function(v,x){const _=this._baseState;let E=null,$=!1;return Object.keys(_.choice).some(function(S){const A=v.save(),I=_.choice[S];try{const O=I._decode(v,x);if(v.isError(O))return!1;E={type:S,value:O},$=!0}catch{return v.restore(A),!1}return!0},this),$?E:v.error("Choice not matched")},l.prototype._createEncoderBuffer=function(v){return new e(v,this.reporter)},l.prototype._encode=function(v,x,_){const E=this._baseState;if(E.default!==null&&E.default===v)return;const $=this._encodeValue(v,x,_);if($!==void 0&&!this._skipDefault($,x,_))return $},l.prototype._encodeValue=function(v,x,_){const E=this._baseState;if(E.parent===null)return E.children[0]._encode(v,x||new t);let $=null;if(this.reporter=x,E.optional&&v===void 0)if(E.default!==null)v=E.default;else return;let S=null,A=!1;if(E.any)$=this._createEncoderBuffer(v);else if(E.choice)$=this._encodeChoice(v,x);else if(E.contains)S=this._getUse(E.contains,_)._encode(v,x),A=!0;else if(E.children)S=E.children.map(function(I){if(I._baseState.tag==="null_")return I._encode(null,x,v);if(I._baseState.key===null)return x.error("Child should have a key");const O=x.enterKey(I._baseState.key);if(typeof v!="object")return x.error("Child expected, but input is not object");const F=I._encode(v[I._baseState.key],x,v);return x.leaveKey(O),F},this).filter(function(I){return I}),S=this._createEncoderBuffer(S);else if(E.tag==="seqof"||E.tag==="setof"){if(!(E.args&&E.args.length===1))return x.error("Too many args for : "+E.tag);if(!Array.isArray(v))return x.error("seqof/setof, but data is not Array");const I=this.clone();I._baseState.implicit=null,S=this._createEncoderBuffer(v.map(function(O){const F=this._baseState;return this._getUse(F.args[0],v)._encode(O,x)},I))}else E.use!==null?$=this._getUse(E.use,_)._encode(v,x):(S=this._encodePrimitive(E.tag,v),A=!0);if(!E.any&&E.choice===null){const I=E.implicit!==null?E.implicit:E.tag,O=E.implicit===null?"universal":"context";I===null?E.use===null&&x.error("Tag could be omitted only for .use()"):E.use===null&&($=this._encodeComposite(I,A,O,S))}return E.explicit!==null&&($=this._encodeComposite(E.explicit,!1,"context",$)),$},l.prototype._encodeChoice=function(v,x){const _=this._baseState,E=_.choice[v.type];return E||a(!1,v.type+" not found in "+JSON.stringify(Object.keys(_.choice))),E._encode(v.value,x)},l.prototype._encodePrimitive=function(v,x){const _=this._baseState;if(/str$/.test(v))return this._encodeStr(x,v);if(v==="objid"&&_.args)return this._encodeObjid(x,_.reverseArgs[0],_.args[1]);if(v==="objid")return this._encodeObjid(x,null,null);if(v==="gentime"||v==="utctime")return this._encodeTime(x,v);if(v==="null_")return this._encodeNull();if(v==="int"||v==="enum")return this._encodeInt(x,_.args&&_.reverseArgs[0]);if(v==="bool")return this._encodeBool(x);if(v==="objDesc")return this._encodeStr(x,v);throw new Error("Unsupported tag: "+v)},l.prototype._isNumstr=function(v){return/^[0-9 ]*$/.test(v)},l.prototype._isPrintstr=function(v){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(v)},node$1}var der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(t){function e(n){const a={};return Object.keys(n).forEach(function(o){(o|0)==o&&(o=o|0);const c=n[o];a[c]=o}),a}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e(t.tag)}(der)),der}var der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;const t=inherits_browserExports,e=requireSafer().Buffer,n=requireNode(),a=requireDer$2();function o(p){this.enc="der",this.name=p.name,this.entity=p,this.tree=new c,this.tree._init(p.body)}der_1$1=o,o.prototype.encode=function(b,v){return this.tree._encode(b,v).join()};function c(p){n.call(this,"der",p)}t(c,n),c.prototype._encodeComposite=function(b,v,x,_){const E=l(b,v,x,this.reporter);if(_.length<128){const A=e.alloc(2);return A[0]=E,A[1]=_.length,this._createEncoderBuffer([A,_])}let $=1;for(let A=_.length;A>=256;A>>=8)$++;const S=e.alloc(1+1+$);S[0]=E,S[1]=128|$;for(let A=1+$,I=_.length;I>0;A--,I>>=8)S[A]=I&255;return this._createEncoderBuffer([S,_])},c.prototype._encodeStr=function(b,v){if(v==="bitstr")return this._createEncoderBuffer([b.unused|0,b.data]);if(v==="bmpstr"){const x=e.alloc(b.length*2);for(let _=0;_<b.length;_++)x.writeUInt16BE(b.charCodeAt(_),_*2);return this._createEncoderBuffer(x)}else return v==="numstr"?this._isNumstr(b)?this._createEncoderBuffer(b):this.reporter.error("Encoding of string type: numstr supports only digits and space"):v==="printstr"?this._isPrintstr(b)?this._createEncoderBuffer(b):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(v)?this._createEncoderBuffer(b):v==="objDesc"?this._createEncoderBuffer(b):this.reporter.error("Encoding of string type: "+v+" unsupported")},c.prototype._encodeObjid=function(b,v,x){if(typeof b=="string"){if(!v)return this.reporter.error("string objid given, but no values map found");if(!v.hasOwnProperty(b))return this.reporter.error("objid not found in values map");b=v[b].split(/[\s.]+/g);for(let S=0;S<b.length;S++)b[S]|=0}else if(Array.isArray(b)){b=b.slice();for(let S=0;S<b.length;S++)b[S]|=0}if(!Array.isArray(b))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(b));if(!x){if(b[1]>=40)return this.reporter.error("Second objid identifier OOB");b.splice(0,2,b[0]*40+b[1])}let _=0;for(let S=0;S<b.length;S++){let A=b[S];for(_++;A>=128;A>>=7)_++}const E=e.alloc(_);let $=E.length-1;for(let S=b.length-1;S>=0;S--){let A=b[S];for(E[$--]=A&127;(A>>=7)>0;)E[$--]=128|A&127}return this._createEncoderBuffer(E)};function u(p){return p<10?"0"+p:p}c.prototype._encodeTime=function(b,v){let x;const _=new Date(b);return v==="gentime"?x=[u(_.getUTCFullYear()),u(_.getUTCMonth()+1),u(_.getUTCDate()),u(_.getUTCHours()),u(_.getUTCMinutes()),u(_.getUTCSeconds()),"Z"].join(""):v==="utctime"?x=[u(_.getUTCFullYear()%100),u(_.getUTCMonth()+1),u(_.getUTCDate()),u(_.getUTCHours()),u(_.getUTCMinutes()),u(_.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+v+" time is not supported yet"),this._encodeStr(x,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(b,v){if(typeof b=="string"){if(!v)return this.reporter.error("String int or enum given, but no values map");if(!v.hasOwnProperty(b))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(b));b=v[b]}if(typeof b!="number"&&!e.isBuffer(b)){const E=b.toArray();!b.sign&&E[0]&128&&E.unshift(0),b=e.from(E)}if(e.isBuffer(b)){let E=b.length;b.length===0&&E++;const $=e.alloc(E);return b.copy($),b.length===0&&($[0]=0),this._createEncoderBuffer($)}if(b<128)return this._createEncoderBuffer(b);if(b<256)return this._createEncoderBuffer([0,b]);let x=1;for(let E=b;E>=256;E>>=8)x++;const _=new Array(x);for(let E=_.length-1;E>=0;E--)_[E]=b&255,b>>=8;return _[0]&128&&_.unshift(0),this._createEncoderBuffer(e.from(_))},c.prototype._encodeBool=function(b){return this._createEncoderBuffer(b?255:0)},c.prototype._use=function(b,v){return typeof b=="function"&&(b=b(v)),b._getEncoder("der").tree},c.prototype._skipDefault=function(b,v,x){const _=this._baseState;let E;if(_.default===null)return!1;const $=b.join();if(_.defaultBuffer===void 0&&(_.defaultBuffer=this._encodeValue(_.default,v,x).join()),$.length!==_.defaultBuffer.length)return!1;for(E=0;E<$.length;E++)if($[E]!==_.defaultBuffer[E])return!1;return!0};function l(p,b,v,x){let _;if(p==="seqof"?p="seq":p==="setof"&&(p="set"),a.tagByName.hasOwnProperty(p))_=a.tagByName[p];else if(typeof p=="number"&&(p|0)===p)_=p;else return x.error("Unknown tag: "+p);return _>=31?x.error("Multi-octet tag encoding unsupported"):(b||(_|=32),_|=a.tagClassByName[v||"universal"]<<6,_)}return der_1$1}var pem$2,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$2;hasRequiredPem$1=1;const t=inherits_browserExports,e=requireDer$1();function n(a){e.call(this,a),this.enc="pem"}return t(n,e),pem$2=n,n.prototype.encode=function(o,c){const l=e.prototype.encode.call(this,o).toString("base64"),p=["-----BEGIN "+c.label+"-----"];for(let b=0;b<l.length;b+=64)p.push(l.slice(b,b+64));return p.push("-----END "+c.label+"-----"),p.join(`
`)},pem$2}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(t){const e=t;e.der=requireDer$1(),e.pem=requirePem$1()}(encoders)),encoders}var decoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;const t=inherits_browserExports,e=bnExports$1,n=requireBuffer().DecoderBuffer,a=requireNode(),o=requireDer$2();function c(b){this.enc="der",this.name=b.name,this.entity=b,this.tree=new u,this.tree._init(b.body)}der_1=c,c.prototype.decode=function(v,x){return n.isDecoderBuffer(v)||(v=new n(v,x)),this.tree._decode(v,x)};function u(b){a.call(this,"der",b)}t(u,a),u.prototype._peekTag=function(v,x,_){if(v.isEmpty())return!1;const E=v.save(),$=l(v,'Failed to peek tag: "'+x+'"');return v.isError($)?$:(v.restore(E),$.tag===x||$.tagStr===x||$.tagStr+"of"===x||_)},u.prototype._decodeTag=function(v,x,_){const E=l(v,'Failed to decode tag of "'+x+'"');if(v.isError(E))return E;let $=p(v,E.primitive,'Failed to get length of "'+x+'"');if(v.isError($))return $;if(!_&&E.tag!==x&&E.tagStr!==x&&E.tagStr+"of"!==x)return v.error('Failed to match tag: "'+x+'"');if(E.primitive||$!==null)return v.skip($,'Failed to match body of: "'+x+'"');const S=v.save(),A=this._skipUntilEnd(v,'Failed to skip indefinite length body: "'+this.tag+'"');return v.isError(A)?A:($=v.offset-S.offset,v.restore(S),v.skip($,'Failed to match body of: "'+x+'"'))},u.prototype._skipUntilEnd=function(v,x){for(;;){const _=l(v,x);if(v.isError(_))return _;const E=p(v,_.primitive,x);if(v.isError(E))return E;let $;if(_.primitive||E!==null?$=v.skip(E):$=this._skipUntilEnd(v,x),v.isError($))return $;if(_.tagStr==="end")break}},u.prototype._decodeList=function(v,x,_,E){const $=[];for(;!v.isEmpty();){const S=this._peekTag(v,"end");if(v.isError(S))return S;const A=_.decode(v,"der",E);if(v.isError(A)&&S)break;$.push(A)}return $},u.prototype._decodeStr=function(v,x){if(x==="bitstr"){const _=v.readUInt8();return v.isError(_)?_:{unused:_,data:v.raw()}}else if(x==="bmpstr"){const _=v.raw();if(_.length%2===1)return v.error("Decoding of string type: bmpstr length mismatch");let E="";for(let $=0;$<_.length/2;$++)E+=String.fromCharCode(_.readUInt16BE($*2));return E}else if(x==="numstr"){const _=v.raw().toString("ascii");return this._isNumstr(_)?_:v.error("Decoding of string type: numstr unsupported characters")}else{if(x==="octstr")return v.raw();if(x==="objDesc")return v.raw();if(x==="printstr"){const _=v.raw().toString("ascii");return this._isPrintstr(_)?_:v.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(x)?v.raw().toString():v.error("Decoding of string type: "+x+" unsupported")}},u.prototype._decodeObjid=function(v,x,_){let E;const $=[];let S=0,A=0;for(;!v.isEmpty();)A=v.readUInt8(),S<<=7,S|=A&127,A&128||($.push(S),S=0);A&128&&$.push(S);const I=$[0]/40|0,O=$[0]%40;if(_?E=$:E=[I,O].concat($.slice(1)),x){let F=x[E.join(" ")];F===void 0&&(F=x[E.join(".")]),F!==void 0&&(E=F)}return E},u.prototype._decodeTime=function(v,x){const _=v.raw().toString();let E,$,S,A,I,O;if(x==="gentime")E=_.slice(0,4)|0,$=_.slice(4,6)|0,S=_.slice(6,8)|0,A=_.slice(8,10)|0,I=_.slice(10,12)|0,O=_.slice(12,14)|0;else if(x==="utctime")E=_.slice(0,2)|0,$=_.slice(2,4)|0,S=_.slice(4,6)|0,A=_.slice(6,8)|0,I=_.slice(8,10)|0,O=_.slice(10,12)|0,E<70?E=2e3+E:E=1900+E;else return v.error("Decoding "+x+" time is not supported yet");return Date.UTC(E,$-1,S,A,I,O,0)},u.prototype._decodeNull=function(){return null},u.prototype._decodeBool=function(v){const x=v.readUInt8();return v.isError(x)?x:x!==0},u.prototype._decodeInt=function(v,x){const _=v.raw();let E=new e(_);return x&&(E=x[E.toString(10)]||E),E},u.prototype._use=function(v,x){return typeof v=="function"&&(v=v(x)),v._getDecoder("der").tree};function l(b,v){let x=b.readUInt8(v);if(b.isError(x))return x;const _=o.tagClass[x>>6],E=(x&32)===0;if((x&31)===31){let S=x;for(x=0;(S&128)===128;){if(S=b.readUInt8(v),b.isError(S))return S;x<<=7,x|=S&127}}else x&=31;const $=o.tag[x];return{cls:_,primitive:E,tag:x,tagStr:$}}function p(b,v,x){let _=b.readUInt8(x);if(b.isError(_))return _;if(!v&&_===128)return null;if(!(_&128))return _;const E=_&127;if(E>4)return b.error("length octect is too long");_=0;for(let $=0;$<E;$++){_<<=8;const S=b.readUInt8(x);if(b.isError(S))return S;_|=S}return _}return der_1}var pem$1,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem$1;hasRequiredPem=1;const t=inherits_browserExports,e=requireSafer().Buffer,n=requireDer();function a(o){n.call(this,o),this.enc="pem"}return t(a,n),pem$1=a,a.prototype.decode=function(c,u){const l=c.toString().split(/[\r\n]+/g),p=u.label.toUpperCase(),b=/^-----(BEGIN|END) ([^-]+)-----$/;let v=-1,x=-1;for(let $=0;$<l.length;$++){const S=l[$].match(b);if(S!==null&&S[2]===p)if(v===-1){if(S[1]!=="BEGIN")break;v=$}else{if(S[1]!=="END")break;x=$;break}}if(v===-1||x===-1)throw new Error("PEM section not found for: "+p);const _=l.slice(v+1,x).join("");_.replace(/[^a-z0-9+/=]+/gi,"");const E=e.from(_,"base64");return n.prototype.decode.call(this,E,u)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(t){const e=t;e.der=requireDer(),e.pem=requirePem()}(decoders)),decoders}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(t){const e=requireEncoders(),n=requireDecoders(),a=inherits_browserExports,o=t;o.define=function(l,p){return new c(l,p)};function c(u,l){this.name=u,this.body=l,this.decoders={},this.encoders={}}c.prototype._createNamed=function(l){const p=this.name;function b(v){this._initNamed(v,p)}return a(b,l),b.prototype._initNamed=function(x,_){l.call(this,x,_)},new b(this)},c.prototype._getDecoder=function(l){return l=l||"der",this.decoders.hasOwnProperty(l)||(this.decoders[l]=this._createNamed(n[l])),this.decoders[l]},c.prototype.decode=function(l,p,b){return this._getDecoder(p).decode(l,b)},c.prototype._getEncoder=function(l){return l=l||"der",this.encoders.hasOwnProperty(l)||(this.encoders[l]=this._createNamed(e[l])),this.encoders[l]},c.prototype.encode=function(l,p,b){return this._getEncoder(p).encode(l,b)}}(api)),api}var base$1={},hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(t){const e=t;e.Reporter=requireReporter().Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()}(base$1)),base$1}var constants$4={},hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,function(t){const e=t;e._reverse=function(a){const o={};return Object.keys(a).forEach(function(c){(c|0)==c&&(c=c|0);const u=a[c];o[u]=c}),o},e.der=requireDer$2()}(constants$4)),constants$4}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(t){const e=t;e.bignum=bnExports$1,e.define=requireApi().define,e.base=requireBase(),e.constants=requireConstants(),e.decoders=requireDecoders(),e.encoders=requireEncoders()}(asn1$5)),asn1$5}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var t=requireAsn1$1(),e=t.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),n=t.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),a=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),o=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(a),this.key("subjectPublicKey").bitstr())}),c=t.define("RelativeDistinguishedName",function(){this.setof(n)}),u=t.define("RDNSequence",function(){this.seqof(c)}),l=t.define("Name",function(){this.choice({rdnSequence:this.use(u)})}),p=t.define("Validity",function(){this.seq().obj(this.key("notBefore").use(e),this.key("notAfter").use(e))}),b=t.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),v=t.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(a),this.key("issuer").use(l),this.key("validity").use(p),this.key("subject").use(l),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(b).optional())}),x=t.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(v),this.key("signatureAlgorithm").use(a),this.key("signatureValue").bitstr())});return certificate=x,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$6;hasRequiredAsn1=1;var t=requireAsn1$1();asn1$6.certificate=requireCertificate();var e=t.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$6.RSAPrivateKey=e;var n=t.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$6.RSAPublicKey=n;var a=t.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())});asn1$6.PublicKey=a;var o=t.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),c=t.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())});asn1$6.PrivateKey=c;var u=t.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$6.EncryptedPrivateKey=u;var l=t.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$6.DSAPrivateKey=l,asn1$6.DSAparam=t.define("DSAparam",function(){this.int()});var p=t.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(b),this.key("publicKey").optional().explicit(1).bitstr())});asn1$6.ECPrivateKey=p;var b=t.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});return asn1$6.signature=t.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$6}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var t=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,e=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,a=requireEvp_bytestokey(),o=requireBrowser$6(),c=safeBufferExports.Buffer;return fixProc=function(u,l){var p=u.toString(),b=p.match(t),v;if(b){var _="aes"+b[1],E=c.from(b[2],"hex"),$=c.from(b[3].replace(/[\r\n]/g,""),"base64"),S=a(l,E.slice(0,8),parseInt(b[1],10)).key,A=[],I=o.createDecipheriv(_,S,E);A.push(I.update($)),A.push(I.final()),v=c.concat(A)}else{var x=p.match(n);v=c.from(x[2].replace(/[\r\n]/g,""),"base64")}var O=p.match(e)[1];return{tag:O,data:v}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var t=requireAsn1(),e=require$$1,n=requireFixProc(),a=requireBrowser$6(),o=requireBrowser$7(),c=safeBufferExports.Buffer;parseAsn1=u;function u(p){var b;typeof p=="object"&&!c.isBuffer(p)&&(b=p.passphrase,p=p.key),typeof p=="string"&&(p=c.from(p));var v=n(p,b),x=v.tag,_=v.data,E,$;switch(x){case"CERTIFICATE":$=t.certificate.decode(_,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch($||($=t.PublicKey.decode(_,"der")),E=$.algorithm.algorithm.join("."),E){case"1.2.840.113549.1.1.1":return t.RSAPublicKey.decode($.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return $.subjectPrivateKey=$.subjectPublicKey,{type:"ec",data:$};case"1.2.840.10040.4.1":return $.algorithm.params.pub_key=t.DSAparam.decode($.subjectPublicKey.data,"der"),{type:"dsa",data:$.algorithm.params};default:throw new Error("unknown key id "+E)}case"ENCRYPTED PRIVATE KEY":_=t.EncryptedPrivateKey.decode(_,"der"),_=l(_,b);case"PRIVATE KEY":switch($=t.PrivateKey.decode(_,"der"),E=$.algorithm.algorithm.join("."),E){case"1.2.840.113549.1.1.1":return t.RSAPrivateKey.decode($.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:$.algorithm.curve,privateKey:t.ECPrivateKey.decode($.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return $.algorithm.params.priv_key=t.DSAparam.decode($.subjectPrivateKey,"der"),{type:"dsa",params:$.algorithm.params};default:throw new Error("unknown key id "+E)}case"RSA PUBLIC KEY":return t.RSAPublicKey.decode(_,"der");case"RSA PRIVATE KEY":return t.RSAPrivateKey.decode(_,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:t.DSAPrivateKey.decode(_,"der")};case"EC PRIVATE KEY":return _=t.ECPrivateKey.decode(_,"der"),{curve:_.parameters.value,privateKey:_.privateKey};default:throw new Error("unknown key type "+x)}}u.signature=t.signature;function l(p,b){var v=p.algorithm.decrypt.kde.kdeparams.salt,x=parseInt(p.algorithm.decrypt.kde.kdeparams.iters.toString(),10),_=e[p.algorithm.decrypt.cipher.algo.join(".")],E=p.algorithm.decrypt.cipher.iv,$=p.subjectPrivateKey,S=parseInt(_.split("-")[1],10)/8,A=o.pbkdf2Sync(b,v,x,S,"sha1"),I=a.createDecipheriv(_,A,E),O=[];return O.push(I.update($)),O.push(I.final()),c.concat(O)}return parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign$2.exports;hasRequiredSign=1;var t=safeBufferExports.Buffer,e=requireBrowser$8(),n=requireBrowserifyRsa(),a=requireElliptic().ec,o=requireBn(),c=requireParseAsn1(),u=require$$4;function l(A,I,O,F,U){var G=c(I);if(G.curve){if(F!=="ecdsa"&&F!=="ecdsa/rsa")throw new Error("wrong private key type");return p(A,G)}else if(G.type==="dsa"){if(F!=="dsa")throw new Error("wrong private key type");return b(A,G,O)}else if(F!=="rsa"&&F!=="ecdsa/rsa")throw new Error("wrong private key type");A=t.concat([U,A]);for(var J=G.modulus.byteLength(),k=[0,1];A.length+k.length+1<J;)k.push(255);k.push(0);for(var ne=-1;++ne<A.length;)k.push(A[ne]);var ee=n(k,G);return ee}function p(A,I){var O=u[I.curve.join(".")];if(!O)throw new Error("unknown curve "+I.curve.join("."));var F=new a(O),U=F.keyFromPrivate(I.privateKey),G=U.sign(A);return t.from(G.toDER())}function b(A,I,O){for(var F=I.params.priv_key,U=I.params.p,G=I.params.q,J=I.params.g,k=new o(0),ne,ee=_(A,G).mod(G),de=!1,ae=x(F,G,A,O);de===!1;)ne=$(G,ae,O),k=S(J,ne,U,G),de=ne.invm(G).imul(ee.add(F.mul(k))).mod(G),de.cmpn(0)===0&&(de=!1,k=new o(0));return v(k,de)}function v(A,I){A=A.toArray(),I=I.toArray(),A[0]&128&&(A=[0].concat(A)),I[0]&128&&(I=[0].concat(I));var O=A.length+I.length+4,F=[48,O,2,A.length];return F=F.concat(A,[2,I.length],I),t.from(F)}function x(A,I,O,F){if(A=t.from(A.toArray()),A.length<I.byteLength()){var U=t.alloc(I.byteLength()-A.length);A=t.concat([U,A])}var G=O.length,J=E(O,I),k=t.alloc(G);k.fill(1);var ne=t.alloc(G);return ne=e(F,ne).update(k).update(t.from([0])).update(A).update(J).digest(),k=e(F,ne).update(k).digest(),ne=e(F,ne).update(k).update(t.from([1])).update(A).update(J).digest(),k=e(F,ne).update(k).digest(),{k:ne,v:k}}function _(A,I){var O=new o(A),F=(A.length<<3)-I.bitLength();return F>0&&O.ishrn(F),O}function E(A,I){A=_(A,I),A=A.mod(I);var O=t.from(A.toArray());if(O.length<I.byteLength()){var F=t.alloc(I.byteLength()-O.length);O=t.concat([F,O])}return O}function $(A,I,O){var F,U;do{for(F=t.alloc(0);F.length*8<A.bitLength();)I.v=e(O,I.k).update(I.v).digest(),F=t.concat([F,I.v]);U=_(F,A),I.k=e(O,I.k).update(I.v).update(t.from([0])).digest(),I.v=e(O,I.k).update(I.v).digest()}while(U.cmp(A)!==-1);return U}function S(A,I,O,F){return A.toRed(o.mont(O)).redPow(I).fromRed().mod(F)}return sign$2.exports=l,sign$2.exports.getKey=x,sign$2.exports.makeKey=$,sign$2.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var t=safeBufferExports.Buffer,e=requireBn(),n=requireElliptic().ec,a=requireParseAsn1(),o=require$$4;function c(b,v,x,_,E){var $=a(x);if($.type==="ec"){if(_!=="ecdsa"&&_!=="ecdsa/rsa")throw new Error("wrong public key type");return u(b,v,$)}else if($.type==="dsa"){if(_!=="dsa")throw new Error("wrong public key type");return l(b,v,$)}else if(_!=="rsa"&&_!=="ecdsa/rsa")throw new Error("wrong public key type");v=t.concat([E,v]);for(var S=$.modulus.byteLength(),A=[1],I=0;v.length+A.length+2<S;)A.push(255),I++;A.push(0);for(var O=-1;++O<v.length;)A.push(v[O]);A=t.from(A);var F=e.mont($.modulus);b=new e(b).toRed(F),b=b.redPow(new e($.publicExponent)),b=t.from(b.fromRed().toArray());var U=I<8?1:0;for(S=Math.min(b.length,A.length),b.length!==A.length&&(U=1),O=-1;++O<S;)U|=b[O]^A[O];return U===0}function u(b,v,x){var _=o[x.data.algorithm.curve.join(".")];if(!_)throw new Error("unknown curve "+x.data.algorithm.curve.join("."));var E=new n(_),$=x.data.subjectPrivateKey.data;return E.verify(v,b,$)}function l(b,v,x){var _=x.data.p,E=x.data.q,$=x.data.g,S=x.data.pub_key,A=a.signature.decode(b,"der"),I=A.s,O=A.r;p(I,E),p(O,E);var F=e.mont(_),U=I.invm(E),G=$.toRed(F).redPow(new e(v).mul(U).mod(E)).fromRed().mul(S.toRed(F).redPow(O.mul(U).mod(E)).fromRed()).mod(_).mod(E);return G.cmp(O)===0}function p(b,v){if(b.cmpn(0)<=0)throw new Error("invalid sig");if(b.cmp(v)>=v)throw new Error("invalid sig")}return verify_1=c,verify_1}var browser$7,hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$7;hasRequiredBrowser$3=1;var t=safeBufferExports.Buffer,e=requireBrowser$9(),n=requireReadableBrowser(),a=inherits_browserExports,o=requireSign(),c=requireVerify(),u=require$$6;Object.keys(u).forEach(function(x){u[x].id=t.from(u[x].id,"hex"),u[x.toLowerCase()]=u[x]});function l(x){n.Writable.call(this);var _=u[x];if(!_)throw new Error("Unknown message digest");this._hashType=_.hash,this._hash=e(_.hash),this._tag=_.id,this._signType=_.sign}a(l,n.Writable),l.prototype._write=function(_,E,$){this._hash.update(_),$()},l.prototype.update=function(_,E){return typeof _=="string"&&(_=t.from(_,E)),this._hash.update(_),this},l.prototype.sign=function(_,E){this.end();var $=this._hash.digest(),S=o($,_,this._hashType,this._signType,this._tag);return E?S.toString(E):S};function p(x){n.Writable.call(this);var _=u[x];if(!_)throw new Error("Unknown message digest");this._hash=e(_.hash),this._tag=_.id,this._signType=_.sign}a(p,n.Writable),p.prototype._write=function(_,E,$){this._hash.update(_),$()},p.prototype.update=function(_,E){return typeof _=="string"&&(_=t.from(_,E)),this._hash.update(_),this},p.prototype.verify=function(_,E,$){typeof E=="string"&&(E=t.from(E,$)),this.end();var S=this._hash.digest();return c(E,S,_,this._signType,this._tag)};function b(x){return new l(x)}function v(x){return new p(x)}return browser$7={Sign:b,Verify:v,createSign:b,createVerify:v},browser$7}var browser$6,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$6;hasRequiredBrowser$2=1;var t=requireElliptic(),e=bnExports$1;browser$6=function(u){return new a(u)};var n={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};n.p224=n.secp224r1,n.p256=n.secp256r1=n.prime256v1,n.p192=n.secp192r1=n.prime192v1,n.p384=n.secp384r1,n.p521=n.secp521r1;function a(c){this.curveType=n[c],this.curveType||(this.curveType={name:c}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}a.prototype.generateKeys=function(c,u){return this.keys=this.curve.genKeyPair(),this.getPublicKey(c,u)},a.prototype.computeSecret=function(c,u,l){u=u||"utf8",buffer$2.Buffer.isBuffer(c)||(c=new buffer$2.Buffer(c,u));var p=this.curve.keyFromPublic(c).getPublic(),b=p.mul(this.keys.getPrivate()).getX();return o(b,l,this.curveType.byteLength)},a.prototype.getPublicKey=function(c,u){var l=this.keys.getPublic(u==="compressed",!0);return u==="hybrid"&&(l[l.length-1]%2?l[0]=7:l[0]=6),o(l,c)},a.prototype.getPrivateKey=function(c){return o(this.keys.getPrivate(),c)},a.prototype.setPublicKey=function(c,u){return u=u||"utf8",buffer$2.Buffer.isBuffer(c)||(c=new buffer$2.Buffer(c,u)),this.keys._importPublic(c),this},a.prototype.setPrivateKey=function(c,u){u=u||"utf8",buffer$2.Buffer.isBuffer(c)||(c=new buffer$2.Buffer(c,u));var l=new e(c);return l=l.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(l),this};function o(c,u,l){Array.isArray(c)||(c=c.toArray());var p=new buffer$2.Buffer(c);if(l&&p.length<l){var b=new buffer$2.Buffer(l-p.length);b.fill(0),p=buffer$2.Buffer.concat([b,p])}return u?p.toString(u):p}return browser$6}var browser$5={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var t=requireBrowser$9(),e=safeBufferExports.Buffer;mgf=function(a,o){for(var c=e.alloc(0),u=0,l;c.length<o;)l=n(u++),c=e.concat([c,t("sha1").update(a).update(l).digest()]);return c.slice(0,o)};function n(a){var o=e.allocUnsafe(4);return o.writeUInt32BE(a,0),o}return mgf}var xor$1,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor$1=function(e,n){for(var a=e.length,o=-1;++o<a;)e[o]^=n[o];return e}),xor$1}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var t=bnExports$1,e=safeBufferExports.Buffer;function n(a,o){return e.from(a.toRed(t.mont(o.modulus)).redPow(new t(o.publicExponent)).fromRed().toArray())}return withPublic_1=n,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var t=requireParseAsn1(),e=requireBrowser$b(),n=requireBrowser$9(),a=requireMgf(),o=requireXor(),c=bnExports$1,u=requireWithPublic(),l=requireBrowserifyRsa(),p=safeBufferExports.Buffer;publicEncrypt=function(E,$,S){var A;E.padding?A=E.padding:S?A=1:A=4;var I=t(E),O;if(A===4)O=b(I,$);else if(A===1)O=v(I,$,S);else if(A===3){if(O=new c($),O.cmp(I.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return S?l(O,I):u(O,I)};function b(_,E){var $=_.modulus.byteLength(),S=E.length,A=n("sha1").update(p.alloc(0)).digest(),I=A.length,O=2*I;if(S>$-O-2)throw new Error("message too long");var F=p.alloc($-S-O-2),U=$-I-1,G=e(I),J=o(p.concat([A,F,p.alloc(1,1),E],U),a(G,U)),k=o(G,a(J,I));return new c(p.concat([p.alloc(1),k,J],$))}function v(_,E,$){var S=E.length,A=_.modulus.byteLength();if(S>A-11)throw new Error("message too long");var I;return $?I=p.alloc(A-S-3,255):I=x(A-S-3),new c(p.concat([p.from([0,$?1:2]),I,p.alloc(1),E],A))}function x(_){for(var E=p.allocUnsafe(_),$=0,S=e(_*2),A=0,I;$<_;)A===S.length&&(S=e(_*2),A=0),I=S[A++],I&&(E[$++]=I);return E}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var t=requireParseAsn1(),e=requireMgf(),n=requireXor(),a=bnExports$1,o=requireBrowserifyRsa(),c=requireBrowser$9(),u=requireWithPublic(),l=safeBufferExports.Buffer;privateDecrypt=function(_,E,$){var S;_.padding?S=_.padding:$?S=1:S=4;var A=t(_),I=A.modulus.byteLength();if(E.length>I||new a(E).cmp(A.modulus)>=0)throw new Error("decryption error");var O;$?O=u(new a(E),A):O=o(E,A);var F=l.alloc(I-O.length);if(O=l.concat([F,O],I),S===4)return p(A,O);if(S===1)return b(A,O,$);if(S===3)return O;throw new Error("unknown padding")};function p(x,_){var E=x.modulus.byteLength(),$=c("sha1").update(l.alloc(0)).digest(),S=$.length;if(_[0]!==0)throw new Error("decryption error");var A=_.slice(1,S+1),I=_.slice(S+1),O=n(A,e(I,S)),F=n(I,e(O,E-S-1));if(v($,F.slice(0,S)))throw new Error("decryption error");for(var U=S;F[U]===0;)U++;if(F[U++]!==1)throw new Error("decryption error");return F.slice(U)}function b(x,_,E){for(var $=_.slice(0,2),S=2,A=0;_[S++]!==0;)if(S>=_.length){A++;break}var I=_.slice(2,S-1);if(($.toString("hex")!=="0002"&&!E||$.toString("hex")!=="0001"&&E)&&A++,I.length<8&&A++,A)throw new Error("decryption error");return _.slice(S)}function v(x,_){x=l.from(x),_=l.from(_);var E=0,$=x.length;x.length!==_.length&&(E++,$=Math.min(x.length,_.length));for(var S=-1;++S<$;)E+=x[S]^_[S];return E}return privateDecrypt}var hasRequiredBrowser$1;function requireBrowser$1(){return hasRequiredBrowser$1||(hasRequiredBrowser$1=1,function(t){t.publicEncrypt=requirePublicEncrypt(),t.privateDecrypt=requirePrivateDecrypt(),t.privateEncrypt=function(n,a){return t.publicEncrypt(n,a,!0)},t.publicDecrypt=function(n,a){return t.privateDecrypt(n,a,!0)}}(browser$5)),browser$5}var browser$4={},hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$4;hasRequiredBrowser=1;function t(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var e=safeBufferExports,n=requireBrowser$b(),a=e.Buffer,o=e.kMaxLength,c=commonjsGlobal.crypto||commonjsGlobal.msCrypto,u=Math.pow(2,32)-1;function l(_,E){if(typeof _!="number"||_!==_)throw new TypeError("offset must be a number");if(_>u||_<0)throw new TypeError("offset must be a uint32");if(_>o||_>E)throw new RangeError("offset out of range")}function p(_,E,$){if(typeof _!="number"||_!==_)throw new TypeError("size must be a number");if(_>u||_<0)throw new TypeError("size must be a uint32");if(_+E>$||_>o)throw new RangeError("buffer too small")}c&&c.getRandomValues||!process$1.browser?(browser$4.randomFill=b,browser$4.randomFillSync=x):(browser$4.randomFill=t,browser$4.randomFillSync=t);function b(_,E,$,S){if(!a.isBuffer(_)&&!(_ instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof E=="function")S=E,E=0,$=_.length;else if(typeof $=="function")S=$,$=_.length-E;else if(typeof S!="function")throw new TypeError('"cb" argument must be a function');return l(E,_.length),p($,E,_.length),v(_,E,$,S)}function v(_,E,$,S){if(process$1.browser){var A=_.buffer,I=new Uint8Array(A,E,$);if(c.getRandomValues(I),S){process$1.nextTick(function(){S(null,_)});return}return _}if(S){n($,function(F,U){if(F)return S(F);U.copy(_,E),S(null,_)});return}var O=n($);return O.copy(_,E),_}function x(_,E,$){if(typeof E>"u"&&(E=0),!a.isBuffer(_)&&!(_ instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return l(E,_.length),$===void 0&&($=_.length-E),p($,E,_.length),v(_,E,$)}return browser$4}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$b(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$9(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$8();var t=requireAlgos(),e=Object.keys(t),n=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return n};var a=requireBrowser$7();cryptoBrowserify.pbkdf2=a.pbkdf2,cryptoBrowserify.pbkdf2Sync=a.pbkdf2Sync;var o=requireBrowser$5();cryptoBrowserify.Cipher=o.Cipher,cryptoBrowserify.createCipher=o.createCipher,cryptoBrowserify.Cipheriv=o.Cipheriv,cryptoBrowserify.createCipheriv=o.createCipheriv,cryptoBrowserify.Decipher=o.Decipher,cryptoBrowserify.createDecipher=o.createDecipher,cryptoBrowserify.Decipheriv=o.Decipheriv,cryptoBrowserify.createDecipheriv=o.createDecipheriv,cryptoBrowserify.getCiphers=o.getCiphers,cryptoBrowserify.listCiphers=o.listCiphers;var c=requireBrowser$4();cryptoBrowserify.DiffieHellmanGroup=c.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=c.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=c.getDiffieHellman,cryptoBrowserify.createDiffieHellman=c.createDiffieHellman,cryptoBrowserify.DiffieHellman=c.DiffieHellman;var u=requireBrowser$3();cryptoBrowserify.createSign=u.createSign,cryptoBrowserify.Sign=u.Sign,cryptoBrowserify.createVerify=u.createVerify,cryptoBrowserify.Verify=u.Verify,cryptoBrowserify.createECDH=requireBrowser$2();var l=requireBrowser$1();cryptoBrowserify.publicEncrypt=l.publicEncrypt,cryptoBrowserify.privateEncrypt=l.privateEncrypt,cryptoBrowserify.publicDecrypt=l.publicDecrypt,cryptoBrowserify.privateDecrypt=l.privateDecrypt;var p=requireBrowser();return cryptoBrowserify.randomFill=p.randomFill,cryptoBrowserify.randomFillSync=p.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var forge$i=forge$s,pkcs5=forge$i.pkcs5=forge$i.pkcs5||{},crypto$5;forge$i.util.isNodejs&&!forge$i.options.usePureJavaScript&&(crypto$5=requireCryptoBrowserify());var pbkdf2$2=forge$i.pbkdf2=pkcs5.pbkdf2=function(t,e,n,a,o,c){if(typeof o=="function"&&(c=o,o=null),forge$i.util.isNodejs&&!forge$i.options.usePureJavaScript&&crypto$5.pbkdf2&&(o===null||typeof o!="object")&&(crypto$5.pbkdf2Sync.length>4||!o||o==="sha1"))return typeof o!="string"&&(o="sha1"),t=buffer$2.Buffer.from(t,"binary"),e=buffer$2.Buffer.from(e,"binary"),c?crypto$5.pbkdf2Sync.length===4?crypto$5.pbkdf2(t,e,n,a,function(F,U){if(F)return c(F);c(null,U.toString("binary"))}):crypto$5.pbkdf2(t,e,n,a,o,function(F,U){if(F)return c(F);c(null,U.toString("binary"))}):crypto$5.pbkdf2Sync.length===4?crypto$5.pbkdf2Sync(t,e,n,a).toString("binary"):crypto$5.pbkdf2Sync(t,e,n,a,o).toString("binary");if((typeof o>"u"||o===null)&&(o="sha1"),typeof o=="string"){if(!(o in forge$i.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=forge$i.md[o].create()}var u=o.digestLength;if(a>4294967295*u){var l=new Error("Derived key is too long.");if(c)return c(l);throw l}var p=Math.ceil(a/u),b=a-(p-1)*u,v=forge$i.hmac.create();v.start(o,t);var x="",_,E,$;if(!c){for(var S=1;S<=p;++S){v.start(null,null),v.update(e),v.update(forge$i.util.int32ToBytes(S)),_=$=v.digest().getBytes();for(var A=2;A<=n;++A)v.start(null,null),v.update($),E=v.digest().getBytes(),_=forge$i.util.xorBytes(_,E,u),$=E;x+=S<p?_:_.substr(0,b)}return x}var S=1,A;function I(){if(S>p)return c(null,x);v.start(null,null),v.update(e),v.update(forge$i.util.int32ToBytes(S)),_=$=v.digest().getBytes(),A=2,O()}function O(){if(A<=n)return v.start(null,null),v.update($),E=v.digest().getBytes(),_=forge$i.util.xorBytes(_,E,u),$=E,++A,forge$i.util.setImmediate(O);x+=S<p?_:_.substr(0,b),++S,I()}I()};const forgePbkdf2=getDefaultExportFromCjs(pbkdf2$2);var forge$h=forge$s,pem=forge$h.pem=forge$h.pem||{};pem.encode=function(t,e){e=e||{};var n="-----BEGIN "+t.type+`-----\r
`,a;if(t.procType&&(a={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},n+=foldHeader(a)),t.contentDomain&&(a={name:"Content-Domain",values:[t.contentDomain]},n+=foldHeader(a)),t.dekInfo&&(a={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&a.values.push(t.dekInfo.parameters),n+=foldHeader(a)),t.headers)for(var o=0;o<t.headers.length;++o)n+=foldHeader(t.headers[o]);return t.procType&&(n+=`\r
`),n+=forge$h.util.encode64(t.body,e.maxline||64)+`\r
`,n+="-----END "+t.type+`-----\r
`,n};pem.decode=function(t){for(var e=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/,c;c=n.exec(t),!!c;){var u=c[1];u==="NEW CERTIFICATE REQUEST"&&(u="CERTIFICATE REQUEST");var l={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge$h.util.decode64(c[3])};if(e.push(l),!!c[2]){for(var p=c[2].split(o),b=0;c&&b<p.length;){for(var v=p[b].replace(/\s+$/,""),x=b+1;x<p.length;++x){var _=p[x];if(!/\s/.test(_[0]))break;v+=_,b=x}if(c=v.match(a),c){for(var E={name:c[1],values:[]},$=c[2].split(","),S=0;S<$.length;++S)E.values.push(ltrim($[S]));if(l.procType)if(!l.contentDomain&&E.name==="Content-Domain")l.contentDomain=$[0]||"";else if(!l.dekInfo&&E.name==="DEK-Info"){if(E.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:$[0],parameters:$[1]||null}}else l.headers.push(E);else{if(E.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(E.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:$[0],type:$[1]}}}++b}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function foldHeader(t){for(var e=t.name+": ",n=[],a=function(p,b){return" "+b},o=0;o<t.values.length;++o)n.push(t.values[o].replace(/^(\S+\r\n)/,a));e+=n.join(",")+`\r
`;for(var c=0,u=-1,o=0;o<e.length;++o,++c)if(c>65&&u!==-1){var l=e[u];l===","?(++u,e=e.substr(0,u)+`\r
 `+e.substr(u)):e=e.substr(0,u)+`\r
`+l+e.substr(u+1),c=o-u-1,u=-1,++o}else(e[o]===" "||e[o]==="	"||e[o]===",")&&(u=o);return e}function ltrim(t){return t.replace(/^\s+/,"")}var forge$g=forge$s,sha256$3=forge$g.sha256=forge$g.sha256||{};forge$g.md.sha256=forge$g.md.algorithms.sha256=sha256$3;sha256$3.create=function(){_initialized$2||_init$2();var t=null,e=forge$g.util.createBuffer(),n=new Array(64),a={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var o=a.messageLengthSize/4,c=0;c<o;++c)a.fullMessageLength.push(0);return e=forge$g.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a},a.start(),a.update=function(o,c){c==="utf8"&&(o=forge$g.util.encodeUtf8(o));var u=o.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=u[1],u[1]=u[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(o),_update$2(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),a},a.digest=function(){var o=forge$g.util.createBuffer();o.putBytes(e.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=c&a.blockLength-1;o.putBytes(_padding$2.substr(0,a.blockLength-u));for(var l,p,b=a.fullMessageLength[0]*8,v=0;v<a.fullMessageLength.length-1;++v)l=a.fullMessageLength[v+1]*8,p=l/4294967296>>>0,b+=p,o.putInt32(b>>>0),b=l>>>0;o.putInt32(b);var x={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};_update$2(x,n,o);var _=forge$g.util.createBuffer();return _.putInt32(x.h0),_.putInt32(x.h1),_.putInt32(x.h2),_.putInt32(x.h3),_.putInt32(x.h4),_.putInt32(x.h5),_.putInt32(x.h6),_.putInt32(x.h7),_},a};var _padding$2=null,_initialized$2=!1,_k$1=null;function _init$2(){_padding$2=String.fromCharCode(128),_padding$2+=forge$g.util.fillString(String.fromCharCode(0),64),_k$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized$2=!0}function _update$2(t,e,n){for(var a,o,c,u,l,p,b,v,x,_,E,$,S,A,I,O=n.length();O>=64;){for(b=0;b<16;++b)e[b]=n.getInt32();for(;b<64;++b)a=e[b-2],a=(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,o=e[b-15],o=(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,e[b]=a+e[b-7]+o+e[b-16]|0;for(v=t.h0,x=t.h1,_=t.h2,E=t.h3,$=t.h4,S=t.h5,A=t.h6,I=t.h7,b=0;b<64;++b)u=($>>>6|$<<26)^($>>>11|$<<21)^($>>>25|$<<7),l=A^$&(S^A),c=(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10),p=v&x|_&(v^x),a=I+u+l+_k$1[b]+e[b],o=c+p,I=A,A=S,S=$,$=E+a>>>0,E=_,_=x,x=v,v=a+o>>>0;t.h0=t.h0+v|0,t.h1=t.h1+x|0,t.h2=t.h2+_|0,t.h3=t.h3+E|0,t.h4=t.h4+$|0,t.h5=t.h5+S|0,t.h6=t.h6+A|0,t.h7=t.h7+I|0,O-=64}}var forge$f=forge$s,_crypto$1=null;forge$f.util.isNodejs&&!forge$f.options.usePureJavaScript&&!process$1.versions["node-webkit"]&&(_crypto$1=requireCryptoBrowserify());var prng=forge$f.prng=forge$f.prng||{};prng.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=t.md,a=new Array(32),o=0;o<32;++o)a[o]=n.create();e.pools=a,e.pool=0,e.generate=function(b,v){if(!v)return e.generateSync(b);var x=e.plugin.cipher,_=e.plugin.increment,E=e.plugin.formatKey,$=e.plugin.formatSeed,S=forge$f.util.createBuffer();e.key=null,A();function A(I){if(I)return v(I);if(S.length()>=b)return v(null,S.getBytes(b));if(e.generated>1048575&&(e.key=null),e.key===null)return forge$f.util.nextTick(function(){c(A)});var O=x(e.key,e.seed);e.generated+=O.length,S.putBytes(O),e.key=E(x(e.key,_(e.seed))),e.seed=$(x(e.key,e.seed)),forge$f.util.setImmediate(A)}},e.generateSync=function(b){var v=e.plugin.cipher,x=e.plugin.increment,_=e.plugin.formatKey,E=e.plugin.formatSeed;e.key=null;for(var $=forge$f.util.createBuffer();$.length()<b;){e.generated>1048575&&(e.key=null),e.key===null&&u();var S=v(e.key,e.seed);e.generated+=S.length,$.putBytes(S),e.key=_(v(e.key,x(e.seed))),e.seed=E(v(e.key,e.seed))}return $.getBytes(b)};function c(b){if(e.pools[0].messageLength>=32)return l(),b();var v=32-e.pools[0].messageLength<<5;e.seedFile(v,function(x,_){if(x)return b(x);e.collect(_),l(),b()})}function u(){if(e.pools[0].messageLength>=32)return l();var b=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(b)),l()}function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var b=e.plugin.md.create();b.update(e.keyBytes);for(var v=1,x=0;x<32;++x)e.reseeds%v===0&&(b.update(e.pools[x].digest().getBytes()),e.pools[x].start()),v=v<<1;e.keyBytes=b.digest().getBytes(),b.start(),b.update(e.keyBytes);var _=b.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(_),e.generated=0}function p(b){var v=null,x=forge$f.util.globalScope,_=x.crypto||x.msCrypto;_&&_.getRandomValues&&(v=function(G){return _.getRandomValues(G)});var E=forge$f.util.createBuffer();if(v)for(;E.length()<b;){var $=Math.max(1,Math.min(b-E.length(),65536)/4),S=new Uint32Array(Math.floor($));try{v(S);for(var A=0;A<S.length;++A)E.putInt32(S[A])}catch(G){if(!(typeof QuotaExceededError<"u"&&G instanceof QuotaExceededError))throw G}}if(E.length()<b)for(var I,O,F,U=Math.floor(Math.random()*65536);E.length()<b;){O=16807*(U&65535),I=16807*(U>>16),O+=(I&32767)<<16,O+=I>>15,O=(O&2147483647)+(O>>31),U=O&4294967295;for(var A=0;A<3;++A)F=U>>>(A<<3),F^=Math.floor(Math.random()*256),E.putByte(F&255)}return E.getBytes(b)}return _crypto$1?(e.seedFile=function(b,v){_crypto$1.randomBytes(b,function(x,_){if(x)return v(x);v(null,_.toString())})},e.seedFileSync=function(b){return _crypto$1.randomBytes(b).toString()}):(e.seedFile=function(b,v){try{v(null,p(b))}catch(x){v(x)}},e.seedFileSync=p),e.collect=function(b){for(var v=b.length,x=0;x<v;++x)e.pools[e.pool].update(b.substr(x,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(b,v){for(var x="",_=0;_<v;_+=8)x+=String.fromCharCode(b>>_&255);e.collect(x)},e.registerWorker=function(b){if(b===self)e.seedFile=function(x,_){function E($){var S=$.data;S.forge&&S.forge.prng&&(self.removeEventListener("message",E),_(S.forge.prng.err,S.forge.prng.bytes))}self.addEventListener("message",E),self.postMessage({forge:{prng:{needed:x}}})};else{var v=function(x){var _=x.data;_.forge&&_.forge.prng&&e.seedFile(_.forge.prng.needed,function(E,$){b.postMessage({forge:{prng:{err:E,bytes:$}}})})};b.addEventListener("message",v)}},e};var forge$e=forge$s;(function(){if(forge$e.random&&forge$e.random.getBytes){forge$e.random;return}(function(t){var e={},n=new Array(4),a=forge$e.util.createBuffer();e.formatKey=function(x){var _=forge$e.util.createBuffer(x);return x=new Array(4),x[0]=_.getInt32(),x[1]=_.getInt32(),x[2]=_.getInt32(),x[3]=_.getInt32(),forge$e.aes._expandKey(x,!1)},e.formatSeed=function(x){var _=forge$e.util.createBuffer(x);return x=new Array(4),x[0]=_.getInt32(),x[1]=_.getInt32(),x[2]=_.getInt32(),x[3]=_.getInt32(),x},e.cipher=function(x,_){return forge$e.aes._updateBlock(x,_,n,!1),a.putInt32(n[0]),a.putInt32(n[1]),a.putInt32(n[2]),a.putInt32(n[3]),a.getBytes()},e.increment=function(x){return++x[3],x},e.md=forge$e.md.sha256;function o(){var x=forge$e.prng.create(e);return x.getBytes=function(_,E){return x.generate(_,E)},x.getBytesSync=function(_){return x.generate(_)},x}var c=o(),u=null,l=forge$e.util.globalScope,p=l.crypto||l.msCrypto;if(p&&p.getRandomValues&&(u=function(x){return p.getRandomValues(x)}),forge$e.options.usePureJavaScript||!forge$e.util.isNodejs&&!u){if(c.collectInt(+new Date,32),typeof navigator<"u"){var b="";for(var v in navigator)try{typeof navigator[v]=="string"&&(b+=navigator[v])}catch{}c.collect(b),b=null}t&&(t().mousemove(function(x){c.collectInt(x.clientX,16),c.collectInt(x.clientY,16)}),t().keypress(function(x){c.collectInt(x.charCode,8)}))}if(!forge$e.random)forge$e.random=c;else for(var v in c)forge$e.random[v]=c[v];forge$e.random.createInstance=o,forge$e.random})(typeof jQuery<"u"?jQuery:null)})();var forge$d=forge$s,piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s$1=[1,2,3,5],rol=function(t,e){return t<<e&65535|(t&65535)>>16-e},ror=function(t,e){return(t&65535)>>e|t<<16-e&65535};forge$d.rc2=forge$d.rc2||{};forge$d.rc2.expandKey=function(t,e){typeof t=="string"&&(t=forge$d.util.createBuffer(t)),e=e||128;var n=t,a=t.length(),o=e,c=Math.ceil(o/8),u=255>>(o&7),l;for(l=a;l<128;l++)n.putByte(piTable[n.at(l-1)+n.at(l-a)&255]);for(n.setAt(128-c,piTable[n.at(128-c)&u]),l=127-c;l>=0;l--)n.setAt(l,piTable[n.at(l+1)^n.at(l+c)]);return n};var createCipher=function(t,e,n){var a=!1,o=null,c=null,u=null,l,p,b,v,x=[];for(t=forge$d.rc2.expandKey(t,e),b=0;b<64;b++)x.push(t.getInt16Le());n?(l=function($){for(b=0;b<4;b++)$[b]+=x[v]+($[(b+3)%4]&$[(b+2)%4])+(~$[(b+3)%4]&$[(b+1)%4]),$[b]=rol($[b],s$1[b]),v++},p=function($){for(b=0;b<4;b++)$[b]+=x[$[(b+3)%4]&63]}):(l=function($){for(b=3;b>=0;b--)$[b]=ror($[b],s$1[b]),$[b]-=x[v]+($[(b+3)%4]&$[(b+2)%4])+(~$[(b+3)%4]&$[(b+1)%4]),v--},p=function($){for(b=3;b>=0;b--)$[b]-=x[$[(b+3)%4]&63]});var _=function($){var S=[];for(b=0;b<4;b++){var A=o.getInt16Le();u!==null&&(n?A^=u.getInt16Le():u.putInt16Le(A)),S.push(A&65535)}v=n?0:63;for(var I=0;I<$.length;I++)for(var O=0;O<$[I][0];O++)$[I][1](S);for(b=0;b<4;b++)u!==null&&(n?u.putInt16Le(S[b]):S[b]^=u.getInt16Le()),c.putInt16Le(S[b])},E=null;return E={start:function($,S){$&&typeof $=="string"&&($=forge$d.util.createBuffer($)),a=!1,o=forge$d.util.createBuffer(),c=S||new forge$d.util.createBuffer,u=$,E.output=c},update:function($){for(a||o.putBuffer($);o.length()>=8;)_([[5,l],[1,p],[6,l],[1,p],[5,l]])},finish:function($){var S=!0;if(n)if($)S=$(8,o,!n);else{var A=o.length()===8?8:8-o.length();o.fillWithByte(A,A)}if(S&&(a=!0,E.update()),!n&&(S=o.length()===0,S))if($)S=$(8,c,!n);else{var I=c.length(),O=c.at(I-1);O>I?S=!1:c.truncate(O)}return S}},E};forge$d.rc2.startEncrypting=function(t,e,n){var a=forge$d.rc2.createEncryptionCipher(t,128);return a.start(e,n),a};forge$d.rc2.createEncryptionCipher=function(t,e){return createCipher(t,e,!0)};forge$d.rc2.startDecrypting=function(t,e,n){var a=forge$d.rc2.createDecryptionCipher(t,128);return a.start(e,n),a};forge$d.rc2.createDecryptionCipher=function(t,e){return createCipher(t,e,!1)};var forge$c=forge$s;forge$c.jsbn=forge$c.jsbn||{};var dbits;function BigInteger$2(t,e,n){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,n):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}forge$c.jsbn.BigInteger=BigInteger$2;function nbi(){return new BigInteger$2(null)}function am1(t,e,n,a,o,c){for(;--c>=0;){var u=e*this.data[t++]+n.data[a]+o;o=Math.floor(u/67108864),n.data[a++]=u&67108863}return o}function am2(t,e,n,a,o,c){for(var u=e&32767,l=e>>15;--c>=0;){var p=this.data[t]&32767,b=this.data[t++]>>15,v=l*p+b*u;p=u*p+((v&32767)<<15)+n.data[a]+(o&1073741823),o=(p>>>30)+(v>>>15)+l*b+(o>>>30),n.data[a++]=p&1073741823}return o}function am3(t,e,n,a,o,c){for(var u=e&16383,l=e>>14;--c>=0;){var p=this.data[t]&16383,b=this.data[t++]>>14,v=l*p+b*u;p=u*p+((v&16383)<<14)+n.data[a]+o,o=(p>>28)+(v>>14)+l*b,n.data[a++]=p&268435455}return o}typeof navigator>"u"?(BigInteger$2.prototype.am=am3,dbits=28):navigator.appName=="Microsoft Internet Explorer"?(BigInteger$2.prototype.am=am2,dbits=30):navigator.appName!="Netscape"?(BigInteger$2.prototype.am=am1,dbits=26):(BigInteger$2.prototype.am=am3,dbits=28);BigInteger$2.prototype.DB=dbits;BigInteger$2.prototype.DM=(1<<dbits)-1;BigInteger$2.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$2.prototype.FV=Math.pow(2,BI_FP);BigInteger$2.prototype.F1=BI_FP-dbits;BigInteger$2.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var n=BI_RC[t.charCodeAt(e)];return n??-1}function bnpCopyTo(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function nbv(t){var e=nbi();return e.fromInt(t),e}function bnpFromString(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==256)n=8;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var a=t.length,o=!1,c=0;--a>=0;){var u=n==8?t[a]&255:intAt(t,a);if(u<0){t.charAt(a)=="-"&&(o=!0);continue}o=!1,c==0?this.data[this.t++]=u:c+n>this.DB?(this.data[this.t-1]|=(u&(1<<this.DB-c)-1)<<c,this.data[this.t++]=u>>this.DB-c):this.data[this.t-1]|=u<<c,c+=n,c>=this.DB&&(c-=this.DB)}n==8&&t[0]&128&&(this.s=-1,c>0&&(this.data[this.t-1]|=(1<<this.DB-c)-1<<c)),this.clamp(),o&&BigInteger$2.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var n=(1<<e)-1,a,o=!1,c="",u=this.t,l=this.DB-u*this.DB%e;if(u-- >0)for(l<this.DB&&(a=this.data[u]>>l)>0&&(o=!0,c=int2char(a));u>=0;)l<e?(a=(this.data[u]&(1<<l)-1)<<e-l,a|=this.data[--u]>>(l+=this.DB-e)):(a=this.data[u]>>(l-=e)&n,l<=0&&(l+=this.DB,--u)),a>0&&(o=!0),o&&(c+=int2char(a));return o?c:"0"}function bnNegate(){var t=nbi();return BigInteger$2.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this.data[n]-t.data[n])!=0)return e;return 0}function nbits(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var n;for(n=this.t-1;n>=0;--n)e.data[n+t]=this.data[n];for(n=t-1;n>=0;--n)e.data[n]=0;e.t=this.t+t,e.s=this.s}function bnpDRShiftTo(t,e){for(var n=t;n<this.t;++n)e.data[n-t]=this.data[n];e.t=Math.max(this.t-t,0),e.s=this.s}function bnpLShiftTo(t,e){var n=t%this.DB,a=this.DB-n,o=(1<<a)-1,c=Math.floor(t/this.DB),u=this.s<<n&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+c+1]=this.data[l]>>a|u,u=(this.data[l]&o)<<n;for(l=c-1;l>=0;--l)e.data[l]=0;e.data[c]=u,e.t=this.t+c+1,e.s=this.s,e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var a=t%this.DB,o=this.DB-a,c=(1<<a)-1;e.data[0]=this.data[n]>>a;for(var u=n+1;u<this.t;++u)e.data[u-n-1]|=(this.data[u]&c)<<o,e.data[u-n]=this.data[u]>>a;a>0&&(e.data[this.t-n-1]|=(this.s&c)<<o),e.t=this.t-n,e.clamp()}function bnpSubTo(t,e){for(var n=0,a=0,o=Math.min(t.t,this.t);n<o;)a+=this.data[n]-t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;if(t.t<this.t){for(a-=t.s;n<this.t;)a+=this.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;n<t.t;)a-=t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a-=t.s}e.s=a<0?-1:0,a<-1?e.data[n++]=this.DV+a:a>0&&(e.data[n++]=a),e.t=n,e.clamp()}function bnpMultiplyTo(t,e){var n=this.abs(),a=t.abs(),o=n.t;for(e.t=o+a.t;--o>=0;)e.data[o]=0;for(o=0;o<a.t;++o)e.data[o+n.t]=n.am(0,a.data[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger$2.ZERO.subTo(e,e)}function bnpSquareTo(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t.data[n]=0;for(n=0;n<e.t-1;++n){var a=e.am(n,e.data[n],t,2*n,0,1);(t.data[n+e.t]+=e.am(n+1,2*e.data[n],t,2*n+1,a,e.t-n-1))>=e.DV&&(t.data[n+e.t]-=e.DV,t.data[n+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(n,e.data[n],t,2*n,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,e,n){var a=t.abs();if(!(a.t<=0)){var o=this.abs();if(o.t<a.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=nbi());var c=nbi(),u=this.s,l=t.s,p=this.DB-nbits(a.data[a.t-1]);p>0?(a.lShiftTo(p,c),o.lShiftTo(p,n)):(a.copyTo(c),o.copyTo(n));var b=c.t,v=c.data[b-1];if(v!=0){var x=v*(1<<this.F1)+(b>1?c.data[b-2]>>this.F2:0),_=this.FV/x,E=(1<<this.F1)/x,$=1<<this.F2,S=n.t,A=S-b,I=e??nbi();for(c.dlShiftTo(A,I),n.compareTo(I)>=0&&(n.data[n.t++]=1,n.subTo(I,n)),BigInteger$2.ONE.dlShiftTo(b,I),I.subTo(c,c);c.t<b;)c.data[c.t++]=0;for(;--A>=0;){var O=n.data[--S]==v?this.DM:Math.floor(n.data[S]*_+(n.data[S-1]+$)*E);if((n.data[S]+=c.am(0,O,n,A,0,b))<O)for(c.dlShiftTo(A,I),n.subTo(I,n);n.data[S]<--O;)n.subTo(I,n)}e!=null&&(n.drShiftTo(b,e),u!=l&&BigInteger$2.ZERO.subTo(e,e)),n.t=b,n.clamp(),p>0&&n.rShiftTo(p,n),u<0&&BigInteger$2.ZERO.subTo(n,n)}}}function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(BigInteger$2.ZERO)>0&&t.subTo(e,e),e}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function cSqrTo(t,e){t.squareTo(e),this.reduce(e)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(BigInteger$2.ZERO)>0&&this.m.subTo(e,e),e}function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e}function montReduce(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t.data[e]&32767,a=n*this.mpl+((n*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t.data[n]+=this.m.am(0,a,t,e,0,this.m.t);t.data[n]>=t.DV;)t.data[n]-=t.DV,t.data[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e),this.reduce(e)}function montMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0}function bnpExp(t,e){if(t>4294967295||t<1)return BigInteger$2.ONE;var n=nbi(),a=nbi(),o=e.convert(this),c=nbits(t)-1;for(o.copyTo(n);--c>=0;)if(e.sqrTo(n,a),(t&1<<c)>0)e.mulTo(a,o,n);else{var u=n;n=a,a=u}return e.revert(n)}function bnModPowInt(t,e){var n;return t<256||e.isEven()?n=new Classic(e):n=new Montgomery(e),this.exp(t,n)}BigInteger$2.prototype.copyTo=bnpCopyTo;BigInteger$2.prototype.fromInt=bnpFromInt;BigInteger$2.prototype.fromString=bnpFromString;BigInteger$2.prototype.clamp=bnpClamp;BigInteger$2.prototype.dlShiftTo=bnpDLShiftTo;BigInteger$2.prototype.drShiftTo=bnpDRShiftTo;BigInteger$2.prototype.lShiftTo=bnpLShiftTo;BigInteger$2.prototype.rShiftTo=bnpRShiftTo;BigInteger$2.prototype.subTo=bnpSubTo;BigInteger$2.prototype.multiplyTo=bnpMultiplyTo;BigInteger$2.prototype.squareTo=bnpSquareTo;BigInteger$2.prototype.divRemTo=bnpDivRemTo;BigInteger$2.prototype.invDigit=bnpInvDigit;BigInteger$2.prototype.isEven=bnpIsEven;BigInteger$2.prototype.exp=bnpExp;BigInteger$2.prototype.toString=bnToString;BigInteger$2.prototype.negate=bnNegate;BigInteger$2.prototype.abs=bnAbs;BigInteger$2.prototype.compareTo=bnCompareTo;BigInteger$2.prototype.bitLength=bnBitLength;BigInteger$2.prototype.mod=bnMod;BigInteger$2.prototype.modPowInt=bnModPowInt;BigInteger$2.ZERO=nbv(0);BigInteger$2.ONE=nbv(1);function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function bnpToRadix(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),a=nbv(n),o=nbi(),c=nbi(),u="";for(this.divRemTo(a,o,c);o.signum()>0;)u=(n+c.intValue()).toString(t).substr(1)+u,o.divRemTo(a,o,c);return c.intValue().toString(t)+u}function bnpFromRadix(t,e){this.fromInt(0),e==null&&(e=10);for(var n=this.chunkSize(e),a=Math.pow(e,n),o=!1,c=0,u=0,l=0;l<t.length;++l){var p=intAt(t,l);if(p<0){t.charAt(l)=="-"&&this.signum()==0&&(o=!0);continue}u=e*u+p,++c>=n&&(this.dMultiply(a),this.dAddOffset(u,0),c=0,u=0)}c>0&&(this.dMultiply(Math.pow(e,c)),this.dAddOffset(u,0)),o&&BigInteger$2.ZERO.subTo(this,this)}function bnpFromNumber(t,e,n){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(BigInteger$2.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger$2.ONE.shiftLeft(t-1),this);else{var a=new Array,o=t&7;a.length=(t>>3)+1,e.nextBytes(a),o>0?a[0]&=(1<<o)-1:a[0]=0,this.fromString(a,256)}}function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var n=this.DB-t*this.DB%8,a,o=0;if(t-- >0)for(n<this.DB&&(a=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[o++]=a|this.s<<this.DB-n);t>=0;)n<8?(a=(this.data[t]&(1<<n)-1)<<8-n,a|=this.data[--t]>>(n+=this.DB-8)):(a=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),a&128&&(a|=-256),o==0&&(this.s&128)!=(a&128)&&++o,(o>0||a!=this.s)&&(e[o++]=a);return e}function bnEquals(t){return this.compareTo(t)==0}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,e,n){var a,o,c=Math.min(t.t,this.t);for(a=0;a<c;++a)n.data[a]=e(this.data[a],t.data[a]);if(t.t<this.t){for(o=t.s&this.DM,a=c;a<this.t;++a)n.data[a]=e(this.data[a],o);n.t=this.t}else{for(o=this.s&this.DM,a=c;a<t.t;++a)n.data[a]=e(o,t.data[a]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function op_and(t,e){return t&e}function bnAnd(t){var e=nbi();return this.bitwiseTo(t,op_and,e),e}function op_or(t,e){return t|e}function bnOr(t){var e=nbi();return this.bitwiseTo(t,op_or,e),e}function op_xor(t,e){return t^e}function bnXor(t){var e=nbi();return this.bitwiseTo(t,op_xor,e),e}function op_andnot(t,e){return t&~e}function bnAndNot(t){var e=nbi();return this.bitwiseTo(t,op_andnot,e),e}function bnNot(){for(var t=nbi(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var e=nbi();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function bnShiftRight(t){var e=nbi();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function lbit(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+lbit(this.data[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function bnBitCount(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=cbit(this.data[n]^e);return t}function bnTestBit(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function bnpChangeBit(t,e){var n=BigInteger$2.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,e){for(var n=0,a=0,o=Math.min(t.t,this.t);n<o;)a+=this.data[n]+t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;if(t.t<this.t){for(a+=t.s;n<this.t;)a+=this.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;n<t.t;)a+=t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a+=t.s}e.s=a<0?-1:0,a>0?e.data[n++]=a:a<-1&&(e.data[n++]=this.DV+a),e.t=n,e.clamp()}function bnAdd(t){var e=nbi();return this.addTo(t,e),e}function bnSubtract(t){var e=nbi();return this.subTo(t,e),e}function bnMultiply(t){var e=nbi();return this.multiplyTo(t,e),e}function bnDivide(t){var e=nbi();return this.divRemTo(t,e,null),e}function bnRemainder(t){var e=nbi();return this.divRemTo(t,null,e),e}function bnDivideAndRemainder(t){var e=nbi(),n=nbi();return this.divRemTo(t,e,n),new Array(e,n)}function bnpDMultiply(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,e,n){t.multiplyTo(e,n)}function nSqrTo(t,e){t.squareTo(e)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,e,n){var a=Math.min(this.t+t.t,e);for(n.s=0,n.t=a;a>0;)n.data[--a]=0;var o;for(o=n.t-this.t;a<o;++a)n.data[a+this.t]=this.am(0,t.data[a],n,a,0,this.t);for(o=Math.min(t.t,e);a<o;++a)this.am(0,t.data[a],n,a,0,e-a);n.clamp()}function bnpMultiplyUpperTo(t,e,n){--e;var a=n.t=this.t+t.t-e;for(n.s=0;--a>=0;)n.data[a]=0;for(a=Math.max(e-this.t,0);a<t.t;++a)n.data[this.t+a-e]=this.am(e-a,t.data[a],n,0,0,this.t+a-e);n.clamp(),n.drShiftTo(1,n)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger$2.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nbi();return t.copyTo(e),this.reduce(e),e}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function barrettSqrTo(t,e){t.squareTo(e),this.reduce(e)}function barrettMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(t,e){var n=t.bitLength(),a,o=nbv(1),c;if(n<=0)return o;n<18?a=1:n<48?a=3:n<144?a=4:n<768?a=5:a=6,n<8?c=new Classic(e):e.isEven()?c=new Barrett(e):c=new Montgomery(e);var u=new Array,l=3,p=a-1,b=(1<<a)-1;if(u[1]=c.convert(this),a>1){var v=nbi();for(c.sqrTo(u[1],v);l<=b;)u[l]=nbi(),c.mulTo(v,u[l-2],u[l]),l+=2}var x=t.t-1,_,E=!0,$=nbi(),S;for(n=nbits(t.data[x])-1;x>=0;){for(n>=p?_=t.data[x]>>n-p&b:(_=(t.data[x]&(1<<n+1)-1)<<p-n,x>0&&(_|=t.data[x-1]>>this.DB+n-p)),l=a;!(_&1);)_>>=1,--l;if((n-=l)<0&&(n+=this.DB,--x),E)u[_].copyTo(o),E=!1;else{for(;l>1;)c.sqrTo(o,$),c.sqrTo($,o),l-=2;l>0?c.sqrTo(o,$):(S=o,o=$,$=S),c.mulTo($,u[_],o)}for(;x>=0&&!(t.data[x]&1<<n);)c.sqrTo(o,$),S=o,o=$,$=S,--n<0&&(n=this.DB-1,--x)}return c.revert(o)}function bnGCD(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var a=e;e=n,n=a}var o=e.getLowestSetBit(),c=n.getLowestSetBit();if(c<0)return e;for(o<c&&(c=o),c>0&&(e.rShiftTo(c,e),n.rShiftTo(c,n));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return c>0&&n.lShiftTo(c,n),n}function bnpModInt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(e==0)n=this.data[0]%t;else for(var a=this.t-1;a>=0;--a)n=(e*n+this.data[a])%t;return n}function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return BigInteger$2.ZERO;for(var n=t.clone(),a=this.clone(),o=nbv(1),c=nbv(0),u=nbv(0),l=nbv(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!c.isEven())&&(o.addTo(this,o),c.subTo(t,c)),o.rShiftTo(1,o)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);for(;a.isEven();)a.rShiftTo(1,a),e?((!u.isEven()||!l.isEven())&&(u.addTo(this,u),l.subTo(t,l)),u.rShiftTo(1,u)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);n.compareTo(a)>=0?(n.subTo(a,n),e&&o.subTo(u,o),c.subTo(l,c)):(a.subTo(n,a),e&&u.subTo(o,u),l.subTo(c,l))}if(a.compareTo(BigInteger$2.ONE)!=0)return BigInteger$2.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var e,n=this.abs();if(n.t==1&&n.data[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(n.data[0]==lowprimes[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<lowprimes.length;){for(var a=lowprimes[e],o=e+1;o<lowprimes.length&&a<lplim;)a*=lowprimes[o++];for(a=n.modInt(a);e<o;)if(a%lowprimes[e++]==0)return!1}return n.millerRabin(t)}function bnpMillerRabin(t){var e=this.subtract(BigInteger$2.ONE),n=e.getLowestSetBit();if(n<=0)return!1;for(var a=e.shiftRight(n),o=bnGetPrng(),c,u=0;u<t;++u){do c=new BigInteger$2(this.bitLength(),o);while(c.compareTo(BigInteger$2.ONE)<=0||c.compareTo(e)>=0);var l=c.modPow(a,this);if(l.compareTo(BigInteger$2.ONE)!=0&&l.compareTo(e)!=0){for(var p=1;p++<n&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(BigInteger$2.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}function bnGetPrng(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}BigInteger$2.prototype.chunkSize=bnpChunkSize;BigInteger$2.prototype.toRadix=bnpToRadix;BigInteger$2.prototype.fromRadix=bnpFromRadix;BigInteger$2.prototype.fromNumber=bnpFromNumber;BigInteger$2.prototype.bitwiseTo=bnpBitwiseTo;BigInteger$2.prototype.changeBit=bnpChangeBit;BigInteger$2.prototype.addTo=bnpAddTo;BigInteger$2.prototype.dMultiply=bnpDMultiply;BigInteger$2.prototype.dAddOffset=bnpDAddOffset;BigInteger$2.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger$2.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger$2.prototype.modInt=bnpModInt;BigInteger$2.prototype.millerRabin=bnpMillerRabin;BigInteger$2.prototype.clone=bnClone;BigInteger$2.prototype.intValue=bnIntValue;BigInteger$2.prototype.byteValue=bnByteValue;BigInteger$2.prototype.shortValue=bnShortValue;BigInteger$2.prototype.signum=bnSigNum;BigInteger$2.prototype.toByteArray=bnToByteArray;BigInteger$2.prototype.equals=bnEquals;BigInteger$2.prototype.min=bnMin;BigInteger$2.prototype.max=bnMax;BigInteger$2.prototype.and=bnAnd;BigInteger$2.prototype.or=bnOr;BigInteger$2.prototype.xor=bnXor;BigInteger$2.prototype.andNot=bnAndNot;BigInteger$2.prototype.not=bnNot;BigInteger$2.prototype.shiftLeft=bnShiftLeft;BigInteger$2.prototype.shiftRight=bnShiftRight;BigInteger$2.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger$2.prototype.bitCount=bnBitCount;BigInteger$2.prototype.testBit=bnTestBit;BigInteger$2.prototype.setBit=bnSetBit;BigInteger$2.prototype.clearBit=bnClearBit;BigInteger$2.prototype.flipBit=bnFlipBit;BigInteger$2.prototype.add=bnAdd;BigInteger$2.prototype.subtract=bnSubtract;BigInteger$2.prototype.multiply=bnMultiply;BigInteger$2.prototype.divide=bnDivide;BigInteger$2.prototype.remainder=bnRemainder;BigInteger$2.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger$2.prototype.modPow=bnModPow;BigInteger$2.prototype.modInverse=bnModInverse;BigInteger$2.prototype.pow=bnPow;BigInteger$2.prototype.gcd=bnGCD;BigInteger$2.prototype.isProbablePrime=bnIsProbablePrime;var forge$b=forge$s,sha1=forge$b.sha1=forge$b.sha1||{};forge$b.md.sha1=forge$b.md.algorithms.sha1=sha1;sha1.create=function(){_initialized$1||_init$1();var t=null,e=forge$b.util.createBuffer(),n=new Array(80),a={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var o=a.messageLengthSize/4,c=0;c<o;++c)a.fullMessageLength.push(0);return e=forge$b.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},a},a.start(),a.update=function(o,c){c==="utf8"&&(o=forge$b.util.encodeUtf8(o));var u=o.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=u[1],u[1]=u[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(o),_update$1(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),a},a.digest=function(){var o=forge$b.util.createBuffer();o.putBytes(e.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=c&a.blockLength-1;o.putBytes(_padding$1.substr(0,a.blockLength-u));for(var l,p,b=a.fullMessageLength[0]*8,v=0;v<a.fullMessageLength.length-1;++v)l=a.fullMessageLength[v+1]*8,p=l/4294967296>>>0,b+=p,o.putInt32(b>>>0),b=l>>>0;o.putInt32(b);var x={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};_update$1(x,n,o);var _=forge$b.util.createBuffer();return _.putInt32(x.h0),_.putInt32(x.h1),_.putInt32(x.h2),_.putInt32(x.h3),_.putInt32(x.h4),_},a};var _padding$1=null,_initialized$1=!1;function _init$1(){_padding$1=String.fromCharCode(128),_padding$1+=forge$b.util.fillString(String.fromCharCode(0),64),_initialized$1=!0}function _update$1(t,e,n){for(var a,o,c,u,l,p,b,v,x=n.length();x>=64;){for(o=t.h0,c=t.h1,u=t.h2,l=t.h3,p=t.h4,v=0;v<16;++v)a=n.getInt32(),e[v]=a,b=l^c&(u^l),a=(o<<5|o>>>27)+b+p+1518500249+a,p=l,l=u,u=(c<<30|c>>>2)>>>0,c=o,o=a;for(;v<20;++v)a=e[v-3]^e[v-8]^e[v-14]^e[v-16],a=a<<1|a>>>31,e[v]=a,b=l^c&(u^l),a=(o<<5|o>>>27)+b+p+1518500249+a,p=l,l=u,u=(c<<30|c>>>2)>>>0,c=o,o=a;for(;v<32;++v)a=e[v-3]^e[v-8]^e[v-14]^e[v-16],a=a<<1|a>>>31,e[v]=a,b=c^u^l,a=(o<<5|o>>>27)+b+p+1859775393+a,p=l,l=u,u=(c<<30|c>>>2)>>>0,c=o,o=a;for(;v<40;++v)a=e[v-6]^e[v-16]^e[v-28]^e[v-32],a=a<<2|a>>>30,e[v]=a,b=c^u^l,a=(o<<5|o>>>27)+b+p+1859775393+a,p=l,l=u,u=(c<<30|c>>>2)>>>0,c=o,o=a;for(;v<60;++v)a=e[v-6]^e[v-16]^e[v-28]^e[v-32],a=a<<2|a>>>30,e[v]=a,b=c&u|l&(c^u),a=(o<<5|o>>>27)+b+p+2400959708+a,p=l,l=u,u=(c<<30|c>>>2)>>>0,c=o,o=a;for(;v<80;++v)a=e[v-6]^e[v-16]^e[v-28]^e[v-32],a=a<<2|a>>>30,e[v]=a,b=c^u^l,a=(o<<5|o>>>27)+b+p+3395469782+a,p=l,l=u,u=(c<<30|c>>>2)>>>0,c=o,o=a;t.h0=t.h0+o|0,t.h1=t.h1+c|0,t.h2=t.h2+u|0,t.h3=t.h3+l|0,t.h4=t.h4+p|0,x-=64}}var forge$a=forge$s,pkcs1=forge$a.pkcs1=forge$a.pkcs1||{};pkcs1.encode_rsa_oaep=function(t,e,n){var a,o,c,u;typeof n=="string"?(a=n,o=arguments[3]||void 0,c=arguments[4]||void 0):n&&(a=n.label||void 0,o=n.seed||void 0,c=n.md||void 0,n.mgf1&&n.mgf1.md&&(u=n.mgf1.md)),c?c.start():c=forge$a.md.sha1.create(),u||(u=c);var l=Math.ceil(t.n.bitLength()/8),p=l-2*c.digestLength-2;if(e.length>p){var b=new Error("RSAES-OAEP input message length is too long.");throw b.length=e.length,b.maxLength=p,b}a||(a=""),c.update(a,"raw");for(var v=c.digest(),x="",_=p-e.length,E=0;E<_;E++)x+="\0";var $=v.getBytes()+x+""+e;if(!o)o=forge$a.random.getBytes(c.digestLength);else if(o.length!==c.digestLength){var b=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw b.seedLength=o.length,b.digestLength=c.digestLength,b}var S=rsa_mgf1(o,l-c.digestLength-1,u),A=forge$a.util.xorBytes($,S,$.length),I=rsa_mgf1(A,c.digestLength,u),O=forge$a.util.xorBytes(o,I,o.length);return"\0"+O+A};pkcs1.decode_rsa_oaep=function(t,e,n){var a,o,c;typeof n=="string"?(a=n,o=arguments[3]||void 0):n&&(a=n.label||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(c=n.mgf1.md));var u=Math.ceil(t.n.bitLength()/8);if(e.length!==u){var A=new Error("RSAES-OAEP encoded message length is invalid.");throw A.length=e.length,A.expectedLength=u,A}if(o===void 0?o=forge$a.md.sha1.create():o.start(),c||(c=o),u<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),o.update(a,"raw");for(var l=o.digest().getBytes(),p=e.charAt(0),b=e.substring(1,o.digestLength+1),v=e.substring(1+o.digestLength),x=rsa_mgf1(v,o.digestLength,c),_=forge$a.util.xorBytes(b,x,b.length),E=rsa_mgf1(_,u-o.digestLength-1,c),$=forge$a.util.xorBytes(v,E,v.length),S=$.substring(0,o.digestLength),A=p!=="\0",I=0;I<o.digestLength;++I)A|=l.charAt(I)!==S.charAt(I);for(var O=1,F=o.digestLength,U=o.digestLength;U<$.length;U++){var G=$.charCodeAt(U),J=G&1^1,k=O?65534:0;A|=G&k,O=O&J,F+=O}if(A||$.charCodeAt(F)!==1)throw new Error("Invalid RSAES-OAEP padding.");return $.substring(F+1)};function rsa_mgf1(t,e,n){n||(n=forge$a.md.sha1.create());for(var a="",o=Math.ceil(e/n.digestLength),c=0;c<o;++c){var u=String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255);n.start(),n.update(t+u),a+=n.digest().getBytes()}return a.substring(0,e)}var forge$9=forge$s;(function(){if(forge$9.prime){forge$9.prime;return}var t=forge$9.prime=forge$9.prime||{},e=forge$9.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],a=new e(null);a.fromInt(30);var o=function(x,_){return x|_};t.generateProbablePrime=function(x,_,E){typeof _=="function"&&(E=_,_={}),_=_||{};var $=_.algorithm||"PRIMEINC";typeof $=="string"&&($={name:$}),$.options=$.options||{};var S=_.prng||forge$9.random,A={nextBytes:function(I){for(var O=S.getBytesSync(I.length),F=0;F<I.length;++F)I[F]=O.charCodeAt(F)}};if($.name==="PRIMEINC")return c(x,A,$.options,E);throw new Error("Invalid prime generation algorithm: "+$.name)};function c(x,_,E,$){return"workers"in E?p(x,_,E,$):u(x,_,E,$)}function u(x,_,E,$){var S=b(x,_),A=0,I=v(S.bitLength());"millerRabinTests"in E&&(I=E.millerRabinTests);var O=10;"maxBlockTime"in E&&(O=E.maxBlockTime),l(S,x,_,A,I,O,$)}function l(x,_,E,$,S,A,I){var O=+new Date;do{if(x.bitLength()>_&&(x=b(_,E)),x.isProbablePrime(S))return I(null,x);x.dAddOffset(n[$++%8],0)}while(A<0||+new Date-O<A);forge$9.util.setImmediate(function(){l(x,_,E,$,S,A,I)})}function p(x,_,E,$){if(typeof Worker>"u")return u(x,_,E,$);var S=b(x,_),A=E.workers,I=E.workLoad||100,O=I*30/8,F=E.workerScript||"forge/prime.worker.js";if(A===-1)return forge$9.util.estimateCores(function(G,J){G&&(J=2),A=J-1,U()});U();function U(){A=Math.max(1,A);for(var G=[],J=0;J<A;++J)G[J]=new Worker(F);for(var J=0;J<A;++J)G[J].addEventListener("message",ne);var k=!1;function ne(ee){if(!k){var de=ee.data;if(de.found){for(var ae=0;ae<G.length;++ae)G[ae].terminate();return k=!0,$(null,new e(de.prime,16))}S.bitLength()>x&&(S=b(x,_));var L=S.toString(16);ee.target.postMessage({hex:L,workLoad:I}),S.dAddOffset(O,0)}}}}function b(x,_){var E=new e(x,_),$=x-1;return E.testBit($)||E.bitwiseTo(e.ONE.shiftLeft($),o,E),E.dAddOffset(31-E.mod(a).byteValue(),0),E}function v(x){return x<=100?27:x<=150?18:x<=200?15:x<=250?12:x<=300?9:x<=350?8:x<=400?7:x<=500?6:x<=600?5:x<=800?4:x<=1250?3:2}})();var forge$8=forge$s;if(typeof BigInteger$1>"u")var BigInteger$1=forge$8.jsbn.BigInteger;var _crypto=forge$8.util.isNodejs?requireCryptoBrowserify():null,asn1$4=forge$8.asn1,util$2=forge$8.util;forge$8.pki=forge$8.pki||{};forge$8.pki.rsa=forge$8.rsa=forge$8.rsa||{};var pki$2=forge$8.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator$1=forge$8.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},digestInfoValidator={name:"DigestInfo",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:asn1$4.Class.UNIVERSAL,type:asn1$4.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},emsaPkcs1v15encode=function(t){var e;if(t.algorithm in pki$2.oids)e=pki$2.oids[t.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=t.algorithm,n}var a=asn1$4.oidToDer(e).getBytes(),o=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]),c=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[]);c.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,a)),c.value.push(asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,""));var u=asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OCTETSTRING,!1,t.digest().getBytes());return o.value.push(c),o.value.push(u),asn1$4.toDer(o).getBytes()},_modPow=function(t,e,n){if(n)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(BigInteger$1.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(BigInteger$1.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var a;do a=new BigInteger$1(forge$8.util.bytesToHex(forge$8.random.getBytes(e.n.bitLength()/8)),16);while(a.compareTo(e.n)>=0||!a.gcd(e.n).equals(BigInteger$1.ONE));t=t.multiply(a.modPow(e.e,e.n)).mod(e.n);for(var o=t.mod(e.p).modPow(e.dP,e.p),c=t.mod(e.q).modPow(e.dQ,e.q);o.compareTo(c)<0;)o=o.add(e.p);var u=o.subtract(c).multiply(e.qInv).mod(e.p).multiply(e.q).add(c);return u=u.multiply(a.modInverse(e.n)).mod(e.n),u};pki$2.rsa.encrypt=function(t,e,n){var a=n,o,c=Math.ceil(e.n.bitLength()/8);n!==!1&&n!==!0?(a=n===2,o=_encodePkcs1_v1_5(t,e,n)):(o=forge$8.util.createBuffer(),o.putBytes(t));for(var u=new BigInteger$1(o.toHex(),16),l=_modPow(u,e,a),p=l.toString(16),b=forge$8.util.createBuffer(),v=c-Math.ceil(p.length/2);v>0;)b.putByte(0),--v;return b.putBytes(forge$8.util.hexToBytes(p)),b.getBytes()};pki$2.rsa.decrypt=function(t,e,n,a){var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var c=new Error("Encrypted message length is invalid.");throw c.length=t.length,c.expected=o,c}var u=new BigInteger$1(forge$8.util.createBuffer(t).toHex(),16);if(u.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=_modPow(u,e,n),p=l.toString(16),b=forge$8.util.createBuffer(),v=o-Math.ceil(p.length/2);v>0;)b.putByte(0),--v;return b.putBytes(forge$8.util.hexToBytes(p)),a!==!1?_decodePkcs1_v1_5(b.getBytes(),e,n):b.getBytes()};pki$2.rsa.createKeyPairGenerationState=function(t,e,n){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,n=n||{};var a=n.prng||forge$8.random,o={nextBytes:function(l){for(var p=a.getBytesSync(l.length),b=0;b<l.length;++b)l[b]=p.charCodeAt(b)}},c=n.algorithm||"PRIMEINC",u;if(c==="PRIMEINC")u={algorithm:c,state:0,bits:t,rng:o,eInt:e||65537,e:new BigInteger$1(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},u.e.fromInt(u.eInt);else throw new Error("Invalid key generation algorithm: "+c);return u};pki$2.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var n=new BigInteger$1(null);n.fromInt(30);for(var a=0,o=function(x,_){return x|_},c=+new Date,u,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var p=t.p===null?t.pBits:t.qBits,b=p-1;t.pqState===0?(t.num=new BigInteger$1(p,t.rng),t.num.testBit(b)||t.num.bitwiseTo(BigInteger$1.ONE.shiftLeft(b),o,t.num),t.num.dAddOffset(31-t.num.mod(n).byteValue(),0),a=0,++t.pqState):t.pqState===1?t.num.bitLength()>p?t.pqState=0:t.num.isProbablePrime(_getMillerRabinTests(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(GCD_30_DELTA[a++%8],0):t.pqState===2?t.pqState=t.num.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(BigInteger$1.ONE),t.q1=t.q.subtract(BigInteger$1.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(BigInteger$1.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var v=t.e.modInverse(t.phi);t.keys={privateKey:pki$2.rsa.setPrivateKey(t.n,t.e,v,t.p,t.q,v.mod(t.p1),v.mod(t.q1),t.q.modInverse(t.p)),publicKey:pki$2.rsa.setPublicKey(t.n,t.e)}}u=+new Date,l+=u-c,c=u}return t.keys!==null};pki$2.rsa.generateKeyPair=function(t,e,n,a){if(arguments.length===1?typeof t=="object"?(n=t,t=void 0):typeof t=="function"&&(a=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(a=e,e=void 0):typeof e!="number"&&(n=e,e=void 0):(n=t,a=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof n=="function"&&(a=n,n=void 0):(a=n,n=e,e=void 0)),n=n||{},t===void 0&&(t=n.bits||2048),e===void 0&&(e=n.e||65537),!forge$8.options.usePureJavaScript&&!n.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(a){if(_detectNodeCrypto("generateKeyPair"))return _crypto.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,p,b){if(l)return a(l);a(null,{privateKey:pki$2.privateKeyFromPem(b),publicKey:pki$2.publicKeyFromPem(p)})});if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return util$2.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:_intToUint8Array(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return util$2.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){a(l)}).then(function(l){if(l){var p=pki$2.privateKeyFromAsn1(asn1$4.fromDer(forge$8.util.createBuffer(l)));a(null,{privateKey:p,publicKey:pki$2.setRsaPublicKey(p.n,p.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var o=util$2.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:_intToUint8Array(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);o.oncomplete=function(l){var p=l.target.result,b=util$2.globalScope.msCrypto.subtle.exportKey("pkcs8",p.privateKey);b.oncomplete=function(v){var x=v.target.result,_=pki$2.privateKeyFromAsn1(asn1$4.fromDer(forge$8.util.createBuffer(x)));a(null,{privateKey:_,publicKey:pki$2.setRsaPublicKey(_.n,_.e)})},b.onerror=function(v){a(v)}},o.onerror=function(l){a(l)};return}}else if(_detectNodeCrypto("generateKeyPairSync")){var c=_crypto.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pki$2.privateKeyFromPem(c.privateKey),publicKey:pki$2.publicKeyFromPem(c.publicKey)}}}var u=pki$2.rsa.createKeyPairGenerationState(t,e,n);if(!a)return pki$2.rsa.stepKeyPairGenerationState(u,0),u.keys;_generateKeyPair(u,n,a)};pki$2.setRsaPublicKey=pki$2.rsa.setPublicKey=function(t,e){var n={n:t,e};return n.encrypt=function(a,o,c){if(typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSAES-PKCS1-V1_5"),o==="RSAES-PKCS1-V1_5")o={encode:function(l,p,b){return _encodePkcs1_v1_5(l,p,2).getBytes()}};else if(o==="RSA-OAEP"||o==="RSAES-OAEP")o={encode:function(l,p){return forge$8.pkcs1.encode_rsa_oaep(p,l,c)}};else if(["RAW","NONE","NULL",null].indexOf(o)!==-1)o={encode:function(l){return l}};else if(typeof o=="string")throw new Error('Unsupported encryption scheme: "'+o+'".');var u=o.encode(a,n,!0);return pki$2.rsa.encrypt(u,n,!0)},n.verify=function(a,o,c,u){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSASSA-PKCS1-V1_5"),u===void 0&&(u={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in u||(u._parseAllDigestBytes=!0),c==="RSASSA-PKCS1-V1_5"?c={verify:function(p,b){b=_decodePkcs1_v1_5(b,n,!0);var v=asn1$4.fromDer(b,{parseAllBytes:u._parseAllDigestBytes}),x={},_=[];if(!asn1$4.validate(v,digestInfoValidator,x,_)){var E=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw E.errors=_,E}var $=asn1$4.derToOid(x.algorithmIdentifier);if(!($===forge$8.oids.md2||$===forge$8.oids.md5||$===forge$8.oids.sha1||$===forge$8.oids.sha224||$===forge$8.oids.sha256||$===forge$8.oids.sha384||$===forge$8.oids.sha512||$===forge$8.oids["sha512-224"]||$===forge$8.oids["sha512-256"])){var E=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw E.oid=$,E}if(($===forge$8.oids.md2||$===forge$8.oids.md5)&&!("parameters"in x))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return p===x.digest}}:(c==="NONE"||c==="NULL"||c===null)&&(c={verify:function(p,b){return b=_decodePkcs1_v1_5(b,n,!0),p===b}});var l=pki$2.rsa.decrypt(o,n,!0,!1);return c.verify(a,l,n.n.bitLength())},n};pki$2.setRsaPrivateKey=pki$2.rsa.setPrivateKey=function(t,e,n,a,o,c,u,l){var p={n:t,e,d:n,p:a,q:o,dP:c,dQ:u,qInv:l};return p.decrypt=function(b,v,x){typeof v=="string"?v=v.toUpperCase():v===void 0&&(v="RSAES-PKCS1-V1_5");var _=pki$2.rsa.decrypt(b,p,!1,!1);if(v==="RSAES-PKCS1-V1_5")v={decode:_decodePkcs1_v1_5};else if(v==="RSA-OAEP"||v==="RSAES-OAEP")v={decode:function(E,$){return forge$8.pkcs1.decode_rsa_oaep($,E,x)}};else if(["RAW","NONE","NULL",null].indexOf(v)!==-1)v={decode:function(E){return E}};else throw new Error('Unsupported encryption scheme: "'+v+'".');return v.decode(_,p,!1)},p.sign=function(b,v){var x=!1;typeof v=="string"&&(v=v.toUpperCase()),v===void 0||v==="RSASSA-PKCS1-V1_5"?(v={encode:emsaPkcs1v15encode},x=1):(v==="NONE"||v==="NULL"||v===null)&&(v={encode:function(){return b}},x=1);var _=v.encode(b,p.n.bitLength());return pki$2.rsa.encrypt(_,p,x)},p};pki$2.wrapRsaPrivateKey=function(t){return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(0).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(pki$2.oids.rsaEncryption).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OCTETSTRING,!1,asn1$4.toDer(t).getBytes())])};pki$2.privateKeyFromAsn1=function(t){var e={},n=[];if(asn1$4.validate(t,privateKeyValidator,e,n)&&(t=asn1$4.fromDer(forge$8.util.createBuffer(e.privateKey))),e={},n=[],!asn1$4.validate(t,rsaPrivateKeyValidator,e,n)){var a=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw a.errors=n,a}var o,c,u,l,p,b,v,x;return o=forge$8.util.createBuffer(e.privateKeyModulus).toHex(),c=forge$8.util.createBuffer(e.privateKeyPublicExponent).toHex(),u=forge$8.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=forge$8.util.createBuffer(e.privateKeyPrime1).toHex(),p=forge$8.util.createBuffer(e.privateKeyPrime2).toHex(),b=forge$8.util.createBuffer(e.privateKeyExponent1).toHex(),v=forge$8.util.createBuffer(e.privateKeyExponent2).toHex(),x=forge$8.util.createBuffer(e.privateKeyCoefficient).toHex(),pki$2.setRsaPrivateKey(new BigInteger$1(o,16),new BigInteger$1(c,16),new BigInteger$1(u,16),new BigInteger$1(l,16),new BigInteger$1(p,16),new BigInteger$1(b,16),new BigInteger$1(v,16),new BigInteger$1(x,16))};pki$2.privateKeyToAsn1=pki$2.privateKeyToRSAPrivateKey=function(t){return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,asn1$4.integerToDer(0).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,_bnToBytes(t.n)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,_bnToBytes(t.e)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,_bnToBytes(t.d)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,_bnToBytes(t.p)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,_bnToBytes(t.q)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,_bnToBytes(t.dP)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,_bnToBytes(t.dQ)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,_bnToBytes(t.qInv))])};pki$2.publicKeyFromAsn1=function(t){var e={},n=[];if(asn1$4.validate(t,publicKeyValidator$1,e,n)){var a=asn1$4.derToOid(e.publicKeyOid);if(a!==pki$2.oids.rsaEncryption){var o=new Error("Cannot read public key. Unknown OID.");throw o.oid=a,o}t=e.rsaPublicKey}if(n=[],!asn1$4.validate(t,rsaPublicKeyValidator,e,n)){var o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw o.errors=n,o}var c=forge$8.util.createBuffer(e.publicKeyModulus).toHex(),u=forge$8.util.createBuffer(e.publicKeyExponent).toHex();return pki$2.setRsaPublicKey(new BigInteger$1(c,16),new BigInteger$1(u,16))};pki$2.publicKeyToAsn1=pki$2.publicKeyToSubjectPublicKeyInfo=function(t){return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.OID,!1,asn1$4.oidToDer(pki$2.oids.rsaEncryption).getBytes()),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.NULL,!1,"")]),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.BITSTRING,!1,[pki$2.publicKeyToRSAPublicKey(t)])])};pki$2.publicKeyToRSAPublicKey=function(t){return asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.SEQUENCE,!0,[asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,_bnToBytes(t.n)),asn1$4.create(asn1$4.Class.UNIVERSAL,asn1$4.Type.INTEGER,!1,_bnToBytes(t.e))])};function _encodePkcs1_v1_5(t,e,n){var a=forge$8.util.createBuffer(),o=Math.ceil(e.n.bitLength()/8);if(t.length>o-11){var c=new Error("Message is too long for PKCS#1 v1.5 padding.");throw c.length=t.length,c.max=o-11,c}a.putByte(0),a.putByte(n);var u=o-3-t.length,l;if(n===0||n===1){l=n===0?0:255;for(var p=0;p<u;++p)a.putByte(l)}else for(;u>0;){for(var b=0,v=forge$8.random.getBytes(u),p=0;p<u;++p)l=v.charCodeAt(p),l===0?++b:a.putByte(l);u=b}return a.putByte(0),a.putBytes(t),a}function _decodePkcs1_v1_5(t,e,n,a){var o=Math.ceil(e.n.bitLength()/8),c=forge$8.util.createBuffer(t),u=c.getByte(),l=c.getByte();if(u!==0||n&&l!==0&&l!==1||!n&&l!=2||n&&l===0&&typeof a>"u")throw new Error("Encryption block is invalid.");var p=0;if(l===0){p=o-3-a;for(var b=0;b<p;++b)if(c.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(p=0;c.length()>1;){if(c.getByte()!==255){--c.read;break}++p}else if(l===2)for(p=0;c.length()>1;){if(c.getByte()===0){--c.read;break}++p}var v=c.getByte();if(v!==0||p!==o-3-c.length())throw new Error("Encryption block is invalid.");return c.getBytes()}function _generateKeyPair(t,e,n){typeof e=="function"&&(n=e,e={}),e=e||{};var a={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(a.prng=e.prng),o();function o(){c(t.pBits,function(l,p){if(l)return n(l);if(t.p=p,t.q!==null)return u(l,t.q);c(t.qBits,u)})}function c(l,p){forge$8.prime.generateProbablePrime(l,a,p)}function u(l,p){if(l)return n(l);if(t.q=p,t.p.compareTo(t.q)<0){var b=t.p;t.p=t.q,t.q=b}if(t.p.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.p=null,o();return}if(t.q.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.q=null,c(t.qBits,u);return}if(t.p1=t.p.subtract(BigInteger$1.ONE),t.q1=t.q.subtract(BigInteger$1.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.p=t.q=null,o();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,c(t.qBits,u);return}var v=t.e.modInverse(t.phi);t.keys={privateKey:pki$2.rsa.setPrivateKey(t.n,t.e,v,t.p,t.q,v.mod(t.p1),v.mod(t.q1),t.q.modInverse(t.p)),publicKey:pki$2.rsa.setPublicKey(t.n,t.e)},n(null,t.keys)}}function _bnToBytes(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var n=forge$8.util.hexToBytes(e);return n.length>1&&(n.charCodeAt(0)===0&&!(n.charCodeAt(1)&128)||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}function _getMillerRabinTests(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function _detectNodeCrypto(t){return forge$8.util.isNodejs&&typeof _crypto[t]=="function"}function _detectSubtleCrypto(t){return typeof util$2.globalScope<"u"&&typeof util$2.globalScope.crypto=="object"&&typeof util$2.globalScope.crypto.subtle=="object"&&typeof util$2.globalScope.crypto.subtle[t]=="function"}function _detectSubtleMsCrypto(t){return typeof util$2.globalScope<"u"&&typeof util$2.globalScope.msCrypto=="object"&&typeof util$2.globalScope.msCrypto.subtle=="object"&&typeof util$2.globalScope.msCrypto.subtle[t]=="function"}function _intToUint8Array(t){for(var e=forge$8.util.hexToBytes(t.toString(16)),n=new Uint8Array(e.length),a=0;a<e.length;++a)n[a]=e.charCodeAt(a);return n}var forge$7=forge$s;if(typeof BigInteger>"u")var BigInteger=forge$7.jsbn.BigInteger;var asn1$3=forge$7.asn1,pki$1=forge$7.pki=forge$7.pki||{};pki$1.pbe=forge$7.pbe=forge$7.pbe||{};var oids$1=pki$1.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1$3.Class.UNIVERSAL,type:asn1$3.Type.INTEGER,constructed:!1,capture:"iterations"}]};pki$1.encryptPrivateKeyInfo=function(t,e,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var a=forge$7.random.getBytesSync(n.saltSize),o=n.count,c=asn1$3.integerToDer(o),u,l,p;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var b,v,x;switch(n.algorithm){case"aes128":u=16,b=16,v=oids$1["aes128-CBC"],x=forge$7.aes.createEncryptionCipher;break;case"aes192":u=24,b=16,v=oids$1["aes192-CBC"],x=forge$7.aes.createEncryptionCipher;break;case"aes256":u=32,b=16,v=oids$1["aes256-CBC"],x=forge$7.aes.createEncryptionCipher;break;case"des":u=8,b=8,v=oids$1.desCBC,x=forge$7.des.createEncryptionCipher;break;default:var _=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw _.algorithm=n.algorithm,_}var E="hmacWith"+n.prfAlgorithm.toUpperCase(),$=prfAlgorithmToMessageDigest(E),S=forge$7.pkcs5.pbkdf2(e,a,o,u,$),A=forge$7.random.getBytesSync(b),I=x(S);I.start(A),I.update(asn1$3.toDer(t)),I.finish(),p=I.output.getBytes();var O=createPbkdf2Params(a,c,u,E);l=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(oids$1.pkcs5PBES2).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(oids$1.pkcs5PBKDF2).getBytes()),O]),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(v).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,A)])])])}else if(n.algorithm==="3des"){u=24;var F=new forge$7.util.ByteBuffer(a),S=pki$1.pbe.generatePkcs12Key(e,F,1,o,u),A=pki$1.pbe.generatePkcs12Key(e,F,2,o,u),I=forge$7.des.createEncryptionCipher(S);I.start(A),I.update(asn1$3.toDer(t)),I.finish(),p=I.output.getBytes(),l=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(oids$1["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,a),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.INTEGER,!1,c.getBytes())])])}else{var _=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw _.algorithm=n.algorithm,_}var U=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[l,asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,p)]);return U};pki$1.decryptPrivateKeyInfo=function(t,e){var n=null,a={},o=[];if(!asn1$3.validate(t,encryptedPrivateKeyValidator,a,o)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=o,c}var u=asn1$3.derToOid(a.encryptionOid),l=pki$1.pbe.getCipher(u,a.encryptionParams,e),p=forge$7.util.createBuffer(a.encryptedData);return l.update(p),l.finish()&&(n=asn1$3.fromDer(l.output)),n};pki$1.encryptedPrivateKeyToPem=function(t,e){var n={type:"ENCRYPTED PRIVATE KEY",body:asn1$3.toDer(t).getBytes()};return forge$7.pem.encode(n,{maxline:e})};pki$1.encryptedPrivateKeyFromPem=function(t){var e=forge$7.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1$3.fromDer(e.body)};pki$1.encryptRsaPrivateKey=function(t,e,n){if(n=n||{},!n.legacy){var a=pki$1.wrapRsaPrivateKey(pki$1.privateKeyToAsn1(t));return a=pki$1.encryptPrivateKeyInfo(a,e,n),pki$1.encryptedPrivateKeyToPem(a)}var o,c,u,l;switch(n.algorithm){case"aes128":o="AES-128-CBC",u=16,c=forge$7.random.getBytesSync(16),l=forge$7.aes.createEncryptionCipher;break;case"aes192":o="AES-192-CBC",u=24,c=forge$7.random.getBytesSync(16),l=forge$7.aes.createEncryptionCipher;break;case"aes256":o="AES-256-CBC",u=32,c=forge$7.random.getBytesSync(16),l=forge$7.aes.createEncryptionCipher;break;case"3des":o="DES-EDE3-CBC",u=24,c=forge$7.random.getBytesSync(8),l=forge$7.des.createEncryptionCipher;break;case"des":o="DES-CBC",u=8,c=forge$7.random.getBytesSync(8),l=forge$7.des.createEncryptionCipher;break;default:var p=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw p.algorithm=n.algorithm,p}var b=forge$7.pbe.opensslDeriveBytes(e,c.substr(0,8),u),v=l(b);v.start(c),v.update(asn1$3.toDer(pki$1.privateKeyToAsn1(t))),v.finish();var x={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:o,parameters:forge$7.util.bytesToHex(c).toUpperCase()},body:v.output.getBytes()};return forge$7.pem.encode(x)};pki$1.decryptRsaPrivateKey=function(t,e){var n=null,a=forge$7.pem.decode(t)[0];if(a.type!=="ENCRYPTED PRIVATE KEY"&&a.type!=="PRIVATE KEY"&&a.type!=="RSA PRIVATE KEY"){var o=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw o.headerType=o,o}if(a.procType&&a.procType.type==="ENCRYPTED"){var c,u;switch(a.dekInfo.algorithm){case"DES-CBC":c=8,u=forge$7.des.createDecryptionCipher;break;case"DES-EDE3-CBC":c=24,u=forge$7.des.createDecryptionCipher;break;case"AES-128-CBC":c=16,u=forge$7.aes.createDecryptionCipher;break;case"AES-192-CBC":c=24,u=forge$7.aes.createDecryptionCipher;break;case"AES-256-CBC":c=32,u=forge$7.aes.createDecryptionCipher;break;case"RC2-40-CBC":c=5,u=function(x){return forge$7.rc2.createDecryptionCipher(x,40)};break;case"RC2-64-CBC":c=8,u=function(x){return forge$7.rc2.createDecryptionCipher(x,64)};break;case"RC2-128-CBC":c=16,u=function(x){return forge$7.rc2.createDecryptionCipher(x,128)};break;default:var o=new Error('Could not decrypt private key; unsupported encryption algorithm "'+a.dekInfo.algorithm+'".');throw o.algorithm=a.dekInfo.algorithm,o}var l=forge$7.util.hexToBytes(a.dekInfo.parameters),p=forge$7.pbe.opensslDeriveBytes(e,l.substr(0,8),c),b=u(p);if(b.start(l),b.update(forge$7.util.createBuffer(a.body)),b.finish())n=b.output.getBytes();else return n}else n=a.body;return a.type==="ENCRYPTED PRIVATE KEY"?n=pki$1.decryptPrivateKeyInfo(asn1$3.fromDer(n),e):n=asn1$3.fromDer(n),n!==null&&(n=pki$1.privateKeyFromAsn1(n)),n};pki$1.pbe.generatePkcs12Key=function(t,e,n,a,o,c){var u,l;if(typeof c>"u"||c===null){if(!("sha1"in forge$7.md))throw new Error('"sha1" hash algorithm unavailable.');c=forge$7.md.sha1.create()}var p=c.digestLength,b=c.blockLength,v=new forge$7.util.ByteBuffer,x=new forge$7.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)x.putInt16(t.charCodeAt(l));x.putInt16(0)}var _=x.length(),E=e.length(),$=new forge$7.util.ByteBuffer;$.fillWithByte(n,b);var S=b*Math.ceil(E/b),A=new forge$7.util.ByteBuffer;for(l=0;l<S;l++)A.putByte(e.at(l%E));var I=b*Math.ceil(_/b),O=new forge$7.util.ByteBuffer;for(l=0;l<I;l++)O.putByte(x.at(l%_));var F=A;F.putBuffer(O);for(var U=Math.ceil(o/p),G=1;G<=U;G++){var J=new forge$7.util.ByteBuffer;J.putBytes($.bytes()),J.putBytes(F.bytes());for(var k=0;k<a;k++)c.start(),c.update(J.getBytes()),J=c.digest();var ne=new forge$7.util.ByteBuffer;for(l=0;l<b;l++)ne.putByte(J.at(l%p));var ee=Math.ceil(E/b)+Math.ceil(_/b),de=new forge$7.util.ByteBuffer;for(u=0;u<ee;u++){var ae=new forge$7.util.ByteBuffer(F.getBytes(b)),L=511;for(l=ne.length()-1;l>=0;l--)L=L>>8,L+=ne.at(l)+ae.at(l),ae.setAt(l,L&255);de.putBuffer(ae)}F=de,v.putBuffer(J)}return v.truncate(v.length()-o),v};pki$1.pbe.getCipher=function(t,e,n){switch(t){case pki$1.oids.pkcs5PBES2:return pki$1.pbe.getCipherForPBES2(t,e,n);case pki$1.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki$1.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki$1.pbe.getCipherForPKCS12PBE(t,e,n);default:var a=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw a.oid=t,a.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],a}};pki$1.pbe.getCipherForPBES2=function(t,e,n){var a={},o=[];if(!asn1$3.validate(e,PBES2AlgorithmsValidator,a,o)){var c=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=o,c}if(t=asn1$3.derToOid(a.kdfOid),t!==pki$1.oids.pkcs5PBKDF2){var c=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw c.oid=t,c.supportedOids=["pkcs5PBKDF2"],c}if(t=asn1$3.derToOid(a.encOid),t!==pki$1.oids["aes128-CBC"]&&t!==pki$1.oids["aes192-CBC"]&&t!==pki$1.oids["aes256-CBC"]&&t!==pki$1.oids["des-EDE3-CBC"]&&t!==pki$1.oids.desCBC){var c=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw c.oid=t,c.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],c}var u=a.kdfSalt,l=forge$7.util.createBuffer(a.kdfIterationCount);l=l.getInt(l.length()<<3);var p,b;switch(pki$1.oids[t]){case"aes128-CBC":p=16,b=forge$7.aes.createDecryptionCipher;break;case"aes192-CBC":p=24,b=forge$7.aes.createDecryptionCipher;break;case"aes256-CBC":p=32,b=forge$7.aes.createDecryptionCipher;break;case"des-EDE3-CBC":p=24,b=forge$7.des.createDecryptionCipher;break;case"desCBC":p=8,b=forge$7.des.createDecryptionCipher;break}var v=prfOidToMessageDigest(a.prfOid),x=forge$7.pkcs5.pbkdf2(n,u,l,p,v),_=a.encIv,E=b(x);return E.start(_),E};pki$1.pbe.getCipherForPKCS12PBE=function(t,e,n){var a={},o=[];if(!asn1$3.validate(e,pkcs12PbeParamsValidator,a,o)){var c=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=o,c}var u=forge$7.util.createBuffer(a.salt),l=forge$7.util.createBuffer(a.iterations);l=l.getInt(l.length()<<3);var p,b,v;switch(t){case pki$1.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:p=24,b=8,v=forge$7.des.startDecrypting;break;case pki$1.oids["pbewithSHAAnd40BitRC2-CBC"]:p=5,b=8,v=function(S,A){var I=forge$7.rc2.createDecryptionCipher(S,40);return I.start(A,null),I};break;default:var c=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw c.oid=t,c}var x=prfOidToMessageDigest(a.prfOid),_=pki$1.pbe.generatePkcs12Key(n,u,1,l,p,x);x.start();var E=pki$1.pbe.generatePkcs12Key(n,u,2,l,b,x);return v(_,E)};pki$1.pbe.opensslDeriveBytes=function(t,e,n,a){if(typeof a>"u"||a===null){if(!("md5"in forge$7.md))throw new Error('"md5" hash algorithm unavailable.');a=forge$7.md.md5.create()}e===null&&(e="");for(var o=[hash$1(a,t+e)],c=16,u=1;c<n;++u,c+=16)o.push(hash$1(a,o[u-1]+t+e));return o.join("").substr(0,n)};function hash$1(t,e){return t.start().update(e).digest().getBytes()}function prfOidToMessageDigest(t){var e;if(!t)e="hmacWithSHA1";else if(e=pki$1.oids[asn1$3.derToOid(t)],!e){var n=new Error("Unsupported PRF OID.");throw n.oid=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return prfAlgorithmToMessageDigest(e)}function prfAlgorithmToMessageDigest(t){var e=forge$7.md;switch(t){case"hmacWithSHA224":e=forge$7.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function createPbkdf2Params(t,e,n,a){var o=asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OCTETSTRING,!1,t),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.INTEGER,!1,e.getBytes())]);return a!=="hmacWithSHA1"&&o.value.push(asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.INTEGER,!1,forge$7.util.hexToBytes(n.toString(16))),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.SEQUENCE,!0,[asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.OID,!1,asn1$3.oidToDer(pki$1.oids[a]).getBytes()),asn1$3.create(asn1$3.Class.UNIVERSAL,asn1$3.Type.NULL,!1,"")])),o}var cryptoBrowserifyExports=requireCryptoBrowserify();const index=getDefaultExportFromCjs(cryptoBrowserifyExports),nodeCrypto=_mergeNamespaces({__proto__:null,default:index},[cryptoBrowserifyExports]);/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_8n$1=BigInt(8),CU_O=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),CURVE$1=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:CU_O,n:CU_O,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),POW_2_256$1=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const SQRT_AD_MINUS_ONE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),INVSQRT_A_MINUS_D=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ONE_MINUS_D_SQ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D_MINUS_ONE_SQ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class ExtendedPoint{constructor(e,n,a,o){this.x=e,this.y=n,this.z=a,this.t=o}static fromAffine(e){if(!(e instanceof Point$2))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Point$2.ZERO)?ExtendedPoint.ZERO:new ExtendedPoint(e.x,e.y,_1n$1,mod$1(e.x*e.y))}static toAffineBatch(e){const n=invertBatch$1(e.map(a=>a.z));return e.map((a,o)=>a.toAffine(n[o]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){assertExtPoint(e);const{x:n,y:a,z:o}=this,{x:c,y:u,z:l}=e,p=mod$1(n*l),b=mod$1(c*o),v=mod$1(a*l),x=mod$1(u*o);return p===b&&v===x}negate(){return new ExtendedPoint(mod$1(-this.x),this.y,this.z,mod$1(-this.t))}double(){const{x:e,y:n,z:a}=this,{a:o}=CURVE$1,c=mod$1(e*e),u=mod$1(n*n),l=mod$1(_2n$1*mod$1(a*a)),p=mod$1(o*c),b=e+n,v=mod$1(mod$1(b*b)-c-u),x=p+u,_=x-l,E=p-u,$=mod$1(v*_),S=mod$1(x*E),A=mod$1(v*E),I=mod$1(_*x);return new ExtendedPoint($,S,I,A)}add(e){assertExtPoint(e);const{x:n,y:a,z:o,t:c}=this,{x:u,y:l,z:p,t:b}=e,v=mod$1((a-n)*(l+u)),x=mod$1((a+n)*(l-u)),_=mod$1(x-v);if(_===_0n$1)return this.double();const E=mod$1(o*_2n$1*b),$=mod$1(c*_2n$1*p),S=$+E,A=x+v,I=$-E,O=mod$1(S*_),F=mod$1(A*I),U=mod$1(S*I),G=mod$1(_*A);return new ExtendedPoint(O,F,G,U)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const n=1+256/e,a=[];let o=this,c=o;for(let u=0;u<n;u++){c=o,a.push(c);for(let l=1;l<2**(e-1);l++)c=c.add(o),a.push(c);o=c.double()}return a}wNAF(e,n){!n&&this.equals(ExtendedPoint.BASE)&&(n=Point$2.BASE);const a=n&&n._WINDOW_SIZE||1;if(256%a)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let o=n&&pointPrecomputes$1.get(n);o||(o=this.precomputeWindow(a),n&&a!==1&&(o=ExtendedPoint.normalizeZ(o),pointPrecomputes$1.set(n,o)));let c=ExtendedPoint.ZERO,u=ExtendedPoint.BASE;const l=1+256/a,p=2**(a-1),b=BigInt(2**a-1),v=2**a,x=BigInt(a);for(let _=0;_<l;_++){const E=_*p;let $=Number(e&b);e>>=x,$>p&&($-=v,e+=_1n$1);const S=E,A=E+Math.abs($)-1,I=_%2!==0,O=$<0;$===0?u=u.add(constTimeNegate$1(I,o[S])):c=c.add(constTimeNegate$1(O,o[A]))}return ExtendedPoint.normalizeZ([c,u])[0]}multiply(e,n){return this.wNAF(normalizeScalar$1(e,CURVE$1.l),n)}multiplyUnsafe(e){let n=normalizeScalar$1(e,CURVE$1.l,!1);const a=ExtendedPoint.BASE,o=ExtendedPoint.ZERO;if(n===_0n$1)return o;if(this.equals(o)||n===_1n$1)return this;if(this.equals(a))return this.wNAF(n);let c=o,u=this;for(;n>_0n$1;)n&_1n$1&&(c=c.add(u)),u=u.double(),n>>=_1n$1;return c}isSmallOrder(){return this.multiplyUnsafe(CURVE$1.h).equals(ExtendedPoint.ZERO)}isTorsionFree(){let e=this.multiplyUnsafe(CURVE$1.l/_2n$1).double();return CURVE$1.l%_2n$1&&(e=e.add(this)),e.equals(ExtendedPoint.ZERO)}toAffine(e){const{x:n,y:a,z:o}=this,c=this.equals(ExtendedPoint.ZERO);e==null&&(e=c?_8n$1:invert$1(o));const u=mod$1(n*e),l=mod$1(a*e),p=mod$1(o*e);if(c)return Point$2.ZERO;if(p!==_1n$1)throw new Error("invZ was invalid");return new Point$2(u,l)}fromRistrettoBytes(){legacyRist()}toRistrettoBytes(){legacyRist()}fromRistrettoHash(){legacyRist()}}ExtendedPoint.BASE=new ExtendedPoint(CURVE$1.Gx,CURVE$1.Gy,_1n$1,mod$1(CURVE$1.Gx*CURVE$1.Gy));ExtendedPoint.ZERO=new ExtendedPoint(_0n$1,_1n$1,_1n$1,_0n$1);function constTimeNegate$1(t,e){const n=e.negate();return t?n:e}function assertExtPoint(t){if(!(t instanceof ExtendedPoint))throw new TypeError("ExtendedPoint expected")}function assertRstPoint(t){if(!(t instanceof RistrettoPoint))throw new TypeError("RistrettoPoint expected")}function legacyRist(){throw new Error("Legacy method: switch to RistrettoPoint")}class RistrettoPoint{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:n}=CURVE$1,a=mod$1(SQRT_M1*e*e),o=mod$1((a+_1n$1)*ONE_MINUS_D_SQ);let c=BigInt(-1);const u=mod$1((c-n*a)*mod$1(a+n));let{isValid:l,value:p}=uvRatio(o,u),b=mod$1(p*e);edIsNegative(b)||(b=mod$1(-b)),l||(p=b),l||(c=a);const v=mod$1(c*(a-_1n$1)*D_MINUS_ONE_SQ-u),x=p*p,_=mod$1((p+p)*u),E=mod$1(v*SQRT_AD_MINUS_ONE),$=mod$1(_1n$1-x),S=mod$1(_1n$1+x);return new ExtendedPoint(mod$1(_*S),mod$1($*E),mod$1(E*S),mod$1(_*$))}static hashToCurve(e){e=ensureBytes$1(e,64);const n=bytes255ToNumberLE(e.slice(0,32)),a=this.calcElligatorRistrettoMap(n),o=bytes255ToNumberLE(e.slice(32,64)),c=this.calcElligatorRistrettoMap(o);return new RistrettoPoint(a.add(c))}static fromHex(e){e=ensureBytes$1(e,32);const{a:n,d:a}=CURVE$1,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",c=bytes255ToNumberLE(e);if(!equalBytes(numberTo32BytesLE(c),e)||edIsNegative(c))throw new Error(o);const u=mod$1(c*c),l=mod$1(_1n$1+n*u),p=mod$1(_1n$1-n*u),b=mod$1(l*l),v=mod$1(p*p),x=mod$1(n*a*b-v),{isValid:_,value:E}=invertSqrt(mod$1(x*v)),$=mod$1(E*p),S=mod$1(E*$*x);let A=mod$1((c+c)*$);edIsNegative(A)&&(A=mod$1(-A));const I=mod$1(l*S),O=mod$1(A*I);if(!_||edIsNegative(O)||I===_0n$1)throw new Error(o);return new RistrettoPoint(new ExtendedPoint(A,I,_1n$1,O))}toRawBytes(){let{x:e,y:n,z:a,t:o}=this.ep;const c=mod$1(mod$1(a+n)*mod$1(a-n)),u=mod$1(e*n),l=mod$1(u*u),{value:p}=invertSqrt(mod$1(c*l)),b=mod$1(p*c),v=mod$1(p*u),x=mod$1(b*v*o);let _;if(edIsNegative(o*x)){let $=mod$1(n*SQRT_M1),S=mod$1(e*SQRT_M1);e=$,n=S,_=mod$1(b*INVSQRT_A_MINUS_D)}else _=v;edIsNegative(e*x)&&(n=mod$1(-n));let E=mod$1((a-n)*_);return edIsNegative(E)&&(E=mod$1(-E)),numberTo32BytesLE(E)}toHex(){return bytesToHex$2(this.toRawBytes())}toString(){return this.toHex()}equals(e){assertRstPoint(e);const n=this.ep,a=e.ep,o=mod$1(n.x*a.y)===mod$1(n.y*a.x),c=mod$1(n.y*a.y)===mod$1(n.x*a.x);return o||c}add(e){return assertRstPoint(e),new RistrettoPoint(this.ep.add(e.ep))}subtract(e){return assertRstPoint(e),new RistrettoPoint(this.ep.subtract(e.ep))}multiply(e){return new RistrettoPoint(this.ep.multiply(e))}multiplyUnsafe(e){return new RistrettoPoint(this.ep.multiplyUnsafe(e))}}RistrettoPoint.BASE=new RistrettoPoint(ExtendedPoint.BASE);RistrettoPoint.ZERO=new RistrettoPoint(ExtendedPoint.ZERO);const pointPrecomputes$1=new WeakMap;let Point$2=class Dt{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,pointPrecomputes$1.delete(this)}static fromHex(e,n=!0){const{d:a,P:o}=CURVE$1;e=ensureBytes$1(e,32);const c=e.slice();c[31]=e[31]&-129;const u=bytesToNumberLE(c);if(n&&u>=o)throw new Error("Expected 0 < hex < P");if(!n&&u>=POW_2_256$1)throw new Error("Expected 0 < hex < 2**256");const l=mod$1(u*u),p=mod$1(l-_1n$1),b=mod$1(a*l+_1n$1);let{isValid:v,value:x}=uvRatio(p,b);if(!v)throw new Error("Point.fromHex: invalid y coordinate");const _=(x&_1n$1)===_1n$1;return(e[31]&128)!==0!==_&&(x=mod$1(-x)),new Dt(x,u)}static async fromPrivateKey(e){return(await getExtendedPublicKey(e)).point}toRawBytes(){const e=numberTo32BytesLE(this.y);return e[31]|=this.x&_1n$1?128:0,e}toHex(){return bytesToHex$2(this.toRawBytes())}toX25519(){const{y:e}=this,n=mod$1((_1n$1+e)*invert$1(_1n$1-e));return numberTo32BytesLE(n)}isTorsionFree(){return ExtendedPoint.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Dt(mod$1(-this.x),this.y)}add(e){return ExtendedPoint.fromAffine(this).add(ExtendedPoint.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ExtendedPoint.fromAffine(this).multiply(e,this).toAffine()}};Point$2.BASE=new Point$2(CURVE$1.Gx,CURVE$1.Gy);Point$2.ZERO=new Point$2(_0n$1,_1n$1);let Signature$2=class qt{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromHex(e){const n=ensureBytes$1(e,64),a=Point$2.fromHex(n.slice(0,32),!1),o=bytesToNumberLE(n.slice(32,64));return new qt(a,o)}assertValidity(){const{r:e,s:n}=this;if(!(e instanceof Point$2))throw new Error("Expected Point instance");return normalizeScalar$1(n,CURVE$1.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(numberTo32BytesLE(this.s),32),e}toHex(){return bytesToHex$2(this.toRawBytes())}};function concatBytes$1(...t){if(!t.every(a=>a instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(t.length===1)return t[0];const e=t.reduce((a,o)=>a+o.length,0),n=new Uint8Array(e);for(let a=0,o=0;a<t.length;a++){const c=t[a];n.set(c,o),o+=c.length}return n}const hexes$1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$2(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=hexes$1[t[n]];return e}function hexToBytes$2(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const a=n*2,o=t.slice(a,a+2),c=Number.parseInt(o,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");e[n]=c}return e}function numberTo32BytesBE(t){const n=t.toString(16).padStart(64,"0");return hexToBytes$2(n)}function numberTo32BytesLE(t){return numberTo32BytesBE(t).reverse()}function edIsNegative(t){return(mod$1(t)&_1n$1)===_1n$1}function bytesToNumberLE(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+bytesToHex$2(Uint8Array.from(t).reverse()))}const MAX_255B=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function bytes255ToNumberLE(t){return mod$1(bytesToNumberLE(t)&MAX_255B)}function mod$1(t,e=CURVE$1.P){const n=t%e;return n>=_0n$1?n:e+n}function invert$1(t,e=CURVE$1.P){if(t===_0n$1||e<=_0n$1)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=mod$1(t,e),a=e,o=_0n$1,c=_1n$1;for(;n!==_0n$1;){const l=a/n,p=a%n,b=o-c*l;a=n,n=p,o=c,c=b}if(a!==_1n$1)throw new Error("invert: does not exist");return mod$1(o,e)}function invertBatch$1(t,e=CURVE$1.P){const n=new Array(t.length),a=t.reduce((c,u,l)=>u===_0n$1?c:(n[l]=c,mod$1(c*u,e)),_1n$1),o=invert$1(a,e);return t.reduceRight((c,u,l)=>u===_0n$1?c:(n[l]=mod$1(c*n[l],e),mod$1(c*u,e)),o),n}function pow2$1(t,e){const{P:n}=CURVE$1;let a=t;for(;e-- >_0n$1;)a*=a,a%=n;return a}function pow_2_252_3(t){const{P:e}=CURVE$1,n=BigInt(5),a=BigInt(10),o=BigInt(20),c=BigInt(40),u=BigInt(80),p=t*t%e*t%e,b=pow2$1(p,_2n$1)*p%e,v=pow2$1(b,_1n$1)*t%e,x=pow2$1(v,n)*v%e,_=pow2$1(x,a)*x%e,E=pow2$1(_,o)*_%e,$=pow2$1(E,c)*E%e,S=pow2$1($,u)*$%e,A=pow2$1(S,u)*$%e,I=pow2$1(A,a)*x%e;return{pow_p_5_8:pow2$1(I,_2n$1)*t%e,b2:p}}function uvRatio(t,e){const n=mod$1(e*e*e),a=mod$1(n*n*e),o=pow_2_252_3(t*a).pow_p_5_8;let c=mod$1(t*n*o);const u=mod$1(e*c*c),l=c,p=mod$1(c*SQRT_M1),b=u===t,v=u===mod$1(-t),x=u===mod$1(-t*SQRT_M1);return b&&(c=l),(v||x)&&(c=p),edIsNegative(c)&&(c=mod$1(-c)),{isValid:b||v,value:c}}function invertSqrt(t){return uvRatio(_1n$1,t)}function modlLE(t){return mod$1(bytesToNumberLE(t),CURVE$1.l)}function equalBytes(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ensureBytes$1(t,e){const n=t instanceof Uint8Array?Uint8Array.from(t):hexToBytes$2(t);if(typeof e=="number"&&n.length!==e)throw new Error(`Expected ${e} bytes`);return n}function normalizeScalar$1(t,e,n=!0){if(!e)throw new TypeError("Specify max value");if(typeof t=="number"&&Number.isSafeInteger(t)&&(t=BigInt(t)),typeof t=="bigint"&&t<e){if(n){if(_0n$1<t)return t}else if(_0n$1<=t)return t}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function adjustBytes25519(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function checkPrivateKey(t){if(t=typeof t=="bigint"||typeof t=="number"?numberTo32BytesBE(normalizeScalar$1(t,POW_2_256$1)):ensureBytes$1(t),t.length!==32)throw new Error("Expected 32 bytes");return t}function getKeyFromHash(t){const e=adjustBytes25519(t.slice(0,32)),n=t.slice(32,64),a=modlLE(e),o=Point$2.BASE.multiply(a),c=o.toRawBytes();return{head:e,prefix:n,scalar:a,point:o,pointBytes:c}}let _sha512Sync;async function getExtendedPublicKey(t){return getKeyFromHash(await utils$2.sha512(checkPrivateKey(t)))}async function getPublicKey$1(t){return(await getExtendedPublicKey(t)).pointBytes}async function sign$1(t,e){t=ensureBytes$1(t);const{prefix:n,scalar:a,pointBytes:o}=await getExtendedPublicKey(e),c=modlLE(await utils$2.sha512(n,t)),u=Point$2.BASE.multiply(c),l=modlLE(await utils$2.sha512(u.toRawBytes(),o,t)),p=mod$1(c+l*a,CURVE$1.l);return new Signature$2(u,p).toRawBytes()}function prepareVerification(t,e,n){e=ensureBytes$1(e),n instanceof Point$2||(n=Point$2.fromHex(n,!1));const{r:a,s:o}=t instanceof Signature$2?t.assertValidity():Signature$2.fromHex(t),c=ExtendedPoint.BASE.multiplyUnsafe(o);return{r:a,s:o,SB:c,pub:n,msg:e}}function finishVerification(t,e,n,a){const o=modlLE(a),c=ExtendedPoint.fromAffine(t).multiplyUnsafe(o);return ExtendedPoint.fromAffine(e).add(c).subtract(n).multiplyUnsafe(CURVE$1.h).equals(ExtendedPoint.ZERO)}async function verify$1(t,e,n){const{r:a,SB:o,msg:c,pub:u}=prepareVerification(t,e,n),l=await utils$2.sha512(a.toRawBytes(),u.toRawBytes(),c);return finishVerification(u,a,o,l)}Point$2.BASE._setWindowSize(8);const crypto$4={node:nodeCrypto,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},utils$2={bytesToHex:bytesToHex$2,hexToBytes:hexToBytes$2,concatBytes:concatBytes$1,getExtendedPublicKey,mod:mod$1,invert:invert$1,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if(t=ensureBytes$1(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return mod$1(bytesToNumberLE(t),CURVE$1.l-_1n$1)+_1n$1},randomBytes:(t=32)=>{if(crypto$4.web)return crypto$4.web.getRandomValues(new Uint8Array(t));if(crypto$4.node){const{randomBytes:e}=crypto$4.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$2.randomBytes(32),sha512:async(...t)=>{const e=concatBytes$1(...t);if(crypto$4.web){const n=await crypto$4.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(n)}else{if(crypto$4.node)return Uint8Array.from(crypto$4.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Point$2.BASE){const n=e.equals(Point$2.BASE)?e:new Point$2(e.x,e.y);return n._setWindowSize(t),n.multiply(_2n$1),n},sha512Sync:void 0};Object.defineProperties(utils$2,{sha512Sync:{configurable:!1,get(){return _sha512Sync},set(t){_sha512Sync||(_sha512Sync=t)}}});var minimalExports$1=requireMinimal$2();const util$1=getDefaultExportFromCjs(minimalExports$1);function configure$1(){util$1._configure(),ReaderClass._configure(ReaderBufferClass),WriterClass._configure(WriterBufferClass)}configure$1();const methods$1=["uint64","int64","sint64","fixed64","sfixed64"];function patchReader$1(t){for(const e of methods$1){if(t[e]==null)continue;const n=t[e];t[e]=function(){return BigInt(n.call(this).toString())}}return t}function reader$3(t){return patchReader$1(new ReaderClass(t))}function patchWriter$1(t){for(const e of methods$1){if(t[e]==null)continue;const n=t[e];t[e]=function(a){return n.call(this,a.toString())}}return t}function writer$2(){return patchWriter$1(WriterClass.create())}function decodeMessage$1(t,e){const n=reader$3(t instanceof Uint8Array?t:t.subarray());return e.decode(n)}function encodeMessage$1(t,e){const n=writer$2();return e.encode(t,n,{lengthDelimited:!1}),n.finish()}var CODEC_TYPES$1;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(CODEC_TYPES$1||(CODEC_TYPES$1={}));function createCodec$3(t,e,n,a){return{name:t,type:e,encode:n,decode:a}}function enumeration$1(t){function e(o){if(t[o.toString()]==null)throw new Error("Invalid enum value");return t[o]}const n=function(c,u){const l=e(c);u.int32(l)},a=function(c){const u=c.int32();return e(u)};return createCodec$3("enum",CODEC_TYPES$1.VARINT,n,a)}function message$1(t,e){return createCodec$3("message",CODEC_TYPES$1.LENGTH_DELIMITED,t,e)}var forge$6=forge$s,sha512$1=forge$6.sha512=forge$6.sha512||{};forge$6.md.sha512=forge$6.md.algorithms.sha512=sha512$1;var sha384=forge$6.sha384=forge$6.sha512.sha384=forge$6.sha512.sha384||{};sha384.create=function(){return sha512$1.create("SHA-384")};forge$6.md.sha384=forge$6.md.algorithms.sha384=sha384;forge$6.sha512.sha256=forge$6.sha512.sha256||{create:function(){return sha512$1.create("SHA-512/256")}};forge$6.md["sha512/256"]=forge$6.md.algorithms["sha512/256"]=forge$6.sha512.sha256;forge$6.sha512.sha224=forge$6.sha512.sha224||{create:function(){return sha512$1.create("SHA-512/224")}};forge$6.md["sha512/224"]=forge$6.md.algorithms["sha512/224"]=forge$6.sha512.sha224;sha512$1.create=function(t){if(_initialized||_init(),typeof t>"u"&&(t="SHA-512"),!(t in _states))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=_states[t],n=null,a=forge$6.util.createBuffer(),o=new Array(80),c=0;c<80;++c)o[c]=new Array(2);var u=64;switch(t){case"SHA-384":u=48;break;case"SHA-512/256":u=32;break;case"SHA-512/224":u=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:u,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var p=l.messageLengthSize/4,b=0;b<p;++b)l.fullMessageLength.push(0);a=forge$6.util.createBuffer(),n=new Array(e.length);for(var b=0;b<e.length;++b)n[b]=e[b].slice(0);return l},l.start(),l.update=function(p,b){b==="utf8"&&(p=forge$6.util.encodeUtf8(p));var v=p.length;l.messageLength+=v,v=[v/4294967296>>>0,v>>>0];for(var x=l.fullMessageLength.length-1;x>=0;--x)l.fullMessageLength[x]+=v[1],v[1]=v[0]+(l.fullMessageLength[x]/4294967296>>>0),l.fullMessageLength[x]=l.fullMessageLength[x]>>>0,v[0]=v[1]/4294967296>>>0;return a.putBytes(p),_update(n,o,a),(a.read>2048||a.length()===0)&&a.compact(),l},l.digest=function(){var p=forge$6.util.createBuffer();p.putBytes(a.bytes());var b=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,v=b&l.blockLength-1;p.putBytes(_padding.substr(0,l.blockLength-v));for(var x,_,E=l.fullMessageLength[0]*8,$=0;$<l.fullMessageLength.length-1;++$)x=l.fullMessageLength[$+1]*8,_=x/4294967296>>>0,E+=_,p.putInt32(E>>>0),E=x>>>0;p.putInt32(E);for(var S=new Array(n.length),$=0;$<n.length;++$)S[$]=n[$].slice(0);_update(S,o,p);var A=forge$6.util.createBuffer(),I;t==="SHA-512"?I=S.length:t==="SHA-384"?I=S.length-2:I=S.length-4;for(var $=0;$<I;++$)A.putInt32(S[$][0]),($!==I-1||t!=="SHA-512/224")&&A.putInt32(S[$][1]);return A},l};var _padding=null,_initialized=!1,_k=null,_states=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge$6.util.fillString(String.fromCharCode(0),128),_k=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_states={},_states["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_states["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_states["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_states["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_initialized=!0}function _update(t,e,n){for(var a,o,c,u,l,p,b,v,x,_,E,$,S,A,I,O,F,U,G,J,k,ne,ee,de,ae,L,P,T,C,q,z,X,W,M,D,B=n.length();B>=128;){for(C=0;C<16;++C)e[C][0]=n.getInt32()>>>0,e[C][1]=n.getInt32()>>>0;for(;C<80;++C)X=e[C-2],q=X[0],z=X[1],a=((q>>>19|z<<13)^(z>>>29|q<<3)^q>>>6)>>>0,o=((q<<13|z>>>19)^(z<<3|q>>>29)^(q<<26|z>>>6))>>>0,M=e[C-15],q=M[0],z=M[1],c=((q>>>1|z<<31)^(q>>>8|z<<24)^q>>>7)>>>0,u=((q<<31|z>>>1)^(q<<24|z>>>8)^(q<<25|z>>>7))>>>0,W=e[C-7],D=e[C-16],z=o+W[1]+u+D[1],e[C][0]=a+W[0]+c+D[0]+(z/4294967296>>>0)>>>0,e[C][1]=z>>>0;for(S=t[0][0],A=t[0][1],I=t[1][0],O=t[1][1],F=t[2][0],U=t[2][1],G=t[3][0],J=t[3][1],k=t[4][0],ne=t[4][1],ee=t[5][0],de=t[5][1],ae=t[6][0],L=t[6][1],P=t[7][0],T=t[7][1],C=0;C<80;++C)b=((k>>>14|ne<<18)^(k>>>18|ne<<14)^(ne>>>9|k<<23))>>>0,v=((k<<18|ne>>>14)^(k<<14|ne>>>18)^(ne<<23|k>>>9))>>>0,x=(ae^k&(ee^ae))>>>0,_=(L^ne&(de^L))>>>0,l=((S>>>28|A<<4)^(A>>>2|S<<30)^(A>>>7|S<<25))>>>0,p=((S<<4|A>>>28)^(A<<30|S>>>2)^(A<<25|S>>>7))>>>0,E=(S&I|F&(S^I))>>>0,$=(A&O|U&(A^O))>>>0,z=T+v+_+_k[C][1]+e[C][1],a=P+b+x+_k[C][0]+e[C][0]+(z/4294967296>>>0)>>>0,o=z>>>0,z=p+$,c=l+E+(z/4294967296>>>0)>>>0,u=z>>>0,P=ae,T=L,ae=ee,L=de,ee=k,de=ne,z=J+o,k=G+a+(z/4294967296>>>0)>>>0,ne=z>>>0,G=F,J=U,F=I,U=O,I=S,O=A,z=o+u,S=a+c+(z/4294967296>>>0)>>>0,A=z>>>0;z=t[0][1]+A,t[0][0]=t[0][0]+S+(z/4294967296>>>0)>>>0,t[0][1]=z>>>0,z=t[1][1]+O,t[1][0]=t[1][0]+I+(z/4294967296>>>0)>>>0,t[1][1]=z>>>0,z=t[2][1]+U,t[2][0]=t[2][0]+F+(z/4294967296>>>0)>>>0,t[2][1]=z>>>0,z=t[3][1]+J,t[3][0]=t[3][0]+G+(z/4294967296>>>0)>>>0,t[3][1]=z>>>0,z=t[4][1]+ne,t[4][0]=t[4][0]+k+(z/4294967296>>>0)>>>0,t[4][1]=z>>>0,z=t[5][1]+de,t[5][0]=t[5][0]+ee+(z/4294967296>>>0)>>>0,t[5][1]=z>>>0,z=t[6][1]+L,t[6][0]=t[6][0]+ae+(z/4294967296>>>0)>>>0,t[6][1]=z>>>0,z=t[7][1]+T,t[7][0]=t[7][0]+P+(z/4294967296>>>0)>>>0,t[7][1]=z>>>0,B-=128}}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),_3n=BigInt(3),_8n=BigInt(8),CURVE=Object.freeze({a:_0n,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_1n,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),divNearest=(t,e)=>(t+e/_2n)/e,endo={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=CURVE,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),a=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=n,u=BigInt("0x100000000000000000000000000000000"),l=divNearest(c*t,e),p=divNearest(-a*t,e);let b=mod(t-l*n-p*o,e),v=mod(-l*a-p*c,e);const x=b>u,_=v>u;if(x&&(b=e-b),_&&(v=e-v),b>u||v>u)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:x,k1:b,k2neg:_,k2:v}}},fieldLen=32,groupLen=32,hashLen=32,compressedLen=fieldLen+1,uncompressedLen=2*fieldLen+1;function weierstrass(t){const{a:e,b:n}=CURVE,a=mod(t*t),o=mod(a*t);return mod(o+e*t+n)}const USE_ENDOMORPHISM=CURVE.a===_0n;class ShaError extends Error{constructor(e){super(e)}}function assertJacPoint(t){if(!(t instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(e,n,a){this.x=e,this.y=n,this.z=a}static fromAffine(e){if(!(e instanceof Point$1))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Point$1.ZERO)?JacobianPoint.ZERO:new JacobianPoint(e.x,e.y,_1n)}static toAffineBatch(e){const n=invertBatch(e.map(a=>a.z));return e.map((a,o)=>a.toAffine(n[o]))}static normalizeZ(e){return JacobianPoint.toAffineBatch(e).map(JacobianPoint.fromAffine)}equals(e){assertJacPoint(e);const{x:n,y:a,z:o}=this,{x:c,y:u,z:l}=e,p=mod(o*o),b=mod(l*l),v=mod(n*b),x=mod(c*p),_=mod(mod(a*l)*b),E=mod(mod(u*o)*p);return v===x&&_===E}negate(){return new JacobianPoint(this.x,mod(-this.y),this.z)}double(){const{x:e,y:n,z:a}=this,o=mod(e*e),c=mod(n*n),u=mod(c*c),l=e+c,p=mod(_2n*(mod(l*l)-o-u)),b=mod(_3n*o),v=mod(b*b),x=mod(v-_2n*p),_=mod(b*(p-x)-_8n*u),E=mod(_2n*n*a);return new JacobianPoint(x,_,E)}add(e){assertJacPoint(e);const{x:n,y:a,z:o}=this,{x:c,y:u,z:l}=e;if(c===_0n||u===_0n)return this;if(n===_0n||a===_0n)return e;const p=mod(o*o),b=mod(l*l),v=mod(n*b),x=mod(c*p),_=mod(mod(a*l)*b),E=mod(mod(u*o)*p),$=mod(x-v),S=mod(E-_);if($===_0n)return S===_0n?this.double():JacobianPoint.ZERO;const A=mod($*$),I=mod($*A),O=mod(v*A),F=mod(S*S-I-_2n*O),U=mod(S*(O-F)-_*I),G=mod(o*l*$);return new JacobianPoint(F,U,G)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const n=JacobianPoint.ZERO;if(typeof e=="bigint"&&e===_0n)return n;let a=normalizeScalar(e);if(a===_1n)return this;if(!USE_ENDOMORPHISM){let x=n,_=this;for(;a>_0n;)a&_1n&&(x=x.add(_)),_=_.double(),a>>=_1n;return x}let{k1neg:o,k1:c,k2neg:u,k2:l}=endo.splitScalar(a),p=n,b=n,v=this;for(;c>_0n||l>_0n;)c&_1n&&(p=p.add(v)),l&_1n&&(b=b.add(v)),v=v.double(),c>>=_1n,l>>=_1n;return o&&(p=p.negate()),u&&(b=b.negate()),b=new JacobianPoint(mod(b.x*endo.beta),b.y,b.z),p.add(b)}precomputeWindow(e){const n=USE_ENDOMORPHISM?128/e+1:256/e+1,a=[];let o=this,c=o;for(let u=0;u<n;u++){c=o,a.push(c);for(let l=1;l<2**(e-1);l++)c=c.add(o),a.push(c);o=c.double()}return a}wNAF(e,n){!n&&this.equals(JacobianPoint.BASE)&&(n=Point$1.BASE);const a=n&&n._WINDOW_SIZE||1;if(256%a)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let o=n&&pointPrecomputes.get(n);o||(o=this.precomputeWindow(a),n&&a!==1&&(o=JacobianPoint.normalizeZ(o),pointPrecomputes.set(n,o)));let c=JacobianPoint.ZERO,u=JacobianPoint.BASE;const l=1+(USE_ENDOMORPHISM?128/a:256/a),p=2**(a-1),b=BigInt(2**a-1),v=2**a,x=BigInt(a);for(let _=0;_<l;_++){const E=_*p;let $=Number(e&b);e>>=x,$>p&&($-=v,e+=_1n);const S=E,A=E+Math.abs($)-1,I=_%2!==0,O=$<0;$===0?u=u.add(constTimeNegate(I,o[S])):c=c.add(constTimeNegate(O,o[A]))}return{p:c,f:u}}multiply(e,n){let a=normalizeScalar(e),o,c;if(USE_ENDOMORPHISM){const{k1neg:u,k1:l,k2neg:p,k2:b}=endo.splitScalar(a);let{p:v,f:x}=this.wNAF(l,n),{p:_,f:E}=this.wNAF(b,n);v=constTimeNegate(u,v),_=constTimeNegate(p,_),_=new JacobianPoint(mod(_.x*endo.beta),_.y,_.z),o=v.add(_),c=x.add(E)}else{const{p:u,f:l}=this.wNAF(a,n);o=u,c=l}return JacobianPoint.normalizeZ([o,c])[0]}toAffine(e){const{x:n,y:a,z:o}=this,c=this.equals(JacobianPoint.ZERO);e==null&&(e=c?_8n:invert(o));const u=e,l=mod(u*u),p=mod(l*u),b=mod(n*l),v=mod(a*p),x=mod(o*u);if(c)return Point$1.ZERO;if(x!==_1n)throw new Error("invZ was invalid");return new Point$1(b,v)}}JacobianPoint.BASE=new JacobianPoint(CURVE.Gx,CURVE.Gy,_1n);JacobianPoint.ZERO=new JacobianPoint(_0n,_1n,_0n);function constTimeNegate(t,e){const n=e.negate();return t?n:e}const pointPrecomputes=new WeakMap;let Point$1=class yt{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,pointPrecomputes.delete(this)}hasEvenY(){return this.y%_2n===_0n}static fromCompressedHex(e){const n=e.length===32,a=bytesToNumber(n?e:e.subarray(1));if(!isValidFieldElement(a))throw new Error("Point is not on curve");const o=weierstrass(a);let c=sqrtMod(o);const u=(c&_1n)===_1n;n?u&&(c=mod(-c)):(e[0]&1)===1!==u&&(c=mod(-c));const l=new yt(a,c);return l.assertValidity(),l}static fromUncompressedHex(e){const n=bytesToNumber(e.subarray(1,fieldLen+1)),a=bytesToNumber(e.subarray(fieldLen+1,fieldLen*2+1)),o=new yt(n,a);return o.assertValidity(),o}static fromHex(e){const n=ensureBytes(e),a=n.length,o=n[0];if(a===fieldLen)return this.fromCompressedHex(n);if(a===compressedLen&&(o===2||o===3))return this.fromCompressedHex(n);if(a===uncompressedLen&&o===4)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${a}`)}static fromPrivateKey(e){return yt.BASE.multiply(normalizePrivateKey(e))}static fromSignature(e,n,a){const{r:o,s:c}=normalizeSignature(n);if(![0,1,2,3].includes(a))throw new Error("Cannot recover: invalid recovery bit");const u=truncateHash(ensureBytes(e)),{n:l}=CURVE,p=a===2||a===3?o+l:o,b=invert(p,l),v=mod(-u*b,l),x=mod(c*b,l),_=a&1?"03":"02",E=yt.fromHex(_+numTo32bStr(p)),$=yt.BASE.multiplyAndAddUnsafe(E,v,x);if(!$)throw new Error("Cannot recover signature: point at infinify");return $.assertValidity(),$}toRawBytes(e=!1){return hexToBytes$1(this.toHex(e))}toHex(e=!1){const n=numTo32bStr(this.x);return e?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:n,y:a}=this;if(!isValidFieldElement(n)||!isValidFieldElement(a))throw new Error(e);const o=mod(a*a),c=weierstrass(n);if(mod(o-c)!==_0n)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new yt(this.x,mod(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(e){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return JacobianPoint.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,n,a){const o=JacobianPoint.fromAffine(this),c=n===_0n||n===_1n||this!==yt.BASE?o.multiplyUnsafe(n):o.multiply(n),u=JacobianPoint.fromAffine(e).multiplyUnsafe(a),l=c.add(u);return l.equals(JacobianPoint.ZERO)?void 0:l.toAffine()}};Point$1.BASE=new Point$1(CURVE.Gx,CURVE.Gy);Point$1.ZERO=new Point$1(_0n,_0n);function sliceDER(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function parseDERInt(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${bytesToHex$1(t)}`);const e=t[1],n=t.subarray(2,e+2);if(!e||n.length!==e)throw new Error("Invalid signature integer: wrong length");if(n[0]===0&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(n),left:t.subarray(e+2)}}function parseDERSignature(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${bytesToHex$1(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:n}=parseDERInt(t.subarray(2)),{data:a,left:o}=parseDERInt(n);if(o.length)throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex$1(o)}`);return{r:e,s:a}}let Signature$1=class Nt{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromCompact(e){const n=e instanceof Uint8Array,a="Signature.fromCompact";if(typeof e!="string"&&!n)throw new TypeError(`${a}: Expected string or Uint8Array`);const o=n?bytesToHex$1(e):e;if(o.length!==128)throw new Error(`${a}: Expected 64-byte hex`);return new Nt(hexToNumber(o.slice(0,64)),hexToNumber(o.slice(64,128)))}static fromDER(e){const n=e instanceof Uint8Array;if(typeof e!="string"&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:a,s:o}=parseDERSignature(n?e:hexToBytes$1(e));return new Nt(a,o)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:n}=this;if(!isWithinCurveOrder(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=CURVE.n>>_1n;return this.s>e}normalizeS(){return this.hasHighS()?new Nt(this.r,mod(-this.s,CURVE.n)):this}toDERRawBytes(){return hexToBytes$1(this.toDERHex())}toDERHex(){const e=sliceDER(numberToHexUnpadded(this.s)),n=sliceDER(numberToHexUnpadded(this.r)),a=e.length/2,o=n.length/2,c=numberToHexUnpadded(a),u=numberToHexUnpadded(o);return`30${numberToHexUnpadded(o+a+4)}02${u}${n}02${c}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes$1(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}};function concatBytes(...t){if(!t.every(a=>a instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((a,o)=>a+o.length,0),n=new Uint8Array(e);for(let a=0,o=0;a<t.length;a++){const c=t[a];n.set(c,o),o+=c.length}return n}const hexes=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$1(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let n=0;n<t.length;n++)e+=hexes[t[n]];return e}const POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(_0n<=t&&t<POW_2_256))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function numTo32b(t){const e=hexToBytes$1(numTo32bStr(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function numberToHexUnpadded(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function hexToNumber(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function hexToBytes$1(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const a=n*2,o=t.slice(a,a+2),c=Number.parseInt(o,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");e[n]=c}return e}function bytesToNumber(t){return hexToNumber(bytesToHex$1(t))}function ensureBytes(t){return t instanceof Uint8Array?Uint8Array.from(t):hexToBytes$1(t)}function normalizeScalar(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&isWithinCurveOrder(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod(t,e=CURVE.P){const n=t%e;return n>=_0n?n:e+n}function pow2(t,e){const{P:n}=CURVE;let a=t;for(;e-- >_0n;)a*=a,a%=n;return a}function sqrtMod(t){const{P:e}=CURVE,n=BigInt(6),a=BigInt(11),o=BigInt(22),c=BigInt(23),u=BigInt(44),l=BigInt(88),p=t*t*t%e,b=p*p*t%e,v=pow2(b,_3n)*b%e,x=pow2(v,_3n)*b%e,_=pow2(x,_2n)*p%e,E=pow2(_,a)*_%e,$=pow2(E,o)*E%e,S=pow2($,u)*$%e,A=pow2(S,l)*S%e,I=pow2(A,u)*$%e,O=pow2(I,_3n)*b%e,F=pow2(O,c)*E%e,U=pow2(F,n)*p%e,G=pow2(U,_2n);if(G*G%e!==t)throw new Error("Cannot find square root");return G}function invert(t,e=CURVE.P){if(t===_0n||e<=_0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=mod(t,e),a=e,o=_0n,c=_1n;for(;n!==_0n;){const l=a/n,p=a%n,b=o-c*l;a=n,n=p,o=c,c=b}if(a!==_1n)throw new Error("invert: does not exist");return mod(o,e)}function invertBatch(t,e=CURVE.P){const n=new Array(t.length),a=t.reduce((c,u,l)=>u===_0n?c:(n[l]=c,mod(c*u,e)),_1n),o=invert(a,e);return t.reduceRight((c,u,l)=>u===_0n?c:(n[l]=mod(c*n[l],e),mod(c*u,e)),o),n}function bits2int_2(t){const e=t.length*8-groupLen*8,n=bytesToNumber(t);return e>0?n>>BigInt(e):n}function truncateHash(t,e=!1){const n=bits2int_2(t);if(e)return n;const{n:a}=CURVE;return n>=a?n-a:n}let _sha256Sync,_hmacSha256Sync;class HmacDrbg{constructor(e,n){if(this.hashLen=e,this.qByteLen=n,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return utils$1.hmacSha256(this.k,...e)}hmacSync(...e){return _hmacSha256Sync(this.k,...e)}checkSync(){if(typeof _hmacSha256Sync!="function")throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const a=this.v.slice();n.push(a),e+=this.v.length}return concatBytes(...n)}generateSync(){this.checkSync(),this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const a=this.v.slice();n.push(a),e+=this.v.length}return concatBytes(...n)}}function isWithinCurveOrder(t){return _0n<t&&t<CURVE.n}function isValidFieldElement(t){return _0n<t&&t<CURVE.P}function kmdToSig(t,e,n,a=!0){const{n:o}=CURVE,c=truncateHash(t,!0);if(!isWithinCurveOrder(c))return;const u=invert(c,o),l=Point$1.BASE.multiply(c),p=mod(l.x,o);if(p===_0n)return;const b=mod(u*mod(e+n*p,o),o);if(b===_0n)return;let v=new Signature$1(p,b),x=(l.x===v.r?0:2)|Number(l.y&_1n);return a&&v.hasHighS()&&(v=v.normalizeS(),x^=1),{sig:v,recovery:x}}function normalizePrivateKey(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*groupLen)throw new Error("Expected 32 bytes of private key");e=hexToNumber(t)}else if(t instanceof Uint8Array){if(t.length!==groupLen)throw new Error("Expected 32 bytes of private key");e=bytesToNumber(t)}else throw new TypeError("Expected valid private key");if(!isWithinCurveOrder(e))throw new Error("Expected private key: 0 < key < n");return e}function normalizePublicKey(t){return t instanceof Point$1?(t.assertValidity(),t):Point$1.fromHex(t)}function normalizeSignature(t){if(t instanceof Signature$1)return t.assertValidity(),t;try{return Signature$1.fromDER(t)}catch{return Signature$1.fromCompact(t)}}function getPublicKey(t,e=!1){return Point$1.fromPrivateKey(t).toRawBytes(e)}function bits2int(t){const e=t.length>fieldLen?t.slice(0,fieldLen):t;return bytesToNumber(e)}function bits2octets(t){const e=bits2int(t),n=mod(e,CURVE.n);return int2octets(n<_0n?e:n)}function int2octets(t){return numTo32b(t)}function initSigArgs(t,e,n){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);const a=ensureBytes(t),o=normalizePrivateKey(e),c=[int2octets(o),bits2octets(a)];if(n!=null){n===!0&&(n=utils$1.randomBytes(fieldLen));const p=ensureBytes(n);if(p.length!==fieldLen)throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);c.push(p)}const u=concatBytes(...c),l=bits2int(a);return{seed:u,m:l,d:o}}function finalizeSig(t,e){const{sig:n,recovery:a}=t,{der:o,recovered:c}=Object.assign({canonical:!0,der:!0},e),u=o?n.toDERRawBytes():n.toCompactRawBytes();return c?[u,a]:u}async function sign(t,e,n={}){const{seed:a,m:o,d:c}=initSigArgs(t,e,n.extraEntropy),u=new HmacDrbg(hashLen,groupLen);await u.reseed(a);let l;for(;!(l=kmdToSig(await u.generate(),o,c,n.canonical));)await u.reseed();return finalizeSig(l,n)}const vopts={strict:!0};function verify(t,e,n,a=vopts){let o;try{o=normalizeSignature(t),e=ensureBytes(e)}catch{return!1}const{r:c,s:u}=o;if(a.strict&&o.hasHighS())return!1;const l=truncateHash(e);let p;try{p=normalizePublicKey(n)}catch{return!1}const{n:b}=CURVE,v=invert(u,b),x=mod(l*v,b),_=mod(c*v,b),E=Point$1.BASE.multiplyAndAddUnsafe(p,x,_);return E?mod(E.x,b)===c:!1}Point$1.BASE._setWindowSize(8);const crypto$3={node:nodeCrypto,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},TAGGED_HASH_PREFIXES={},utils$1={bytesToHex:bytesToHex$1,hexToBytes:hexToBytes$1,concatBytes,mod,invert,isValidPrivateKey(t){try{return normalizePrivateKey(t),!0}catch{return!1}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:t=>{t=ensureBytes(t);const e=groupLen+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const n=mod(bytesToNumber(t),CURVE.n-_1n)+_1n;return numTo32b(n)},randomBytes:(t=32)=>{if(crypto$3.web)return crypto$3.web.getRandomValues(new Uint8Array(t));if(crypto$3.node){const{randomBytes:e}=crypto$3.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$1.hashToPrivateKey(utils$1.randomBytes(groupLen+8)),precompute(t=8,e=Point$1.BASE){const n=e===Point$1.BASE?e:new Point$1(e.x,e.y);return n._setWindowSize(t),n.multiply(_3n),n},sha256:async(...t)=>{if(crypto$3.web){const e=await crypto$3.web.subtle.digest("SHA-256",concatBytes(...t));return new Uint8Array(e)}else if(crypto$3.node){const{createHash:e}=crypto$3.node,n=e("sha256");return t.forEach(a=>n.update(a)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(crypto$3.web){const n=await crypto$3.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),a=concatBytes(...e),o=await crypto$3.web.subtle.sign("HMAC",n,a);return new Uint8Array(o)}else if(crypto$3.node){const{createHmac:n}=crypto$3.node,a=n("sha256",t);return e.forEach(o=>a.update(o)),Uint8Array.from(a.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let n=TAGGED_HASH_PREFIXES[t];if(n===void 0){const a=await utils$1.sha256(Uint8Array.from(t,o=>o.charCodeAt(0)));n=concatBytes(a,a),TAGGED_HASH_PREFIXES[t]=n}return utils$1.sha256(n,...e)},taggedHashSync:(t,...e)=>{if(typeof _sha256Sync!="function")throw new ShaError("sha256Sync is undefined, you need to set it");let n=TAGGED_HASH_PREFIXES[t];if(n===void 0){const a=_sha256Sync(Uint8Array.from(t,o=>o.charCodeAt(0)));n=concatBytes(a,a),TAGGED_HASH_PREFIXES[t]=n}return _sha256Sync(n,...e)},_JacobianPoint:JacobianPoint};Object.defineProperties(utils$1,{sha256Sync:{configurable:!1,get(){return _sha256Sync},set(t){_sha256Sync||(_sha256Sync=t)}},hmacSha256Sync:{configurable:!1,get(){return _hmacSha256Sync},set(t){_hmacSha256Sync||(_hmacSha256Sync=t)}}});const ERR_IPNS_EXPIRED_RECORD="ERR_IPNS_EXPIRED_RECORD",ERR_UNRECOGNIZED_VALIDITY="ERR_UNRECOGNIZED_VALIDITY",ERR_SIGNATURE_CREATION="ERR_SIGNATURE_CREATION",ERR_SIGNATURE_VERIFICATION="ERR_SIGNATURE_VERIFICATION",ERR_UNRECOGNIZED_FORMAT="ERR_UNRECOGNIZED_FORMAT",ERR_UNDEFINED_PARAMETER="ERR_UNDEFINED_PARAMETER",ERR_INVALID_RECORD_DATA="ERR_INVALID_RECORD_DATA",ERR_INVALID_EMBEDDED_KEY="ERR_INVALID_EMBEDDED_KEY",ERR_MISSING_PRIVATE_KEY="ERR_MISSING_PRIVATE_KEY";function configure(){util$1._configure(),ReaderClass._configure(ReaderBufferClass),WriterClass._configure(WriterBufferClass)}configure();const methods=["uint64","int64","sint64","fixed64","sfixed64"];function patchReader(t){for(const e of methods){if(t[e]==null)continue;const n=t[e];t[e]=function(){return BigInt(n.call(this).toString())}}return t}function reader$2(t){return patchReader(new ReaderClass(t))}function patchWriter(t){for(const e of methods){if(t[e]==null)continue;const n=t[e];t[e]=function(a){return n.call(this,a.toString())}}return t}function writer$1(){return patchWriter(WriterClass.create())}function decodeMessage(t,e){const n=reader$2(t instanceof Uint8Array?t:t.subarray());return e.decode(n)}function encodeMessage(t,e){const n=writer$1();return e.encode(t,n,{lengthDelimited:!1}),n.finish()}var CODEC_TYPES;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(CODEC_TYPES||(CODEC_TYPES={}));function createCodec$2(t,e,n,a){return{name:t,type:e,encode:n,decode:a}}function enumeration(t){function e(o){if(t[o.toString()]==null)throw new Error("Invalid enum value");return t[o]}const n=function(c,u){const l=e(c);u.int32(l)},a=function(c){const u=c.int32();return e(u)};return createCodec$2("enum",CODEC_TYPES.VARINT,n,a)}function message(t,e){return createCodec$2("message",CODEC_TYPES.LENGTH_DELIMITED,t,e)}var IpnsEntry;(function(t){(function(a){a.EOL="EOL"})(t.ValidityType||(t.ValidityType={}));let e;(function(a){a[a.EOL=0]="EOL"})(e||(e={})),function(a){a.codec=()=>enumeration(e)}(t.ValidityType||(t.ValidityType={}));let n;t.codec=()=>(n==null&&(n=message((a,o,c={})=>{c.lengthDelimited!==!1&&o.fork(),a.value!=null&&(o.uint32(10),o.bytes(a.value)),a.signature!=null&&(o.uint32(18),o.bytes(a.signature)),a.validityType!=null&&(o.uint32(24),t.ValidityType.codec().encode(a.validityType,o)),a.validity!=null&&(o.uint32(34),o.bytes(a.validity)),a.sequence!=null&&(o.uint32(40),o.uint64(a.sequence)),a.ttl!=null&&(o.uint32(48),o.uint64(a.ttl)),a.pubKey!=null&&(o.uint32(58),o.bytes(a.pubKey)),a.signatureV2!=null&&(o.uint32(66),o.bytes(a.signatureV2)),a.data!=null&&(o.uint32(74),o.bytes(a.data)),c.lengthDelimited!==!1&&o.ldelim()},(a,o)=>{const c={},u=o==null?a.len:a.pos+o;for(;a.pos<u;){const l=a.uint32();switch(l>>>3){case 1:c.value=a.bytes();break;case 2:c.signature=a.bytes();break;case 3:c.validityType=t.ValidityType.codec().decode(a);break;case 4:c.validity=a.bytes();break;case 5:c.sequence=a.uint64();break;case 6:c.ttl=a.uint64();break;case 7:c.pubKey=a.bytes();break;case 8:c.signatureV2=a.bytes();break;case 9:c.data=a.bytes();break;default:a.skipType(l&7);break}}return c})),n),t.encode=a=>encodeMessage(a,t.codec()),t.decode=a=>decodeMessage(a,t.codec())})(IpnsEntry||(IpnsEntry={}));const log$5=logger$i("ipns:utils"),IPNS_PREFIX=fromString$2("/ipns/");function parseRFC3339(t){const e=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),n=String(t).trim().match(e);if(n==null)throw new Error("Invalid format");const a=parseInt(n[1],10),o=parseInt(n[2],10)-1,c=parseInt(n[3],10),u=parseInt(n[4],10),l=parseInt(n[5],10),p=parseInt(n[6],10),b=parseInt(n[7].slice(0,-6),10);return new Date(Date.UTC(a,o,c,u,l,p,b))}const extractPublicKey=async(t,e)=>{if(e==null||t==null){const a=new Error("one or more of the provided parameters are not defined");throw log$5.error(a),errCode$1(a,ERR_UNDEFINED_PARAMETER)}let n;if(e.pubKey!=null){try{n=unmarshalPublicKey(e.pubKey)}catch(o){throw log$5.error(o),o}if(!(await peerIdFromKeys(e.pubKey)).equals(t))throw errCode$1(new Error("Embedded public key did not match PeerID"),ERR_INVALID_EMBEDDED_KEY)}else t.publicKey!=null&&(n=unmarshalPublicKey(t.publicKey));if(n!=null)return n;throw errCode$1(new Error("no public key is available"),ERR_UNDEFINED_PARAMETER)},ipnsEntryDataForV1Sig=(t,e,n)=>{const a=fromString$2(e);return concat$2([t,n,a])},ipnsEntryDataForV2Sig=t=>{const e=fromString$2("ipns-signature:");return concat$2([e,t])},marshal=t=>IpnsEntry.encode(t),unmarshal=t=>{const e=IpnsEntry.decode(t);return e.sequence!=null&&(e.sequence=BigInt(e.sequence)),e.ttl!=null&&(e.ttl=BigInt(e.ttl)),{value:e.value??new Uint8Array(0),signature:e.signature??new Uint8Array(0),validityType:e.validityType??IpnsEntry.ValidityType.EOL,validity:e.validity??new Uint8Array(0),sequence:e.sequence??0n,pubKey:e.pubKey,ttl:e.ttl??void 0,signatureV2:e.signatureV2,data:e.data}},peerIdToRoutingKey=t=>concat$2([IPNS_PREFIX,t.toBytes()]),peerIdFromRoutingKey=t=>peerIdFromBytes(t.slice(IPNS_PREFIX.length)),createCborData=(t,e,n,a,o)=>{let c;if(n===IpnsEntry.ValidityType.EOL)c=0;else throw errCode$1(new Error("Unknown validity type"),ERR_UNRECOGNIZED_VALIDITY);return encode$g({Value:t,Validity:e,ValidityType:c,Sequence:a,TTL:o})},parseCborData=t=>{const e=decode$d(t);if(e.ValidityType===0)e.ValidityType=IpnsEntry.ValidityType.EOL;else throw errCode$1(new Error("Unknown validity type"),ERR_UNRECOGNIZED_VALIDITY);return Number.isInteger(e.Sequence)&&(e.Sequence=BigInt(e.Sequence)),Number.isInteger(e.TTL)&&(e.TTL=BigInt(e.TTL)),e},log$4=logger$i("ipns"),ID_MULTIHASH_CODE=identity$3.code,namespace$1="/ipns/",namespaceLength=namespace$1.length,create$2=async(t,e,n,a)=>{const o=new NanoDate(Date.now()+Number(a)),c=IpnsEntry.ValidityType.EOL,[u,l]=a.toString().split("."),p=BigInt(u)*BigInt(1e5)+BigInt(l??"0");return await _create(t,e,n,c,o,p)},_create=async(t,e,n,a,o,c)=>{n=BigInt(n);const u=fromString$2(o.toString());if(t.privateKey==null)throw errCode$1(new Error("Missing private key"),ERR_MISSING_PRIVATE_KEY);const l=await unmarshalPrivateKey(t.privateKey),p=await signLegacyV1(l,e,a,u),b=createCborData(e,u,a,n,c),v=ipnsEntryDataForV2Sig(b),x=await l.sign(v),_={value:e,signature:p,validityType:a,validity:u,sequence:n,ttl:c,signatureV2:x,data:b};if(t.publicKey!=null){const E=decode$f(t.toBytes());(E.code!==ID_MULTIHASH_CODE||!equals(t.publicKey,E.digest))&&(_.pubKey=t.publicKey)}return log$4("ipns entry for %b created",e),_},rawStdEncoding=t=>base32upper.encode(t).slice(1),getLocalKey=t=>new Key(`/ipns/${rawStdEncoding(t)}`),signLegacyV1=async(t,e,n,a)=>{try{const o=ipnsEntryDataForV1Sig(e,n,a);return await t.sign(o)}catch(o){throw log$4.error("record signature creation failed",o),errCode$1(new Error("record signature creation failed"),ERR_SIGNATURE_CREATION)}},log$3=logger$i("ipns:validator"),validate=async(t,e)=>{const{value:n,validityType:a,validity:o}=e;let c,u;if(e.signatureV2!=null&&e.data!=null)u=e.signatureV2,c=ipnsEntryDataForV2Sig(e.data),validateCborDataMatchesPbData(e);else throw errCode$1(new Error("missing data or signatureV2"),ERR_SIGNATURE_VERIFICATION);let l;try{l=await t.verify(c,u)}catch{l=!1}if(!l)throw log$3.error("record signature verification failed"),errCode$1(new Error("record signature verification failed"),ERR_SIGNATURE_VERIFICATION);if(o!=null&&a===IpnsEntry.ValidityType.EOL){let p;try{p=parseRFC3339(toString$4(o))}catch{throw log$3.error("unrecognized validity format (not an rfc3339 format)"),errCode$1(new Error("unrecognized validity format (not an rfc3339 format)"),ERR_UNRECOGNIZED_FORMAT)}if(p.getTime()<Date.now())throw log$3.error("record has expired"),errCode$1(new Error("record has expired"),ERR_IPNS_EXPIRED_RECORD)}else if(a!=null)throw log$3.error("unrecognized validity type"),errCode$1(new Error("unrecognized validity type"),ERR_UNRECOGNIZED_VALIDITY);log$3("ipns entry for %b is valid",n)},validateCborDataMatchesPbData=t=>{if(t.data==null)throw errCode$1(new Error("Record data is missing"),ERR_INVALID_RECORD_DATA);const e=parseCborData(t.data);if(!equals(e.Value,t.value))throw errCode$1(new Error('Field "value" did not match between protobuf and CBOR'),ERR_SIGNATURE_VERIFICATION);if(!equals(e.Validity,t.validity))throw errCode$1(new Error('Field "validity" did not match between protobuf and CBOR'),ERR_SIGNATURE_VERIFICATION);if(e.ValidityType!==t.validityType)throw errCode$1(new Error('Field "validityType" did not match between protobuf and CBOR'),ERR_SIGNATURE_VERIFICATION);if(e.Sequence!==t.sequence)throw errCode$1(new Error('Field "sequence" did not match between protobuf and CBOR'),ERR_SIGNATURE_VERIFICATION);if(e.TTL!==t.ttl)throw errCode$1(new Error('Field "ttl" did not match between protobuf and CBOR'),ERR_SIGNATURE_VERIFICATION)},ipnsValidator=async(t,e)=>{const n=peerIdFromRoutingKey(t),a=unmarshal(e),o=await extractPublicKey(n,a);await validate(o,a)};async function all(t){const e=[];for await(const n of t)e.push(n);return e}const sortAll$1=(t,e)=>async function*(){yield*(await all(t)).sort(e)}();async function drain(t){for await(const e of t);}async function*filter(t,e){for await(const n of t)await e(n)&&(yield n)}async function*take(t,e){let n=0;if(!(e<1)){for await(const a of t)if(yield a,n++,n===e)return}}class BaseDatastore{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,n,a){return Promise.reject(new Error(".put is not implemented"))}get(e,n){return Promise.reject(new Error(".get is not implemented"))}has(e,n){return Promise.reject(new Error(".has is not implemented"))}delete(e,n){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,n={}){for await(const{key:a,value:o}of e)await this.put(a,o,n),yield{key:a,value:o}}async*getMany(e,n={}){for await(const a of e)yield this.get(a,n)}async*deleteMany(e,n={}){for await(const a of e)await this.delete(a,n),yield a}batch(){let e=[],n=[];return{put(a,o){e.push({key:a,value:o})},delete(a){n.push(a)},commit:async a=>{await drain(this.putMany(e,a)),e=[],await drain(this.deleteMany(n,a)),n=[]}}}async*_all(e,n){throw new Error("._all is not implemented")}async*_allKeys(e,n){throw new Error("._allKeys is not implemented")}query(e,n){let a=this._all(e,n);if(e.prefix!=null&&(a=filter(a,o=>o.key.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(a=e.filters.reduce((o,c)=>filter(o,c),a)),Array.isArray(e.orders)&&(a=e.orders.reduce((o,c)=>sortAll$1(o,c),a)),e.offset!=null){let o=0;a=filter(a,()=>o++>=e.offset)}return e.limit!=null&&(a=take(a,e.limit)),a}queryKeys(e,n){let a=this._allKeys(e,n);if(e.prefix!=null&&(a=filter(a,o=>o.toString().startsWith(e.prefix))),Array.isArray(e.filters)&&(a=e.filters.reduce((o,c)=>filter(o,c),a)),Array.isArray(e.orders)&&(a=e.orders.reduce((o,c)=>sortAll$1(o,c),a)),e.offset!=null){let o=0;a=filter(a,()=>o++>=e.offset)}return e.limit!=null&&(a=take(a,e.limit)),a}}let FixedFIFO$1=class{constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},FIFO$1=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new FixedFIFO$1(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){const n=this.head;this.head=n.next=new FixedFIFO$1(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){const n=this.tail.next;this.tail.next=null,this.tail=n,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function pushable(t={}){return _pushable(n=>{const a=n.shift();if(a==null)return{done:!0};if(a.error!=null)throw a.error;return{done:a.done===!0,value:a.value}},t)}function pushableV(t={}){return _pushable(n=>{let a;const o=[];for(;!n.isEmpty()&&(a=n.shift(),a!=null);){if(a.error!=null)throw a.error;a.done===!1&&o.push(a.value)}return a==null?{done:!0}:{done:a.done===!0,value:o}},t)}function _pushable(t,e){e=e??{};let n=e.onEnd,a=new FIFO$1,o,c,u;const l=async()=>a.isEmpty()?u?{done:!0}:await new Promise((S,A)=>{c=I=>{c=null,a.push(I);try{S(t(a))}catch(O){A(O)}return o}}):t(a),p=S=>c!=null?c(S):(a.push(S),o),b=S=>(a=new FIFO$1,c!=null?c({error:S}):(a.push({error:S}),o)),v=S=>{if(u)return o;if(e?.objectMode!==!0&&S?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return p({done:!1,value:S})},x=S=>u?o:(u=!0,S!=null?b(S):p({done:!0})),_=()=>(a=new FIFO$1,x(),{done:!0}),E=S=>(x(S),{done:!0});if(o={[Symbol.asyncIterator](){return this},next:l,return:_,throw:E,push:v,end:x,get readableLength(){return a.size}},n==null)return o;const $=o;return o={[Symbol.asyncIterator](){return this},next(){return $.next()},throw(S){return $.throw(S),n!=null&&(n(S),n=void 0),{done:!0}},return(){return $.return(),n!=null&&(n(),n=void 0),{done:!0}},push:v,end(S){return $.end(S),n!=null&&(n(S),n=void 0),o},get readableLength(){return $.readableLength}},o}const log$2=logger$i("datastore:core:tiered");class TieredDatastore extends BaseDatastore{constructor(e){super(),this.stores=e.slice()}async open(){try{await Promise.all(this.stores.map(e=>e.open()))}catch(e){throw dbOpenFailedError(e)}}async put(e,n,a){try{await Promise.all(this.stores.map(o=>o.put(e,n,a)))}catch(o){throw dbWriteFailedError(o)}}async get(e,n){for(const a of this.stores)try{const o=await a.get(e,n);if(o)return o}catch(o){log$2.error(o)}throw notFoundError()}async has(e,n){for(const a of this.stores)if(await a.has(e,n))return!0;return!1}async delete(e,n){try{await Promise.all(this.stores.map(a=>a.delete(e,n)))}catch(a){throw dbDeleteFailedError(a)}}async*putMany(e,n={}){let a;const o=this.stores.map(c=>{const u=pushable({objectMode:!0});return drain(c.putMany(u,n)).catch(l=>{a=l}),u});try{for await(const c of e){if(a)throw a;o.forEach(u=>u.push(c)),yield c}}finally{o.forEach(c=>c.end())}}async*deleteMany(e,n={}){let a;const o=this.stores.map(c=>{const u=pushable({objectMode:!0});return drain(c.deleteMany(u,n)).catch(l=>{a=l}),u});try{for await(const c of e){if(a)throw a;o.forEach(u=>u.push(c)),yield c}}finally{o.forEach(c=>c.end())}}async close(){await Promise.all(this.stores.map(e=>e.close()))}batch(){const e=this.stores.map(n=>n.batch());return{put:(n,a)=>{e.forEach(o=>o.put(n,a))},delete:n=>{e.forEach(a=>a.delete(n))},commit:async n=>{for(const a of e)await a.commit(n)}}}query(e,n){return this.stores[this.stores.length-1].query(e,n)}queryKeys(e,n){return this.stores[this.stores.length-1].queryKeys(e,n)}}function get$1(t,e,n,a,o){for(e=e.split?e.split("."):e,a=0;a<e.length;a++)t=t?t[e[a]]:o;return t===o?n:t}const ipnsSelector=(t,e)=>{const n=e.map((a,o)=>({entry:IpnsEntry.decode(a),index:o}));return n.sort((a,o)=>{if(a.entry.signatureV2!=null&&o.entry.signatureV2==null)return-1;if(a.entry.signatureV2==null&&o.entry.signatureV2!=null)return 1;const c=a.entry.sequence??0n,u=o.entry.sequence??0n;if(c>u)return-1;if(c<u)return 1;const l=a.entry.validity??new Uint8Array(0),p=o.entry.validity??new Uint8Array(0),b=parseRFC3339(toString$4(l)),v=parseRFC3339(toString$4(p));return b.getTime()>v.getTime()?-1:b.getTime()<v.getTime()?1:0}),n[0].index},SHARDING_FN="SHARDING",README_FN="_README";class MemoryDatastore extends BaseDatastore{constructor(){super(),this.data={}}open(){return Promise.resolve()}close(){return Promise.resolve()}async put(e,n){this.data[e.toString()]=n}async get(e){if(!await this.has(e))throw notFoundError();return this.data[e.toString()]}async has(e){return this.data[e.toString()]!==void 0}async delete(e){delete this.data[e.toString()]}async*_all(){yield*Object.entries(this.data).map(([e,n])=>({key:new Key(e),value:n}))}async*_allKeys(){yield*Object.entries(this.data).map(([e])=>new Key(e))}}async function*map$3(t,e){for await(const n of t)yield e(n)}async function*merge$1(...t){const e=pushable({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async n=>{for await(const a of n)e.push(a)})),e.end()}catch(n){e.end(n)}}),yield*e}const rawPipe$1=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},isIterable$1=t=>t!=null&&(typeof t[Symbol.asyncIterator]=="function"||typeof t[Symbol.iterator]=="function"||typeof t.next=="function"),isDuplex$1=t=>t!=null&&typeof t.sink=="function"&&isIterable$1(t.source),duplexPipelineFn$1=t=>e=>{const n=t.sink(e);if(n.then!=null){const a=pushable({objectMode:!0});return n.then(()=>{a.end()},c=>{a.end(c)}),merge$1(a,async function*(){yield*t.source,a.end()}())}return t.source};function pipe$1(t,...e){if(isDuplex$1(t)){const a=t;t=()=>a.source}else if(isIterable$1(t)){const a=t;t=()=>a}const n=[t,...e];if(n.length>1&&isDuplex$1(n[n.length-1])&&(n[n.length-1]=n[n.length-1].sink),n.length>2)for(let a=1;a<n.length-1;a++)isDuplex$1(n[a])&&(n[a]=duplexPipelineFn$1(n[a]));return rawPipe$1(...n)}new Key(SHARDING_FN);new Key(README_FN);const namespace="/record/";function encodeBase32(t){return toString$4(t,"base32")}function keyToTopic(t){(typeof t=="string"||t instanceof String)&&(t=fromString$2(t.toString()));const e=toString$4(t,"base64url");return`${namespace}${e}`}function topicToKey(t){if(t.substring(0,namespace.length)!==namespace)throw new CodeError("topic received is not from a record","ERR_TOPIC_IS_NOT_FROM_RECORD_NAMESPACE");const e=t.substring(namespace.length);return fromString$2(e,"base64url")}const log$1=logger$i("datastore-pubsub:publisher");class PubSubDatastore extends BaseDatastore{constructor(e,n,a,o,c,u){if(super(),!o)throw new CodeError("missing validator","ERR_INVALID_PARAMETERS");if(typeof o!="function")throw new CodeError("missing validate function","ERR_INVALID_PARAMETERS");if(typeof c!="function")throw new CodeError("missing select function","ERR_INVALID_PARAMETERS");if(u&&typeof u!="function")throw new CodeError("invalid subscriptionKeyFn received","ERR_INVALID_PARAMETERS");this._pubsub=e,this._datastore=n,this._peerId=a,this._validator=o,this._selector=c,this._handleSubscriptionKeyFn=u,this._onMessage=this._onMessage.bind(this),this._pubsub.addEventListener("message",this._onMessage)}async put(e,n,a){if(!(e instanceof Uint8Array)){const c="datastore key does not have a valid format";throw log$1.error(c),new CodeError(c,"ERR_INVALID_DATASTORE_KEY")}if(!(n instanceof Uint8Array)){const c="received value is not a Uint8Array";throw log$1.error(c),new CodeError(c,"ERR_INVALID_VALUE_RECEIVED")}const o=keyToTopic(e);log$1(`publish value for topic ${o}`),await this._pubsub.publish(o,n)}async get(e,n){if(!(e instanceof Uint8Array)){const c="datastore key does not have a valid format";throw log$1.error(c),new CodeError(c,"ERR_INVALID_DATASTORE_KEY")}const a=keyToTopic(e),o=await this._pubsub.getTopics();if(o&&Array.isArray(o)&&o.indexOf(a)>-1)return this._getLocal(e,n);try{await this._pubsub.subscribe(a)}catch{const u=`cannot subscribe topic ${a}`;throw log$1.error(u),new CodeError(u,"ERR_SUBSCRIBING_TOPIC")}return log$1(`subscribed values for key ${a}`),this._getLocal(e)}unsubscribe(e){const n=keyToTopic(e);return this._pubsub.unsubscribe(n)}async _getLocal(e,n){const a=new Key("/"+encodeBase32(e),!1);let o;try{o=await this._datastore.get(a,n)}catch(c){if(c.code!=="ERR_NOT_FOUND"){const l=`unexpected error getting the ipns record for ${a.toString()}`;throw log$1.error(l),new CodeError(l,"ERR_UNEXPECTED_ERROR_GETTING_RECORD")}const u=`local record requested was not found for ${a.toString()}`;throw log$1.error(u),new CodeError(u,"ERR_NOT_FOUND")}if(!(o instanceof Uint8Array)){const c="found record that we couldn't convert to a value";throw log$1.error(c),new CodeError(c,"ERR_INVALID_RECORD_RECEIVED")}return o}async _onMessage(e){const n=e.detail;if(n.type!=="signed"){log$1.error("unsigned message received, this module can only work with signed messages");return}const{data:a,from:o,topic:c}=n;let u;try{u=topicToKey(c)}catch(l){log$1.error(l);return}if(log$1(`message received for topic ${c}`),this._peerId.equals(o)){log$1("message discarded as it is from the same peer");return}if(this._handleSubscriptionKeyFn){let l;try{l=await this._handleSubscriptionKeyFn(u)}catch{log$1.error("message discarded by the subscriptionKeyFn");return}u=l}try{await this._storeIfSubscriptionIsBetter(u,a)}catch(l){log$1.error(l)}}async _storeIfSubscriptionIsBetter(e,n,a){let o=!1;try{o=await this._isBetter(e,n)}catch(c){if(c.code!=="ERR_NOT_VALID_RECORD")throw c}o&&await this._storeRecord(e,n,a)}async _validateRecord(e,n){return this._validator(e,n)}async _selectRecord(e,n){return await this._selector(e,n)===0}async _isBetter(e,n){try{await this._validateRecord(e,n)}catch{const u="record received through pubsub is not valid";throw log$1.error(u),new CodeError(u,"ERR_NOT_VALID_RECORD")}const a=new Key(e);let o;try{o=await this._getLocal(a.uint8Array())}catch{return!0}return equals(o,n)?!1:this._selectRecord(e,[o,n])}async _storeRecord(e,n,a){const o=new Key("/"+encodeBase32(e),!1);await this._datastore.put(o,n,a),log$1(`record for ${keyToTopic(e)} was stored in the datastore`)}}var domainNameRegex=/^(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9])?\.){0,126}(?:[a-z0-9](?:[a-z0-9\-]{0,61}[a-z0-9]))\.?$/i,isDomainName=function t(e,n){if(n==null&&(n=!1),e.length<2||e.length>255)return!1;var a=e[e.length-1];if(n){if(a!==".")return!1}else if(a===".")return!1;return domainNameRegex.test(e)};const isDomain=getDefaultExportFromCjs(isDomainName);function pDefer$1(){const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t}const CustomEvent$1=globalThis.CustomEvent??Event;async function*parallel$1(t,e={}){let n=e.concurrency??1/0;n<1&&(n=1/0);const a=e.ordered==null?!1:e.ordered,o=new EventTarget,c=[];let u=pDefer$1(),l=pDefer$1(),p=!1,b,v=!1;o.addEventListener("task-complete",()=>{l.resolve()}),Promise.resolve().then(async()=>{try{for await(const $ of t){if(c.length===n&&(u=pDefer$1(),await u.promise),v)break;const S={done:!1};c.push(S),$().then(A=>{S.done=!0,S.ok=!0,S.value=A,o.dispatchEvent(new CustomEvent$1("task-complete"))},A=>{S.done=!0,S.err=A,o.dispatchEvent(new CustomEvent$1("task-complete"))})}p=!0,o.dispatchEvent(new CustomEvent$1("task-complete"))}catch($){b=$,o.dispatchEvent(new CustomEvent$1("task-complete"))}});function x(){return a?c[0]?.done:!!c.find($=>$.done)}function*_(){for(;c.length>0&&c[0].done;){const $=c[0];if(c.shift(),$.ok)yield $.value;else throw v=!0,u.resolve(),$.err;u.resolve()}}function*E(){for(;x();)for(let $=0;$<c.length;$++)if(c[$].done){const S=c[$];if(c.splice($,1),$--,S.ok)yield S.value;else throw v=!0,u.resolve(),S.err;u.resolve()}}for(;;){if(x()||(l=pDefer$1(),await l.promise),b!=null)throw b;if(a?yield*_():yield*E(),p&&c.length===0)break}}async function*browserReadableStreamToIt(t,e={}){const n=t.getReader();try{for(;;){const a=await n.read();if(a.done)return;yield a.value}}finally{e.preventCancel!==!0&&await n.cancel(),n.releaseLock()}}function blobToIt(t){return typeof t.stream=="function"?browserReadableStreamToIt(t.stream()):browserReadableStreamToIt(new Response(t).body)}function peekableIterator(t){const[e,n]=t[Symbol.asyncIterator]!=null?[t[Symbol.asyncIterator](),Symbol.asyncIterator]:[t[Symbol.iterator](),Symbol.iterator],a=[];return{peek:()=>e.next(),push:o=>{a.push(o)},next:()=>a.length>0?{done:!1,value:a.shift()}:e.next(),[n](){return this}}}async function*batch(t,e=1){let n=[];e<1&&(e=1);for await(const a of t)for(n.push(a);n.length>=e;)yield n.slice(0,e),n=n.slice(e);for(;n.length>0;)yield n.slice(0,e),n=n.slice(e)}async function*parallelBatch(t,e=1){for await(const n of batch(t,e)){const a=n.map(async o=>await o().then(c=>({ok:!0,value:c}),c=>({ok:!1,err:c})));for(let o=0;o<a.length;o++){const c=await a[o];if(c.ok)yield c.value;else throw c.err}}}var murmurHash3js={exports:{}};(function(t,e){(function(n,a){var o={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function c(S){if(!Array.isArray(S)&&!ArrayBuffer.isView(S))return!1;for(var A=0;A<S.length;A++)if(!Number.isInteger(S[A])||S[A]<0||S[A]>255)return!1;return!0}function u(S,A){return(S&65535)*A+(((S>>>16)*A&65535)<<16)}function l(S,A){return S<<A|S>>>32-A}function p(S){return S^=S>>>16,S=u(S,2246822507),S^=S>>>13,S=u(S,3266489909),S^=S>>>16,S}function b(S,A){S=[S[0]>>>16,S[0]&65535,S[1]>>>16,S[1]&65535],A=[A[0]>>>16,A[0]&65535,A[1]>>>16,A[1]&65535];var I=[0,0,0,0];return I[3]+=S[3]+A[3],I[2]+=I[3]>>>16,I[3]&=65535,I[2]+=S[2]+A[2],I[1]+=I[2]>>>16,I[2]&=65535,I[1]+=S[1]+A[1],I[0]+=I[1]>>>16,I[1]&=65535,I[0]+=S[0]+A[0],I[0]&=65535,[I[0]<<16|I[1],I[2]<<16|I[3]]}function v(S,A){S=[S[0]>>>16,S[0]&65535,S[1]>>>16,S[1]&65535],A=[A[0]>>>16,A[0]&65535,A[1]>>>16,A[1]&65535];var I=[0,0,0,0];return I[3]+=S[3]*A[3],I[2]+=I[3]>>>16,I[3]&=65535,I[2]+=S[2]*A[3],I[1]+=I[2]>>>16,I[2]&=65535,I[2]+=S[3]*A[2],I[1]+=I[2]>>>16,I[2]&=65535,I[1]+=S[1]*A[3],I[0]+=I[1]>>>16,I[1]&=65535,I[1]+=S[2]*A[2],I[0]+=I[1]>>>16,I[1]&=65535,I[1]+=S[3]*A[1],I[0]+=I[1]>>>16,I[1]&=65535,I[0]+=S[0]*A[3]+S[1]*A[2]+S[2]*A[1]+S[3]*A[0],I[0]&=65535,[I[0]<<16|I[1],I[2]<<16|I[3]]}function x(S,A){return A%=64,A===32?[S[1],S[0]]:A<32?[S[0]<<A|S[1]>>>32-A,S[1]<<A|S[0]>>>32-A]:(A-=32,[S[1]<<A|S[0]>>>32-A,S[0]<<A|S[1]>>>32-A])}function _(S,A){return A%=64,A===0?S:A<32?[S[0]<<A|S[1]>>>32-A,S[1]<<A]:[S[1]<<A-32,0]}function E(S,A){return[S[0]^A[0],S[1]^A[1]]}function $(S){return S=E(S,[0,S[0]>>>1]),S=v(S,[4283543511,3981806797]),S=E(S,[0,S[0]>>>1]),S=v(S,[3301882366,444984403]),S=E(S,[0,S[0]>>>1]),S}o.x86.hash32=function(S,A){if(o.inputValidation&&!c(S))return a;A=A||0;for(var I=S.length%4,O=S.length-I,F=A,U=0,G=3432918353,J=461845907,k=0;k<O;k=k+4)U=S[k]|S[k+1]<<8|S[k+2]<<16|S[k+3]<<24,U=u(U,G),U=l(U,15),U=u(U,J),F^=U,F=l(F,13),F=u(F,5)+3864292196;switch(U=0,I){case 3:U^=S[k+2]<<16;case 2:U^=S[k+1]<<8;case 1:U^=S[k],U=u(U,G),U=l(U,15),U=u(U,J),F^=U}return F^=S.length,F=p(F),F>>>0},o.x86.hash128=function(S,A){if(o.inputValidation&&!c(S))return a;A=A||0;for(var I=S.length%16,O=S.length-I,F=A,U=A,G=A,J=A,k=0,ne=0,ee=0,de=0,ae=597399067,L=2869860233,P=951274213,T=2716044179,C=0;C<O;C=C+16)k=S[C]|S[C+1]<<8|S[C+2]<<16|S[C+3]<<24,ne=S[C+4]|S[C+5]<<8|S[C+6]<<16|S[C+7]<<24,ee=S[C+8]|S[C+9]<<8|S[C+10]<<16|S[C+11]<<24,de=S[C+12]|S[C+13]<<8|S[C+14]<<16|S[C+15]<<24,k=u(k,ae),k=l(k,15),k=u(k,L),F^=k,F=l(F,19),F+=U,F=u(F,5)+1444728091,ne=u(ne,L),ne=l(ne,16),ne=u(ne,P),U^=ne,U=l(U,17),U+=G,U=u(U,5)+197830471,ee=u(ee,P),ee=l(ee,17),ee=u(ee,T),G^=ee,G=l(G,15),G+=J,G=u(G,5)+2530024501,de=u(de,T),de=l(de,18),de=u(de,ae),J^=de,J=l(J,13),J+=F,J=u(J,5)+850148119;switch(k=0,ne=0,ee=0,de=0,I){case 15:de^=S[C+14]<<16;case 14:de^=S[C+13]<<8;case 13:de^=S[C+12],de=u(de,T),de=l(de,18),de=u(de,ae),J^=de;case 12:ee^=S[C+11]<<24;case 11:ee^=S[C+10]<<16;case 10:ee^=S[C+9]<<8;case 9:ee^=S[C+8],ee=u(ee,P),ee=l(ee,17),ee=u(ee,T),G^=ee;case 8:ne^=S[C+7]<<24;case 7:ne^=S[C+6]<<16;case 6:ne^=S[C+5]<<8;case 5:ne^=S[C+4],ne=u(ne,L),ne=l(ne,16),ne=u(ne,P),U^=ne;case 4:k^=S[C+3]<<24;case 3:k^=S[C+2]<<16;case 2:k^=S[C+1]<<8;case 1:k^=S[C],k=u(k,ae),k=l(k,15),k=u(k,L),F^=k}return F^=S.length,U^=S.length,G^=S.length,J^=S.length,F+=U,F+=G,F+=J,U+=F,G+=F,J+=F,F=p(F),U=p(U),G=p(G),J=p(J),F+=U,F+=G,F+=J,U+=F,G+=F,J+=F,("00000000"+(F>>>0).toString(16)).slice(-8)+("00000000"+(U>>>0).toString(16)).slice(-8)+("00000000"+(G>>>0).toString(16)).slice(-8)+("00000000"+(J>>>0).toString(16)).slice(-8)},o.x64.hash128=function(S,A){if(o.inputValidation&&!c(S))return a;A=A||0;for(var I=S.length%16,O=S.length-I,F=[0,A],U=[0,A],G=[0,0],J=[0,0],k=[2277735313,289559509],ne=[1291169091,658871167],ee=0;ee<O;ee=ee+16)G=[S[ee+4]|S[ee+5]<<8|S[ee+6]<<16|S[ee+7]<<24,S[ee]|S[ee+1]<<8|S[ee+2]<<16|S[ee+3]<<24],J=[S[ee+12]|S[ee+13]<<8|S[ee+14]<<16|S[ee+15]<<24,S[ee+8]|S[ee+9]<<8|S[ee+10]<<16|S[ee+11]<<24],G=v(G,k),G=x(G,31),G=v(G,ne),F=E(F,G),F=x(F,27),F=b(F,U),F=b(v(F,[0,5]),[0,1390208809]),J=v(J,ne),J=x(J,33),J=v(J,k),U=E(U,J),U=x(U,31),U=b(U,F),U=b(v(U,[0,5]),[0,944331445]);switch(G=[0,0],J=[0,0],I){case 15:J=E(J,_([0,S[ee+14]],48));case 14:J=E(J,_([0,S[ee+13]],40));case 13:J=E(J,_([0,S[ee+12]],32));case 12:J=E(J,_([0,S[ee+11]],24));case 11:J=E(J,_([0,S[ee+10]],16));case 10:J=E(J,_([0,S[ee+9]],8));case 9:J=E(J,[0,S[ee+8]]),J=v(J,ne),J=x(J,33),J=v(J,k),U=E(U,J);case 8:G=E(G,_([0,S[ee+7]],56));case 7:G=E(G,_([0,S[ee+6]],48));case 6:G=E(G,_([0,S[ee+5]],40));case 5:G=E(G,_([0,S[ee+4]],32));case 4:G=E(G,_([0,S[ee+3]],24));case 3:G=E(G,_([0,S[ee+2]],16));case 2:G=E(G,_([0,S[ee+1]],8));case 1:G=E(G,[0,S[ee]]),G=v(G,k),G=x(G,31),G=v(G,ne),F=E(F,G)}return F=E(F,[0,S.length]),U=E(U,[0,S.length]),F=b(F,U),U=b(U,F),F=$(F),U=$(U),F=b(F,U),U=b(U,F),("00000000"+(F[0]>>>0).toString(16)).slice(-8)+("00000000"+(F[1]>>>0).toString(16)).slice(-8)+("00000000"+(U[0]>>>0).toString(16)).slice(-8)+("00000000"+(U[1]>>>0).toString(16)).slice(-8)},t.exports&&(e=t.exports=o),e.murmurHash3=o})()})(murmurHash3js,murmurHash3js.exports);var murmurHash3jsExports=murmurHash3js.exports,murmurhash3jsRevisited=murmurHash3jsExports;const mur=getDefaultExportFromCjs(murmurhash3jsRevisited),symbol=Symbol.for("@achingbrain/uint8arraylist");function findBufAndOffset(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let n=0;for(const a of t){const o=n+a.byteLength;if(e<o)return{buf:a,index:e-n};n=o}throw new RangeError("index is out of bounds")}function isUint8ArrayList(t){return!!t?.[symbol]}class Uint8ArrayList{constructor(...e){Object.defineProperty(this,symbol,{value:!0}),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let n=0;for(const a of e)if(a instanceof Uint8Array)n+=a.byteLength,this.bufs.push(a);else if(isUint8ArrayList(a))n+=a.byteLength,this.bufs.push(...a.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=n}prepend(...e){this.prependAll(e)}prependAll(e){let n=0;for(const a of e.reverse())if(a instanceof Uint8Array)n+=a.byteLength,this.bufs.unshift(a);else if(isUint8ArrayList(a))n+=a.byteLength,this.bufs.unshift(...a.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=n}get(e){const n=findBufAndOffset(this.bufs,e);return n.buf[n.index]}set(e,n){const a=findBufAndOffset(this.bufs,e);a.buf[a.index]=n}write(e,n=0){if(e instanceof Uint8Array)for(let a=0;a<e.length;a++)this.set(n+a,e[a]);else if(isUint8ArrayList(e))for(let a=0;a<e.length;a++)this.set(n+a,e.get(a));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,n){const{bufs:a,length:o}=this._subList(e,n);return concat$2(a,o)}subarray(e,n){const{bufs:a,length:o}=this._subList(e,n);return a.length===1?a[0]:concat$2(a,o)}sublist(e,n){const{bufs:a,length:o}=this._subList(e,n),c=new Uint8ArrayList;return c.length=o,c.bufs=a,c}_subList(e,n){if(e=e??0,n=n??this.length,e<0&&(e=this.length+e),n<0&&(n=this.length+n),e<0||n>this.length)throw new RangeError("index is out of bounds");if(e===n)return{bufs:[],length:0};if(e===0&&n===this.length)return{bufs:[...this.bufs],length:this.length};const a=[];let o=0;for(let c=0;c<this.bufs.length;c++){const u=this.bufs[c],l=o,p=l+u.byteLength;if(o=p,e>=p)continue;const b=e>=l&&e<p,v=n>l&&n<=p;if(b&&v){if(e===l&&n===p){a.push(u);break}const x=e-l;a.push(u.subarray(x,x+(n-e)));break}if(b){if(e===0){a.push(u);continue}a.push(u.subarray(e-l));continue}if(v){if(n===p){a.push(u);break}a.push(u.subarray(0,n-l));break}a.push(u)}return{bufs:a,length:n-e}}indexOf(e,n=0){if(!isUint8ArrayList(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const a=e instanceof Uint8Array?e:e.subarray();if(n=Number(n??0),isNaN(n)&&(n=0),n<0&&(n=this.length+n),n<0&&(n=0),e.length===0)return n>this.length?this.length:n;const o=a.byteLength;if(o===0)throw new TypeError("search must be at least 1 byte long");const c=256,u=new Int32Array(c);for(let x=0;x<c;x++)u[x]=-1;for(let x=0;x<o;x++)u[a[x]]=x;const l=u,p=this.byteLength-a.byteLength,b=a.byteLength-1;let v;for(let x=n;x<=p;x+=v){v=0;for(let _=b;_>=0;_--){const E=this.get(x+_);if(a[_]!==E){v=Math.max(1,_-l[E]);break}}if(v===0)return x}return-1}getInt8(e){const n=this.subarray(e,e+1);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt8(0)}setInt8(e,n){const a=allocUnsafe$3(1);new DataView(a.buffer,a.byteOffset,a.byteLength).setInt8(0,n),this.write(a,e)}getInt16(e,n){const a=this.subarray(e,e+2);return new DataView(a.buffer,a.byteOffset,a.byteLength).getInt16(0,n)}setInt16(e,n,a){const o=alloc(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt16(0,n,a),this.write(o,e)}getInt32(e,n){const a=this.subarray(e,e+4);return new DataView(a.buffer,a.byteOffset,a.byteLength).getInt32(0,n)}setInt32(e,n,a){const o=alloc(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setInt32(0,n,a),this.write(o,e)}getBigInt64(e,n){const a=this.subarray(e,e+8);return new DataView(a.buffer,a.byteOffset,a.byteLength).getBigInt64(0,n)}setBigInt64(e,n,a){const o=alloc(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigInt64(0,n,a),this.write(o,e)}getUint8(e){const n=this.subarray(e,e+1);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint8(0)}setUint8(e,n){const a=allocUnsafe$3(1);new DataView(a.buffer,a.byteOffset,a.byteLength).setUint8(0,n),this.write(a,e)}getUint16(e,n){const a=this.subarray(e,e+2);return new DataView(a.buffer,a.byteOffset,a.byteLength).getUint16(0,n)}setUint16(e,n,a){const o=alloc(2);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint16(0,n,a),this.write(o,e)}getUint32(e,n){const a=this.subarray(e,e+4);return new DataView(a.buffer,a.byteOffset,a.byteLength).getUint32(0,n)}setUint32(e,n,a){const o=alloc(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(0,n,a),this.write(o,e)}getBigUint64(e,n){const a=this.subarray(e,e+8);return new DataView(a.buffer,a.byteOffset,a.byteLength).getBigUint64(0,n)}setBigUint64(e,n,a){const o=alloc(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setBigUint64(0,n,a),this.write(o,e)}getFloat32(e,n){const a=this.subarray(e,e+4);return new DataView(a.buffer,a.byteOffset,a.byteLength).getFloat32(0,n)}setFloat32(e,n,a){const o=alloc(4);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat32(0,n,a),this.write(o,e)}getFloat64(e,n){const a=this.subarray(e,e+8);return new DataView(a.buffer,a.byteOffset,a.byteLength).getFloat64(0,n)}setFloat64(e,n,a){const o=alloc(8);new DataView(o.buffer,o.byteOffset,o.byteLength).setFloat64(0,n,a),this.write(o,e)}equals(e){if(e==null||!(e instanceof Uint8ArrayList)||e.bufs.length!==this.bufs.length)return!1;for(let n=0;n<this.bufs.length;n++)if(!equals(this.bufs[n],e.bufs[n]))return!1;return!0}static fromUint8Arrays(e,n){const a=new Uint8ArrayList;return a.bufs=e,n==null&&(n=e.reduce((o,c)=>o+c.byteLength,0)),a.length=n,a}}let Rabin$1=class{constructor(e,n=12,a=8*1024,o=32*1024,c=64,u){this.bits=n,this.min=a,this.max=o,this.asModule=e,this.rabin=new e.Rabin(n,a,o,c,u),this.polynomial=u}fingerprint(e){const{__retain:n,__release:a,__allocArray:o,__getInt32Array:c,Int32Array_ID:u,Uint8Array_ID:l}=this.asModule,p=new Int32Array(Math.ceil(e.length/this.min)),b=n(o(u,p)),v=n(o(l,e)),x=this.rabin.fingerprint(v,b),_=c(x);a(v),a(b);const E=_.indexOf(0);return E>=0?_.subarray(0,E):_}};var rabin=Rabin$1,loader={};const ID_OFFSET=-8,SIZE_OFFSET=-4,ARRAYBUFFER_ID=0,STRING_ID=1,ARRAYBUFFERVIEW=1,ARRAY=2,VAL_ALIGN_OFFSET=5,VAL_SIGNED=1024,VAL_FLOAT=2048,VAL_MANAGED=8192,ARRAYBUFFERVIEW_BUFFER_OFFSET=0,ARRAYBUFFERVIEW_DATASTART_OFFSET=4,ARRAYBUFFERVIEW_DATALENGTH_OFFSET=8,ARRAYBUFFERVIEW_SIZE=12,ARRAY_LENGTH_OFFSET=12,ARRAY_SIZE=16,BIGINT=typeof BigUint64Array<"u",THIS=Symbol(),CHUNKSIZE=1024;function getStringImpl(t,e){const n=new Uint32Array(t),a=new Uint16Array(t);var o=n[e+SIZE_OFFSET>>>2]>>>1,c=e>>>1;if(o<=CHUNKSIZE)return String.fromCharCode.apply(String,a.subarray(c,c+o));const u=[];do{const l=a[c+CHUNKSIZE-1],p=l>=55296&&l<56320?CHUNKSIZE-1:CHUNKSIZE;u.push(String.fromCharCode.apply(String,a.subarray(c,c+=p))),o-=p}while(o>CHUNKSIZE);return u.join("")+String.fromCharCode.apply(String,a.subarray(c,c+o))}function preInstantiate(t){const e={};function n(o,c){return o?getStringImpl(o.buffer,c):"<yet unknown>"}const a=t.env=t.env||{};return a.abort=a.abort||function(c,u,l,p){const b=e.memory||a.memory;throw Error("abort: "+n(b,c)+" at "+n(b,u)+":"+l+":"+p)},a.trace=a.trace||function(c,u){const l=e.memory||a.memory;console.log("trace: "+n(l,c)+(u?" ":"")+Array.prototype.slice.call(arguments,2,2+u).join(", "))},t.Math=t.Math||Math,t.Date=t.Date||Date,e}function postInstantiate(t,e){const n=e.exports,a=n.memory,o=n.table,c=n.__alloc,u=n.__retain,l=n.__rtti_base||-1;function p(G){const J=new Uint32Array(a.buffer),k=J[l>>>2];if((G>>>=0)>=k)throw Error("invalid id: "+G);return J[(l+4>>>2)+G*2]}function b(G){const J=new Uint32Array(a.buffer),k=J[l>>>2];if((G>>>=0)>=k)throw Error("invalid id: "+G);return J[(l+4>>>2)+G*2+1]}function v(G){return 31-Math.clz32(G>>>VAL_ALIGN_OFFSET&31)}function x(G){const J=G.length,k=c(J<<1,STRING_ID),ne=new Uint16Array(a.buffer);for(var ee=0,de=k>>>1;ee<J;++ee)ne[de+ee]=G.charCodeAt(ee);return k}t.__allocString=x;function _(G){const J=a.buffer;if(new Uint32Array(J)[G+ID_OFFSET>>>2]!==STRING_ID)throw Error("not a string: "+G);return getStringImpl(J,G)}t.__getString=_;function E(G,J,k){const ne=a.buffer;if(k)switch(G){case 2:return new Float32Array(ne);case 3:return new Float64Array(ne)}else switch(G){case 0:return new(J?Int8Array:Uint8Array)(ne);case 1:return new(J?Int16Array:Uint16Array)(ne);case 2:return new(J?Int32Array:Uint32Array)(ne);case 3:return new(J?BigInt64Array:BigUint64Array)(ne)}throw Error("unsupported align: "+G)}function $(G,J){const k=p(G);if(!(k&(ARRAYBUFFERVIEW|ARRAY)))throw Error("not an array: "+G+" @ "+k);const ne=v(k),ee=J.length,de=c(ee<<ne,ARRAYBUFFER_ID),ae=c(k&ARRAY?ARRAY_SIZE:ARRAYBUFFERVIEW_SIZE,G),L=new Uint32Array(a.buffer);L[ae+ARRAYBUFFERVIEW_BUFFER_OFFSET>>>2]=u(de),L[ae+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2]=de,L[ae+ARRAYBUFFERVIEW_DATALENGTH_OFFSET>>>2]=ee<<ne,k&ARRAY&&(L[ae+ARRAY_LENGTH_OFFSET>>>2]=ee);const P=E(ne,k&VAL_SIGNED,k&VAL_FLOAT);if(k&VAL_MANAGED)for(let T=0;T<ee;++T)P[(de>>>ne)+T]=u(J[T]);else P.set(J,de>>>ne);return ae}t.__allocArray=$;function S(G){const J=new Uint32Array(a.buffer),k=J[G+ID_OFFSET>>>2],ne=p(k);if(!(ne&ARRAYBUFFERVIEW))throw Error("not an array: "+k);const ee=v(ne);var de=J[G+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];const ae=ne&ARRAY?J[G+ARRAY_LENGTH_OFFSET>>>2]:J[de+SIZE_OFFSET>>>2]>>>ee;return E(ee,ne&VAL_SIGNED,ne&VAL_FLOAT).subarray(de>>>=ee,de+ae)}t.__getArrayView=S;function A(G){const J=S(G),k=J.length,ne=new Array(k);for(let ee=0;ee<k;ee++)ne[ee]=J[ee];return ne}t.__getArray=A;function I(G){const J=a.buffer,k=new Uint32Array(J)[G+SIZE_OFFSET>>>2];return J.slice(G,G+k)}t.__getArrayBuffer=I;function O(G,J,k){return new G(F(G,J,k))}function F(G,J,k){const ne=a.buffer,ee=new Uint32Array(ne),de=ee[k+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];return new G(ne,de,ee[de+SIZE_OFFSET>>>2]>>>J)}t.__getInt8Array=O.bind(null,Int8Array,0),t.__getInt8ArrayView=F.bind(null,Int8Array,0),t.__getUint8Array=O.bind(null,Uint8Array,0),t.__getUint8ArrayView=F.bind(null,Uint8Array,0),t.__getUint8ClampedArray=O.bind(null,Uint8ClampedArray,0),t.__getUint8ClampedArrayView=F.bind(null,Uint8ClampedArray,0),t.__getInt16Array=O.bind(null,Int16Array,1),t.__getInt16ArrayView=F.bind(null,Int16Array,1),t.__getUint16Array=O.bind(null,Uint16Array,1),t.__getUint16ArrayView=F.bind(null,Uint16Array,1),t.__getInt32Array=O.bind(null,Int32Array,2),t.__getInt32ArrayView=F.bind(null,Int32Array,2),t.__getUint32Array=O.bind(null,Uint32Array,2),t.__getUint32ArrayView=F.bind(null,Uint32Array,2),BIGINT&&(t.__getInt64Array=O.bind(null,BigInt64Array,3),t.__getInt64ArrayView=F.bind(null,BigInt64Array,3),t.__getUint64Array=O.bind(null,BigUint64Array,3),t.__getUint64ArrayView=F.bind(null,BigUint64Array,3)),t.__getFloat32Array=O.bind(null,Float32Array,2),t.__getFloat32ArrayView=F.bind(null,Float32Array,2),t.__getFloat64Array=O.bind(null,Float64Array,3),t.__getFloat64ArrayView=F.bind(null,Float64Array,3);function U(G,J){const k=new Uint32Array(a.buffer);var ne=k[G+ID_OFFSET>>>2];if(ne<=k[l>>>2])do if(ne==J)return!0;while(ne=b(ne));return!1}return t.__instanceof=U,t.memory=t.memory||a,t.table=t.table||o,demangle(n,t)}function isResponse(t){return typeof Response<"u"&&t instanceof Response}async function instantiate$1(t,e){return isResponse(t=await t)?instantiateStreaming(t,e):postInstantiate(preInstantiate(e||(e={})),await WebAssembly.instantiate(t instanceof WebAssembly.Module?t:await WebAssembly.compile(t),e))}loader.instantiate=instantiate$1;function instantiateSync(t,e){return postInstantiate(preInstantiate(e||(e={})),new WebAssembly.Instance(t instanceof WebAssembly.Module?t:new WebAssembly.Module(t),e))}loader.instantiateSync=instantiateSync;async function instantiateStreaming(t,e){return WebAssembly.instantiateStreaming?postInstantiate(preInstantiate(e||(e={})),(await WebAssembly.instantiateStreaming(t,e)).instance):instantiate$1(isResponse(t=await t)?t.arrayBuffer():t,e)}loader.instantiateStreaming=instantiateStreaming;function demangle(t,e){var n=e?Object.create(e):{},a=t.__argumentsLength?function(o){t.__argumentsLength.value=o}:t.__setArgumentsLength||t.__setargc||function(){};for(let o in t){if(!Object.prototype.hasOwnProperty.call(t,o))continue;const c=t[o];let u=o.split("."),l=n;for(;u.length>1;){let v=u.shift();Object.prototype.hasOwnProperty.call(l,v)||(l[v]={}),l=l[v]}let p=u[0],b=p.indexOf("#");if(b>=0){let v=p.substring(0,b),x=l[v];if(typeof x>"u"||!x.prototype){let _=function(...E){return _.wrap(_.prototype.constructor(0,...E))};_.prototype={valueOf:function(){return this[THIS]}},_.wrap=function(E){return Object.create(_.prototype,{[THIS]:{value:E,writable:!1}})},x&&Object.getOwnPropertyNames(x).forEach(E=>Object.defineProperty(_,E,Object.getOwnPropertyDescriptor(x,E))),l[v]=_}if(p=p.substring(b+1),l=l[v].prototype,/^(get|set):/.test(p)){if(!Object.prototype.hasOwnProperty.call(l,p=p.substring(4))){let _=t[o.replace("set:","get:")],E=t[o.replace("get:","set:")];Object.defineProperty(l,p,{get:function(){return _(this[THIS])},set:function($){E(this[THIS],$)},enumerable:!0})}}else p==="constructor"?(l[p]=(..._)=>(a(_.length),c(..._))).original=c:(l[p]=function(..._){return a(_.length),c(this[THIS],..._)}).original=c}else/^(get|set):/.test(p)?Object.prototype.hasOwnProperty.call(l,p=p.substring(4))||Object.defineProperty(l,p,{get:t[o.replace("set:","get:")],set:t[o.replace("get:","set:")],enumerable:!0}):typeof c=="function"&&c!==a?(l[p]=(...v)=>(a(v.length),c(...v))).original=c:l[p]=c}return n}loader.demangle=demangle;const{instantiate}=loader;loadWebAssembly.supported=typeof WebAssembly<"u";function loadWebAssembly(t={}){if(!loadWebAssembly.supported)return null;var e=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return instantiate(new Response(new Blob([e],{type:"application/wasm"})),t)}var rabinWasm=loadWebAssembly;const Rabin=rabin,getRabin=rabinWasm,create$1=async(t,e,n,a,o)=>{const c=await getRabin();return new Rabin(c,t,e,n,a,o)};var src$3={Rabin,create:create$1};const BITS_PER_BYTE=7;var sparseArray=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,n){let a=this._internalPositionFor(e,!1);if(n===void 0)a!==-1&&(this._unsetInternalPos(a),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let o=!1;a===-1?(a=this._data.length,this._setBit(e),this._changedData=!0):o=!0,this._setInternalPos(a,e,n,o),this._changedLength=!0}}unset(e){this.set(e,void 0)}get(e){this._sortData();const n=this._internalPositionFor(e,!0);if(n!==-1)return this._data[n][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let n=0;for(;n<this.length;)e(this.get(n),n,this),n++}map(e){let n=0,a=new Array(this.length);for(;n<this.length;)a[n]=e(this.get(n),n,this),n++;return a}reduce(e,n){let a=0,o=n;for(;a<this.length;){const c=this.get(a);o=e(o,c,a),a++}return o}find(e){let n=0,a,o;for(;n<this.length&&!a;)o=this.get(n),a=e(o),n++;return a?o:void 0}_internalPositionFor(e,n){const a=this._bytePosFor(e,n);if(a>=this._bitArrays.length)return-1;const o=this._bitArrays[a],c=e-a*BITS_PER_BYTE;if(!((o&1<<c)>0))return-1;const l=this._bitArrays.slice(0,a).reduce(popCountReduce,0),p=~(4294967295<<c+1),b=popCount(o&p);return l+b-1}_bytePosFor(e,n){const a=Math.floor(e/BITS_PER_BYTE),o=a+1;for(;!n&&this._bitArrays.length<o;)this._bitArrays.push(0);return a}_setBit(e){const n=this._bytePosFor(e,!1);this._bitArrays[n]|=1<<e-n*BITS_PER_BYTE}_unsetBit(e){const n=this._bytePosFor(e,!1);this._bitArrays[n]&=~(1<<e-n*BITS_PER_BYTE)}_setInternalPos(e,n,a,o){const c=this._data,u=[n,a];if(o)this._sortData(),c[e]=u;else{if(c.length)if(c[c.length-1][0]>=n)c.push(u);else if(c[0][0]<=n)c.unshift(u);else{const l=Math.round(c.length/2);this._data=c.slice(0,l).concat(u).concat(c.slice(l))}else this._data.push(u);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(sortInternal),this._changedData=!1}bitField(){const e=[];let n=8,a=0,o=0,c;const u=this._bitArrays.slice();for(;u.length||a;){a===0&&(c=u.shift(),a=7);const p=Math.min(a,n),b=~(255<<p),v=c&b;o|=v<<8-n,c=c>>>p,a-=p,n-=p,(!n||!a&&!u.length)&&(e.push(o),o=0,n=8)}for(var l=e.length-1;l>0&&e[l]===0;l--)e.pop();return e}compactArray(){return this._sortData(),this._data.map(valueOnly)}};function popCountReduce(t,e){return t+popCount(e)}function popCount(t){let e=t;return e=e-(e>>1&1431655765),e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}function sortInternal(t,e){return t[0]-e[0]}function valueOnly(t){return t[1]}const SparseArray=getDefaultExportFromCjs(sparseArray);class Bucket{constructor(e,n,a=0){this._options=e,this._popCount=0,this._parent=n,this._posAtParent=a,this._children=new SparseArray,this.key=null}async put(e,n){const a=await this._findNewBucketAndPos(e);await a.bucket._putAt(a,e,n)}async get(e){const n=await this._findChild(e);if(n!=null)return n.value}async del(e){const n=await this._findPlace(e),a=n.bucket._at(n.pos);a!=null&&a.key===e&&n.bucket._delAt(n.pos)}leafCount(){return this._children.compactArray().reduce((n,a)=>a instanceof Bucket?n+a.leafCount():n+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const e=this._children.compactArray();for(const n of e)n instanceof Bucket?yield*n.eachLeafSeries():yield n}serialize(e,n){const a=[];return n(this._children.reduce((o,c,u)=>(c!=null&&(c instanceof Bucket?o.push(c.serialize(e,n)):o.push(e(c,u))),o),a))}async asyncTransform(e,n){return await asyncTransformBucket(this,e,n)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(e){const n=await this._findPlace(e),a=n.bucket._at(n.pos);if(!(a instanceof Bucket)&&a!=null&&a.key===e)return a}async _findPlace(e){const n=this._options.hash(typeof e=="string"?fromString$2(e):e),a=await n.take(this._options.bits),o=this._children.get(a);return o instanceof Bucket?await o._findPlace(n):{bucket:this,pos:a,hash:n,existingChild:o}}async _findNewBucketAndPos(e){const n=await this._findPlace(e);if(n.existingChild!=null&&n.existingChild.key!==e){const a=new Bucket(this._options,n.bucket,n.pos);n.bucket._putObjectAt(n.pos,a);const o=await a._findPlace(n.existingChild.hash);return o.bucket._putAt(o,n.existingChild.key,n.existingChild.value),await a._findNewBucketAndPos(n.hash)}return n}_putAt(e,n,a){this._putObjectAt(e.pos,{key:n,value:a,hash:e.hash})}_putObjectAt(e,n){this._children.get(e)==null&&this._popCount++,this._children.set(e,n)}_delAt(e){if(e===-1)throw new Error("Invalid position");this._children.get(e)!=null&&this._popCount--,this._children.unset(e),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){const e=this._children.find(exists);if(e!=null&&!(e instanceof Bucket)){const n=e.hash;n.untake(this._options.bits);const a={pos:this._posAtParent,hash:n,bucket:this._parent};this._parent._putAt(a,e.key,e.value)}}else this._parent._delAt(this._posAtParent)}_at(e){return this._children.get(e)}}function exists(t){return!!t}function mapNode(t,e){return t.key}function reduceNodes(t){return t}async function asyncTransformBucket(t,e,n){const a=[];for(const o of t._children.compactArray())if(o instanceof Bucket)await asyncTransformBucket(o,e,n);else{const c=await e(o);a.push({bitField:t._children.bitField(),children:c})}return await n(a)}const START_MASKS=[255,254,252,248,240,224,192,128],STOP_MASKS=[1,3,7,15,31,63,127,255];class ConsumableBuffer{constructor(e){this._value=e,this._currentBytePos=e.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(e){let n=e,a=0;for(;n>0&&this._haveBits();){const o=this._value[this._currentBytePos],c=this._currentBitPos+1,u=Math.min(c,n),l=byteBitsToInt(o,c-u,u);a=(a<<u)+l,n-=u,this._currentBitPos-=u,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return a}untake(e){for(this._currentBitPos+=e;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function byteBitsToInt(t,e,n){const a=maskFor(e,n);return(t&a)>>>e}function maskFor(t,e){return START_MASKS[t]&STOP_MASKS[Math.min(e+t-1,7)]}function wrapHash(t){function e(n){return n instanceof InfiniteHash?n:new InfiniteHash(n,t)}return e}class InfiniteHash{constructor(e,n){if(!(e instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=e,this._hashFn=n,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(e){let n=e;for(;this._availableBits<n;)await this._produceMoreBits();let a=0;for(;n>0;){const o=this._buffers[this._currentBufferIndex],c=Math.min(o.availableBits(),n),u=o.take(c);a=(a<<c)+u,n-=c,this._availableBits-=c,o.availableBits()===0&&this._currentBufferIndex++}return a}untake(e){let n=e;for(;n>0;){const a=this._buffers[this._currentBufferIndex],o=Math.min(a.totalBits()-a.availableBits(),n);a.untake(o),n-=o,this._availableBits+=o,this._currentBufferIndex>0&&a.totalBits()===a.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const e=this._depth>0?concat$2([this._value,Uint8Array.from([this._depth])]):this._value,n=await this._hashFn(e),a=new ConsumableBuffer(n);this._buffers.push(a),this._availableBits+=a.availableBits()}}function createHAMT(t){if(t==null||t.hashFn==null)throw new Error("please define an options.hashFn");const e={bits:t.bits??8,hash:wrapHash(t.hashFn)};return new Bucket(e)}function compare$1(t,e){for(let n=0;n<t.byteLength;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}fromString$2("ustar\0","binary");fromString$2("ustar ","binary");fromString$2(" \0","binary");function reader$1(t){const e=async function*(){let n=yield,a=new Uint8ArrayList;for await(const o of t){if(n==null){a.append(o),n=yield a,a=new Uint8ArrayList;continue}for(a.append(o);a.length>=n;){const c=a.sublist(0,n);if(a.consume(n),n=yield c,n==null){a.length>0&&(n=yield a,a=new Uint8ArrayList);break}}}if(n!=null)throw Object.assign(new Error(`stream ended before ${n} bytes became available`),{code:"ERR_UNDER_READ",buffer:a})}();return e.next(),e}var index_browser={RTLD_LAZY:1,RTLD_NOW:2,RTLD_GLOBAL:256,RTLD_LOCAL:0,RTLD_DEEPBIND:8,E2BIG:7,EACCES:13,EADDRINUSE:98,EADDRNOTAVAIL:99,EAFNOSUPPORT:97,EAGAIN:11,EALREADY:114,EBADF:9,EBADMSG:74,EBUSY:16,ECANCELED:125,ECHILD:10,ECONNABORTED:103,ECONNREFUSED:111,ECONNRESET:104,EDEADLK:35,EDESTADDRREQ:89,EDOM:33,EDQUOT:122,EEXIST:17,EFAULT:14,EFBIG:27,EHOSTUNREACH:113,EIDRM:43,EILSEQ:84,EINPROGRESS:115,EINTR:4,EINVAL:22,EIO:5,EISCONN:106,EISDIR:21,ELOOP:40,EMFILE:24,EMLINK:31,EMSGSIZE:90,EMULTIHOP:72,ENAMETOOLONG:36,ENETDOWN:100,ENETRESET:102,ENETUNREACH:101,ENFILE:23,ENOBUFS:105,ENODATA:61,ENODEV:19,ENOENT:2,ENOEXEC:8,ENOLCK:37,ENOLINK:67,ENOMEM:12,ENOMSG:42,ENOPROTOOPT:92,ENOSPC:28,ENOSR:63,ENOSTR:60,ENOSYS:38,ENOTCONN:107,ENOTDIR:20,ENOTEMPTY:39,ENOTSOCK:88,ENOTSUP:95,ENOTTY:25,ENXIO:6,EOPNOTSUPP:95,EOVERFLOW:75,EPERM:1,EPIPE:32,EPROTO:71,EPROTONOSUPPORT:93,EPROTOTYPE:91,ERANGE:34,EROFS:30,ESPIPE:29,ESRCH:3,ESTALE:116,ETIME:62,ETIMEDOUT:110,ETXTBSY:26,EWOULDBLOCK:11,EXDEV:18,PRIORITY_LOW:19,PRIORITY_BELOW_NORMAL:10,PRIORITY_NORMAL:0,PRIORITY_ABOVE_NORMAL:-7,PRIORITY_HIGH:-14,PRIORITY_HIGHEST:-20,SIGHUP:1,SIGINT:2,SIGQUIT:3,SIGILL:4,SIGTRAP:5,SIGABRT:6,SIGIOT:6,SIGBUS:7,SIGFPE:8,SIGKILL:9,SIGUSR1:10,SIGSEGV:11,SIGUSR2:12,SIGPIPE:13,SIGALRM:14,SIGTERM:15,SIGCHLD:17,SIGSTKFLT:16,SIGCONT:18,SIGSTOP:19,SIGTSTP:20,SIGTTIN:21,SIGTTOU:22,SIGURG:23,SIGXCPU:24,SIGXFSZ:25,SIGVTALRM:26,SIGPROF:27,SIGWINCH:28,SIGIO:29,SIGPOLL:29,SIGPWR:30,SIGSYS:31,SIGUNUSED:31,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,O_RDONLY:0,O_WRONLY:1,O_RDWR:2,UV_DIRENT_UNKNOWN:0,UV_DIRENT_FILE:1,UV_DIRENT_DIR:2,UV_DIRENT_LINK:3,UV_DIRENT_FIFO:4,UV_DIRENT_SOCKET:5,UV_DIRENT_CHAR:6,UV_DIRENT_BLOCK:7,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,UV_FS_O_FILEMAP:0,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DSYNC:4096,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_COPYFILE_EXCL:1,COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_FICLONE_FORCE:4,OPENSSL_VERSION_NUMBER:269488495,SSL_OP_ALL:2147485780,SSL_OP_ALLOW_NO_DHE_KEX:1024,SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION:262144,SSL_OP_CIPHER_SERVER_PREFERENCE:4194304,SSL_OP_CISCO_ANYCONNECT:32768,SSL_OP_COOKIE_EXCHANGE:8192,SSL_OP_CRYPTOPRO_TLSEXT_BUG:2147483648,SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS:2048,SSL_OP_EPHEMERAL_RSA:0,SSL_OP_LEGACY_SERVER_CONNECT:4,SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER:0,SSL_OP_MICROSOFT_SESS_ID_BUG:0,SSL_OP_MSIE_SSLV2_RSA_PADDING:0,SSL_OP_NETSCAPE_CA_DN_BUG:0,SSL_OP_NETSCAPE_CHALLENGE_BUG:0,SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG:0,SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG:0,SSL_OP_NO_COMPRESSION:131072,SSL_OP_NO_ENCRYPT_THEN_MAC:524288,SSL_OP_NO_QUERY_MTU:4096,SSL_OP_NO_RENEGOTIATION:1073741824,SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION:65536,SSL_OP_NO_SSLv2:0,SSL_OP_NO_SSLv3:33554432,SSL_OP_NO_TICKET:16384,SSL_OP_NO_TLSv1:67108864,SSL_OP_NO_TLSv1_1:268435456,SSL_OP_NO_TLSv1_2:134217728,SSL_OP_NO_TLSv1_3:536870912,SSL_OP_PKCS1_CHECK_1:0,SSL_OP_PKCS1_CHECK_2:0,SSL_OP_PRIORITIZE_CHACHA:2097152,SSL_OP_SINGLE_DH_USE:0,SSL_OP_SINGLE_ECDH_USE:0,SSL_OP_SSLEAY_080_CLIENT_DH_BUG:0,SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG:0,SSL_OP_TLS_BLOCK_PADDING_BUG:0,SSL_OP_TLS_D5_BUG:0,SSL_OP_TLS_ROLLBACK_BUG:8388608,ENGINE_METHOD_RSA:1,ENGINE_METHOD_DSA:2,ENGINE_METHOD_DH:4,ENGINE_METHOD_RAND:8,ENGINE_METHOD_EC:2048,ENGINE_METHOD_CIPHERS:64,ENGINE_METHOD_DIGESTS:128,ENGINE_METHOD_PKEY_METHS:512,ENGINE_METHOD_PKEY_ASN1_METHS:1024,ENGINE_METHOD_ALL:65535,ENGINE_METHOD_NONE:0,DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,RSA_PSS_SALTLEN_DIGEST:-1,RSA_PSS_SALTLEN_MAX_SIGN:-2,RSA_PSS_SALTLEN_AUTO:-2,defaultCoreCipherList:"TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_GCM_SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES256-SHA384:ECDHE-RSA-AES256-SHA256:DHE-RSA-AES256-SHA256:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!SRP:!CAMELLIA",TLS1_VERSION:769,TLS1_1_VERSION:770,TLS1_2_VERSION:771,TLS1_3_VERSION:772,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6};const isoConstants=getDefaultExportFromCjs(index_browser);async function toBuffer(t){let e=new Uint8Array(0);for await(const n of t)e=concat$2([e,n],e.length+n.length);return e}const ZEROS="0000000000000000000",SEVENS="7777777777777777777",ZERO_OFFSET="0".charCodeAt(0),USTAR_MAGIC=fromString$2("ustar\0","binary"),USTAR_VER=fromString$2("00","binary"),MASK=parseInt("7777",8),MAGIC_OFFSET=257,VERSION_OFFSET=263,toTypeflag=function(t){switch(t){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72;default:return 0}},cksum=function(t){let e=256;for(let n=0;n<148;n++)e+=t[n];for(let n=156;n<512;n++)e+=t[n];return e},encodeOct=function(t,e){const n=t.toString(8);return n.length>e?fromString$2(SEVENS.slice(0,e)+" "):fromString$2(ZEROS.slice(0,e-n.length)+n+" ")},addLength=function(t){const e=fromString$2(t).byteLength;let n=Math.floor(Math.log(e)/Math.log(10))+1;return e+n>=Math.pow(10,n)&&n++,`${e+n}${t}`};function encodePax$1(t){let e="";t.name!=null&&(e+=addLength(" path="+t.name+`
`)),t.linkname!=null&&(e+=addLength(" linkpath="+t.linkname+`
`));const n=t.pax;if(n!=null)for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e+=addLength(" "+a+"="+n[a]+`
`));return fromString$2(e)}function encode$8(t){const e=new Uint8Array(512);let n=t.name,a="";if(t.typeflag===5&&n[n.length-1]!=="/"&&(n+="/"),fromString$2(n).byteLength!==n.length)return null;for(;fromString$2(n).byteLength>100;){const o=n.indexOf("/");if(o===-1)return null;a+=a!==""?"/"+n.slice(0,o):n.slice(0,o),n=n.slice(o+1)}return fromString$2(n).byteLength>100||fromString$2(a).byteLength>155||t.linkname!=null&&fromString$2(t.linkname).byteLength>100?null:(e.set(fromString$2(n),0),e.set(encodeOct(t.mode&MASK,6),100),e.set(encodeOct(t.uid,6),108),e.set(encodeOct(t.gid,6),116),e.set(encodeOct(t.size,11),124),e.set(encodeOct(t.mtime.getTime()/1e3|0,11),136),e[156]=ZERO_OFFSET+toTypeflag(t.type),t.linkname!=null&&e.set(fromString$2(t.linkname),157),e.set(USTAR_MAGIC,MAGIC_OFFSET),e.set(USTAR_VER,VERSION_OFFSET),t.uname!=null&&e.set(fromString$2(t.uname),265),t.gname!=null&&e.set(fromString$2(t.gname),297),e.set(encodeOct(t.devmajor??0,6),329),e.set(encodeOct(t.devminor??0,6),337),a!=null&&e.set(fromString$2(a),345),e.set(encodeOct(cksum(e),6),148),e)}const{S_IFMT,S_IFBLK,S_IFCHR,S_IFDIR,S_IFIFO,S_IFLNK}=isoConstants,DMODE=parseInt("755",8),FMODE=parseInt("644",8),END_OF_TAR=new Uint8Array(1024);function modeToType(t=0){switch(t&S_IFMT){case S_IFBLK:return"block-device";case S_IFCHR:return"character-device";case S_IFDIR:return"directory";case S_IFIFO:return"fifo";case S_IFLNK:return"symlink";default:return"file"}}function getPadding(t){return t&=511,t!==0?END_OF_TAR.subarray(0,512-t):new Uint8Array(0)}function encode$7(t){if(t.pax==null){const e=encode$8(t);if(e!=null)return e}return encodePax(t)}function encodePax(t){const e=encodePax$1(t),n={name:"PaxHeader",mode:t.mode,uid:t.uid,gid:t.gid,size:e.length,mtime:t.mtime,type:"pax-header",linkname:t.linkname,uname:t.uname,gname:t.gname,devmajor:t.devmajor,devminor:t.devminor};return new Uint8ArrayList(encode$8(n)??new Uint8Array(0),e,getPadding(e.length),encode$8({...n,size:t.size,type:t.type})??new Uint8Array(0)).subarray()}function pack(){return async function*(t){for await(let{header:e,body:n}of t){const a={...e,size:e.type==="symlink"?0:e.size??0,type:e.type??modeToType(e.mode),mode:e.mode??(e.type==="directory"?DMODE:FMODE),uid:e.uid??0,gid:e.gid??0,mtime:e.mtime??new Date};if(typeof n=="string"&&(n=fromString$2(n)),n instanceof Uint8Array||isUint8ArrayList(n)){a.size=n.length,yield encode$7(a),yield isUint8ArrayList(n)?n.subarray():n,yield getPadding(a.size);continue}if(a.type==="symlink"&&a.linkname==null){if(n==null)throw new Error("type was symlink but no linkname or body specified");a.linkname=toString$4(await toBuffer(n)),yield encode$7(a);continue}if(yield encode$7(a),a.type!=="file"&&a.type!=="contiguous-file")continue;let o=0;for await(const c of n??[])o+=c.length,yield isUint8ArrayList(c)?c.subarray():c;if(o!==a.size)throw new Error(`size mismatch, wrote ${o} of ${a.size} bytes`);yield getPadding(a.size)}yield END_OF_TAR}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Z_FIXED$1=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN$1=2;function zero$1(t){let e=t.length;for(;--e>=0;)t[e]=0}const STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,BL_CODES$1=19,HEAP_SIZE$1=2*L_CODES$1+1,MAX_BITS$1=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),extra_dbits=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),extra_blbits=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),bl_order=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);function StaticTreeDesc(t,e,n,a,o){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=a,this.max_length=o,this.has_stree=t&&t.length}let static_l_desc,static_d_desc,static_bl_desc;function TreeDesc(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}const d_code=t=>t<256?_dist_code[t]:_dist_code[256+(t>>>7)],put_short=(t,e)=>{t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255},send_bits=(t,e,n)=>{t.bi_valid>Buf_size-n?(t.bi_buf|=e<<t.bi_valid&65535,put_short(t,t.bi_buf),t.bi_buf=e>>Buf_size-t.bi_valid,t.bi_valid+=n-Buf_size):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},send_code=(t,e,n)=>{send_bits(t,n[e*2],n[e*2+1])},bi_reverse=(t,e)=>{let n=0;do n|=t&1,t>>>=1,n<<=1;while(--e>0);return n>>>1},bi_flush=t=>{t.bi_valid===16?(put_short(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},gen_bitlen=(t,e)=>{const n=e.dyn_tree,a=e.max_code,o=e.stat_desc.static_tree,c=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,l=e.stat_desc.extra_base,p=e.stat_desc.max_length;let b,v,x,_,E,$,S=0;for(_=0;_<=MAX_BITS$1;_++)t.bl_count[_]=0;for(n[t.heap[t.heap_max]*2+1]=0,b=t.heap_max+1;b<HEAP_SIZE$1;b++)v=t.heap[b],_=n[n[v*2+1]*2+1]+1,_>p&&(_=p,S++),n[v*2+1]=_,!(v>a)&&(t.bl_count[_]++,E=0,v>=l&&(E=u[v-l]),$=n[v*2],t.opt_len+=$*(_+E),c&&(t.static_len+=$*(o[v*2+1]+E)));if(S!==0){do{for(_=p-1;t.bl_count[_]===0;)_--;t.bl_count[_]--,t.bl_count[_+1]+=2,t.bl_count[p]--,S-=2}while(S>0);for(_=p;_!==0;_--)for(v=t.bl_count[_];v!==0;)x=t.heap[--b],!(x>a)&&(n[x*2+1]!==_&&(t.opt_len+=(_-n[x*2+1])*n[x*2],n[x*2+1]=_),v--)}},gen_codes=(t,e,n)=>{const a=new Array(MAX_BITS$1+1);let o=0,c,u;for(c=1;c<=MAX_BITS$1;c++)o=o+n[c-1]<<1,a[c]=o;for(u=0;u<=e;u++){let l=t[u*2+1];l!==0&&(t[u*2]=bi_reverse(a[l]++,l))}},tr_static_init=()=>{let t,e,n,a,o;const c=new Array(MAX_BITS$1+1);for(n=0,a=0;a<LENGTH_CODES$1-1;a++)for(base_length[a]=n,t=0;t<1<<extra_lbits[a];t++)_length_code[n++]=a;for(_length_code[n-1]=a,o=0,a=0;a<16;a++)for(base_dist[a]=o,t=0;t<1<<extra_dbits[a];t++)_dist_code[o++]=a;for(o>>=7;a<D_CODES$1;a++)for(base_dist[a]=o<<7,t=0;t<1<<extra_dbits[a]-7;t++)_dist_code[256+o++]=a;for(e=0;e<=MAX_BITS$1;e++)c[e]=0;for(t=0;t<=143;)static_ltree[t*2+1]=8,t++,c[8]++;for(;t<=255;)static_ltree[t*2+1]=9,t++,c[9]++;for(;t<=279;)static_ltree[t*2+1]=7,t++,c[7]++;for(;t<=287;)static_ltree[t*2+1]=8,t++,c[8]++;for(gen_codes(static_ltree,L_CODES$1+1,c),t=0;t<D_CODES$1;t++)static_dtree[t*2+1]=5,static_dtree[t*2]=bi_reverse(t,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS$1+1,L_CODES$1,MAX_BITS$1),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES$1,MAX_BITS$1),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES$1,MAX_BL_BITS)},init_block=t=>{let e;for(e=0;e<L_CODES$1;e++)t.dyn_ltree[e*2]=0;for(e=0;e<D_CODES$1;e++)t.dyn_dtree[e*2]=0;for(e=0;e<BL_CODES$1;e++)t.bl_tree[e*2]=0;t.dyn_ltree[END_BLOCK*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},bi_windup=t=>{t.bi_valid>8?put_short(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},smaller=(t,e,n,a)=>{const o=e*2,c=n*2;return t[o]<t[c]||t[o]===t[c]&&a[e]<=a[n]},pqdownheap=(t,e,n)=>{const a=t.heap[n];let o=n<<1;for(;o<=t.heap_len&&(o<t.heap_len&&smaller(e,t.heap[o+1],t.heap[o],t.depth)&&o++,!smaller(e,a,t.heap[o],t.depth));)t.heap[n]=t.heap[o],n=o,o<<=1;t.heap[n]=a},compress_block=(t,e,n)=>{let a,o,c=0,u,l;if(t.sym_next!==0)do a=t.pending_buf[t.sym_buf+c++]&255,a+=(t.pending_buf[t.sym_buf+c++]&255)<<8,o=t.pending_buf[t.sym_buf+c++],a===0?send_code(t,o,e):(u=_length_code[o],send_code(t,u+LITERALS$1+1,e),l=extra_lbits[u],l!==0&&(o-=base_length[u],send_bits(t,o,l)),a--,u=d_code(a),send_code(t,u,n),l=extra_dbits[u],l!==0&&(a-=base_dist[u],send_bits(t,a,l)));while(c<t.sym_next);send_code(t,END_BLOCK,e)},build_tree=(t,e)=>{const n=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,c=e.stat_desc.elems;let u,l,p=-1,b;for(t.heap_len=0,t.heap_max=HEAP_SIZE$1,u=0;u<c;u++)n[u*2]!==0?(t.heap[++t.heap_len]=p=u,t.depth[u]=0):n[u*2+1]=0;for(;t.heap_len<2;)b=t.heap[++t.heap_len]=p<2?++p:0,n[b*2]=1,t.depth[b]=0,t.opt_len--,o&&(t.static_len-=a[b*2+1]);for(e.max_code=p,u=t.heap_len>>1;u>=1;u--)pqdownheap(t,n,u);b=c;do u=t.heap[1],t.heap[1]=t.heap[t.heap_len--],pqdownheap(t,n,1),l=t.heap[1],t.heap[--t.heap_max]=u,t.heap[--t.heap_max]=l,n[b*2]=n[u*2]+n[l*2],t.depth[b]=(t.depth[u]>=t.depth[l]?t.depth[u]:t.depth[l])+1,n[u*2+1]=n[l*2+1]=b,t.heap[1]=b++,pqdownheap(t,n,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],gen_bitlen(t,e),gen_codes(n,p,t.bl_count)},scan_tree=(t,e,n)=>{let a,o=-1,c,u=e[0*2+1],l=0,p=7,b=4;for(u===0&&(p=138,b=3),e[(n+1)*2+1]=65535,a=0;a<=n;a++)c=u,u=e[(a+1)*2+1],!(++l<p&&c===u)&&(l<b?t.bl_tree[c*2]+=l:c!==0?(c!==o&&t.bl_tree[c*2]++,t.bl_tree[REP_3_6*2]++):l<=10?t.bl_tree[REPZ_3_10*2]++:t.bl_tree[REPZ_11_138*2]++,l=0,o=c,u===0?(p=138,b=3):c===u?(p=6,b=3):(p=7,b=4))},send_tree=(t,e,n)=>{let a,o=-1,c,u=e[0*2+1],l=0,p=7,b=4;for(u===0&&(p=138,b=3),a=0;a<=n;a++)if(c=u,u=e[(a+1)*2+1],!(++l<p&&c===u)){if(l<b)do send_code(t,c,t.bl_tree);while(--l!==0);else c!==0?(c!==o&&(send_code(t,c,t.bl_tree),l--),send_code(t,REP_3_6,t.bl_tree),send_bits(t,l-3,2)):l<=10?(send_code(t,REPZ_3_10,t.bl_tree),send_bits(t,l-3,3)):(send_code(t,REPZ_11_138,t.bl_tree),send_bits(t,l-11,7));l=0,o=c,u===0?(p=138,b=3):c===u?(p=6,b=3):(p=7,b=4)}},build_bl_tree=t=>{let e;for(scan_tree(t,t.dyn_ltree,t.l_desc.max_code),scan_tree(t,t.dyn_dtree,t.d_desc.max_code),build_tree(t,t.bl_desc),e=BL_CODES$1-1;e>=3&&t.bl_tree[bl_order[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e},send_all_trees=(t,e,n,a)=>{let o;for(send_bits(t,e-257,5),send_bits(t,n-1,5),send_bits(t,a-4,4),o=0;o<a;o++)send_bits(t,t.bl_tree[bl_order[o]*2+1],3);send_tree(t,t.dyn_ltree,e-1),send_tree(t,t.dyn_dtree,n-1)},detect_data_type=t=>{let e=4093624447,n;for(n=0;n<=31;n++,e>>>=1)if(e&1&&t.dyn_ltree[n*2]!==0)return Z_BINARY;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return Z_TEXT;for(n=32;n<LITERALS$1;n++)if(t.dyn_ltree[n*2]!==0)return Z_TEXT;return Z_BINARY};let static_init_done=!1;const _tr_init$1=t=>{static_init_done||(tr_static_init(),static_init_done=!0),t.l_desc=new TreeDesc(t.dyn_ltree,static_l_desc),t.d_desc=new TreeDesc(t.dyn_dtree,static_d_desc),t.bl_desc=new TreeDesc(t.bl_tree,static_bl_desc),t.bi_buf=0,t.bi_valid=0,init_block(t)},_tr_stored_block$1=(t,e,n,a)=>{send_bits(t,(STORED_BLOCK<<1)+(a?1:0),3),bi_windup(t),put_short(t,n),put_short(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n},_tr_align$1=t=>{send_bits(t,STATIC_TREES<<1,3),send_code(t,END_BLOCK,static_ltree),bi_flush(t)},_tr_flush_block$1=(t,e,n,a)=>{let o,c,u=0;t.level>0?(t.strm.data_type===Z_UNKNOWN$1&&(t.strm.data_type=detect_data_type(t)),build_tree(t,t.l_desc),build_tree(t,t.d_desc),u=build_bl_tree(t),o=t.opt_len+3+7>>>3,c=t.static_len+3+7>>>3,c<=o&&(o=c)):o=c=n+5,n+4<=o&&e!==-1?_tr_stored_block$1(t,e,n,a):t.strategy===Z_FIXED$1||c===o?(send_bits(t,(STATIC_TREES<<1)+(a?1:0),3),compress_block(t,static_ltree,static_dtree)):(send_bits(t,(DYN_TREES<<1)+(a?1:0),3),send_all_trees(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),compress_block(t,t.dyn_ltree,t.dyn_dtree)),init_block(t),a&&bi_windup(t)},_tr_tally$1=(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,e===0?t.dyn_ltree[n*2]++:(t.matches++,e--,t.dyn_ltree[(_length_code[n]+LITERALS$1+1)*2]++,t.dyn_dtree[d_code(e)*2]++),t.sym_next===t.sym_end);var _tr_init_1=_tr_init$1,_tr_stored_block_1=_tr_stored_block$1,_tr_flush_block_1=_tr_flush_block$1,_tr_tally_1=_tr_tally$1,_tr_align_1=_tr_align$1,trees={_tr_init:_tr_init_1,_tr_stored_block:_tr_stored_block_1,_tr_flush_block:_tr_flush_block_1,_tr_tally:_tr_tally_1,_tr_align:_tr_align_1};const adler32=(t,e,n,a)=>{let o=t&65535|0,c=t>>>16&65535|0,u=0;for(;n!==0;){u=n>2e3?2e3:n,n-=u;do o=o+e[a++]|0,c=c+o|0;while(--u);o%=65521,c%=65521}return o|c<<16|0};var adler32_1=adler32;const makeTable=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var a=0;a<8;a++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},crcTable=new Uint32Array(makeTable()),crc32=(t,e,n,a)=>{const o=crcTable,c=a+n;t^=-1;for(let u=a;u<c;u++)t=t>>>8^o[(t^e[u])&255];return t^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init,_tr_stored_block,_tr_flush_block,_tr_tally,_tr_align}=trees,{Z_NO_FLUSH:Z_NO_FLUSH$2,Z_PARTIAL_FLUSH,Z_FULL_FLUSH:Z_FULL_FLUSH$1,Z_FINISH:Z_FINISH$3,Z_BLOCK:Z_BLOCK$1,Z_OK:Z_OK$3,Z_STREAM_END:Z_STREAM_END$3,Z_STREAM_ERROR:Z_STREAM_ERROR$2,Z_DATA_ERROR:Z_DATA_ERROR$2,Z_BUF_ERROR:Z_BUF_ERROR$1,Z_DEFAULT_COMPRESSION:Z_DEFAULT_COMPRESSION$1,Z_FILTERED,Z_HUFFMAN_ONLY,Z_RLE,Z_FIXED,Z_DEFAULT_STRATEGY:Z_DEFAULT_STRATEGY$1,Z_UNKNOWN,Z_DEFLATED:Z_DEFLATED$2}=constants$2,MAX_MEM_LEVEL=9,MAX_WBITS$1=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,GZIP_STATE=57,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,err=(t,e)=>(t.msg=messages[e],e),rank=t=>t*2-(t>4?9:0),zero=t=>{let e=t.length;for(;--e>=0;)t[e]=0},slide_hash=t=>{let e,n,a,o=t.w_size;e=t.hash_size,a=e;do n=t.head[--a],t.head[a]=n>=o?n-o:0;while(--e);e=o,a=e;do n=t.prev[--a],t.prev[a]=n>=o?n-o:0;while(--e)};let HASH_ZLIB=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask,HASH=HASH_ZLIB;const flush_pending=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),n!==0&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,e.pending===0&&(e.pending_out=0))},flush_block_only=(t,e)=>{_tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,flush_pending(t.strm)},put_byte=(t,e)=>{t.pending_buf[t.pending++]=e},putShortMSB=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255},read_buf=(t,e,n,a)=>{let o=t.avail_in;return o>a&&(o=a),o===0?0:(t.avail_in-=o,e.set(t.input.subarray(t.next_in,t.next_in+o),n),t.state.wrap===1?t.adler=adler32_1(t.adler,e,o,n):t.state.wrap===2&&(t.adler=crc32_1(t.adler,e,o,n)),t.next_in+=o,t.total_in+=o,o)},longest_match=(t,e)=>{let n=t.max_chain_length,a=t.strstart,o,c,u=t.prev_length,l=t.nice_match;const p=t.strstart>t.w_size-MIN_LOOKAHEAD?t.strstart-(t.w_size-MIN_LOOKAHEAD):0,b=t.window,v=t.w_mask,x=t.prev,_=t.strstart+MAX_MATCH;let E=b[a+u-1],$=b[a+u];t.prev_length>=t.good_match&&(n>>=2),l>t.lookahead&&(l=t.lookahead);do if(o=e,!(b[o+u]!==$||b[o+u-1]!==E||b[o]!==b[a]||b[++o]!==b[a+1])){a+=2,o++;do;while(b[++a]===b[++o]&&b[++a]===b[++o]&&b[++a]===b[++o]&&b[++a]===b[++o]&&b[++a]===b[++o]&&b[++a]===b[++o]&&b[++a]===b[++o]&&b[++a]===b[++o]&&a<_);if(c=MAX_MATCH-(_-a),a=_-MAX_MATCH,c>u){if(t.match_start=e,u=c,c>=l)break;E=b[a+u-1],$=b[a+u]}}while((e=x[e&v])>p&&--n!==0);return u<=t.lookahead?u:t.lookahead},fill_window=t=>{const e=t.w_size;let n,a,o;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-MIN_LOOKAHEAD)&&(t.window.set(t.window.subarray(e,e+e-a),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),slide_hash(t),a+=e),t.strm.avail_in===0)break;if(n=read_buf(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=n,t.lookahead+t.insert>=MIN_MATCH)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=HASH(t,t.ins_h,t.window[o+1]);t.insert&&(t.ins_h=HASH(t,t.ins_h,t.window[o+MIN_MATCH-1]),t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<MIN_MATCH)););}while(t.lookahead<MIN_LOOKAHEAD&&t.strm.avail_in!==0)},deflate_stored=(t,e)=>{let n=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,a,o,c,u=0,l=t.strm.avail_in;do{if(a=65535,c=t.bi_valid+42>>3,t.strm.avail_out<c||(c=t.strm.avail_out-c,o=t.strstart-t.block_start,a>o+t.strm.avail_in&&(a=o+t.strm.avail_in),a>c&&(a=c),a<n&&(a===0&&e!==Z_FINISH$3||e===Z_NO_FLUSH$2||a!==o+t.strm.avail_in)))break;u=e===Z_FINISH$3&&a===o+t.strm.avail_in?1:0,_tr_stored_block(t,0,0,u),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,flush_pending(t.strm),o&&(o>a&&(o=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+o),t.strm.next_out),t.strm.next_out+=o,t.strm.avail_out-=o,t.strm.total_out+=o,t.block_start+=o,a-=o),a&&(read_buf(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(u===0);return l-=t.strm.avail_in,l&&(l>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=l&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-l,t.strm.next_in),t.strstart),t.strstart+=l,t.insert+=l>t.w_size-t.insert?t.w_size-t.insert:l),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),u?BS_FINISH_DONE:e!==Z_NO_FLUSH$2&&e!==Z_FINISH$3&&t.strm.avail_in===0&&t.strstart===t.block_start?BS_BLOCK_DONE:(c=t.window_size-t.strstart,t.strm.avail_in>c&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,c+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),c>t.strm.avail_in&&(c=t.strm.avail_in),c&&(read_buf(t.strm,t.window,t.strstart,c),t.strstart+=c,t.insert+=c>t.w_size-t.insert?t.w_size-t.insert:c),t.high_water<t.strstart&&(t.high_water=t.strstart),c=t.bi_valid+42>>3,c=t.pending_buf_size-c>65535?65535:t.pending_buf_size-c,n=c>t.w_size?t.w_size:c,o=t.strstart-t.block_start,(o>=n||(o||e===Z_FINISH$3)&&e!==Z_NO_FLUSH$2&&t.strm.avail_in===0&&o<=c)&&(a=o>c?c:o,u=e===Z_FINISH$3&&t.strm.avail_in===0&&a===o?1:0,_tr_stored_block(t,t.block_start,a,u),t.block_start+=a,flush_pending(t.strm)),u?BS_FINISH_STARTED:BS_NEED_MORE)},deflate_fast=(t,e)=>{let n,a;for(;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(n=0,t.lookahead>=MIN_MATCH&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),n!==0&&t.strstart-n<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,n)),t.match_length>=MIN_MATCH)if(a=_tr_tally(t,t.strstart-t.match_start,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=MIN_MATCH){t.match_length--;do t.strstart++,t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+1]);else a=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,e===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_slow=(t,e)=>{let n,a,o;for(;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(n=0,t.lookahead>=MIN_MATCH&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=MIN_MATCH-1,n!==0&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,n),t.match_length<=5&&(t.strategy===Z_FILTERED||t.match_length===MIN_MATCH&&t.strstart-t.match_start>4096)&&(t.match_length=MIN_MATCH-1)),t.prev_length>=MIN_MATCH&&t.match_length<=t.prev_length){o=t.strstart+t.lookahead-MIN_MATCH,a=_tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-MIN_MATCH),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=o&&(t.ins_h=HASH(t,t.ins_h,t.window[t.strstart+MIN_MATCH-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=MIN_MATCH-1,t.strstart++,a&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}else if(t.match_available){if(a=_tr_tally(t,0,t.window[t.strstart-1]),a&&flush_block_only(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return BS_NEED_MORE}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=_tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,e===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_rle=(t,e)=>{let n,a,o,c;const u=t.window;for(;;){if(t.lookahead<=MAX_MATCH){if(fill_window(t),t.lookahead<=MAX_MATCH&&e===Z_NO_FLUSH$2)return BS_NEED_MORE;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=MIN_MATCH&&t.strstart>0&&(o=t.strstart-1,a=u[o],a===u[++o]&&a===u[++o]&&a===u[++o])){c=t.strstart+MAX_MATCH;do;while(a===u[++o]&&a===u[++o]&&a===u[++o]&&a===u[++o]&&a===u[++o]&&a===u[++o]&&a===u[++o]&&a===u[++o]&&o<c);t.match_length=MAX_MATCH-(c-o),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=MIN_MATCH?(n=_tr_tally(t,1,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE},deflate_huff=(t,e)=>{let n;for(;;){if(t.lookahead===0&&(fill_window(t),t.lookahead===0)){if(e===Z_NO_FLUSH$2)return BS_NEED_MORE;break}if(t.match_length=0,n=_tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(flush_block_only(t,!1),t.strm.avail_out===0))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH$3?(flush_block_only(t,!0),t.strm.avail_out===0?BS_FINISH_STARTED:BS_FINISH_DONE):t.sym_next&&(flush_block_only(t,!1),t.strm.avail_out===0)?BS_NEED_MORE:BS_BLOCK_DONE};function Config(t,e,n,a,o){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=a,this.func=o}const configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],lm_init=t=>{t.window_size=2*t.w_size,zero(t.head),t.max_lazy_match=configuration_table[t.level].max_lazy,t.good_match=configuration_table[t.level].good_length,t.nice_match=configuration_table[t.level].nice_length,t.max_chain_length=configuration_table[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=MIN_MATCH-1,t.match_available=0,t.ins_h=0};function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED$2,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(HEAP_SIZE*2),this.dyn_dtree=new Uint16Array((2*D_CODES+1)*2),this.bl_tree=new Uint16Array((2*BL_CODES+1)*2),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(MAX_BITS+1),this.heap=new Uint16Array(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*L_CODES+1),zero(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const deflateStateCheck=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==INIT_STATE&&e.status!==GZIP_STATE&&e.status!==EXTRA_STATE&&e.status!==NAME_STATE&&e.status!==COMMENT_STATE&&e.status!==HCRC_STATE&&e.status!==BUSY_STATE&&e.status!==FINISH_STATE?1:0},deflateResetKeep=t=>{if(deflateStateCheck(t))return err(t,Z_STREAM_ERROR$2);t.total_in=t.total_out=0,t.data_type=Z_UNKNOWN;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap===2?GZIP_STATE:e.wrap?INIT_STATE:BUSY_STATE,t.adler=e.wrap===2?0:1,e.last_flush=-2,_tr_init(e),Z_OK$3},deflateReset=t=>{const e=deflateResetKeep(t);return e===Z_OK$3&&lm_init(t.state),e},deflateSetHeader=(t,e)=>deflateStateCheck(t)||t.state.wrap!==2?Z_STREAM_ERROR$2:(t.state.gzhead=e,Z_OK$3),deflateInit2=(t,e,n,a,o,c)=>{if(!t)return Z_STREAM_ERROR$2;let u=1;if(e===Z_DEFAULT_COMPRESSION$1&&(e=6),a<0?(u=0,a=-a):a>15&&(u=2,a-=16),o<1||o>MAX_MEM_LEVEL||n!==Z_DEFLATED$2||a<8||a>15||e<0||e>9||c<0||c>Z_FIXED||a===8&&u!==1)return err(t,Z_STREAM_ERROR$2);a===8&&(a=9);const l=new DeflateState;return t.state=l,l.strm=t,l.status=INIT_STATE,l.wrap=u,l.gzhead=null,l.w_bits=a,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+MIN_MATCH-1)/MIN_MATCH),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=e,l.strategy=c,l.method=n,deflateReset(t)},deflateInit=(t,e)=>deflateInit2(t,e,Z_DEFLATED$2,MAX_WBITS$1,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY$1),deflate$2=(t,e)=>{if(deflateStateCheck(t)||e>Z_BLOCK$1||e<0)return t?err(t,Z_STREAM_ERROR$2):Z_STREAM_ERROR$2;const n=t.state;if(!t.output||t.avail_in!==0&&!t.input||n.status===FINISH_STATE&&e!==Z_FINISH$3)return err(t,t.avail_out===0?Z_BUF_ERROR$1:Z_STREAM_ERROR$2);const a=n.last_flush;if(n.last_flush=e,n.pending!==0){if(flush_pending(t),t.avail_out===0)return n.last_flush=-1,Z_OK$3}else if(t.avail_in===0&&rank(e)<=rank(a)&&e!==Z_FINISH$3)return err(t,Z_BUF_ERROR$1);if(n.status===FINISH_STATE&&t.avail_in!==0)return err(t,Z_BUF_ERROR$1);if(n.status===INIT_STATE&&n.wrap===0&&(n.status=BUSY_STATE),n.status===INIT_STATE){let o=Z_DEFLATED$2+(n.w_bits-8<<4)<<8,c=-1;if(n.strategy>=Z_HUFFMAN_ONLY||n.level<2?c=0:n.level<6?c=1:n.level===6?c=2:c=3,o|=c<<6,n.strstart!==0&&(o|=PRESET_DICT),o+=31-o%31,putShortMSB(n,o),n.strstart!==0&&(putShortMSB(n,t.adler>>>16),putShortMSB(n,t.adler&65535)),t.adler=1,n.status=BUSY_STATE,flush_pending(t),n.pending!==0)return n.last_flush=-1,Z_OK$3}if(n.status===GZIP_STATE){if(t.adler=0,put_byte(n,31),put_byte(n,139),put_byte(n,8),n.gzhead)put_byte(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),put_byte(n,n.gzhead.time&255),put_byte(n,n.gzhead.time>>8&255),put_byte(n,n.gzhead.time>>16&255),put_byte(n,n.gzhead.time>>24&255),put_byte(n,n.level===9?2:n.strategy>=Z_HUFFMAN_ONLY||n.level<2?4:0),put_byte(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(put_byte(n,n.gzhead.extra.length&255),put_byte(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=crc32_1(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=EXTRA_STATE;else if(put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,0),put_byte(n,n.level===9?2:n.strategy>=Z_HUFFMAN_ONLY||n.level<2?4:0),put_byte(n,OS_CODE),n.status=BUSY_STATE,flush_pending(t),n.pending!==0)return n.last_flush=-1,Z_OK$3}if(n.status===EXTRA_STATE){if(n.gzhead.extra){let o=n.pending,c=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+c>n.pending_buf_size;){let l=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+l),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>o&&(t.adler=crc32_1(t.adler,n.pending_buf,n.pending-o,o)),n.gzindex+=l,flush_pending(t),n.pending!==0)return n.last_flush=-1,Z_OK$3;o=0,c-=l}let u=new Uint8Array(n.gzhead.extra);n.pending_buf.set(u.subarray(n.gzindex,n.gzindex+c),n.pending),n.pending+=c,n.gzhead.hcrc&&n.pending>o&&(t.adler=crc32_1(t.adler,n.pending_buf,n.pending-o,o)),n.gzindex=0}n.status=NAME_STATE}if(n.status===NAME_STATE){if(n.gzhead.name){let o=n.pending,c;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>o&&(t.adler=crc32_1(t.adler,n.pending_buf,n.pending-o,o)),flush_pending(t),n.pending!==0)return n.last_flush=-1,Z_OK$3;o=0}n.gzindex<n.gzhead.name.length?c=n.gzhead.name.charCodeAt(n.gzindex++)&255:c=0,put_byte(n,c)}while(c!==0);n.gzhead.hcrc&&n.pending>o&&(t.adler=crc32_1(t.adler,n.pending_buf,n.pending-o,o)),n.gzindex=0}n.status=COMMENT_STATE}if(n.status===COMMENT_STATE){if(n.gzhead.comment){let o=n.pending,c;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>o&&(t.adler=crc32_1(t.adler,n.pending_buf,n.pending-o,o)),flush_pending(t),n.pending!==0)return n.last_flush=-1,Z_OK$3;o=0}n.gzindex<n.gzhead.comment.length?c=n.gzhead.comment.charCodeAt(n.gzindex++)&255:c=0,put_byte(n,c)}while(c!==0);n.gzhead.hcrc&&n.pending>o&&(t.adler=crc32_1(t.adler,n.pending_buf,n.pending-o,o))}n.status=HCRC_STATE}if(n.status===HCRC_STATE){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(flush_pending(t),n.pending!==0))return n.last_flush=-1,Z_OK$3;put_byte(n,t.adler&255),put_byte(n,t.adler>>8&255),t.adler=0}if(n.status=BUSY_STATE,flush_pending(t),n.pending!==0)return n.last_flush=-1,Z_OK$3}if(t.avail_in!==0||n.lookahead!==0||e!==Z_NO_FLUSH$2&&n.status!==FINISH_STATE){let o=n.level===0?deflate_stored(n,e):n.strategy===Z_HUFFMAN_ONLY?deflate_huff(n,e):n.strategy===Z_RLE?deflate_rle(n,e):configuration_table[n.level].func(n,e);if((o===BS_FINISH_STARTED||o===BS_FINISH_DONE)&&(n.status=FINISH_STATE),o===BS_NEED_MORE||o===BS_FINISH_STARTED)return t.avail_out===0&&(n.last_flush=-1),Z_OK$3;if(o===BS_BLOCK_DONE&&(e===Z_PARTIAL_FLUSH?_tr_align(n):e!==Z_BLOCK$1&&(_tr_stored_block(n,0,0,!1),e===Z_FULL_FLUSH$1&&(zero(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),flush_pending(t),t.avail_out===0))return n.last_flush=-1,Z_OK$3}return e!==Z_FINISH$3?Z_OK$3:n.wrap<=0?Z_STREAM_END$3:(n.wrap===2?(put_byte(n,t.adler&255),put_byte(n,t.adler>>8&255),put_byte(n,t.adler>>16&255),put_byte(n,t.adler>>24&255),put_byte(n,t.total_in&255),put_byte(n,t.total_in>>8&255),put_byte(n,t.total_in>>16&255),put_byte(n,t.total_in>>24&255)):(putShortMSB(n,t.adler>>>16),putShortMSB(n,t.adler&65535)),flush_pending(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Z_OK$3:Z_STREAM_END$3)},deflateEnd=t=>{if(deflateStateCheck(t))return Z_STREAM_ERROR$2;const e=t.state.status;return t.state=null,e===BUSY_STATE?err(t,Z_DATA_ERROR$2):Z_OK$3},deflateSetDictionary=(t,e)=>{let n=e.length;if(deflateStateCheck(t))return Z_STREAM_ERROR$2;const a=t.state,o=a.wrap;if(o===2||o===1&&a.status!==INIT_STATE||a.lookahead)return Z_STREAM_ERROR$2;if(o===1&&(t.adler=adler32_1(t.adler,e,n,0)),a.wrap=0,n>=a.w_size){o===0&&(zero(a.head),a.strstart=0,a.block_start=0,a.insert=0);let p=new Uint8Array(a.w_size);p.set(e.subarray(n-a.w_size,n),0),e=p,n=a.w_size}const c=t.avail_in,u=t.next_in,l=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,fill_window(a);a.lookahead>=MIN_MATCH;){let p=a.strstart,b=a.lookahead-(MIN_MATCH-1);do a.ins_h=HASH(a,a.ins_h,a.window[p+MIN_MATCH-1]),a.prev[p&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=p,p++;while(--b);a.strstart=p,a.lookahead=MIN_MATCH-1,fill_window(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=MIN_MATCH-1,a.match_available=0,t.next_in=u,t.input=l,t.avail_in=c,a.wrap=o,Z_OK$3};var deflateInit_1=deflateInit,deflateInit2_1=deflateInit2,deflateReset_1=deflateReset,deflateResetKeep_1=deflateResetKeep,deflateSetHeader_1=deflateSetHeader,deflate_2$1=deflate$2,deflateEnd_1=deflateEnd,deflateSetDictionary_1=deflateSetDictionary,deflateInfo="pako deflate (from Nodeca project)",deflate_1$2={deflateInit:deflateInit_1,deflateInit2:deflateInit2_1,deflateReset:deflateReset_1,deflateResetKeep:deflateResetKeep_1,deflateSetHeader:deflateSetHeader_1,deflate:deflate_2$1,deflateEnd:deflateEnd_1,deflateSetDictionary:deflateSetDictionary_1,deflateInfo};const _has=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var assign$1=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const a in n)_has(n,a)&&(t[a]=n[a])}}return t},flattenChunks=t=>{let e=0;for(let a=0,o=t.length;a<o;a++)e+=t[a].length;const n=new Uint8Array(e);for(let a=0,o=0,c=t.length;a<c;a++){let u=t[a];n.set(u,o),o+=u.length}return n},common$1={assign:assign$1,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let t=0;t<256;t++)_utf8len[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,a,o,c,u=t.length,l=0;for(o=0;o<u;o++)n=t.charCodeAt(o),(n&64512)===55296&&o+1<u&&(a=t.charCodeAt(o+1),(a&64512)===56320&&(n=65536+(n-55296<<10)+(a-56320),o++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(l),c=0,o=0;c<l;o++)n=t.charCodeAt(o),(n&64512)===55296&&o+1<u&&(a=t.charCodeAt(o+1),(a&64512)===56320&&(n=65536+(n-55296<<10)+(a-56320),o++)),n<128?e[c++]=n:n<2048?(e[c++]=192|n>>>6,e[c++]=128|n&63):n<65536?(e[c++]=224|n>>>12,e[c++]=128|n>>>6&63,e[c++]=128|n&63):(e[c++]=240|n>>>18,e[c++]=128|n>>>12&63,e[c++]=128|n>>>6&63,e[c++]=128|n&63);return e};const buf2binstring=(t,e)=>{if(e<65534&&t.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n};var buf2string=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let a,o;const c=new Array(n*2);for(o=0,a=0;a<n;){let u=t[a++];if(u<128){c[o++]=u;continue}let l=_utf8len[u];if(l>4){c[o++]=65533,a+=l-1;continue}for(u&=l===2?31:l===3?15:7;l>1&&a<n;)u=u<<6|t[a++]&63,l--;if(l>1){c[o++]=65533;continue}u<65536?c[o++]=u:(u-=65536,c[o++]=55296|u>>10&1023,c[o++]=56320|u&1023)}return buf2binstring(c,o)},utf8border=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+_utf8len[t[n]]>e?n:e},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const toString$1$1=Object.prototype.toString,{Z_NO_FLUSH:Z_NO_FLUSH$1,Z_SYNC_FLUSH,Z_FULL_FLUSH,Z_FINISH:Z_FINISH$2,Z_OK:Z_OK$2,Z_STREAM_END:Z_STREAM_END$2,Z_DEFAULT_COMPRESSION,Z_DEFAULT_STRATEGY,Z_DEFLATED:Z_DEFLATED$1}=constants$2;function Deflate$1(t){this.options=common$1.assign({level:Z_DEFAULT_COMPRESSION,method:Z_DEFLATED$1,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_DEFAULT_STRATEGY},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let n=deflate_1$2.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==Z_OK$2)throw new Error(messages[n]);if(e.header&&deflate_1$2.deflateSetHeader(this.strm,e.header),e.dictionary){let a;if(typeof e.dictionary=="string"?a=strings.string2buf(e.dictionary):toString$1$1.call(e.dictionary)==="[object ArrayBuffer]"?a=new Uint8Array(e.dictionary):a=e.dictionary,n=deflate_1$2.deflateSetDictionary(this.strm,a),n!==Z_OK$2)throw new Error(messages[n]);this._dict_set=!0}}Deflate$1.prototype.push=function(t,e){const n=this.strm,a=this.options.chunkSize;let o,c;if(this.ended)return!1;for(e===~~e?c=e:c=e===!0?Z_FINISH$2:Z_NO_FLUSH$1,typeof t=="string"?n.input=strings.string2buf(t):toString$1$1.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),(c===Z_SYNC_FLUSH||c===Z_FULL_FLUSH)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(o=deflate_1$2.deflate(n,c),o===Z_STREAM_END$2)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),o=deflate_1$2.deflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===Z_OK$2;if(n.avail_out===0){this.onData(n.output);continue}if(c>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Deflate$1.prototype.onData=function(t){this.chunks.push(t)};Deflate$1.prototype.onEnd=function(t){t===Z_OK$2&&(this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function deflate$1(t,e){const n=new Deflate$1(e);if(n.push(t,!0),n.err)throw n.msg||messages[n.err];return n.result}function deflateRaw$1(t,e){return e=e||{},e.raw=!0,deflate$1(t,e)}function gzip$1(t,e){return e=e||{},e.gzip=!0,deflate$1(t,e)}var Deflate_1$1=Deflate$1,deflate_2=deflate$1,deflateRaw_1$1=deflateRaw$1,gzip_1$1=gzip$1,constants$1=constants$2,deflate_1$1={Deflate:Deflate_1$1,deflate:deflate_2,deflateRaw:deflateRaw_1$1,gzip:gzip_1$1,constants:constants$1};const BAD$1=16209,TYPE$1=16191;var inffast=function t(e,n){let a,o,c,u,l,p,b,v,x,_,E,$,S,A,I,O,F,U,G,J,k,ne,ee,de;const ae=e.state;a=e.next_in,ee=e.input,o=a+(e.avail_in-5),c=e.next_out,de=e.output,u=c-(n-e.avail_out),l=c+(e.avail_out-257),p=ae.dmax,b=ae.wsize,v=ae.whave,x=ae.wnext,_=ae.window,E=ae.hold,$=ae.bits,S=ae.lencode,A=ae.distcode,I=(1<<ae.lenbits)-1,O=(1<<ae.distbits)-1;e:do{$<15&&(E+=ee[a++]<<$,$+=8,E+=ee[a++]<<$,$+=8),F=S[E&I];t:for(;;){if(U=F>>>24,E>>>=U,$-=U,U=F>>>16&255,U===0)de[c++]=F&65535;else if(U&16){G=F&65535,U&=15,U&&($<U&&(E+=ee[a++]<<$,$+=8),G+=E&(1<<U)-1,E>>>=U,$-=U),$<15&&(E+=ee[a++]<<$,$+=8,E+=ee[a++]<<$,$+=8),F=A[E&O];r:for(;;){if(U=F>>>24,E>>>=U,$-=U,U=F>>>16&255,U&16){if(J=F&65535,U&=15,$<U&&(E+=ee[a++]<<$,$+=8,$<U&&(E+=ee[a++]<<$,$+=8)),J+=E&(1<<U)-1,J>p){e.msg="invalid distance too far back",ae.mode=BAD$1;break e}if(E>>>=U,$-=U,U=c-u,J>U){if(U=J-U,U>v&&ae.sane){e.msg="invalid distance too far back",ae.mode=BAD$1;break e}if(k=0,ne=_,x===0){if(k+=b-U,U<G){G-=U;do de[c++]=_[k++];while(--U);k=c-J,ne=de}}else if(x<U){if(k+=b+x-U,U-=x,U<G){G-=U;do de[c++]=_[k++];while(--U);if(k=0,x<G){U=x,G-=U;do de[c++]=_[k++];while(--U);k=c-J,ne=de}}}else if(k+=x-U,U<G){G-=U;do de[c++]=_[k++];while(--U);k=c-J,ne=de}for(;G>2;)de[c++]=ne[k++],de[c++]=ne[k++],de[c++]=ne[k++],G-=3;G&&(de[c++]=ne[k++],G>1&&(de[c++]=ne[k++]))}else{k=c-J;do de[c++]=de[k++],de[c++]=de[k++],de[c++]=de[k++],G-=3;while(G>2);G&&(de[c++]=de[k++],G>1&&(de[c++]=de[k++]))}}else if(U&64){e.msg="invalid distance code",ae.mode=BAD$1;break e}else{F=A[(F&65535)+(E&(1<<U)-1)];continue r}break}}else if(U&64)if(U&32){ae.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",ae.mode=BAD$1;break e}else{F=S[(F&65535)+(E&(1<<U)-1)];continue t}break}}while(a<o&&c<l);G=$>>3,a-=G,$-=G<<3,E&=(1<<$)-1,e.next_in=a,e.next_out=c,e.avail_in=a<o?5+(o-a):5-(a-o),e.avail_out=c<l?257+(l-c):257-(c-l),ae.hold=E,ae.bits=$};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(t,e,n,a,o,c,u,l)=>{const p=l.bits;let b=0,v=0,x=0,_=0,E=0,$=0,S=0,A=0,I=0,O=0,F,U,G,J,k,ne=null,ee;const de=new Uint16Array(MAXBITS+1),ae=new Uint16Array(MAXBITS+1);let L=null,P,T,C;for(b=0;b<=MAXBITS;b++)de[b]=0;for(v=0;v<a;v++)de[e[n+v]]++;for(E=p,_=MAXBITS;_>=1&&de[_]===0;_--);if(E>_&&(E=_),_===0)return o[c++]=1<<24|64<<16|0,o[c++]=1<<24|64<<16|0,l.bits=1,0;for(x=1;x<_&&de[x]===0;x++);for(E<x&&(E=x),A=1,b=1;b<=MAXBITS;b++)if(A<<=1,A-=de[b],A<0)return-1;if(A>0&&(t===CODES$1||_!==1))return-1;for(ae[1]=0,b=1;b<MAXBITS;b++)ae[b+1]=ae[b]+de[b];for(v=0;v<a;v++)e[n+v]!==0&&(u[ae[e[n+v]]++]=v);if(t===CODES$1?(ne=L=u,ee=20):t===LENS$1?(ne=lbase,L=lext,ee=257):(ne=dbase,L=dext,ee=0),O=0,v=0,b=x,k=c,$=E,S=0,G=-1,I=1<<E,J=I-1,t===LENS$1&&I>ENOUGH_LENS$1||t===DISTS$1&&I>ENOUGH_DISTS$1)return 1;for(;;){P=b-S,u[v]+1<ee?(T=0,C=u[v]):u[v]>=ee?(T=L[u[v]-ee],C=ne[u[v]-ee]):(T=32+64,C=0),F=1<<b-S,U=1<<$,x=U;do U-=F,o[k+(O>>S)+U]=P<<24|T<<16|C|0;while(U!==0);for(F=1<<b-1;O&F;)F>>=1;if(F!==0?(O&=F-1,O+=F):O=0,v++,--de[b]===0){if(b===_)break;b=e[n+u[v]]}if(b>E&&(O&J)!==G){for(S===0&&(S=E),k+=x,$=b-S,A=1<<$;$+S<_&&(A-=de[$+S],!(A<=0));)$++,A<<=1;if(I+=1<<$,t===LENS$1&&I>ENOUGH_LENS$1||t===DISTS$1&&I>ENOUGH_DISTS$1)return 1;G=O&J,o[G]=E<<24|$<<16|k-c|0}}return O!==0&&(o[k+O]=b-S<<24|64<<16|0),l.bits=E,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<HEAD||e.mode>SYNC?1:0},inflateResetKeep=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=HEAD,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ENOUGH_LENS),e.distcode=e.distdyn=new Int32Array(ENOUGH_DISTS),e.sane=1,e.back=-1,Z_OK$1},inflateReset=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,inflateResetKeep(t)},inflateReset2=(t,e)=>{let n;if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const a=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Z_STREAM_ERROR$1:(a.window!==null&&a.wbits!==e&&(a.window=null),a.wrap=n,a.wbits=e,inflateReset(t))},inflateInit2=(t,e)=>{if(!t)return Z_STREAM_ERROR$1;const n=new InflateState;t.state=n,n.strm=t,n.window=null,n.mode=HEAD;const a=inflateReset2(t,e);return a!==Z_OK$1&&(t.state=null),a},inflateInit=t=>inflateInit2(t,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=t=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(inftrees(LENS,t.lens,0,288,lenfix,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;inftrees(DISTS,t.lens,0,32,distfix,0,t.work,{bits:5}),virgin=!1}t.lencode=lenfix,t.lenbits=9,t.distcode=distfix,t.distbits=5},updatewindow=(t,e,n,a)=>{let o;const c=t.state;return c.window===null&&(c.wsize=1<<c.wbits,c.wnext=0,c.whave=0,c.window=new Uint8Array(c.wsize)),a>=c.wsize?(c.window.set(e.subarray(n-c.wsize,n),0),c.wnext=0,c.whave=c.wsize):(o=c.wsize-c.wnext,o>a&&(o=a),c.window.set(e.subarray(n-a,n-a+o),c.wnext),a-=o,a?(c.window.set(e.subarray(n-a,n),0),c.wnext=a,c.whave=c.wsize):(c.wnext+=o,c.wnext===c.wsize&&(c.wnext=0),c.whave<c.wsize&&(c.whave+=o))),0},inflate$2=(t,e)=>{let n,a,o,c,u,l,p,b,v,x,_,E,$,S,A=0,I,O,F,U,G,J,k,ne;const ee=new Uint8Array(4);let de,ae;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(t)||!t.output||!t.input&&t.avail_in!==0)return Z_STREAM_ERROR$1;n=t.state,n.mode===TYPE&&(n.mode=TYPEDO),u=t.next_out,o=t.output,p=t.avail_out,c=t.next_in,a=t.input,l=t.avail_in,b=n.hold,v=n.bits,x=l,_=p,ne=Z_OK$1;e:for(;;)switch(n.mode){case HEAD:if(n.wrap===0){n.mode=TYPEDO;break}for(;v<16;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}if(n.wrap&2&&b===35615){n.wbits===0&&(n.wbits=15),n.check=0,ee[0]=b&255,ee[1]=b>>>8&255,n.check=crc32_1(n.check,ee,2,0),b=0,v=0,n.mode=FLAGS;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((b&255)<<8)+(b>>8))%31){t.msg="incorrect header check",n.mode=BAD;break}if((b&15)!==Z_DEFLATED){t.msg="unknown compression method",n.mode=BAD;break}if(b>>>=4,v-=4,k=(b&15)+8,n.wbits===0&&(n.wbits=k),k>15||k>n.wbits){t.msg="invalid window size",n.mode=BAD;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=b&512?DICTID:TYPE,b=0,v=0;break;case FLAGS:for(;v<16;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}if(n.flags=b,(n.flags&255)!==Z_DEFLATED){t.msg="unknown compression method",n.mode=BAD;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=BAD;break}n.head&&(n.head.text=b>>8&1),n.flags&512&&n.wrap&4&&(ee[0]=b&255,ee[1]=b>>>8&255,n.check=crc32_1(n.check,ee,2,0)),b=0,v=0,n.mode=TIME;case TIME:for(;v<32;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}n.head&&(n.head.time=b),n.flags&512&&n.wrap&4&&(ee[0]=b&255,ee[1]=b>>>8&255,ee[2]=b>>>16&255,ee[3]=b>>>24&255,n.check=crc32_1(n.check,ee,4,0)),b=0,v=0,n.mode=OS;case OS:for(;v<16;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}n.head&&(n.head.xflags=b&255,n.head.os=b>>8),n.flags&512&&n.wrap&4&&(ee[0]=b&255,ee[1]=b>>>8&255,n.check=crc32_1(n.check,ee,2,0)),b=0,v=0,n.mode=EXLEN;case EXLEN:if(n.flags&1024){for(;v<16;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}n.length=b,n.head&&(n.head.extra_len=b),n.flags&512&&n.wrap&4&&(ee[0]=b&255,ee[1]=b>>>8&255,n.check=crc32_1(n.check,ee,2,0)),b=0,v=0}else n.head&&(n.head.extra=null);n.mode=EXTRA;case EXTRA:if(n.flags&1024&&(E=n.length,E>l&&(E=l),E&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(a.subarray(c,c+E),k)),n.flags&512&&n.wrap&4&&(n.check=crc32_1(n.check,a,E,c)),l-=E,c+=E,n.length-=E),n.length))break e;n.length=0,n.mode=NAME;case NAME:if(n.flags&2048){if(l===0)break e;E=0;do k=a[c+E++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k));while(k&&E<l);if(n.flags&512&&n.wrap&4&&(n.check=crc32_1(n.check,a,E,c)),l-=E,c+=E,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=COMMENT;case COMMENT:if(n.flags&4096){if(l===0)break e;E=0;do k=a[c+E++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k));while(k&&E<l);if(n.flags&512&&n.wrap&4&&(n.check=crc32_1(n.check,a,E,c)),l-=E,c+=E,k)break e}else n.head&&(n.head.comment=null);n.mode=HCRC;case HCRC:if(n.flags&512){for(;v<16;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}if(n.wrap&4&&b!==(n.check&65535)){t.msg="header crc mismatch",n.mode=BAD;break}b=0,v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=TYPE;break;case DICTID:for(;v<32;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}t.adler=n.check=zswap32(b),b=0,v=0,n.mode=DICT;case DICT:if(n.havedict===0)return t.next_out=u,t.avail_out=p,t.next_in=c,t.avail_in=l,n.hold=b,n.bits=v,Z_NEED_DICT$1;t.adler=n.check=1,n.mode=TYPE;case TYPE:if(e===Z_BLOCK||e===Z_TREES)break e;case TYPEDO:if(n.last){b>>>=v&7,v-=v&7,n.mode=CHECK;break}for(;v<3;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}switch(n.last=b&1,b>>>=1,v-=1,b&3){case 0:n.mode=STORED;break;case 1:if(fixedtables(n),n.mode=LEN_,e===Z_TREES){b>>>=2,v-=2;break e}break;case 2:n.mode=TABLE;break;case 3:t.msg="invalid block type",n.mode=BAD}b>>>=2,v-=2;break;case STORED:for(b>>>=v&7,v-=v&7;v<32;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}if((b&65535)!==(b>>>16^65535)){t.msg="invalid stored block lengths",n.mode=BAD;break}if(n.length=b&65535,b=0,v=0,n.mode=COPY_,e===Z_TREES)break e;case COPY_:n.mode=COPY;case COPY:if(E=n.length,E){if(E>l&&(E=l),E>p&&(E=p),E===0)break e;o.set(a.subarray(c,c+E),u),l-=E,c+=E,p-=E,u+=E,n.length-=E;break}n.mode=TYPE;break;case TABLE:for(;v<14;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}if(n.nlen=(b&31)+257,b>>>=5,v-=5,n.ndist=(b&31)+1,b>>>=5,v-=5,n.ncode=(b&15)+4,b>>>=4,v-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=BAD;break}n.have=0,n.mode=LENLENS;case LENLENS:for(;n.have<n.ncode;){for(;v<3;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}n.lens[L[n.have++]]=b&7,b>>>=3,v-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,de={bits:n.lenbits},ne=inftrees(CODES,n.lens,0,19,n.lencode,0,n.work,de),n.lenbits=de.bits,ne){t.msg="invalid code lengths set",n.mode=BAD;break}n.have=0,n.mode=CODELENS;case CODELENS:for(;n.have<n.nlen+n.ndist;){for(;A=n.lencode[b&(1<<n.lenbits)-1],I=A>>>24,O=A>>>16&255,F=A&65535,!(I<=v);){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}if(F<16)b>>>=I,v-=I,n.lens[n.have++]=F;else{if(F===16){for(ae=I+2;v<ae;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}if(b>>>=I,v-=I,n.have===0){t.msg="invalid bit length repeat",n.mode=BAD;break}k=n.lens[n.have-1],E=3+(b&3),b>>>=2,v-=2}else if(F===17){for(ae=I+3;v<ae;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}b>>>=I,v-=I,k=0,E=3+(b&7),b>>>=3,v-=3}else{for(ae=I+7;v<ae;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}b>>>=I,v-=I,k=0,E=11+(b&127),b>>>=7,v-=7}if(n.have+E>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=BAD;break}for(;E--;)n.lens[n.have++]=k}}if(n.mode===BAD)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=BAD;break}if(n.lenbits=9,de={bits:n.lenbits},ne=inftrees(LENS,n.lens,0,n.nlen,n.lencode,0,n.work,de),n.lenbits=de.bits,ne){t.msg="invalid literal/lengths set",n.mode=BAD;break}if(n.distbits=6,n.distcode=n.distdyn,de={bits:n.distbits},ne=inftrees(DISTS,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,de),n.distbits=de.bits,ne){t.msg="invalid distances set",n.mode=BAD;break}if(n.mode=LEN_,e===Z_TREES)break e;case LEN_:n.mode=LEN;case LEN:if(l>=6&&p>=258){t.next_out=u,t.avail_out=p,t.next_in=c,t.avail_in=l,n.hold=b,n.bits=v,inffast(t,_),u=t.next_out,o=t.output,p=t.avail_out,c=t.next_in,a=t.input,l=t.avail_in,b=n.hold,v=n.bits,n.mode===TYPE&&(n.back=-1);break}for(n.back=0;A=n.lencode[b&(1<<n.lenbits)-1],I=A>>>24,O=A>>>16&255,F=A&65535,!(I<=v);){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}if(O&&!(O&240)){for(U=I,G=O,J=F;A=n.lencode[J+((b&(1<<U+G)-1)>>U)],I=A>>>24,O=A>>>16&255,F=A&65535,!(U+I<=v);){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}b>>>=U,v-=U,n.back+=U}if(b>>>=I,v-=I,n.back+=I,n.length=F,O===0){n.mode=LIT;break}if(O&32){n.back=-1,n.mode=TYPE;break}if(O&64){t.msg="invalid literal/length code",n.mode=BAD;break}n.extra=O&15,n.mode=LENEXT;case LENEXT:if(n.extra){for(ae=n.extra;v<ae;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}n.length+=b&(1<<n.extra)-1,b>>>=n.extra,v-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=DIST;case DIST:for(;A=n.distcode[b&(1<<n.distbits)-1],I=A>>>24,O=A>>>16&255,F=A&65535,!(I<=v);){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}if(!(O&240)){for(U=I,G=O,J=F;A=n.distcode[J+((b&(1<<U+G)-1)>>U)],I=A>>>24,O=A>>>16&255,F=A&65535,!(U+I<=v);){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}b>>>=U,v-=U,n.back+=U}if(b>>>=I,v-=I,n.back+=I,O&64){t.msg="invalid distance code",n.mode=BAD;break}n.offset=F,n.extra=O&15,n.mode=DISTEXT;case DISTEXT:if(n.extra){for(ae=n.extra;v<ae;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}n.offset+=b&(1<<n.extra)-1,b>>>=n.extra,v-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=BAD;break}n.mode=MATCH;case MATCH:if(p===0)break e;if(E=_-p,n.offset>E){if(E=n.offset-E,E>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=BAD;break}E>n.wnext?(E-=n.wnext,$=n.wsize-E):$=n.wnext-E,E>n.length&&(E=n.length),S=n.window}else S=o,$=u-n.offset,E=n.length;E>p&&(E=p),p-=E,n.length-=E;do o[u++]=S[$++];while(--E);n.length===0&&(n.mode=LEN);break;case LIT:if(p===0)break e;o[u++]=n.length,p--,n.mode=LEN;break;case CHECK:if(n.wrap){for(;v<32;){if(l===0)break e;l--,b|=a[c++]<<v,v+=8}if(_-=p,t.total_out+=_,n.total+=_,n.wrap&4&&_&&(t.adler=n.check=n.flags?crc32_1(n.check,o,_,u-_):adler32_1(n.check,o,_,u-_)),_=p,n.wrap&4&&(n.flags?b:zswap32(b))!==n.check){t.msg="incorrect data check",n.mode=BAD;break}b=0,v=0}n.mode=LENGTH;case LENGTH:if(n.wrap&&n.flags){for(;v<32;){if(l===0)break e;l--,b+=a[c++]<<v,v+=8}if(n.wrap&4&&b!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=BAD;break}b=0,v=0}n.mode=DONE;case DONE:ne=Z_STREAM_END$1;break e;case BAD:ne=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return t.next_out=u,t.avail_out=p,t.next_in=c,t.avail_in=l,n.hold=b,n.bits=v,(n.wsize||_!==t.avail_out&&n.mode<BAD&&(n.mode<CHECK||e!==Z_FINISH$1))&&updatewindow(t,t.output,t.next_out,_-t.avail_out),x-=t.avail_in,_-=t.avail_out,t.total_in+=x,t.total_out+=_,n.total+=_,n.wrap&4&&_&&(t.adler=n.check=n.flags?crc32_1(n.check,o,_,t.next_out-_):adler32_1(n.check,o,_,t.next_out-_)),t.data_type=n.bits+(n.last?64:0)+(n.mode===TYPE?128:0)+(n.mode===LEN_||n.mode===COPY_?256:0),(x===0&&_===0||e===Z_FINISH$1)&&ne===Z_OK$1&&(ne=Z_BUF_ERROR),ne},inflateEnd=t=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;let e=t.state;return e.window&&(e.window=null),t.state=null,Z_OK$1},inflateGetHeader=(t,e)=>{if(inflateStateCheck(t))return Z_STREAM_ERROR$1;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,Z_OK$1):Z_STREAM_ERROR$1},inflateSetDictionary=(t,e)=>{const n=e.length;let a,o,c;return inflateStateCheck(t)||(a=t.state,a.wrap!==0&&a.mode!==DICT)?Z_STREAM_ERROR$1:a.mode===DICT&&(o=1,o=adler32_1(o,e,n,0),o!==a.check)?Z_DATA_ERROR$1:(c=updatewindow(t,e,n,n),c?(a.mode=MEM,Z_MEM_ERROR$1):(a.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$3=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(t){this.options=common$1.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let n=inflate_1$2.inflateInit2(this.strm,e.windowBits);if(n!==Z_OK)throw new Error(messages[n]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=strings.string2buf(e.dictionary):toString$3.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=inflate_1$2.inflateSetDictionary(this.strm,e.dictionary),n!==Z_OK)))throw new Error(messages[n])}Inflate$1.prototype.push=function(t,e){const n=this.strm,a=this.options.chunkSize,o=this.options.dictionary;let c,u,l;if(this.ended)return!1;for(e===~~e?u=e:u=e===!0?Z_FINISH:Z_NO_FLUSH,toString$3.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),c=inflate_1$2.inflate(n,u),c===Z_NEED_DICT&&o&&(c=inflate_1$2.inflateSetDictionary(n,o),c===Z_OK?c=inflate_1$2.inflate(n,u):c===Z_DATA_ERROR&&(c=Z_NEED_DICT));n.avail_in>0&&c===Z_STREAM_END&&n.state.wrap>0&&t[n.next_in]!==0;)inflate_1$2.inflateReset(n),c=inflate_1$2.inflate(n,u);switch(c){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(c),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||c===Z_STREAM_END))if(this.options.to==="string"){let p=strings.utf8border(n.output,n.next_out),b=n.next_out-p,v=strings.buf2string(n.output,p);n.next_out=b,n.avail_out=a-b,b&&n.output.set(n.output.subarray(p,p+b),0),this.onData(v)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(c===Z_OK&&l===0)){if(c===Z_STREAM_END)return c=inflate_1$2.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(t){this.chunks.push(t)};Inflate$1.prototype.onEnd=function(t){t===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common$1.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function inflate$1(t,e){const n=new Inflate$1(e);if(n.push(t),n.err)throw n.msg||messages[n.err];return n.result}function inflateRaw$1(t,e){return e=e||{},e.raw=!0,inflate$1(t,e)}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflateRaw_1$1=inflateRaw$1,ungzip$1=inflate$1,constants$3=constants$2,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2,inflateRaw:inflateRaw_1$1,ungzip:ungzip$1,constants:constants$3};const{Deflate,deflate,deflateRaw,gzip}=deflate_1$1,{Inflate,inflate,inflateRaw,ungzip}=inflate_1$1;var Deflate_1=Deflate,deflate_1=deflate,deflateRaw_1=deflateRaw,gzip_1=gzip,Inflate_1=Inflate,inflate_1=inflate,inflateRaw_1=inflateRaw,ungzip_1=ungzip,constants_1$1=constants$2,pako={Deflate:Deflate_1,deflate:deflate_1,deflateRaw:deflateRaw_1,gzip:gzip_1,Inflate:Inflate_1,inflate:inflate_1,inflateRaw:inflateRaw_1,ungzip:ungzip_1,constants:constants_1$1},objectSafeSet=set;function set(t,e,n){var a,o;if(Array.isArray(e)&&(a=e.slice(0)),typeof e=="string"&&(a=e.split(".")),typeof e=="symbol"&&(a=[e]),!Array.isArray(a))throw new Error("props arg must be an array, a string or a symbol");if(o=a.pop(),!o)return!1;prototypeCheck(o);for(var c;c=a.shift();)if(prototypeCheck(c),typeof t[c]>"u"&&(t[c]={}),t=t[c],!t||typeof t!="object")return!1;return t[o]=n,!0}function prototypeCheck(t){if(t=="__proto__"||t=="constructor"||t=="prototype")throw new Error("setting of prototype values not supported")}function createHeader(t){const e=encode$f({version:1,roots:t}),n=varint$3.encode(e.length),a=new Uint8Array(n.length+e.length);return a.set(n,0),a.set(e,n.length),a}function createEncoder(t){return{async setRoots(e){const n=createHeader(e);await t.write(n)},async writeBlock(e){const{cid:n,bytes:a}=e;await t.write(new Uint8Array(varint$3.encode(n.bytes.length+a.length))),await t.write(n.bytes),a.length&&await t.write(a)},async close(){await t.end()}}}function noop$2(){}function create(){const t=[];let e=null,n=noop$2,a=!1,o=null,c=noop$2;const u=()=>(e||(e=new Promise(b=>{n=()=>{e=null,n=noop$2,b()}})),e),l={write(b){t.push(b);const v=u();return c(),v},async end(){a=!0;const b=u();c(),await b}},p={async next(){const b=t.shift();return b?(t.length===0&&n(),{done:!1,value:b}):a?(n(),{done:!0,value:void 0}):(o||(o=new Promise(v=>{c=()=>(o=null,c=noop$2,v(p.next()))})),o)}};return{writer:l,iterator:p}}const Kinds={Null:t=>t===null,Int:t=>Number.isInteger(t),Float:t=>typeof t=="number"&&Number.isFinite(t),String:t=>typeof t=="string",Bool:t=>typeof t=="boolean",Bytes:t=>t instanceof Uint8Array,Link:t=>!Kinds.Null(t)&&typeof t=="object"&&t.asCID===t,List:t=>Array.isArray(t),Map:t=>!Kinds.Null(t)&&typeof t=="object"&&t.asCID!==t&&!Kinds.List(t)&&!Kinds.Bytes(t)},Types={Int:Kinds.Int,"CarHeader > version":t=>Types.Int(t),"CarHeader > roots (anon) > valueType (anon)":Kinds.Link,"CarHeader > roots (anon)":t=>Kinds.List(t)&&Array.prototype.every.call(t,Types["CarHeader > roots (anon) > valueType (anon)"]),"CarHeader > roots":t=>Types["CarHeader > roots (anon)"](t),CarHeader:t=>{const e=t&&Object.keys(t);return Kinds.Map(t)&&["version"].every(n=>e.includes(n))&&Object.entries(t).every(([n,a])=>Types["CarHeader > "+n]&&Types["CarHeader > "+n](a))}},CarHeader=Types.CarHeader,CIDV0_BYTES={SHA2_256:18,LENGTH:32,DAG_PB:112},V2_HEADER_LENGTH=16+8+8+8;function decodeVarint(t,e){if(!t.length)throw new Error("Unexpected end of data");const n=varint$3.decode(t);return e.seek(varint$3.decode.bytes),n}function decodeV2Header(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);let n=0;return{version:2,characteristics:[e.getBigUint64(n,!0),e.getBigUint64(n+=8,!0)],dataOffset:Number(e.getBigUint64(n+=8,!0)),dataSize:Number(e.getBigUint64(n+=8,!0)),indexOffset:Number(e.getBigUint64(n+=8,!0))}}function getMultihashLength(t){varint$3.decode(t);const e=varint$3.decode.bytes,n=varint$3.decode(t.subarray(varint$3.decode.bytes)),a=varint$3.decode.bytes;return e+a+n}async function readHeader(t,e){const n=decodeVarint(await t.upTo(8),t);if(n===0)throw new Error("Invalid CAR header (zero length)");const a=await t.exactly(n,!0),o=decode$c(a);if(!CarHeader(o))throw new Error("Invalid CAR header format");if(o.version!==1&&o.version!==2||e!==void 0&&o.version!==e)throw new Error(`Invalid CAR version: ${o.version}${e!==void 0?` (expected ${e})`:""}`);const c=Array.isArray(o.roots);if(o.version===1&&!c||o.version===2&&c)throw new Error("Invalid CAR header format");if(o.version===1)return o;const u=decodeV2Header(await t.exactly(V2_HEADER_LENGTH,!0));t.seek(u.dataOffset-t.pos);const l=await readHeader(t,1);return Object.assign(l,u)}async function readCid(t){const e=await t.exactly(2,!1);if(e[0]===CIDV0_BYTES.SHA2_256&&e[1]===CIDV0_BYTES.LENGTH){const u=await t.exactly(34,!0),l=decode$f(u);return CID.create(0,CIDV0_BYTES.DAG_PB,l)}const n=decodeVarint(await t.upTo(8),t);if(n!==1)throw new Error(`Unexpected CID version (${n})`);const a=decodeVarint(await t.upTo(8),t),o=await t.exactly(getMultihashLength(await t.upTo(8)),!0),c=decode$f(o);return CID.create(n,a,c)}async function readBlockHead(t){const e=t.pos;let n=decodeVarint(await t.upTo(8),t);if(n===0)throw new Error("Invalid CAR section (zero length)");n+=t.pos-e;const a=await readCid(t),o=n-Number(t.pos-e);return{cid:a,length:n,blockLength:o}}async function readBlock(t){const{cid:e,blockLength:n}=await readBlockHead(t);return{bytes:await t.exactly(n,!0),cid:e}}async function readBlockIndex(t){const e=t.pos,{cid:n,length:a,blockLength:o}=await readBlockHead(t),c={cid:n,length:a,blockLength:o,offset:e,blockOffset:t.pos};return t.seek(c.blockLength),c}function createDecoder(t){const e=(async()=>{const n=await readHeader(t);if(n.version===2){const a=t.pos-n.dataOffset;t=limitReader(t,n.dataSize-a)}return n})();return{header:()=>e,async*blocks(){for(await e;(await t.upTo(8)).length>0;)yield await readBlock(t)},async*blocksIndex(){for(await e;(await t.upTo(8)).length>0;)yield await readBlockIndex(t)}}}function bytesReader(t){let e=0;return{async upTo(n){return t.subarray(e,e+Math.min(n,t.length-e))},async exactly(n,a=!1){if(n>t.length-e)throw new Error("Unexpected end of data");const o=t.subarray(e,e+n);return a&&(e+=n),o},seek(n){e+=n},get pos(){return e}}}function chunkReader(t){let e=0,n=0,a=0,o=new Uint8Array(0);const c=async u=>{n=o.length-a;const l=[o.subarray(a)];for(;n<u;){const b=await t();if(b==null)break;n<0?b.length>n&&l.push(b.subarray(-n)):l.push(b),n+=b.length}o=new Uint8Array(l.reduce((b,v)=>b+v.length,0));let p=0;for(const b of l)o.set(b,p),p+=b.length;a=0};return{async upTo(u){return o.length-a<u&&await c(u),o.subarray(a,a+Math.min(o.length-a,u))},async exactly(u,l=!1){if(o.length-a<u&&await c(u),o.length-a<u)throw new Error("Unexpected end of data");const p=o.subarray(a,a+u);return l&&(e+=u,a+=u),p},seek(u){e+=u,a+=u},get pos(){return e}}}function asyncIterableReader(t){const e=t[Symbol.asyncIterator]();async function n(){const a=await e.next();return a.done?null:a.value}return chunkReader(n)}function limitReader(t,e){let n=0;return{async upTo(a){let o=await t.upTo(a);return o.length+n>e&&(o=o.subarray(0,e-n)),o},async exactly(a,o=!1){const c=await t.exactly(a,o);if(c.length+n>e)throw new Error("Unexpected end of data");return o&&(n+=a),c},seek(a){n+=a,t.seek(a)},get pos(){return t.pos}}}class CarWriter{constructor(e,n){this._encoder=n,this._mutex=n.setRoots(e),this._ended=!1}async put(e){if(!(e.bytes instanceof Uint8Array)||!e.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const n=CID.asCID(e.cid);if(!n)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:n,bytes:e.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(e){e=toRoots(e);const{encoder:n,iterator:a}=encodeWriter(),o=new CarWriter(e,n),c=new CarWriterOut(a);return{writer:o,out:c}}static createAppender(){const{encoder:e,iterator:n}=encodeWriter();e.setRoots=()=>Promise.resolve();const a=new CarWriter([],e),o=new CarWriterOut(n);return{writer:a,out:o}}static async updateRootsInBytes(e,n){const a=bytesReader(e);await readHeader(a);const o=createHeader(n);if(Number(a.pos)!==o.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${a.pos} bytes, new header is ${o.length} bytes)`);return e.set(o,0),e}}class CarWriterOut{constructor(e){this._iterator=e}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function encodeWriter(){const t=create(),{writer:e,iterator:n}=t;return{encoder:createEncoder(e),iterator:n}}function toRoots(t){if(t===void 0)return[];if(!Array.isArray(t)){const n=CID.asCID(t);if(!n)throw new TypeError("roots must be a single CID or an array of CIDs");return[n]}const e=[];for(const n of t){const a=CID.asCID(n);if(!a)throw new TypeError("roots must be a single CID or an array of CIDs");e.push(a)}return e}async function first$1(t){for await(const e of t)return e}class CarIteratorBase{constructor(e,n,a){this._version=e,this._roots=n,this._iterable=a,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class CarBlockIterator extends CarIteratorBase{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(e){const{version:n,roots:a,iterator:o}=await fromBytes(e);return new CarBlockIterator(n,a,o)}static async fromIterable(e){const{version:n,roots:a,iterator:o}=await fromIterable(e);return new CarBlockIterator(n,a,o)}}async function fromBytes(t){if(!(t instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeIterator(bytesReader(t))}async function fromIterable(t){if(!t||typeof t[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return decodeIterator(asyncIterableReader(t))}async function decodeIterator(t){const e=createDecoder(t),{version:n,roots:a}=await e.header();return{version:n,roots:a,iterator:e.blocks()}}function arrayShuffle(t){if(!Array.isArray(t))throw new TypeError(`Expected an array, got ${typeof t}`);t=[...t];for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}class TimeoutError extends Error{constructor(e){super(e),this.name="TimeoutError"}}let AbortError$3=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const getDOMException$1=t=>globalThis.DOMException===void 0?new AbortError$3(t):new DOMException(t),getAbortedReason$1=t=>{const e=t.reason===void 0?getDOMException$1("This operation was aborted."):t.reason;return e instanceof Error?e:getDOMException$1(e)};function pTimeout(t,e){const{milliseconds:n,fallback:a,message:o,customTimers:c={setTimeout,clearTimeout}}=e;let u;const l=new Promise((p,b)=>{if(typeof n!="number"||Math.sign(n)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(n===Number.POSITIVE_INFINITY){p(t);return}if(e.signal){const{signal:x}=e;x.aborted&&b(getAbortedReason$1(x)),x.addEventListener("abort",()=>{b(getAbortedReason$1(x))})}const v=new TimeoutError;u=c.setTimeout.call(void 0,()=>{if(a){try{p(a())}catch(x){b(x)}return}typeof t.cancel=="function"&&t.cancel(),o===!1?p():o instanceof Error?b(o):(v.message=o??`Promise timed out after ${n} milliseconds`,b(v))},n),(async()=>{try{p(await t)}catch(x){b(x)}finally{c.clearTimeout.call(void 0,u)}})()});return l.clear=()=>{c.clearTimeout.call(void 0,u),u=void 0},l}const WORKER_REQUEST_READ_LOCK="lock:worker:request-read",WORKER_RELEASE_READ_LOCK="lock:worker:release-read",MASTER_GRANT_READ_LOCK="lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK="lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK="lock:worker:release-write",MASTER_GRANT_WRITE_LOCK="lock:master:grant-write",events$1={},observable=t=>{t.addEventListener("message",e=>{observable.dispatchEvent("message",t,e)}),t.port!=null&&t.port.addEventListener("message",e=>{observable.dispatchEvent("message",t,e)})};observable.addEventListener=(t,e)=>{events$1[t]==null&&(events$1[t]=[]),events$1[t].push(e)};observable.removeEventListener=(t,e)=>{events$1[t]!=null&&(events$1[t]=events$1[t].filter(n=>n===e))};observable.dispatchEvent=function(t,e,n){events$1[t]!=null&&events$1[t].forEach(a=>a(e,n))};const handleWorkerLockRequest=(t,e,n,a,o)=>(c,u)=>{if(u.data.type!==n)return;const l={type:u.data.type,name:u.data.name,identifier:u.data.identifier};t.dispatchEvent(new MessageEvent(e,{data:{name:l.name,handler:async()=>(c.postMessage({type:o,name:l.name,identifier:l.identifier}),await new Promise(p=>{const b=v=>{if(v==null||v.data==null)return;const x={type:v.data.type,name:v.data.name,identifier:v.data.identifier};x.type===a&&x.identifier===l.identifier&&(c.removeEventListener("message",b),p())};c.addEventListener("message",b)}))}}))},makeWorkerLockRequest=(t,e,n,a)=>async()=>{const o=nanoid$1();return globalThis.postMessage({type:e,identifier:o,name:t}),await new Promise(c=>{const u=l=>{if(l==null||l.data==null)return;const p={type:l.data.type,identifier:l.data.identifier};p.type===n&&p.identifier===o&&(globalThis.removeEventListener("message",u),c(()=>{globalThis.postMessage({type:a,identifier:o,name:t})}))};globalThis.addEventListener("message",u)})},defaultOptions$2={singleProcess:!1},impl=t=>{if(t=Object.assign({},defaultOptions$2,t),!!globalThis.document||t.singleProcess){const n=new EventTarget;return observable.addEventListener("message",handleWorkerLockRequest(n,"requestReadLock",WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK)),observable.addEventListener("message",handleWorkerLockRequest(n,"requestWriteLock",WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK)),n}return{isWorker:!0,readLock:n=>makeWorkerLockRequest(n,WORKER_REQUEST_READ_LOCK,MASTER_GRANT_READ_LOCK,WORKER_RELEASE_READ_LOCK),writeLock:n=>makeWorkerLockRequest(n,WORKER_REQUEST_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK)}},mutexes={};let implementation;async function createReleaseable(t,e){let n;const a=new Promise(o=>{n=o});return t.add(async()=>await pTimeout((async()=>await new Promise(o=>{n(()=>{o()})}))(),{milliseconds:e.timeout})),await a}const createMutex=(t,e)=>{if(implementation.isWorker===!0)return{readLock:implementation.readLock(t,e),writeLock:implementation.writeLock(t,e)};const n=new PQueue({concurrency:1});let a;return{async readLock(){if(a!=null)return await createReleaseable(a,e);a=new PQueue({concurrency:e.concurrency,autoStart:!1});const o=a,c=createReleaseable(a,e);return n.add(async()=>(o.start(),await o.onIdle().then(()=>{a===o&&(a=null)}))),await c},async writeLock(){return a=null,await createReleaseable(n,e)}}},defaultOptions$1={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function createMortice(t){const e=Object.assign({},defaultOptions$1,t);return implementation==null&&(implementation=impl(e),implementation.isWorker!==!0&&(implementation.addEventListener("requestReadLock",n=>{mutexes[n.data.name]!=null&&mutexes[n.data.name].readLock().then(async a=>await n.data.handler().finally(()=>a()))}),implementation.addEventListener("requestWriteLock",async n=>{mutexes[n.data.name]!=null&&mutexes[n.data.name].writeLock().then(async a=>await n.data.handler().finally(()=>a()))}))),mutexes[e.name]==null&&(mutexes[e.name]=createMutex(e.name,e)),mutexes[e.name]}var objectSafeGet=get;function get(t,e,n){if(!t)return n;var a,o;if(Array.isArray(e)&&(a=e.slice(0)),typeof e=="string"&&(a=e.split(".")),typeof e=="symbol"&&(a=[e]),!Array.isArray(a))throw new Error("props arg must be an array, a string or a symbol");for(;a.length;)if(o=a.shift(),!t||(t=t[o],t===void 0))return n;return t}async function length$2(t){let e=0;for await(const n of t)e++;return e}var fnv1a$1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),n.BASE=2166136261;function n(a,o=n.BASE){const c=a.length;for(let u=0;u<c;u++)o^=a.charCodeAt(u),o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24);return o>>>0}e.default=n,t.exports=n})(fnv1a$1,fnv1a$1.exports);var fnv1aExports=fnv1a$1.exports;const fnv1a=getDefaultExportFromCjs(fnv1aExports);var bytes$2={exports:{}};/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */bytes$2.exports=bytes;bytes$2.exports.format=format$2;bytes$2.exports.parse=parse$5;var formatThousandsRegExp=/\B(?=(\d{3})+(?!\d))/g,formatDecimalsRegExp=/(?:\.0*|(\.[^0]+)0+)$/,map$2={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},parseRegExp=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function bytes(t,e){return typeof t=="string"?parse$5(t):typeof t=="number"?format$2(t,e):null}function format$2(t,e){if(!Number.isFinite(t))return null;var n=Math.abs(t),a=e&&e.thousandsSeparator||"",o=e&&e.unitSeparator||"",c=e&&e.decimalPlaces!==void 0?e.decimalPlaces:2,u=!!(e&&e.fixedDecimals),l=e&&e.unit||"";(!l||!map$2[l.toLowerCase()])&&(n>=map$2.pb?l="PB":n>=map$2.tb?l="TB":n>=map$2.gb?l="GB":n>=map$2.mb?l="MB":n>=map$2.kb?l="KB":l="B");var p=t/map$2[l.toLowerCase()],b=p.toFixed(c);return u||(b=b.replace(formatDecimalsRegExp,"$1")),a&&(b=b.split(".").map(function(v,x){return x===0?v.replace(formatThousandsRegExp,a):v}).join(".")),b+o+l}function parse$5(t){if(typeof t=="number"&&!isNaN(t))return t;if(typeof t!="string")return null;var e=parseRegExp.exec(t),n,a="b";return e?(n=parseFloat(e[1]),a=e[4].toLowerCase()):(n=parseInt(t,10),a="b"),isNaN(n)?null:Math.floor(map$2[a]*n)}var bytesExports=bytes$2.exports;const bytes$1=getDefaultExportFromCjs(bytesExports);function isPlainObject(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function sortKeys(t,e={}){if(!isPlainObject(t)&&!Array.isArray(t))throw new TypeError("Expected a plain object or array");const{deep:n,compare:a}=e,o=[],c=[],u=p=>{const b=o.indexOf(p);if(b!==-1)return c[b];const v=[];return o.push(p),c.push(v),v.push(...p.map(x=>Array.isArray(x)?u(x):isPlainObject(x)?l(x):x)),v},l=p=>{const b=o.indexOf(p);if(b!==-1)return c[b];const v={},x=Object.keys(p).sort(a);o.push(p),c.push(v);for(const _ of x){const E=p[_];let $;n&&Array.isArray(E)?$=u(E):$=n&&isPlainObject(E)?l(E):E,Object.defineProperty(v,_,{...Object.getOwnPropertyDescriptor(p,_),value:$})}return v};return Array.isArray(t)?n?u(t):t.slice():l(t)}class QuickLRU extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[n,a]of e)this.onEviction(n,a.value)}_deleteIfExpired(e,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,n.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,n){if(this._deleteIfExpired(e,n)===!1)return n.value}_getItemValue(e,n){return n.expiry?this._getOrDeleteIfExpired(e,n):n.value}_peek(e,n){const a=n.get(e);return this._getItemValue(e,a)}_set(e,n){this.cache.set(e,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,n){this.oldCache.delete(e),this._set(e,n)}*_entriesAscending(){for(const e of this.oldCache){const[n,a]=e;this.cache.has(n)||this._deleteIfExpired(n,a)===!1&&(yield e)}for(const e of this.cache){const[n,a]=e;this._deleteIfExpired(n,a)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const n=this.cache.get(e);return this._getItemValue(e,n)}if(this.oldCache.has(e)){const n=this.oldCache.get(e);if(this._deleteIfExpired(e,n)===!1)return this._moveToRecent(e,n),n.value}}set(e,n,{maxAge:a=this.maxAge}={}){const o=typeof a=="number"&&a!==Number.POSITIVE_INFINITY?Date.now()+a:void 0;this.cache.has(e)?this.cache.set(e,{value:n,expiry:o}):this._set(e,{value:n,expiry:o})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const n=this.cache.delete(e);return n&&this._size--,this.oldCache.delete(e)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],a=n.length-e;a<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(a>0&&this._emitEvictions(n.slice(0,a)),this.oldCache=new Map(n.slice(a)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[n,a]=e;this._deleteIfExpired(n,a)===!1&&(yield[n,a.value])}for(const e of this.oldCache){const[n,a]=e;this.cache.has(n)||this._deleteIfExpired(n,a)===!1&&(yield[n,a.value])}}*entriesDescending(){let e=[...this.cache];for(let n=e.length-1;n>=0;--n){const a=e[n],[o,c]=a;this._deleteIfExpired(o,c)===!1&&(yield[o,c.value])}e=[...this.oldCache];for(let n=e.length-1;n>=0;--n){const a=e[n],[o,c]=a;this.cache.has(o)||this._deleteIfExpired(o,c)===!1&&(yield[o,c.value])}}*entriesAscending(){for(const[e,n]of this._entriesAscending())yield[e,n.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const n of this.oldCache.keys())this.cache.has(n)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,n=this){for(const[a,o]of this.entriesAscending())e.call(n,o,a,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function*sort(t,e){yield*(await all(t)).sort(e)}var browserLevel={},abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function t(...e){const n=e.reduce((a,o)=>Object.assign(a,o),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,n){super(e||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$1={};let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$1}=buffer$2||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const n=this.encode(e);return Buffer$1.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:n}=textEndec();return new ViewFormat$2({encode:a=>e.encode(this.encode(a)),decode:a=>this.decode(n.decode(a)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer}=buffer$2||{Buffer:{isBuffer:()=>!1}},{textEncoder:textEncoder$1,textDecoder}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity$2=t=>t;encodings$1.utf8=new UTF8Format$1({encode:function(t){return Buffer.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?textDecoder.decode(t):String(t)},decode:identity$2,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$1.encode(t)},decode:function(t){return textDecoder.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer.from(t.buffer,t.byteOffset,t.byteLength):Buffer.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});encodings$1.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$1.buffer=new BufferFormat$1({encode:function(t){return Buffer.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer.from(t.buffer,t.byteOffset,t.byteLength):Buffer.from(String(t),"utf8")},decode:identity$2,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:Buffer.from(String(t),"utf8")},decode:function(t){return Buffer.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});encodings$1.view=new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$1.encode(t)},decode:identity$2,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer.from(t.buffer,t.byteOffset,t.byteLength):Buffer.from(String(t),"utf8")},decode:identity$2,name:`${this.name}+buffer`})}});encodings$1.hex=new BufferFormat$1({encode:function(t){return Buffer.isBuffer(t)?t:Buffer.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});encodings$1.base64=new BufferFormat$1({encode:function(t){return Buffer.isBuffer(t)?t:Buffer.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings=encodings$1,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(e){if(Array.isArray(e)){if(!e.every(n=>validFormats.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const n in encodings)try{this.encoding(n)}catch(a){if(a.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw a}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let n=this[kEncodings].get(e);if(n===void 0){if(typeof e=="string"&&e!==""){if(n=lookup$2[e],!n)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");n=from(e)}const{name:a,format:o}=n;if(!this[kFormats].has(o))if(this[kFormats].has("view"))n=n.createViewTranscoder();else if(this[kFormats].has("buffer"))n=n.createBufferTranscoder();else if(this[kFormats].has("utf8"))n=n.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${a}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const c of[e,a,n.name,n.commonName])this[kEncodings].set(c,n)}return n}};levelTranscoder.Transcoder=Transcoder$1;function from(t){if(t instanceof Encoding)return t;const e="type"in t&&typeof t.type=="string"?t.type:void 0,n=t.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(t)){case"view":return new ViewFormat({...t,name:n});case"utf8":return new UTF8Format({...t,name:n});case"buffer":return new BufferFormat({...t,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}const aliases={binary:encodings.buffer,"utf-8":encodings.utf8},lookup$2={...encodings,...aliases};let anonymousCount=0;var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t),nextTick$2=nextTickBrowser$1;catering.fromCallback=function(t,e){if(t===void 0){var n=new Promise(function(a,o){t=function(c,u){c?o(c):a(u)}});t[e!==void 0?e:"promise"]=n}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};catering.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(n){nextTick$2(()=>e(null,n))}).catch(function(n){nextTick$2(()=>e(n))})};var abstractIterator={},common={};common.getCallback=function(t,e){return typeof t=="function"?t:e};common.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}};const{fromCallback:fromCallback$3}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common,kPromise$3=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions$1=Object.freeze({}),noop$1=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,n,a){if(typeof e!="object"||e===null){const o=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${o}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=n[kKeyEncoding$1],this[kValueEncoding$1]=n[kValueEncoding$1],this[kLegacy]=a,this[kLimit]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!n.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let n;if(e===void 0)n=new Promise((a,o)=>{e=(c,u,l)=>{c?o(c):this[kLegacy]?u===void 0&&l===void 0?a():a([u,l]):a(u)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),n}_next(e){this.nextTick(e)}nextv(e,n,a){return a=getCallback$2(n,a),a=fromCallback$3(a,kPromise$3),n=getOptions$2(n,emptyOptions$1),Number.isInteger(e)?(this[kClosing]?this.nextTick(a,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(a,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=a,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,n,this[kHandleMany$1])),a[kPromise$3]):(this.nextTick(a,new TypeError("The first argument 'size' must be an integer")),a[kPromise$3])}_nextv(e,n,a){const o=[],c=(u,l,p)=>{if(u)return a(u);if(this[kLegacy]?l===void 0&&p===void 0:l===void 0)return a(null,o);o.push(this[kLegacy]?[l,p]:l),o.length===e?a(null,o):this._next(c)};this._next(c)}all(e,n){return n=getCallback$2(e,n),n=fromCallback$3(n,kPromise$3),e=getOptions$2(e,emptyOptions$1),this[kClosing]?this.nextTick(n,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(n,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=n,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),n[kPromise$3]}_all(e,n){let a=this[kCount];const o=[],c=()=>{const l=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-a):1e3;l<=0?this.nextTick(n,null,o):this._nextv(l,emptyOptions$1,u)},u=(l,p)=>{l?n(l):p.length===0?n(null,o):(o.push.apply(o,p),a+=p.length,c())};c()}[kFinishWork](){const e=this[kCallback$1];return this[kAbortOnClose]&&e===null?noop$1:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,n,a){this[kAutoClose]?this.close(e.bind(null,n,a)):e(n,a)}seek(e,n){if(n=getOptions$2(n,emptyOptions$1),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const a=this.db.keyEncoding(n.keyEncoding||this[kKeyEncoding$1]),o=a.format;n.keyEncoding!==o&&(n={...n,keyEncoding:o});const c=this.db.prefixKey(a.encode(e),o);this._seek(c,n)}}}_seek(e,n){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$3(e,kPromise$3),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$3]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const n of e)n()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(e,n){super(e,n,!0),this[kKeys]=n.keys!==!1,this[kValues]=n.values!==!1}[kHandleOne$1](e,n,a){const o=this[kFinishWork]();if(e)return o(e);try{n=this[kKeys]&&n!==void 0?this[kKeyEncoding$1].decode(n):void 0,a=this[kValues]&&a!==void 0?this[kValueEncoding$1].decode(a):void 0}catch(c){return o(new IteratorDecodeError("entry",c))}n===void 0&&a===void 0||this[kCount]++,o(null,n,a)}[kHandleMany$1](e,n){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(const o of n){const c=o[0],u=o[1];o[0]=this[kKeys]&&c!==void 0?this[kKeyEncoding$1].decode(c):void 0,o[1]=this[kValues]&&u!==void 0?this[kValueEncoding$1].decode(u):void 0}}catch(o){return this[kReturnMany](a,new IteratorDecodeError("entries",o))}this[kCount]+=n.length,this[kReturnMany](a,null,n)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},AbstractKeyIterator$2=class extends CommonIterator{constructor(e,n){super(e,n,!1)}[kHandleOne$1](e,n){const a=this[kFinishWork]();if(e)return a(e);try{n=n!==void 0?this[kKeyEncoding$1].decode(n):void 0}catch(o){return a(new IteratorDecodeError("key",o))}n!==void 0&&this[kCount]++,a(null,n)}[kHandleMany$1](e,n){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(let o=0;o<n.length;o++){const c=n[o];n[o]=c!==void 0?this[kKeyEncoding$1].decode(c):void 0}}catch(o){return this[kReturnMany](a,new IteratorDecodeError("keys",o))}this[kCount]+=n.length,this[kReturnMany](a,null,n)}},AbstractValueIterator$2=class extends CommonIterator{constructor(e,n){super(e,n,!1)}[kHandleOne$1](e,n){const a=this[kFinishWork]();if(e)return a(e);try{n=n!==void 0?this[kValueEncoding$1].decode(n):void 0}catch(o){return a(new IteratorDecodeError("value",o))}n!==void 0&&this[kCount]++,a(null,n)}[kHandleMany$1](e,n){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(let o=0;o<n.length;o++){const c=n[o];n[o]=c!==void 0?this[kValueEncoding$1].decode(c):void 0}}catch(o){return this[kReturnMany](a,new IteratorDecodeError("values",o))}this[kCount]+=n.length,this[kReturnMany](a,null,n)}};class IteratorDecodeError extends ModuleError$6{constructor(e,n){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:n})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,t.split(" ")[0],{get(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$2;abstractIterator.AbstractValueIterator=AbstractValueIterator$2;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,kIterator=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$1{constructor(e,n){super(e,n),this[kIterator]=e.iterator({...n,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$1{constructor(e,n){super(e,n),this[kIterator]=e.iterator({...n,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const t of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=t===DefaultKeyIterator$1,n=e?a=>a[0]:a=>a[1];t.prototype._next=function(a){this[kCallback]=a,this[kIterator].next(this[kHandleOne])},t.prototype[kHandleOne]=function(a,o,c){const u=this[kCallback];a?u(a):u(null,e?o:c)},t.prototype._nextv=function(a,o,c){this[kCallback]=c,this[kIterator].nextv(a,o,this[kHandleMany])},t.prototype._all=function(a,o){this[kCallback]=o,this[kIterator].all(a,this[kHandleMany])},t.prototype[kHandleMany]=function(a,o){const c=this[kCallback];a?c(a):c(null,o.map(n))},t.prototype._seek=function(a,o){this[kIterator].seek(a,o)},t.prototype._close=function(a){this[kIterator].close(a)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator,AbstractValueIterator}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.iterator(n),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.keys(n),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.values(n),this.db.defer(()=>this[kUndefer$1]())}};for(const t of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])t.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},t.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,n,a){this[kNut]!==null?this[kNut].nextv(e,n,a):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,n,a)):this.nextTick(a,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,n){this[kNut]!==null?this[kNut].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(e,n)):this.nextTick(n,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,n){this[kNut]!==null?this[kNut]._seek(e,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,n))},t.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$2}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common,kPromise$2=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(e){if(typeof e!="object"||e===null){const n=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,n,a){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const o=this.db._checkKey(e)||this.db._checkValue(n);if(o)throw o;const c=a&&a.sublevel!=null?a.sublevel:this.db,u=a,l=c.keyEncoding(a&&a.keyEncoding),p=c.valueEncoding(a&&a.valueEncoding),b=l.format;a={...a,keyEncoding:b,valueEncoding:p.format},c!==this.db&&(a.sublevel=null);const v=c.prefixKey(l.encode(e),b),x=p.encode(n);return this._put(v,x,a),this[kOperations$1].push({...u,type:"put",key:e,value:n}),this}_put(e,n,a){}del(e,n){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const a=this.db._checkKey(e);if(a)throw a;const o=n&&n.sublevel!=null?n.sublevel:this.db,c=n,u=o.keyEncoding(n&&n.keyEncoding),l=u.format;return n={...n,keyEncoding:l},o!==this.db&&(n.sublevel=null),this._del(o.prefixKey(u.encode(e),l),n),this[kOperations$1].push({...c,type:"del",key:e}),this}_del(e,n){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,n){return n=getCallback$1(e,n),n=fromCallback$2(n,kPromise$2),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick(n,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[kStatus$1]="writing",this._write(e,a=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>n(a)),a||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),n[kPromise$2]}_write(e,n){}close(e){return e=fromCallback$2(e,kPromise$2),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$2]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const n of e)n()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,n,a){this[kEncoded].push({...a,type:"put",key:e,value:n})}_del(e,n){this[kEncoded].push({...n,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,n){this.db.status==="opening"?this.db.defer(()=>this._write(e,n)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(n):this.db._batch(this[kEncoded],e,n):this.nextTick(n,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty=Object.prototype.hasOwnProperty,rangeOptions$1=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(t,e){const n={};for(const a in t)if(hasOwnProperty.call(t,a)&&!(a==="keyEncoding"||a==="valueEncoding")){if(a==="start"||a==="end")throw new ModuleError$2(`The legacy range option '${a}' has been removed`,{code:"LEVEL_LEGACY"});if(a==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$1.has(a)?n[a]=e.encode(t[a]):n[a]=t[a]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):t=>(promise||(promise=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const t=queueMicrotask_1;return nextTickBrowser=function(e,...n){n.length===0?t(e):t(()=>e(...n))},nextTickBrowser}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:n}=abstractIterator,a=Symbol("unfix"),o=Symbol("iterator"),c=Symbol("handleOne"),u=Symbol("handleMany"),l=Symbol("callback");class p extends t{constructor(_,E,$,S){super(_,E),this[o]=$,this[a]=S,this[c]=this[c].bind(this),this[u]=this[u].bind(this),this[l]=null}[c](_,E,$){const S=this[l];if(_)return S(_);E!==void 0&&(E=this[a](E)),S(_,E,$)}[u](_,E){const $=this[l];if(_)return $(_);for(const S of E){const A=S[0];A!==void 0&&(S[0]=this[a](A))}$(_,E)}}class b extends e{constructor(_,E,$,S){super(_,E),this[o]=$,this[a]=S,this[c]=this[c].bind(this),this[u]=this[u].bind(this),this[l]=null}[c](_,E){const $=this[l];if(_)return $(_);E!==void 0&&(E=this[a](E)),$(_,E)}[u](_,E){const $=this[l];if(_)return $(_);for(let S=0;S<E.length;S++){const A=E[S];A!==void 0&&(E[S]=this[a](A))}$(_,E)}}class v extends n{constructor(_,E,$){super(_,E),this[o]=$}}for(const x of[p,b])x.prototype._next=function(_){this[l]=_,this[o].next(this[c])},x.prototype._nextv=function(_,E,$){this[l]=$,this[o].nextv(_,E,this[u])},x.prototype._all=function(_,E){this[l]=E,this[o].all(_,this[u])};for(const x of[v])x.prototype._next=function(_){this[o].next(_)},x.prototype._nextv=function(_,E,$){this[o].nextv(_,E,$)},x.prototype._all=function(_,E){this[o].all(_,E)};for(const x of[p,b,v])x.prototype._seek=function(_,E){this[o].seek(_,E)},x.prototype._close=function(_){this[o].close(_)};return abstractSublevelIterator.AbstractSublevelIterator=p,abstractSublevelIterator.AbstractSublevelKeyIterator=b,abstractSublevelIterator.AbstractSublevelValueIterator=v,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const t=moduleError,{Buffer:e}=buffer$2||{},{AbstractSublevelIterator:n,AbstractSublevelKeyIterator:a,AbstractSublevelValueIterator:o}=requireAbstractSublevelIterator(),c=Symbol("prefix"),u=Symbol("upperBound"),l=Symbol("prefixRange"),p=Symbol("parent"),b=Symbol("unfix"),v=new TextEncoder,x={separator:"!"};abstractSublevel=function({AbstractLevel:I}){class O extends I{static defaults(U){if(typeof U=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(U&&U.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return U==null?x:U.separator?U:{...U,separator:"!"}}constructor(U,G,J){const{separator:k,manifest:ne,...ee}=O.defaults(J);G=A(G,k);const de=k.charCodeAt(0)+1,ae=U[p]||U;if(!v.encode(G).every(T=>T>de&&T<127))throw new t(`Prefix must use bytes > ${de} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(_(ae,ne),ee);const L=(U.prefix||"")+k+G+k,P=L.slice(0,-1)+String.fromCharCode(de);this[p]=ae,this[c]=new $(L),this[u]=new $(P),this[b]=new S,this.nextTick=ae.nextTick}prefixKey(U,G){if(G==="utf8")return this[c].utf8+U;if(U.byteLength===0)return this[c][G];if(G==="view"){const J=this[c].view,k=new Uint8Array(J.byteLength+U.byteLength);return k.set(J,0),k.set(U,J.byteLength),k}else{const J=this[c].buffer;return e.concat([J,U],J.byteLength+U.byteLength)}}[l](U,G){U.gte!==void 0?U.gte=this.prefixKey(U.gte,G):U.gt!==void 0?U.gt=this.prefixKey(U.gt,G):U.gte=this[c][G],U.lte!==void 0?U.lte=this.prefixKey(U.lte,G):U.lt!==void 0?U.lt=this.prefixKey(U.lt,G):U.lte=this[u][G]}get prefix(){return this[c].utf8}get db(){return this[p]}_open(U,G){this[p].open({passive:!0},G)}_put(U,G,J,k){this[p].put(U,G,J,k)}_get(U,G,J){this[p].get(U,G,J)}_getMany(U,G,J){this[p].getMany(U,G,J)}_del(U,G,J){this[p].del(U,G,J)}_batch(U,G,J){this[p].batch(U,G,J)}_clear(U,G){this[l](U,U.keyEncoding),this[p].clear(U,G)}_iterator(U){this[l](U,U.keyEncoding);const G=this[p].iterator(U),J=this[b].get(this[c].utf8.length,U.keyEncoding);return new n(this,U,G,J)}_keys(U){this[l](U,U.keyEncoding);const G=this[p].keys(U),J=this[b].get(this[c].utf8.length,U.keyEncoding);return new a(this,U,G,J)}_values(U){this[l](U,U.keyEncoding);const G=this[p].values(U);return new o(this,U,G)}}return{AbstractSublevel:O}};const _=function(I,O){return{...I.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...O,encodings:{utf8:E(I,"utf8"),buffer:E(I,"buffer"),view:E(I,"view")}}},E=function(I,O){return I.supports.encodings[O]?I.keyEncoding(O).name===O:!1};class ${constructor(O){this.utf8=O,this.view=v.encode(O),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class S{constructor(){this.cache=new Map}get(O,F){let U=this.cache.get(F);return U===void 0&&(F==="view"?U=function(G,J){return J.subarray(G)}.bind(null,O):U=function(G,J){return J.slice(G)}.bind(null,O),this.cache.set(F,U)),U}}const A=function(I,O){let F=0,U=I.length;for(;F<U&&I[F]===O;)F++;for(;U>F&&I[U-1]===O;)U--;return I.slice(F,U)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter:EventEmitter$2}=eventsExports,{fromCallback:fromCallback$1}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common,rangeOptions=rangeOptions_1,kPromise$1=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop=()=>{};let AbstractLevel$1=class extends EventEmitter$2{constructor(e,n){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");n=getOptions(n);const{keyEncoding:a,valueEncoding:o,passive:c,...u}=n;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=u,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(a||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(o||"utf8");for(const l of this[kTranscoder].encodings())this.supports.encodings[l.commonName]||(this.supports.encodings[l.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e??this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e??this[kValueEncoding])}open(e,n){n=getCallback(e,n),n=fromCallback$1(n,kPromise$1),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const a=o=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,o?()=>a(o):a):this[kStatus]!=="open"?n(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:o})):n()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,a):this.nextTick(a):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,o=>{if(o){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),a(o)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),a()})):this[kStatus]==="open"?this.nextTick(a):this.once(kLanded,()=>this.open(e,n)),n[kPromise$1]}_open(e,n){this.nextTick(n)}close(e){e=fromCallback$1(e,kPromise$1);const n=a=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,a?n(a):n):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:a})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const a=o=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),n(o)};this[kCloseResources](()=>{this._close(o=>{if(o)return a(o);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),n()})})}else this[kStatus]==="closed"?this.nextTick(n):this.once(kLanded,()=>this.close(e));return e[kPromise$1]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let n=this[kResources].size,a=!0;const o=()=>{--n===0&&(a?this.nextTick(e):e())};for(const c of this[kResources])c.close(o);a=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,n,a){if(a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(a,o),a[kPromise$1];const c=this.keyEncoding(n.keyEncoding),u=this.valueEncoding(n.valueEncoding),l=c.format,p=u.format;return(n.keyEncoding!==l||n.valueEncoding!==p)&&(n=Object.assign({},n,{keyEncoding:l,valueEncoding:p})),this._get(this.prefixKey(c.encode(e),l),n,(b,v)=>{if(b)return(b.code==="LEVEL_NOT_FOUND"||b.notFound||/NotFound/i.test(b))&&(b.code||(b.code="LEVEL_NOT_FOUND"),b.notFound||(b.notFound=!0),b.status||(b.status=404)),a(b);try{v=u.decode(v)}catch(x){return a(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:x}))}a(null,v)}),a[kPromise$1]}_get(e,n,a){this.nextTick(a,new Error("NotFound"))}getMany(e,n,a){if(a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];if(!Array.isArray(e))return this.nextTick(a,new TypeError("The first argument 'keys' must be an array")),a[kPromise$1];if(e.length===0)return this.nextTick(a,null,[]),a[kPromise$1];const o=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),u=o.format,l=c.format;(n.keyEncoding!==u||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:l}));const p=new Array(e.length);for(let b=0;b<e.length;b++){const v=e[b],x=this._checkKey(v);if(x)return this.nextTick(a,x),a[kPromise$1];p[b]=this.prefixKey(o.encode(v),u)}return this._getMany(p,n,(b,v)=>{if(b)return a(b);try{for(let x=0;x<v.length;x++)v[x]!==void 0&&(v[x]=c.decode(v[x]))}catch(x){return a(new ModuleError$1(`Could not decode one or more of ${v.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:x}))}a(null,v)}),a[kPromise$1]}_getMany(e,n,a){this.nextTick(a,null,new Array(e.length).fill(void 0))}put(e,n,a,o){if(o=getCallback(a,o),o=fromCallback$1(o,kPromise$1),a=getOptions(a,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,n,a,o)),o[kPromise$1];if(maybeError(this,o))return o[kPromise$1];const c=this._checkKey(e)||this._checkValue(n);if(c)return this.nextTick(o,c),o[kPromise$1];const u=this.keyEncoding(a.keyEncoding),l=this.valueEncoding(a.valueEncoding),p=u.format,b=l.format;(a.keyEncoding!==p||a.valueEncoding!==b)&&(a=Object.assign({},a,{keyEncoding:p,valueEncoding:b}));const v=this.prefixKey(u.encode(e),p),x=l.encode(n);return this._put(v,x,a,_=>{if(_)return o(_);this.emit("put",e,n),o()}),o[kPromise$1]}_put(e,n,a,o){this.nextTick(o)}del(e,n,a){if(a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(a,o),a[kPromise$1];const c=this.keyEncoding(n.keyEncoding),u=c.format;return n.keyEncoding!==u&&(n=Object.assign({},n,{keyEncoding:u})),this._del(this.prefixKey(c.encode(e),u),n,l=>{if(l)return a(l);this.emit("del",e),a()}),a[kPromise$1]}_del(e,n,a){this.nextTick(a)}batch(e,n,a){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?a=e:a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];if(!Array.isArray(e))return this.nextTick(a,new TypeError("The first argument 'operations' must be an array")),a[kPromise$1];if(e.length===0)return this.nextTick(a),a[kPromise$1];const o=new Array(e.length),{keyEncoding:c,valueEncoding:u,...l}=n;for(let p=0;p<e.length;p++){if(typeof e[p]!="object"||e[p]===null)return this.nextTick(a,new TypeError("A batch operation must be an object")),a[kPromise$1];const b=Object.assign({},e[p]);if(b.type!=="put"&&b.type!=="del")return this.nextTick(a,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),a[kPromise$1];const v=this._checkKey(b.key);if(v)return this.nextTick(a,v),a[kPromise$1];const x=b.sublevel!=null?b.sublevel:this,_=x.keyEncoding(b.keyEncoding||c),E=_.format;if(b.key=x.prefixKey(_.encode(b.key),E),b.keyEncoding=E,b.type==="put"){const $=this._checkValue(b.value);if($)return this.nextTick(a,$),a[kPromise$1];const S=x.valueEncoding(b.valueEncoding||u);b.value=S.encode(b.value),b.valueEncoding=S.format}x!==this&&(b.sublevel=null),o[p]=b}return this._batch(o,l,p=>{if(p)return a(p);this.emit("batch",e),a()}),a[kPromise$1]}_batch(e,n,a){this.nextTick(a)}sublevel(e,n){return this._sublevel(e,AbstractSublevel.defaults(n))}_sublevel(e,n){return new AbstractSublevel(this,e,n)}prefixKey(e,n){return e}clear(e,n){if(n=getCallback(e,n),n=fromCallback$1(n,kPromise$1),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];const a=e,o=this.keyEncoding(e.keyEncoding);return e=rangeOptions(e,o),e.keyEncoding=o.format,e.limit===0?this.nextTick(n):this._clear(e,c=>{if(c)return n(c);this.emit("clear",a),n()}),n[kPromise$1]}_clear(e,n){this.nextTick(n)}iterator(e){const n=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,n),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=n.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const n=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,n),e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=n.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const n=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,n),e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=n.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const n of e)n()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(t,e){return t[kStatus]!=="open"?(t.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1=runParallelLimit;const queueMicrotask$1=queueMicrotask_1;function runParallelLimit(t,e,n){if(typeof e!="number")throw new Error("second argument must be a Number");let a,o,c,u,l,p=!0,b;Array.isArray(t)?(a=[],c=o=t.length):(u=Object.keys(t),a={},c=o=u.length);function v(_){function E(){n&&n(_,a),n=null}p?queueMicrotask$1(E):E()}function x(_,E,$){if(a[_]=$,E&&(l=!0),--c===0||E)v(E);else if(!l&&b<o){let S;u?(S=u[b],b+=1,t[S](function(A,I){x(S,A,I)})):(S=b,b+=1,t[S](function(A,I){x(S,A,I)}))}}b=e,c?u?u.some(function(_,E){return t[_](function($,S){x(_,$,S)}),E===e-1}):t.some(function(_,E){return _(function($,S){x(E,$,S)}),E===e-1}):v(null),p=!1}var iterator={},keyRange=function t(e){const n=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,a=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,o=e.gte===void 0,c=e.lte===void 0;return n!==void 0&&a!==void 0?IDBKeyRange.bound(n,a,o,c):n!==void 0?IDBKeyRange.lowerBound(n,o):a!==void 0?IDBKeyRange.upperBound(a,c):null};const textEncoder=new TextEncoder;var deserialize$2=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):textEncoder.encode(t)};const{AbstractIterator}=abstractLevel$1,createKeyRange$1=keyRange,deserialize$1=deserialize$2,kCache=Symbol("cache"),kFinished=Symbol("finished"),kOptions=Symbol("options"),kCurrentOptions=Symbol("currentOptions"),kPosition=Symbol("position"),kLocation$1=Symbol("location"),kFirst=Symbol("first"),emptyOptions={};let Iterator$1=class extends AbstractIterator{constructor(e,n,a){super(e,a),this[kCache]=[],this[kFinished]=this.limit===0,this[kOptions]=a,this[kCurrentOptions]={...a},this[kPosition]=void 0,this[kLocation$1]=n,this[kFirst]=!0}_nextv(e,n,a){if(this[kFirst]=!1,this[kFinished])return this.nextTick(a,null,[]);if(this[kCache].length>0)return e=Math.min(e,this[kCache].length),this.nextTick(a,null,this[kCache].splice(0,e));this[kPosition]!==void 0&&(this[kOptions].reverse?(this[kCurrentOptions].lt=this[kPosition],this[kCurrentOptions].lte=void 0):(this[kCurrentOptions].gt=this[kPosition],this[kCurrentOptions].gte=void 0));let o;try{o=createKeyRange$1(this[kCurrentOptions])}catch{return this[kFinished]=!0,this.nextTick(a,null,[])}const c=this.db.db.transaction([this[kLocation$1]],"readonly"),u=c.objectStore(this[kLocation$1]),l=[];if(this[kOptions].reverse){const p=!this[kOptions].values&&u.openKeyCursor?"openKeyCursor":"openCursor";u[p](o,"prev").onsuccess=b=>{const v=b.target.result;if(v){const{key:x,value:_}=v;this[kPosition]=x,l.push([this[kOptions].keys&&x!==void 0?deserialize$1(x):void 0,this[kOptions].values&&_!==void 0?deserialize$1(_):void 0]),l.length<e?v.continue():maybeCommit(c)}else this[kFinished]=!0}}else{let p,b;const v=()=>{if(p===void 0||b===void 0)return;const x=Math.max(p.length,b.length);x===0||e===1/0?this[kFinished]=!0:this[kPosition]=p[x-1],l.length=x;for(let _=0;_<x;_++){const E=p[_],$=b[_];l[_]=[this[kOptions].keys&&E!==void 0?deserialize$1(E):void 0,this[kOptions].values&&$!==void 0?deserialize$1($):void 0]}maybeCommit(c)};this[kOptions].keys||e<1/0?u.getAllKeys(o,e<1/0?e:void 0).onsuccess=x=>{p=x.target.result,v()}:(p=[],this.nextTick(v)),this[kOptions].values?u.getAll(o,e<1/0?e:void 0).onsuccess=x=>{b=x.target.result,v()}:(b=[],this.nextTick(v))}c.onabort=()=>{a(c.error||new Error("aborted by user")),a=null},c.oncomplete=()=>{a(null,l),a=null}}_next(e){if(this[kCache].length>0){const[n,a]=this[kCache].shift();this.nextTick(e,null,n,a)}else if(this[kFinished])this.nextTick(e);else{let n=Math.min(100,this.limit-this.count);this[kFirst]&&(this[kFirst]=!1,n=1),this._nextv(n,emptyOptions,(a,o)=>{if(a)return e(a);this[kCache]=o,this._next(e)})}}_all(e,n){this[kFirst]=!1;const a=this[kCache].splice(0,this[kCache].length),o=this.limit-this.count-a.length;if(o<=0)return this.nextTick(n,null,a);this._nextv(o,emptyOptions,(c,u)=>{if(c)return n(c);a.length>0&&(u=a.concat(u)),n(null,u)})}_seek(e,n){this[kFirst]=!0,this[kCache]=[],this[kFinished]=!1,this[kPosition]=void 0,this[kCurrentOptions]={...this[kOptions]};let a;try{a=createKeyRange$1(this[kOptions])}catch{this[kFinished]=!0;return}a!==null&&!a.includes(e)?this[kFinished]=!0:this[kOptions].reverse?this[kCurrentOptions].lte=e:this[kCurrentOptions].gte=e}};iterator.Iterator=Iterator$1;function maybeCommit(t){typeof t.commit=="function"&&t.commit()}var clear$1=function t(e,n,a,o,c){if(o.limit===0)return e.nextTick(c);const u=e.db.transaction([n],"readwrite"),l=u.objectStore(n);let p=0;u.oncomplete=function(){c()},u.onabort=function(){c(u.error||new Error("aborted by user"))};const b=l.openKeyCursor?"openKeyCursor":"openCursor",v=o.reverse?"prev":"next";l[b](a,v).onsuccess=function(x){const _=x.target.result;_&&(l.delete(_.key).onsuccess=function(){(o.limit<=0||++p<o.limit)&&_.continue()})}};const{AbstractLevel}=abstractLevel$1,ModuleError=moduleError,parallel=runParallelLimit_1,{fromCallback}=catering,{Iterator}=iterator,deserialize=deserialize$2,clear=clear$1,createKeyRange=keyRange,DEFAULT_PREFIX="level-js-",kIDB=Symbol("idb"),kNamePrefix=Symbol("namePrefix"),kLocation=Symbol("location"),kVersion=Symbol("version"),kStore=Symbol("store"),kOnComplete=Symbol("onComplete"),kPromise=Symbol("promise");class BrowserLevel extends AbstractLevel{constructor(e,n,a){if(typeof n=="function"||typeof a=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:o,version:c,...u}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},u),typeof e!="string")throw new Error("constructor requires a location string argument");this[kLocation]=e,this[kNamePrefix]=o??DEFAULT_PREFIX,this[kVersion]=parseInt(c||1,10),this[kIDB]=null}get location(){return this[kLocation]}get namePrefix(){return this[kNamePrefix]}get version(){return this[kVersion]}get db(){return this[kIDB]}get type(){return"browser-level"}_open(e,n){const a=indexedDB.open(this[kNamePrefix]+this[kLocation],this[kVersion]);a.onerror=function(){n(a.error||new Error("unknown error"))},a.onsuccess=()=>{this[kIDB]=a.result,n()},a.onupgradeneeded=o=>{const c=o.target.result;c.objectStoreNames.contains(this[kLocation])||c.createObjectStore(this[kLocation])}}[kStore](e){return this[kIDB].transaction([this[kLocation]],e).objectStore(this[kLocation])}[kOnComplete](e,n){const a=e.transaction;a.onabort=function(){n(a.error||new Error("aborted by user"))},a.oncomplete=function(){n(null,e.result)}}_get(e,n,a){const o=this[kStore]("readonly");let c;try{c=o.get(e)}catch(u){return this.nextTick(a,u)}this[kOnComplete](c,function(u,l){if(u)return a(u);if(l===void 0)return a(new ModuleError("Entry not found",{code:"LEVEL_NOT_FOUND"}));a(null,deserialize(l))})}_getMany(e,n,a){const o=this[kStore]("readonly"),c=e.map(u=>l=>{let p;try{p=o.get(u)}catch(b){return l(b)}p.onsuccess=()=>{const b=p.result;l(null,b===void 0?b:deserialize(b))},p.onerror=b=>{b.stopPropagation(),l(p.error)}});parallel(c,16,a)}_del(e,n,a){const o=this[kStore]("readwrite");let c;try{c=o.delete(e)}catch(u){return this.nextTick(a,u)}this[kOnComplete](c,a)}_put(e,n,a,o){const c=this[kStore]("readwrite");let u;try{u=c.put(n,e)}catch(l){return this.nextTick(o,l)}this[kOnComplete](u,o)}_iterator(e){return new Iterator(this,this[kLocation],e)}_batch(e,n,a){const o=this[kStore]("readwrite"),c=o.transaction;let u=0,l;c.onabort=function(){a(l||c.error||new Error("aborted by user"))},c.oncomplete=function(){a()};function p(){const b=e[u++],v=b.key;let x;try{x=b.type==="del"?o.delete(v):o.put(b.value,v)}catch(_){l=_,c.abort();return}u<e.length?x.onsuccess=p:typeof c.commit=="function"&&c.commit()}p()}_clear(e,n){let a,o;try{a=createKeyRange(e)}catch{return this.nextTick(n)}if(e.limit>=0)return clear(this,this[kLocation],a,e,n);try{const c=this[kStore]("readwrite");o=a?c.delete(a):c.clear()}catch(c){return this.nextTick(n,c)}this[kOnComplete](o,n)}_close(e){this[kIDB].close(),this.nextTick(e)}}BrowserLevel.destroy=function(t,e,n){typeof e=="function"&&(n=e,e=DEFAULT_PREFIX),n=fromCallback(n,kPromise);const a=indexedDB.deleteDatabase(e+t);return a.onsuccess=function(){n()},a.onerror=function(o){n(o)},n[kPromise]};browserLevel.BrowserLevel=BrowserLevel;var Level=browserLevel.BrowserLevel;class LevelDatastore extends BaseDatastore{constructor(e,n={}){super(),this.db=typeof e=="string"?new Level(e,{...n,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...n}}async open(){try{await this.db.open(this.opts)}catch(e){throw dbOpenFailedError(e)}}async put(e,n){try{await this.db.put(e.toString(),n)}catch(a){throw dbWriteFailedError(a)}}async get(e){let n;try{n=await this.db.get(e.toString())}catch(a){throw a.notFound?notFoundError(a):dbWriteFailedError(a)}return n}async has(e){try{await this.db.get(e.toString())}catch(n){if(n.notFound)return!1;throw n}return!0}async delete(e){try{await this.db.del(e.toString())}catch(n){throw dbDeleteFailedError(n)}}close(){return this.db&&this.db.close()}batch(){const e=[];return{put:(n,a)=>{e.push({type:"put",key:n.toString(),value:a})},delete:n=>{e.push({type:"del",key:n.toString()})},commit:()=>this.db.batch(e)}}query(e){let n=this._query({values:!0,prefix:e.prefix});Array.isArray(e.filters)&&(n=e.filters.reduce((c,u)=>filter(c,u),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((c,u)=>sort(c,u),n));const{offset:a,limit:o}=e;if(a){let c=0;n=filter(n,()=>c++>=a)}return o&&(n=take(n,o)),n}queryKeys(e){let n=map$3(this._query({values:!1,prefix:e.prefix}),({key:c})=>c);Array.isArray(e.filters)&&(n=e.filters.reduce((c,u)=>filter(c,u),n)),Array.isArray(e.orders)&&(n=e.orders.reduce((c,u)=>sort(c,u),n));const{offset:a,limit:o}=e;if(a){let c=0;n=filter(n,()=>c++>=a)}return o&&(n=take(n,o)),n}_query(e){const n={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){const o=e.prefix.toString();n.gte=o,n.lt=o+"ÿ"}const a=this.db.iterator(n);if(a[Symbol.asyncIterator])return levelIteratorToIterator(a);if(a.next!=null&&a.end!=null)return oldLevelIteratorToIterator(a);throw new Error("Level returned incompatible iterator")}}async function*levelIteratorToIterator(t){for await(const[e,n]of t)yield{key:new Key(e,!1),value:n};await t.close()}function oldLevelIteratorToIterator(t){return{[Symbol.asyncIterator](){return{next:()=>new Promise((e,n)=>{t.next((a,o,c)=>{if(a)return n(a);if(o==null)return t.end(u=>{if(u)return n(u);e({done:!0,value:void 0})});e({done:!1,value:{key:new Key(o,!1),value:c}})})}),return:()=>new Promise((e,n)=>{t.end(a=>{if(a)return n(a);e({done:!0,value:void 0})})})}}}}const sortAll=(t,e)=>async function*(){yield*(await all(t)).sort(e)}();class BaseBlockstore{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(e,n,a){return Promise.reject(new Error(".put is not implemented"))}get(e,n){return Promise.reject(new Error(".get is not implemented"))}has(e,n){return Promise.reject(new Error(".has is not implemented"))}delete(e,n){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(e,n={}){for await(const{key:a,value:o}of e)await this.put(a,o,n),yield{key:a,value:o}}async*getMany(e,n={}){for await(const a of e)yield this.get(a,n)}async*deleteMany(e,n={}){for await(const a of e)await this.delete(a,n),yield a}batch(){let e=[],n=[];return{put(a,o){e.push({key:a,value:o})},delete(a){n.push(a)},commit:async a=>{await drain(this.putMany(e,a)),e=[],await drain(this.deleteMany(n,a)),n=[]}}}async*_all(e,n){throw new Error("._all is not implemented")}async*_allKeys(e,n){throw new Error("._allKeys is not implemented")}query(e,n){let a=this._all(e,n);if(e.prefix!=null&&(a=filter(a,o=>o.key.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(a=e.filters.reduce((o,c)=>filter(o,c),a)),Array.isArray(e.orders)&&(a=e.orders.reduce((o,c)=>sortAll(o,c),a)),e.offset!=null){let o=0;a=filter(a,()=>o++>=(e.offset||0))}return e.limit!=null&&(a=take(a,e.limit)),a}queryKeys(e,n){let a=this._allKeys(e,n);if(e.prefix!=null&&(a=filter(a,o=>o.toString().startsWith(e.prefix||""))),Array.isArray(e.filters)&&(a=e.filters.reduce((o,c)=>filter(o,c),a)),Array.isArray(e.orders)&&(a=e.orders.reduce((o,c)=>sortAll(o,c),a)),e.offset!=null){let o=0;a=filter(a,()=>o++>=e.offset)}return e.limit!=null&&(a=take(a,e.limit)),a}}function cidToKey(t){const e=CID.asCID(t);if(!e)throw errCode$1(new Error("Not a valid cid"),"ERR_INVALID_CID");return new Key("/"+base32.encode(e.multihash.bytes).slice(1).toUpperCase(),!1)}function keyToCid(t){return CID.createV1(code$6,decode$f(base32.decode("b"+t.toString().slice(1).toLowerCase())))}function convertPrefix(t){const e=t.substring(0,1);if(e==="/")return convertPrefix(t.substring(1));let n;e.toLowerCase()==="b"?n=c=>base32.decode(c.toLowerCase()).subarray(2):e.toLowerCase()==="c"?n=c=>base32pad.decode(c.toLowerCase()).subarray(2):e==="z"?n=c=>base58btc.decode(c).subarray(2):e==="Q"?n=c=>base58btc.decode("z"+c):n=c=>base32.decode("b"+c.toLowerCase()).subarray(2);let a;for(let c=1;c<t.length;c++)try{a=n(t.substring(0,c))}catch(u){if(u.message!=="Unexpected end of data")throw u}let o="/C";return a&&(o=`/${base32.encode(a).slice(1,-1).toUpperCase()||"C"}`),o}function convertQuery(t){return{...t,prefix:t.prefix?convertPrefix(t.prefix):void 0,filters:t.filters?t.filters.map(e=>n=>e({key:keyToCid(n.key),value:n.value})):void 0,orders:t.orders?t.orders.map(e=>(n,a)=>e({key:keyToCid(n.key),value:n.value},{key:keyToCid(a.key),value:a.value})):void 0}}function convertKeyQuery(t){return{...t,prefix:t.prefix?convertPrefix(t.prefix):void 0,filters:t.filters?t.filters.map(e=>n=>e(keyToCid(n))):void 0,orders:t.orders?t.orders.map(e=>(n,a)=>e(keyToCid(n),keyToCid(a))):void 0}}class BlockstoreDatastoreAdapter extends BaseBlockstore{constructor(e){super(),this.child=e}open(){return this.child.open()}close(){return this.child.close()}async*query(e,n){for await(const{key:a,value:o}of this.child.query(convertQuery(e),n))yield{key:keyToCid(a),value:o}}async*queryKeys(e,n){for await(const a of this.child.queryKeys(convertKeyQuery(e),n))yield keyToCid(a)}async get(e,n){return this.child.get(cidToKey(e),n)}async*getMany(e,n){for await(const a of e)yield this.get(a,n)}async put(e,n,a){await this.child.put(cidToKey(e),n,a)}async*putMany(e,n){const a=pushable({objectMode:!0});(globalThis.process&&globalThis.process.nextTick?globalThis.process.nextTick:globalThis.setImmediate||globalThis.setTimeout)(async()=>{try{const c=this.child;await drain(this.child.putMany(async function*(){for await(const u of e){const l=cidToKey(u.key);await c.has(l,n)||(yield{key:l,value:u.value}),a.push(u)}}())),a.end()}catch(c){a.end(c)}}),yield*a}has(e,n){return this.child.has(cidToKey(e),n)}delete(e,n){return this.child.delete(cidToKey(e),n)}deleteMany(e,n){const a=pushable({objectMode:!0});return drain(this.child.deleteMany(async function*(){for await(const o of e)yield cidToKey(o),a.push(o);a.end()}(),n)).catch(o=>{a.end(o)}),a}}function accessor(t){return t instanceof Uint8Array?{get(e){return t[e]},set(e,n){t[e]=n}}:{get(e){return t.get(e)},set(e,n){t.set(e,n)}}}const TWO_32=4294967296;class LongBits{constructor(e=0,n=0){this.hi=e,this.lo=n}toBigInt(e){if(e===!0)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const n=~this.lo+1>>>0;let a=~this.hi>>>0;return n===0&&(a=a+1>>>0),-(BigInt(n)+(BigInt(a)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(e){return Number(this.toBigInt(e))}zzDecode(){const e=-(this.lo&1),n=((this.lo>>>1|this.hi<<31)^e)>>>0,a=(this.hi>>>1^e)>>>0;return new LongBits(a,n)}zzEncode(){const e=this.hi>>31,n=((this.hi<<1|this.lo>>>31)^e)>>>0,a=(this.lo<<1^e)>>>0;return new LongBits(n,a)}toBytes(e,n=0){const a=accessor(e);for(;this.hi>0;)a.set(n++,this.lo&127|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)a.set(n++,this.lo&127|128),this.lo=this.lo>>>7;a.set(n++,this.lo)}static fromBigInt(e){if(e===0n)return new LongBits;const n=e<0;n&&(e=-e);let a=Number(e>>32n)|0,o=Number(e-(BigInt(a)<<32n))|0;return n&&(a=~a>>>0,o=~o>>>0,++o>TWO_32&&(o=0,++a>TWO_32&&(a=0))),new LongBits(a,o)}static fromNumber(e){if(e===0)return new LongBits;const n=e<0;n&&(e=-e);let a=e>>>0,o=(e-a)/4294967296>>>0;return n&&(o=~o>>>0,a=~a>>>0,++a>4294967295&&(a=0,++o>4294967295&&(o=0))),new LongBits(o,a)}static fromBytes(e,n=0){const a=accessor(e),o=new LongBits;let c=0;if(e.length-n>4){for(;c<4;++c)if(o.lo=(o.lo|(a.get(n)&127)<<c*7)>>>0,a.get(n++)<128)return o;if(o.lo=(o.lo|(a.get(n)&127)<<28)>>>0,o.hi=(o.hi|(a.get(n)&127)>>4)>>>0,a.get(n++)<128)return o;c=0}else for(;c<4;++c){if(n>=e.length)throw RangeError(`index out of range: ${n} > ${e.length}`);if(o.lo=(o.lo|(a.get(n)&127)<<c*7)>>>0,a.get(n++)<128)return o}if(e.length-n>4){for(;c<5;++c)if(o.hi=(o.hi|(a.get(n)&127)<<c*7+3)>>>0,a.get(n++)<128)return o}else if(n<e.byteLength)for(;c<5;++c){if(n>=e.length)throw RangeError(`index out of range: ${n} > ${e.length}`);if(o.hi=(o.hi|(a.get(n)&127)<<c*7+3)>>>0,a.get(n++)<128)return o}throw RangeError("invalid varint encoding")}}function asUint8Array$1(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe$2(t=0){return globalThis.Buffer?.allocUnsafe!=null?asUint8Array$1(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}const N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),unsigned={encodingLength(t){return t<N1$1?1:t<N2$1?2:t<N3$1?3:t<N4$1?4:t<N5$1?5:t<N6$1?6:t<N7$1?7:t<N8$1?8:t<N9$1?9:10},encode(t,e,n=0){if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return e==null&&(e=allocUnsafe$2(unsigned.encodingLength(t))),LongBits.fromNumber(t).toBytes(e,n),e},decode(t,e=0){return LongBits.fromBytes(t,e).toNumber(!0)}};var indexMinimal={},minimal$1={},longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var t=requireMinimal$1();function e(c,u){this.lo=c>>>0,this.hi=u>>>0}var n=e.zero=new e(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var a=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(u){if(u===0)return n;var l=u<0;l&&(u=-u);var p=u>>>0,b=(u-p)/4294967296>>>0;return l&&(b=~b>>>0,p=~p>>>0,++p>4294967295&&(p=0,++b>4294967295&&(b=0))),new e(p,b)},e.from=function(u){if(typeof u=="number")return e.fromNumber(u);if(t.isString(u))if(t.Long)u=t.Long.fromString(u);else return e.fromNumber(parseInt(u,10));return u.low||u.high?new e(u.low>>>0,u.high>>>0):n},e.prototype.toNumber=function(u){if(!u&&this.hi>>>31){var l=~this.lo+1>>>0,p=~this.hi>>>0;return l||(p=p+1>>>0),-(l+p*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(u){return t.Long?new t.Long(this.lo|0,this.hi|0,!!u):{low:this.lo|0,high:this.hi|0,unsigned:!!u}};var o=String.prototype.charCodeAt;return e.fromHash=function(u){return u===a?n:new e((o.call(u,0)|o.call(u,1)<<8|o.call(u,2)<<16|o.call(u,3)<<24)>>>0,(o.call(u,4)|o.call(u,5)<<8|o.call(u,6)<<16|o.call(u,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^u)>>>0,this.lo=(this.lo<<1^u)>>>0,this},e.prototype.zzDecode=function(){var u=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^u)>>>0,this.hi=(this.hi>>>1^u)>>>0,this},e.prototype.length=function(){var u=this.lo,l=(this.lo>>>28|this.hi<<4)>>>0,p=this.hi>>>24;return p===0?l===0?u<16384?u<128?1:2:u<2097152?3:4:l<16384?l<128?5:6:l<2097152?7:8:p<128?9:10},longbits}var hasRequiredMinimal$1;function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(t){var e=t;e.asPromise=aspromise,e.base64=base64$1,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$2,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c},e.isString=function(c){return typeof c=="string"||c instanceof String},e.isObject=function(c){return c&&typeof c=="object"},e.isset=e.isSet=function(c,u){var l=c[u];return l!=null&&c.hasOwnProperty(u)?typeof l!="object"||(Array.isArray(l)?l.length:Object.keys(l).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(c){return typeof c=="number"?e.Buffer?e._Buffer_allocUnsafe(c):new e.Array(c):e.Buffer?e._Buffer_from(c):typeof Uint8Array>"u"?c:new Uint8Array(c)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(c){return c?e.LongBits.from(c).toHash():e.LongBits.zeroHash},e.longFromHash=function(c,u){var l=e.LongBits.fromHash(c);return e.Long?e.Long.fromBits(l.lo,l.hi,u):l.toNumber(!!u)};function n(o,c,u){for(var l=Object.keys(c),p=0;p<l.length;++p)(o[l[p]]===void 0||!u)&&(o[l[p]]=c[l[p]]);return o}e.merge=n,e.lcFirst=function(c){return c.charAt(0).toLowerCase()+c.substring(1)};function a(o){function c(u,l){if(!(this instanceof c))return new c(u,l);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,c):Object.defineProperty(this,"stack",{value:new Error().stack||""}),l&&n(this,l)}return(c.prototype=Object.create(Error.prototype)).constructor=c,Object.defineProperty(c.prototype,"name",{get:function(){return o}}),c.prototype.toString=function(){return this.name+": "+this.message},c}e.newError=a,e.ProtocolError=a("ProtocolError"),e.oneOfGetter=function(c){for(var u={},l=0;l<c.length;++l)u[c[l]]=1;return function(){for(var p=Object.keys(this),b=p.length-1;b>-1;--b)if(u[p[b]]===1&&this[p[b]]!==void 0&&this[p[b]]!==null)return p[b]}},e.oneOfSetter=function(c){return function(u){for(var l=0;l<c.length;++l)c[l]!==u&&delete this[c[l]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(u,l){return new o(u,l)},e._Buffer_allocUnsafe=o.allocUnsafe||function(u){return new o(u)}}}(minimal$1)),minimal$1}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=p;var t=requireMinimal$1(),e,n=t.LongBits,a=t.base64,o=t.utf8;function c(A,I,O){this.fn=A,this.len=I,this.next=void 0,this.val=O}function u(){}function l(A){this.head=A.head,this.tail=A.tail,this.len=A.len,this.next=A.states}function p(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var b=function(){return t.Buffer?function(){return(p.create=function(){return new e})()}:function(){return new p}};p.create=b(),p.alloc=function(I){return new t.Array(I)},t.Array!==Array&&(p.alloc=t.pool(p.alloc,t.Array.prototype.subarray)),p.prototype._push=function(I,O,F){return this.tail=this.tail.next=new c(I,O,F),this.len+=O,this};function v(A,I,O){I[O]=A&255}function x(A,I,O){for(;A>127;)I[O++]=A&127|128,A>>>=7;I[O]=A}function _(A,I){this.len=A,this.next=void 0,this.val=I}_.prototype=Object.create(c.prototype),_.prototype.fn=x,p.prototype.uint32=function(I){return this.len+=(this.tail=this.tail.next=new _((I=I>>>0)<128?1:I<16384?2:I<2097152?3:I<268435456?4:5,I)).len,this},p.prototype.int32=function(I){return I<0?this._push(E,10,n.fromNumber(I)):this.uint32(I)},p.prototype.sint32=function(I){return this.uint32((I<<1^I>>31)>>>0)};function E(A,I,O){for(;A.hi;)I[O++]=A.lo&127|128,A.lo=(A.lo>>>7|A.hi<<25)>>>0,A.hi>>>=7;for(;A.lo>127;)I[O++]=A.lo&127|128,A.lo=A.lo>>>7;I[O++]=A.lo}p.prototype.uint64=function(I){var O=n.from(I);return this._push(E,O.length(),O)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(I){var O=n.from(I).zzEncode();return this._push(E,O.length(),O)},p.prototype.bool=function(I){return this._push(v,1,I?1:0)};function $(A,I,O){I[O]=A&255,I[O+1]=A>>>8&255,I[O+2]=A>>>16&255,I[O+3]=A>>>24}p.prototype.fixed32=function(I){return this._push($,4,I>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(I){var O=n.from(I);return this._push($,4,O.lo)._push($,4,O.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(I){return this._push(t.float.writeFloatLE,4,I)},p.prototype.double=function(I){return this._push(t.float.writeDoubleLE,8,I)};var S=t.Array.prototype.set?function(I,O,F){O.set(I,F)}:function(I,O,F){for(var U=0;U<I.length;++U)O[F+U]=I[U]};return p.prototype.bytes=function(I){var O=I.length>>>0;if(!O)return this._push(v,1,0);if(t.isString(I)){var F=p.alloc(O=a.length(I));a.decode(I,F,0),I=F}return this.uint32(O)._push(S,O,I)},p.prototype.string=function(I){var O=o.length(I);return O?this.uint32(O)._push(o.write,O,I):this._push(v,1,0)},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},p.prototype.ldelim=function(){var I=this.head,O=this.tail,F=this.len;return this.reset().uint32(F),F&&(this.tail.next=I.next,this.tail=O,this.len+=F),this},p.prototype.finish=function(){for(var I=this.head.next,O=this.constructor.alloc(this.len),F=0;I;)I.fn(I.val,O,F),F+=I.len,I=I.next;return O},p._configure=function(A){e=A,p.create=b(),e._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=n;var t=requireWriter();(n.prototype=Object.create(t.prototype)).constructor=n;var e=requireMinimal$1();function n(){t.call(this)}n._configure=function(){n.alloc=e._Buffer_allocUnsafe,n.writeBytesBuffer=e.Buffer&&e.Buffer.prototype instanceof Uint8Array&&e.Buffer.prototype.set.name==="set"?function(c,u,l){u.set(c,l)}:function(c,u,l){if(c.copy)c.copy(u,l,0,c.length);else for(var p=0;p<c.length;)u[l++]=c[p++]}},n.prototype.bytes=function(c){e.isString(c)&&(c=e._Buffer_from(c,"base64"));var u=c.length>>>0;return this.uint32(u),u&&this._push(n.writeBytesBuffer,u,c),this};function a(o,c,u){o.length<40?e.utf8.write(o,c,u):c.utf8Write?c.utf8Write(o,u):c.write(o,u)}return n.prototype.string=function(c){var u=e.Buffer.byteLength(c);return this.uint32(u),u&&this._push(a,u,c),this},n._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=c;var t=requireMinimal$1(),e,n=t.LongBits,a=t.utf8;function o(x,_){return RangeError("index out of range: "+x.pos+" + "+(_||1)+" > "+x.len)}function c(x){this.buf=x,this.pos=0,this.len=x.length}var u=typeof Uint8Array<"u"?function(_){if(_ instanceof Uint8Array||Array.isArray(_))return new c(_);throw Error("illegal buffer")}:function(_){if(Array.isArray(_))return new c(_);throw Error("illegal buffer")},l=function(){return t.Buffer?function(E){return(c.create=function(S){return t.Buffer.isBuffer(S)?new e(S):u(S)})(E)}:u};c.create=l(),c.prototype._slice=t.Array.prototype.subarray||t.Array.prototype.slice,c.prototype.uint32=function(){var _=4294967295;return function(){if(_=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(_=(_|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(_=(_|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return _;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return _}}(),c.prototype.int32=function(){return this.uint32()|0},c.prototype.sint32=function(){var _=this.uint32();return _>>>1^-(_&1)|0};function p(){var x=new n(0,0),_=0;if(this.len-this.pos>4){for(;_<4;++_)if(x.lo=(x.lo|(this.buf[this.pos]&127)<<_*7)>>>0,this.buf[this.pos++]<128)return x;if(x.lo=(x.lo|(this.buf[this.pos]&127)<<28)>>>0,x.hi=(x.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return x;_=0}else{for(;_<3;++_){if(this.pos>=this.len)throw o(this);if(x.lo=(x.lo|(this.buf[this.pos]&127)<<_*7)>>>0,this.buf[this.pos++]<128)return x}return x.lo=(x.lo|(this.buf[this.pos++]&127)<<_*7)>>>0,x}if(this.len-this.pos>4){for(;_<5;++_)if(x.hi=(x.hi|(this.buf[this.pos]&127)<<_*7+3)>>>0,this.buf[this.pos++]<128)return x}else for(;_<5;++_){if(this.pos>=this.len)throw o(this);if(x.hi=(x.hi|(this.buf[this.pos]&127)<<_*7+3)>>>0,this.buf[this.pos++]<128)return x}throw Error("invalid varint encoding")}c.prototype.bool=function(){return this.uint32()!==0};function b(x,_){return(x[_-4]|x[_-3]<<8|x[_-2]<<16|x[_-1]<<24)>>>0}c.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return b(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return b(this.buf,this.pos+=4)|0};function v(){if(this.pos+8>this.len)throw o(this,8);return new n(b(this.buf,this.pos+=4),b(this.buf,this.pos+=4))}return c.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var _=t.float.readFloatLE(this.buf,this.pos);return this.pos+=4,_},c.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var _=t.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,_},c.prototype.bytes=function(){var _=this.uint32(),E=this.pos,$=this.pos+_;if($>this.len)throw o(this,_);return this.pos+=_,Array.isArray(this.buf)?this.buf.slice(E,$):E===$?new this.buf.constructor(0):this._slice.call(this.buf,E,$)},c.prototype.string=function(){var _=this.bytes();return a.read(_,0,_.length)},c.prototype.skip=function(_){if(typeof _=="number"){if(this.pos+_>this.len)throw o(this,_);this.pos+=_}else do if(this.pos>=this.len)throw o(this);while(this.buf[this.pos++]&128);return this},c.prototype.skipType=function(x){switch(x){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(x=this.uint32()&7)!==4;)this.skipType(x);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+x+" at offset "+this.pos)}return this},c._configure=function(x){e=x,c.create=l(),e._configure();var _=t.Long?"toLong":"toNumber";t.merge(c.prototype,{int64:function(){return p.call(this)[_](!1)},uint64:function(){return p.call(this)[_](!0)},sint64:function(){return p.call(this).zzDecode()[_](!1)},fixed64:function(){return v.call(this)[_](!0)},sfixed64:function(){return v.call(this)[_](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=n;var t=requireReader();(n.prototype=Object.create(t.prototype)).constructor=n;var e=requireMinimal$1();function n(a){t.call(this,a)}return n._configure=function(){e.Buffer&&(n.prototype._slice=e.Buffer.prototype.slice)},n.prototype.string=function(){var o=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+o,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+o,this.len))},n._configure(),reader_buffer}var rpc={},service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=e;var t=requireMinimal$1();(e.prototype=Object.create(t.EventEmitter.prototype)).constructor=e;function e(n,a,o){if(typeof n!="function")throw TypeError("rpcImpl must be a function");t.EventEmitter.call(this),this.rpcImpl=n,this.requestDelimited=!!a,this.responseDelimited=!!o}return e.prototype.rpcCall=function n(a,o,c,u,l){if(!u)throw TypeError("request must be specified");var p=this;if(!l)return t.asPromise(n,p,a,o,c,u);if(!p.rpcImpl){setTimeout(function(){l(Error("already ended"))},0);return}try{return p.rpcImpl(a,o[p.requestDelimited?"encodeDelimited":"encode"](u).finish(),function(v,x){if(v)return p.emit("error",v,a),l(v);if(x===null){p.end(!0);return}if(!(x instanceof c))try{x=c[p.responseDelimited?"decodeDelimited":"decode"](x)}catch(_){return p.emit("error",_,a),l(_)}return p.emit("data",x,a),l(null,x)})}catch(b){p.emit("error",b,a),setTimeout(function(){l(b)},0);return}},e.prototype.end=function(a){return this.rpcImpl&&(a||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(t){var e=t;e.Service=requireService()}(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(t){var e=t;e.build="minimal",e.Writer=requireWriter(),e.BufferWriter=requireWriter_buffer(),e.Reader=requireReader(),e.BufferReader=requireReader_buffer(),e.util=requireMinimal$1(),e.rpc=requireRpc(),e.roots=requireRoots(),e.configure=n;function n(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}n()}(indexMinimal)),indexMinimal}var minimal,hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal=requireIndexMinimal()),minimal}function Denque(t,n){var n=n||{};this._head=0,this._tail=0,this._capacity=n.capacity,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}Denque.prototype.peekAt=function t(e){var n=e;if(n===(n|0)){var a=this.size();if(!(n>=a||n<-a))return n<0&&(n+=a),n=this._head+n&this._capacityMask,this._list[n]}};Denque.prototype.get=function t(e){return this.peekAt(e)};Denque.prototype.peek=function t(){if(this._head!==this._tail)return this._list[this._head]};Denque.prototype.peekFront=function t(){return this.peek()};Denque.prototype.peekBack=function t(){return this.peekAt(-1)};Object.defineProperty(Denque.prototype,"length",{get:function t(){return this.size()}});Denque.prototype.size=function t(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Denque.prototype.unshift=function t(e){if(e===void 0)return this.size();var n=this._list.length;return this._head=this._head-1+n&this._capacityMask,this._list[this._head]=e,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Denque.prototype.shift=function t(){var e=this._head;if(e!==this._tail){var n=this._list[e];return this._list[e]=void 0,this._head=e+1&this._capacityMask,e<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),n}};Denque.prototype.push=function t(e){if(e===void 0)return this.size();var n=this._tail;return this._list[n]=e,this._tail=n+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)};Denque.prototype.pop=function t(){var e=this._tail;if(e!==this._head){var n=this._list.length;this._tail=e-1+n&this._capacityMask;var a=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&e>1e4&&e<=n>>>2&&this._shrinkArray(),a}};Denque.prototype.removeOne=function t(e){var n=e;if(n===(n|0)&&this._head!==this._tail){var a=this.size(),o=this._list.length;if(!(n>=a||n<-a)){n<0&&(n+=a),n=this._head+n&this._capacityMask;var c=this._list[n],u;if(e<a/2){for(u=e;u>0;u--)this._list[n]=this._list[n=n-1+o&this._capacityMask];this._list[n]=void 0,this._head=this._head+1+o&this._capacityMask}else{for(u=a-1-e;u>0;u--)this._list[n]=this._list[n=n+1+o&this._capacityMask];this._list[n]=void 0,this._tail=this._tail-1+o&this._capacityMask}return c}}};Denque.prototype.remove=function t(e,n){var a=e,o,c=n;if(a===(a|0)&&this._head!==this._tail){var u=this.size(),l=this._list.length;if(!(a>=u||a<-u||n<1)){if(a<0&&(a+=u),n===1||!n)return o=new Array(1),o[0]=this.removeOne(a),o;if(a===0&&a+n>=u)return o=this.toArray(),this.clear(),o;a+n>u&&(n=u-a);var p;for(o=new Array(n),p=0;p<n;p++)o[p]=this._list[this._head+a+p&this._capacityMask];if(a=this._head+a&this._capacityMask,e+n===u){for(this._tail=this._tail-n+l&this._capacityMask,p=n;p>0;p--)this._list[a=a+1+l&this._capacityMask]=void 0;return o}if(e===0){for(this._head=this._head+n+l&this._capacityMask,p=n-1;p>0;p--)this._list[a=a+1+l&this._capacityMask]=void 0;return o}if(a<u/2){for(this._head=this._head+e+n+l&this._capacityMask,p=e;p>0;p--)this.unshift(this._list[a=a-1+l&this._capacityMask]);for(a=this._head-1+l&this._capacityMask;c>0;)this._list[a=a-1+l&this._capacityMask]=void 0,c--;e<0&&(this._tail=a)}else{for(this._tail=a,a=a+n+l&this._capacityMask,p=u-(n+e);p>0;p--)this.push(this._list[a++]);for(a=this._tail;c>0;)this._list[a=a+1+l&this._capacityMask]=void 0,c--}return this._head<2&&this._tail>1e4&&this._tail<=l>>>2&&this._shrinkArray(),o}}};Denque.prototype.splice=function t(e,n){var a=e;if(a===(a|0)){var o=this.size();if(a<0&&(a+=o),!(a>o))if(arguments.length>2){var c,u,l,p=arguments.length,b=this._list.length,v=2;if(!o||a<o/2){for(u=new Array(a),c=0;c<a;c++)u[c]=this._list[this._head+c&this._capacityMask];for(n===0?(l=[],a>0&&(this._head=this._head+a+b&this._capacityMask)):(l=this.remove(a,n),this._head=this._head+a+b&this._capacityMask);p>v;)this.unshift(arguments[--p]);for(c=a;c>0;c--)this.unshift(u[c-1])}else{u=new Array(o-(a+n));var x=u.length;for(c=0;c<x;c++)u[c]=this._list[this._head+a+n+c&this._capacityMask];for(n===0?(l=[],a!=o&&(this._tail=this._head+a+b&this._capacityMask)):(l=this.remove(a,n),this._tail=this._tail-x+b&this._capacityMask);v<p;)this.push(arguments[v++]);for(c=0;c<x;c++)this.push(u[c])}return l}else return this.remove(a,n)}};Denque.prototype.clear=function t(){this._head=0,this._tail=0};Denque.prototype.isEmpty=function t(){return this._head===this._tail};Denque.prototype.toArray=function t(){return this._copyArray(!1)};Denque.prototype._fromArray=function t(e){for(var n=0;n<e.length;n++)this.push(e[n])};Denque.prototype._copyArray=function t(e){var n=[],a=this._list,o=a.length,c;if(e||this._head>this._tail){for(c=this._head;c<o;c++)n.push(a[c]);for(c=0;c<this._tail;c++)n.push(a[c])}else for(c=this._head;c<this._tail;c++)n.push(a[c]);return n};Denque.prototype._growArray=function t(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length<<=1,this._capacityMask=this._capacityMask<<1|1};Denque.prototype._shrinkArray=function t(){this._list.length>>>=1,this._capacityMask>>>=1};var denque=Denque;const Denque$1=getDefaultExportFromCjs(denque);function createCodec$1(t,e,n,a){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:a}}}const string$1=createCodec$1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$1=createCodec$1("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=allocUnsafe$2(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};function fromString$1(t,e="utf8"){const n=BASES$1[e];if(n==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$1(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function toString$2(t,e="utf8"){const n=BASES$1[e];if(n==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}let AbortError$2=class extends Error{constructor(e,n){super(e??"The operation was aborted"),this.type="aborted",this.code=n??"ABORT_ERR"}};function getIterator(t){if(t!=null){if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]();if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t.next=="function")return t}throw new Error("argument is not an iterator or iterable")}function abortableSource$1(t,e,n){const a=n??{},o=getIterator(t);async function*c(){let u;const l=()=>{u?.()};for(e.addEventListener("abort",l);;){let p;try{if(e.aborted){const{abortMessage:v,abortCode:x}=a;throw new AbortError$2(v,x)}const b=new Promise((v,x)=>{u=()=>{const{abortMessage:_,abortCode:E}=a;x(new AbortError$2(_,E))}});p=await Promise.race([b,o.next()]),u=null}catch(b){e.removeEventListener("abort",l);const v=b.type==="aborted"&&e.aborted;if(v&&a.onAbort!=null&&await a.onAbort(t),typeof o.return=="function")try{const x=o.return();x instanceof Promise&&x.catch(_=>{a.onReturnError!=null&&a.onReturnError(_)})}catch(x){a.onReturnError!=null&&a.onReturnError(x)}if(v&&a.returnOnAbort===!0)return;throw b}if(p.done===!0)break;yield p.value}e.removeEventListener("abort",l)}return c()}function abortableSink(t,e,n){return a=>t(abortableSource$1(a,e,n))}function abortableDuplex(t,e,n){return{sink:abortableSink(t.sink,e,{...n,onAbort:void 0}),source:abortableSource$1(t.source,e,n)}}function allocUnsafe$1(t){return globalThis?.Buffer?.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}const defaultEncoder$1=t=>{const e=unsigned.encodingLength(t),n=allocUnsafe$1(e);return unsigned.encode(t,n),defaultEncoder$1.bytes=e,n};defaultEncoder$1.bytes=0;function encode$6(t){t=t??{};const e=t.lengthEncoder??defaultEncoder$1;return async function*(a){for await(const o of a){const c=e(o.byteLength);c instanceof Uint8Array?yield c:yield*c,o instanceof Uint8Array?yield o:yield*o}}}encode$6.single=(t,e)=>{e=e??{};const n=e.lengthEncoder??defaultEncoder$1;return new Uint8ArrayList(n(t.byteLength),t)};const MAX_LENGTH_LENGTH$1=8,MAX_DATA_LENGTH$1=1024*1024*4;var ReadMode$1;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(ReadMode$1||(ReadMode$1={}));const defaultDecoder$1=t=>{const e=unsigned.decode(t);return defaultDecoder$1.bytes=unsigned.encodingLength(e),e};defaultDecoder$1.bytes=0;function decode$5(t){return async function*(n){const a=new Uint8ArrayList;let o=ReadMode$1.LENGTH,c=-1;const u=t?.lengthDecoder??defaultDecoder$1,l=t?.maxLengthLength??MAX_LENGTH_LENGTH$1,p=t?.maxDataLength??MAX_DATA_LENGTH$1;for await(const b of n)for(a.append(b);a.byteLength>0;){if(o===ReadMode$1.LENGTH)try{if(c=u(a),c<0)throw errCode$1(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(c>p)throw errCode$1(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");const v=u.bytes;a.consume(v),t?.onLength!=null&&t.onLength(c),o=ReadMode$1.DATA}catch(v){if(v instanceof RangeError){if(a.byteLength>l)throw errCode$1(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw v}if(o===ReadMode$1.DATA){if(a.byteLength<c)break;const v=a.sublist(0,c);a.consume(c),t?.onData!=null&&t.onData(v),yield v,o=ReadMode$1.LENGTH}}if(a.byteLength>0)throw errCode$1(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}}decode$5.fromReader=(t,e)=>{let n=1;const a=async function*(){for(;;)try{const{done:c,value:u}=await t.next(n);if(c===!0)return;u!=null&&(yield u)}catch(c){if(c.code==="ERR_UNDER_READ")return{done:!0,value:null};throw c}finally{n=1}}();return decode$5({...e??{},onLength:c=>{n=c}})(a)};var minimalExports=requireMinimal();const protobuf=getDefaultExportFromCjs(minimalExports);var source$1=t=>{if(t[Symbol.asyncIterator])return t;if(t.getReader)return async function*(){const e=t.getReader();try{for(;;){const{done:n,value:a}=await e.read();if(n)return;yield a}}finally{e.releaseLock()}}();throw new Error("unknown stream")};const toIterable=getDefaultExportFromCjs(source$1),PACKET_TYPES=Object.create(null);PACKET_TYPES.open="0";PACKET_TYPES.close="1";PACKET_TYPES.ping="2";PACKET_TYPES.pong="3";PACKET_TYPES.message="4";PACKET_TYPES.upgrade="5";PACKET_TYPES.noop="6";const PACKET_TYPES_REVERSE=Object.create(null);Object.keys(PACKET_TYPES).forEach(t=>{PACKET_TYPES_REVERSE[PACKET_TYPES[t]]=t});const ERROR_PACKET={type:"error",data:"parser error"},withNativeBlob$1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",withNativeArrayBuffer$2=typeof ArrayBuffer=="function",isView$1=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,encodePacket=({type:t,data:e},n,a)=>withNativeBlob$1&&e instanceof Blob?n?a(e):encodeBlobAsBase64(e,a):withNativeArrayBuffer$2&&(e instanceof ArrayBuffer||isView$1(e))?n?a(e):encodeBlobAsBase64(new Blob([e]),a):a(PACKET_TYPES[t]+(e||"")),encodeBlobAsBase64=(t,e)=>{const n=new FileReader;return n.onload=function(){const a=n.result.split(",")[1];e("b"+(a||""))},n.readAsDataURL(t)},chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<chars.length;t++)lookup$1[chars.charCodeAt(t)]=t;const decode$4=t=>{let e=t.length*.75,n=t.length,a,o=0,c,u,l,p;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const b=new ArrayBuffer(e),v=new Uint8Array(b);for(a=0;a<n;a+=4)c=lookup$1[t.charCodeAt(a)],u=lookup$1[t.charCodeAt(a+1)],l=lookup$1[t.charCodeAt(a+2)],p=lookup$1[t.charCodeAt(a+3)],v[o++]=c<<2|u>>4,v[o++]=(u&15)<<4|l>>2,v[o++]=(l&3)<<6|p&63;return b},withNativeArrayBuffer$1=typeof ArrayBuffer=="function",decodePacket=(t,e)=>{if(typeof t!="string")return{type:"message",data:mapBinary(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:decodeBase64Packet(t.substring(1),e)}:PACKET_TYPES_REVERSE[n]?t.length>1?{type:PACKET_TYPES_REVERSE[n],data:t.substring(1)}:{type:PACKET_TYPES_REVERSE[n]}:ERROR_PACKET},decodeBase64Packet=(t,e)=>{if(withNativeArrayBuffer$1){const n=decode$4(t);return mapBinary(n,e)}else return{base64:!0,data:t}},mapBinary=(t,e)=>{switch(e){case"blob":return t instanceof ArrayBuffer?new Blob([t]):t;case"arraybuffer":default:return t}},SEPARATOR=String.fromCharCode(30),encodePayload$1=(t,e)=>{const n=t.length,a=new Array(n);let o=0;t.forEach((c,u)=>{encodePacket(c,!1,l=>{a[u]=l,++o===n&&e(a.join(SEPARATOR))})})},decodePayload=(t,e)=>{const n=t.split(SEPARATOR),a=[];for(let o=0;o<n.length;o++){const c=decodePacket(n[o],e);if(a.push(c),c.type==="error")break}return a},protocol$1=4;function Emitter(t){if(t)return mixin(t)}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Emitter.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var a,o=0;o<n.length;o++)if(a=n[o],a===e||a.fn===e){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],a=1;a<arguments.length;a++)e[a-1]=arguments[a];if(n){n=n.slice(0);for(var a=0,o=n.length;a<o;++a)n[a].apply(this,e)}return this};Emitter.prototype.emitReserved=Emitter.prototype.emit;Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};const globalThisShim=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function pick(t,...e){return e.reduce((n,a)=>(t.hasOwnProperty(a)&&(n[a]=t[a]),n),{})}const NATIVE_SET_TIMEOUT=globalThisShim.setTimeout,NATIVE_CLEAR_TIMEOUT=globalThisShim.clearTimeout;function installTimerFunctions(t,e){e.useNativeTimers?(t.setTimeoutFn=NATIVE_SET_TIMEOUT.bind(globalThisShim),t.clearTimeoutFn=NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)):(t.setTimeoutFn=globalThisShim.setTimeout.bind(globalThisShim),t.clearTimeoutFn=globalThisShim.clearTimeout.bind(globalThisShim))}const BASE64_OVERHEAD=1.33;function byteLength(t){return typeof t=="string"?utf8Length(t):Math.ceil((t.byteLength||t.size)*BASE64_OVERHEAD)}function utf8Length(t){let e=0,n=0;for(let a=0,o=t.length;a<o;a++)e=t.charCodeAt(a),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(a++,n+=4);return n}class TransportError extends Error{constructor(e,n,a){super(e),this.description=n,this.context=a,this.type="TransportError"}}class Transport extends Emitter{constructor(e){super(),this.writable=!1,installTimerFunctions(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,a){return super.emitReserved("error",new TransportError(e,n,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=decodePacket(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}const alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),length$1=64,map$1={};let seed=0,i=0,prev;function encode$5(t){let e="";do e=alphabet[t%length$1]+e,t=Math.floor(t/length$1);while(t>0);return e}function yeast(){const t=encode$5(+new Date);return t!==prev?(seed=0,prev=t):t+"."+encode$5(seed++)}for(;i<length$1;i++)map$1[alphabet[i]]=i;function encode$4(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function decode$3(t){let e={},n=t.split("&");for(let a=0,o=n.length;a<o;a++){let c=n[a].split("=");e[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return e}let value=!1;try{value=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch(t){}const hasCORS=value;function XHR(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||hasCORS))return new XMLHttpRequest}catch{}if(!e)try{return new globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function empty$1(){}const hasXHR2=function(){return new XHR({xdomain:!1}).responseType!=null}();class Polling extends Transport{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const a=location.protocol==="https:";let o=location.port;o||(o=a?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||o!==e.port,this.xs=e.secure!==a}const n=e&&e.forceBase64;this.supportsBinary=hasXHR2&&!n}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let a=0;this.polling&&(a++,this.once("pollComplete",function(){--a||n()})),this.writable||(a++,this.once("drain",function(){--a||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};decodePayload(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,encodePayload$1(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const n=this.opts.secure?"https":"http";let a="";this.opts.timestampRequests!==!1&&(e[this.opts.timestampParam]=yeast()),!this.supportsBinary&&!e.sid&&(e.b64=1),this.opts.port&&(n==="https"&&Number(this.opts.port)!==443||n==="http"&&Number(this.opts.port)!==80)&&(a=":"+this.opts.port);const o=encode$4(e),c=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(c?"["+this.opts.hostname+"]":this.opts.hostname)+a+this.opts.path+(o.length?"?"+o:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Request(this.uri(),e)}doWrite(e,n){const a=this.request({method:"POST",data:e});a.on("success",n),a.on("error",(o,c)=>{this.onError("xhr post error",o,c)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,a)=>{this.onError("xhr poll error",n,a)}),this.pollXhr=e}}class Request extends Emitter{constructor(e,n){super(),installTimerFunctions(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.async=n.async!==!1,this.data=n.data!==void 0?n.data:null,this.create()}create(){const e=pick(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const n=this.xhr=new XHR(e);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this.opts.extraHeaders[a])}}catch{}if(this.method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{n.readyState===4&&(n.status===200||n.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof n.status=="number"?n.status:0)},0))},n.send(this.data)}catch(a){this.setTimeoutFn(()=>{this.onError(a)},0);return}typeof document<"u"&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=empty$1,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Request.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}Request.requestsCount=0;Request.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",unloadHandler);else if(typeof addEventListener=="function"){const t="onpagehide"in globalThisShim?"pagehide":"unload";addEventListener(t,unloadHandler,!1)}}function unloadHandler(){for(let t in Request.requests)Request.requests.hasOwnProperty(t)&&Request.requests[t].abort()}const nextTick$1=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),WebSocket$2=globalThisShim.WebSocket||globalThisShim.MozWebSocket,usingBrowserWebSocket=!0,defaultBinaryType="arraybuffer",isReactNative$1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class WS extends Transport{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,a=isReactNative$1?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=usingBrowserWebSocket&&!isReactNative$1?n?new WebSocket$2(e,n):new WebSocket$2(e):new WebSocket$2(e,n,a)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType||defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const a=e[n],o=n===e.length-1;encodePacket(a,this.supportsBinary,c=>{const u={};try{usingBrowserWebSocket&&this.ws.send(c)}catch{}o&&nextTick$1(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const n=this.opts.secure?"wss":"ws";let a="";this.opts.port&&(n==="wss"&&Number(this.opts.port)!==443||n==="ws"&&Number(this.opts.port)!==80)&&(a=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=yeast()),this.supportsBinary||(e.b64=1);const o=encode$4(e),c=this.opts.hostname.indexOf(":")!==-1;return n+"://"+(c?"["+this.opts.hostname+"]":this.opts.hostname)+a+this.opts.path+(o.length?"?"+o:"")}check(){return!!WebSocket$2}}const transports={websocket:WS,polling:Polling},re=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse$4(t){const e=t,n=t.indexOf("["),a=t.indexOf("]");n!=-1&&a!=-1&&(t=t.substring(0,n)+t.substring(n,a).replace(/:/g,";")+t.substring(a,t.length));let o=re.exec(t||""),c={},u=14;for(;u--;)c[parts[u]]=o[u]||"";return n!=-1&&a!=-1&&(c.source=e,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=pathNames(c,c.path),c.queryKey=queryKey(c,c.query),c}function pathNames(t,e){const n=/\/{2,9}/g,a=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&a.splice(0,1),e.slice(-1)=="/"&&a.splice(a.length-1,1),a}function queryKey(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,o,c){o&&(n[o]=c)}),n}let Socket$1=class Rt extends Emitter{constructor(e,n={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=parse$4(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=parse$4(n.host).host),installTimerFunctions(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=decode$3(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=protocol$1,n.transport=e,this.id&&(n.sid=this.id);const a=Object.assign({},this.opts.transportOptions[e],this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new transports[e](a)}open(){let e;if(this.opts.rememberUpgrade&&Rt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),a=!1;Rt.priorWebsocketSuccess=!1;const o=()=>{a||(n.send([{type:"ping",data:"probe"}]),n.once("packet",x=>{if(!a)if(x.type==="pong"&&x.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Rt.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(v(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const _=new Error("probe error");_.transport=n.name,this.emitReserved("upgradeError",_)}}))};function c(){a||(a=!0,v(),n.close(),n=null)}const u=x=>{const _=new Error("probe error: "+x);_.transport=n.name,c(),this.emitReserved("upgradeError",_)};function l(){u("transport closed")}function p(){u("socket closed")}function b(x){n&&x.name!==n.name&&c()}const v=()=>{n.removeListener("open",o),n.removeListener("error",u),n.removeListener("close",l),this.off("close",p),this.off("upgrading",b)};n.once("open",o),n.once("error",u),n.once("close",l),this.once("close",p),this.once("upgrading",b),n.open()}onOpen(){if(this.readyState="open",Rt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let a=0;a<this.writeBuffer.length;a++){const o=this.writeBuffer[a].data;if(o&&(n+=byteLength(o)),a>0&&n>this.maxPayload)return this.writeBuffer.slice(0,a);n+=2}return this.writeBuffer}write(e,n,a){return this.sendPacket("message",e,n,a),this}send(e,n,a){return this.sendPacket("message",e,n,a),this}sendPacket(e,n,a,o){if(typeof n=="function"&&(o=n,n=void 0),typeof a=="function"&&(o=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const c={type:e,data:n,options:a};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},a=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():e()}):this.upgrading?a():e()),this}onError(e){Rt.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let a=0;const o=e.length;for(;a<o;a++)~this.transports.indexOf(e[a])&&n.push(e[a]);return n}};Socket$1.protocol=protocol$1;function url(t,e="",n){let a=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),a=parse$4(t)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const c=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+c+":"+a.port+e,a.href=a.protocol+"://"+c+(n&&n.port===a.port?"":":"+a.port),a}const withNativeArrayBuffer=typeof ArrayBuffer=="function",isView=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,toString$1=Object.prototype.toString,withNativeBlob=typeof Blob=="function"||typeof Blob<"u"&&toString$1.call(Blob)==="[object BlobConstructor]",withNativeFile=typeof File=="function"||typeof File<"u"&&toString$1.call(File)==="[object FileConstructor]";function isBinary(t){return withNativeArrayBuffer&&(t instanceof ArrayBuffer||isView(t))||withNativeBlob&&t instanceof Blob||withNativeFile&&t instanceof File}function hasBinary(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,a=t.length;n<a;n++)if(hasBinary(t[n]))return!0;return!1}if(isBinary(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return hasBinary(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&hasBinary(t[n]))return!0;return!1}function deconstructPacket(t){const e=[],n=t.data,a=t;return a.data=_deconstructPacket(n,e),a.attachments=e.length,{packet:a,buffers:e}}function _deconstructPacket(t,e){if(!t)return t;if(isBinary(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let a=0;a<t.length;a++)n[a]=_deconstructPacket(t[a],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=_deconstructPacket(t[a],e));return n}return t}function reconstructPacket(t,e){return t.data=_reconstructPacket(t.data,e),delete t.attachments,t}function _reconstructPacket(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=_reconstructPacket(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=_reconstructPacket(t[n],e));return t}const protocol=5;var PacketType;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(PacketType||(PacketType={}));class Encoder{constructor(e){this.replacer=e}encode(e){return(e.type===PacketType.EVENT||e.type===PacketType.ACK)&&hasBinary(e)?this.encodeAsBinary({type:e.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===PacketType.BINARY_EVENT||e.type===PacketType.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=deconstructPacket(e),a=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(a),o}}class Decoder extends Emitter{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const a=n.type===PacketType.BINARY_EVENT;a||n.type===PacketType.BINARY_ACK?(n.type=a?PacketType.EVENT:PacketType.ACK,this.reconstructor=new BinaryReconstructor(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(isBinary(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const a={type:Number(e.charAt(0))};if(PacketType[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===PacketType.BINARY_EVENT||a.type===PacketType.BINARY_ACK){const c=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const u=e.substring(c,n);if(u!=Number(u)||e.charAt(n)!=="-")throw new Error("Illegal attachments");a.attachments=Number(u)}if(e.charAt(n+1)==="/"){const c=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););a.nsp=e.substring(c,n)}else a.nsp="/";const o=e.charAt(n+1);if(o!==""&&Number(o)==o){const c=n+1;for(;++n;){const u=e.charAt(n);if(u==null||Number(u)!=u){--n;break}if(n===e.length)break}a.id=Number(e.substring(c,n+1))}if(e.charAt(++n)){const c=this.tryParse(e.substr(n));if(Decoder.isPayloadValid(a.type,c))a.data=c;else throw new Error("invalid payload")}return a}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case PacketType.CONNECT:return typeof n=="object";case PacketType.DISCONNECT:return n===void 0;case PacketType.CONNECT_ERROR:return typeof n=="string"||typeof n=="object";case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(n)&&n.length>0;case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BinaryReconstructor{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const parser=Object.freeze(Object.defineProperty({__proto__:null,Decoder,Encoder,get PacketType(){return PacketType},protocol},Symbol.toStringTag,{value:"Module"}));function on(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const RESERVED_EVENTS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Socket extends Emitter{constructor(e,n,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[on(e,"open",this.onopen.bind(this)),on(e,"packet",this.onpacket.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(RESERVED_EVENTS.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:PacketType.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,l=n.pop();this._registerAckCallback(u,l),a.id=u}const o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!o||!this.connected)||(this.connected?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var a;const o=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(o===void 0){this.acks[e]=n;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===e&&this.sendBuffer.splice(u,1);n.call(this,new Error("operation has timed out"))},o);this.acks[e]=(...u)=>{this.io.clearTimeoutFn(c),n.apply(this,[null,...u])}}emitWithAck(e,...n){const a=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((o,c)=>{n.push((u,l)=>a?u?c(u):o(l):o(u)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...c)=>a!==this._queue[0]?void 0:(o!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...c)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case PacketType.EVENT:case PacketType.BINARY_EVENT:this.onevent(e);break;case PacketType.ACK:case PacketType.BINARY_ACK:this.onack(e);break;case PacketType.DISCONNECT:this.ondisconnect();break;case PacketType.CONNECT_ERROR:this.destroy();const a=new Error(e.data.message);a.data=e.data.data,this.emitReserved("connect_error",a);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const a of n)a.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let a=!1;return function(...o){a||(a=!0,n.packet({type:PacketType.ACK,id:e,data:o}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let a=0;a<n.length;a++)if(e===n[a])return n.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let a=0;a<n.length;a++)if(e===n[a])return n.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const a of n)a.apply(this,e.data)}}}function Backoff(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(t){this.ms=t};Backoff.prototype.setMax=function(t){this.max=t};Backoff.prototype.setJitter=function(t){this.jitter=t};class Manager extends Emitter{constructor(e,n){var a;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,installTimerFunctions(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((a=n.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||parser;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Socket$1(this.uri,this.opts);const n=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const o=on(n,"open",function(){a.onopen(),e&&e()}),c=on(n,"error",u=>{a.cleanup(),a._readyState="closed",this.emitReserved("error",u),e?e(u):a.maybeReconnectOnOpen()});if(this._timeout!==!1){const u=this._timeout;u===0&&o();const l=this.setTimeoutFn(()=>{o(),n.close(),n.emit("error",new Error("timeout"))},u);this.opts.autoUnref&&l.unref(),this.subs.push(function(){clearTimeout(l)})}return this.subs.push(o),this.subs.push(c),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(on(e,"ping",this.onping.bind(this)),on(e,"data",this.ondata.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this)),on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){nextTick$1(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let a=this.nsps[e];return a?this._autoConnect&&!a.active&&a.connect():(a=new Socket(this,e,n),this.nsps[e]=a),a}_destroy(e){const n=Object.keys(this.nsps);for(const a of n)if(this.nsps[a].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let a=0;a<n.length;a++)this.engine.write(n[a],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},n);this.opts.autoUnref&&a.unref(),this.subs.push(function(){clearTimeout(a)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const cache$1={};function lookup(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=url(t,e.path||"/socket.io"),a=n.source,o=n.id,c=n.path,u=cache$1[o]&&c in cache$1[o].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||u;let p;return l?p=new Manager(a,e):(cache$1[o]||(cache$1[o]=new Manager(a,e)),p=cache$1[o]),n.query&&!e.query&&(e.query=n.queryKey),p.socket(n.path,e)}Object.assign(lookup,{Manager,Socket,io:lookup,connect:lookup});const MAX_BYTES=65536;function randomBytes$2(t){const e=new Uint8Array(t);let n=0;if(t>0)if(t>MAX_BYTES)for(;n<t;)n+MAX_BYTES>t?(crypto.getRandomValues(e.subarray(n,n+(t-n))),n+=t-n):(crypto.getRandomValues(e.subarray(n,n+MAX_BYTES)),n+=MAX_BYTES);else crypto.getRandomValues(e);return e}var random_browser=randomBytes$2;const randomBytes$3=getDefaultExportFromCjs(random_browser);var delay$2={exports:{}};const randomInteger=(t,e)=>Math.floor(Math.random()*(e-t+1)+t),createAbortError=()=>{const t=new Error("Delay aborted");return t.name="AbortError",t},createDelay=({clearTimeout:t,setTimeout:e,willResolve:n})=>(a,{value:o,signal:c}={})=>{if(c&&c.aborted)return Promise.reject(createAbortError());let u,l,p;const b=t||clearTimeout,v=()=>{b(u),p(createAbortError())},x=()=>{c&&c.removeEventListener("abort",v)},_=new Promise((E,$)=>{l=()=>{x(),n?E(o):$(o)},p=$,u=(e||setTimeout)(l,a)});return c&&c.addEventListener("abort",v,{once:!0}),_.clear=()=>{b(u),u=null,l()},_},createWithTimers=t=>{const e=createDelay({...t,willResolve:!0});return e.reject=createDelay({...t,willResolve:!1}),e.range=(n,a,o)=>e(randomInteger(n,a),o),e},delay=createWithTimers();delay.createWithTimers=createWithTimers;delay$2.exports=delay;delay$2.exports.default=delay;var delayExports=delay$2.exports;const delay$1=getDefaultExportFromCjs(delayExports),normalizeEmitter=t=>{const e=t.on||t.addListener||t.addEventListener,n=t.off||t.removeListener||t.removeEventListener;if(!e||!n)throw new TypeError("Emitter is not compatible");return{addListener:e.bind(t),removeListener:n.bind(t)}};function pEventMultiple(t,e,n){let a;const o=new Promise((c,u)=>{if(n={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...n},!(n.count>=0&&(n.count===Number.POSITIVE_INFINITY||Number.isInteger(n.count))))throw new TypeError("The `count` option should be at least 0 or more");const l=[e].flat(),p=[],{addListener:b,removeListener:v}=normalizeEmitter(t),x=(...E)=>{const $=n.multiArgs?E:E[0];n.filter&&!n.filter($)||(p.push($),n.count===p.length&&(a(),c(p)))},_=E=>{a(),u(E)};a=()=>{for(const E of l)v(E,x);for(const E of n.rejectionEvents)v(E,_)};for(const E of l)b(E,x);for(const E of n.rejectionEvents)b(E,_);n.resolveImmediately&&c(p)});if(o.cancel=a,typeof n.timeout=="number"){const c=pTimeout$1(o,n.timeout);return c.cancel=a,c}return o}function pEvent(t,e,n){typeof n=="function"&&(n={filter:n}),n={...n,count:1,resolveImmediately:!1};const a=pEventMultiple(t,e,n),o=a.then(c=>c[0]);return o.cancel=a.cancel,o}function xor(t,e){if(t.length!==e.length)throw new Error("Inputs should have the same length");const n=allocUnsafe$3(t.length);for(let a=0;a<t.length;a++)n[a]=t[a]^e[a];return asUint8Array$2(n)}const intervals=new Map,_generateId=()=>`${Date.now()}:${Math.floor(Math.random()*1e6)}`;async function _runPeriodically(t,e,n){for(;intervals.get(n);){try{await t()}catch(a){setTimeout(()=>{throw a},1);break}if(!intervals.get(n))break;await new Promise(a=>{const o=setTimeout(a,e);intervals.set(n,o)})}}function setDelayedInterval(t,e,n){n=n||e;const a=_generateId(),o=setTimeout(()=>{_runPeriodically(t,e,a)},n);return intervals.set(a,o),a}function clearDelayedInterval(t){const e=intervals.get(t);e&&(clearTimeout(e),intervals.delete(t))}var src$2={setDelayedInterval,clearDelayedInterval},RateLimiterAbstract_1=class{constructor(e={}){this.points=e.points,this.duration=e.duration,this.blockDuration=e.blockDuration,this.execEvenly=e.execEvenly,this.execEvenlyMinDelayMs=e.execEvenlyMinDelayMs,this.keyPrefix=e.keyPrefix}get points(){return this._points}set points(e){this._points=e>=0?e:4}get duration(){return this._duration}set duration(e){this._duration=typeof e>"u"?1:e}get msDuration(){return this.duration*1e3}get blockDuration(){return this._blockDuration}set blockDuration(e){this._blockDuration=typeof e>"u"?0:e}get msBlockDuration(){return this.blockDuration*1e3}get execEvenly(){return this._execEvenly}set execEvenly(e){this._execEvenly=typeof e>"u"?!1:!!e}get execEvenlyMinDelayMs(){return this._execEvenlyMinDelayMs}set execEvenlyMinDelayMs(e){this._execEvenlyMinDelayMs=typeof e>"u"?Math.ceil(this.msDuration/this.points):e}get keyPrefix(){return this._keyPrefix}set keyPrefix(e){if(typeof e>"u"&&(e="rlflx"),typeof e!="string")throw new Error("keyPrefix must be string");this._keyPrefix=e}_getKeySecDuration(e={}){return e&&e.customDuration>=0?e.customDuration:this.duration}getKey(e){return this.keyPrefix.length>0?`${this.keyPrefix}:${e}`:e}parseKey(e){return e.substring(this.keyPrefix.length)}consume(){throw new Error("You have to implement the method 'consume'!")}penalty(){throw new Error("You have to implement the method 'penalty'!")}reward(){throw new Error("You have to implement the method 'reward'!")}get(){throw new Error("You have to implement the method 'get'!")}set(){throw new Error("You have to implement the method 'set'!")}block(){throw new Error("You have to implement the method 'block'!")}delete(){throw new Error("You have to implement the method 'delete'!")}},BlockedKeys_1$1=class{constructor(){this._keys={},this._addedKeysAmount=0}collectExpired(){const e=Date.now();Object.keys(this._keys).forEach(n=>{this._keys[n]<=e&&delete this._keys[n]}),this._addedKeysAmount=Object.keys(this._keys).length}add(e,n){this.addMs(e,n*1e3)}addMs(e,n){this._keys[e]=Date.now()+n,this._addedKeysAmount++,this._addedKeysAmount>999&&this.collectExpired()}msBeforeExpire(e){const n=this._keys[e];if(n&&n>=Date.now()){this.collectExpired();const a=Date.now();return n>=a?n-a:0}return 0}delete(e){e?delete this._keys[e]:Object.keys(this._keys).forEach(n=>{delete this._keys[n]})}};const BlockedKeys$1=BlockedKeys_1$1;var BlockedKeys_1=BlockedKeys$1,RateLimiterRes_1=class{constructor(e,n,a,o){this.remainingPoints=typeof e>"u"?0:e,this.msBeforeNext=typeof n>"u"?0:n,this.consumedPoints=typeof a>"u"?0:a,this.isFirstInDuration=typeof o>"u"?!1:o}get msBeforeNext(){return this._msBeforeNext}set msBeforeNext(e){return this._msBeforeNext=e,this}get remainingPoints(){return this._remainingPoints}set remainingPoints(e){return this._remainingPoints=e,this}get consumedPoints(){return this._consumedPoints}set consumedPoints(e){return this._consumedPoints=e,this}get isFirstInDuration(){return this._isFirstInDuration}set isFirstInDuration(e){this._isFirstInDuration=!!e}_getDecoratedProperties(){return{remainingPoints:this.remainingPoints,msBeforeNext:this.msBeforeNext,consumedPoints:this.consumedPoints,isFirstInDuration:this.isFirstInDuration}}[Symbol.for("nodejs.util.inspect.custom")](){return this._getDecoratedProperties()}toString(){return JSON.stringify(this._getDecoratedProperties())}toJSON(){return this._getDecoratedProperties()}};const RateLimiterAbstract$3=RateLimiterAbstract_1,BlockedKeys=BlockedKeys_1,RateLimiterRes$b=RateLimiterRes_1;var RateLimiterStoreAbstract_1=class extends RateLimiterAbstract$3{constructor(e={}){super(e),this.inMemoryBlockOnConsumed=e.inMemoryBlockOnConsumed||e.inmemoryBlockOnConsumed,this.inMemoryBlockDuration=e.inMemoryBlockDuration||e.inmemoryBlockDuration,this.insuranceLimiter=e.insuranceLimiter,this._inMemoryBlockedKeys=new BlockedKeys}get client(){return this._client}set client(e){if(typeof e>"u")throw new Error("storeClient is not set");this._client=e}_afterConsume(e,n,a,o,c,u={}){const l=this._getRateLimiterRes(a,o,c);if(this.inMemoryBlockOnConsumed>0&&!(this.inMemoryBlockDuration>0)&&l.consumedPoints>=this.inMemoryBlockOnConsumed)return this._inMemoryBlockedKeys.addMs(a,l.msBeforeNext),l.consumedPoints>this.points?n(l):e(l);if(l.consumedPoints>this.points){let p=Promise.resolve();this.blockDuration>0&&l.consumedPoints<=this.points+o&&(l.msBeforeNext=this.msBlockDuration,p=this._block(a,l.consumedPoints,this.msBlockDuration,u)),this.inMemoryBlockOnConsumed>0&&l.consumedPoints>=this.inMemoryBlockOnConsumed&&(this._inMemoryBlockedKeys.add(a,this.inMemoryBlockDuration),l.msBeforeNext=this.msInMemoryBlockDuration),p.then(()=>{n(l)}).catch(b=>{n(b)})}else if(this.execEvenly&&l.msBeforeNext>0&&!l.isFirstInDuration){let p=Math.ceil(l.msBeforeNext/(l.remainingPoints+2));p<this.execEvenlyMinDelayMs&&(p=l.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(e,p,l)}else e(l)}_handleError(e,n,a,o,c,u=!1,l={}){this.insuranceLimiter instanceof RateLimiterAbstract$3?this.insuranceLimiter[n](c,u,l).then(p=>{a(p)}).catch(p=>{o(p)}):o(e)}get _inmemoryBlockedKeys(){return this._inMemoryBlockedKeys}getInmemoryBlockMsBeforeExpire(e){return this.getInMemoryBlockMsBeforeExpire(e)}get inmemoryBlockOnConsumed(){return this.inMemoryBlockOnConsumed}set inmemoryBlockOnConsumed(e){this.inMemoryBlockOnConsumed=e}get inmemoryBlockDuration(){return this.inMemoryBlockDuration}set inmemoryBlockDuration(e){this.inMemoryBlockDuration=e}get msInmemoryBlockDuration(){return this.inMemoryBlockDuration*1e3}getInMemoryBlockMsBeforeExpire(e){return this.inMemoryBlockOnConsumed>0?this._inMemoryBlockedKeys.msBeforeExpire(e):0}get inMemoryBlockOnConsumed(){return this._inMemoryBlockOnConsumed}set inMemoryBlockOnConsumed(e){if(this._inMemoryBlockOnConsumed=e?parseInt(e):0,this.inMemoryBlockOnConsumed>0&&this.points>this.inMemoryBlockOnConsumed)throw new Error('inMemoryBlockOnConsumed option must be greater or equal "points" option')}get inMemoryBlockDuration(){return this._inMemoryBlockDuration}set inMemoryBlockDuration(e){if(this._inMemoryBlockDuration=e?parseInt(e):0,this.inMemoryBlockDuration>0&&this.inMemoryBlockOnConsumed===0)throw new Error("inMemoryBlockOnConsumed option must be set up")}get msInMemoryBlockDuration(){return this._inMemoryBlockDuration*1e3}get insuranceLimiter(){return this._insuranceLimiter}set insuranceLimiter(e){if(typeof e<"u"&&!(e instanceof RateLimiterAbstract$3))throw new Error("insuranceLimiter must be instance of RateLimiterAbstract");this._insuranceLimiter=e,this._insuranceLimiter&&(this._insuranceLimiter.blockDuration=this.blockDuration,this._insuranceLimiter.execEvenly=this.execEvenly)}block(e,n,a={}){const o=n*1e3;return this._block(this.getKey(e),this.points+1,o,a)}set(e,n,a,o={}){const c=(a>=0?a:this.duration)*1e3;return this._block(this.getKey(e),n,c,o)}consume(e,n=1,a={}){return new Promise((o,c)=>{const u=this.getKey(e),l=this.getInMemoryBlockMsBeforeExpire(u);if(l>0)return c(new RateLimiterRes$b(0,l));this._upsert(u,n,this._getKeySecDuration(a)*1e3,!1,a).then(p=>{this._afterConsume(o,c,u,n,p)}).catch(p=>{this._handleError(p,"consume",o,c,e,n,a)})})}penalty(e,n=1,a={}){const o=this.getKey(e);return new Promise((c,u)=>{this._upsert(o,n,this._getKeySecDuration(a)*1e3,!1,a).then(l=>{c(this._getRateLimiterRes(o,n,l))}).catch(l=>{this._handleError(l,"penalty",c,u,e,n,a)})})}reward(e,n=1,a={}){const o=this.getKey(e);return new Promise((c,u)=>{this._upsert(o,-n,this._getKeySecDuration(a)*1e3,!1,a).then(l=>{c(this._getRateLimiterRes(o,-n,l))}).catch(l=>{this._handleError(l,"reward",c,u,e,n,a)})})}get(e,n={}){const a=this.getKey(e);return new Promise((o,c)=>{this._get(a,n).then(u=>{o(u===null||typeof u>"u"?null:this._getRateLimiterRes(a,0,u))}).catch(u=>{this._handleError(u,"get",o,c,e,n)})})}delete(e,n={}){const a=this.getKey(e);return new Promise((o,c)=>{this._delete(a,n).then(u=>{this._inMemoryBlockedKeys.delete(a),o(u)}).catch(u=>{this._handleError(u,"delete",o,c,e,n)})})}deleteInMemoryBlockedAll(){this._inMemoryBlockedKeys.delete()}_getRateLimiterRes(e,n,a){throw new Error("You have to implement the method '_getRateLimiterRes'!")}_block(e,n,a,o={}){return new Promise((c,u)=>{this._upsert(e,n,a,!0,o).then(()=>{c(new RateLimiterRes$b(0,a>0?a:-1,n))}).catch(l=>{this._handleError(l,"block",c,u,this.parseKey(e),a/1e3,o)})})}_get(e,n={}){throw new Error("You have to implement the method '_get'!")}_delete(e,n={}){throw new Error("You have to implement the method '_delete'!")}_upsert(e,n,a,o=!1,c={}){throw new Error("You have to implement the method '_upsert'!")}};const RateLimiterStoreAbstract$4=RateLimiterStoreAbstract_1,RateLimiterRes$a=RateLimiterRes_1,incrTtlLuaScript="redis.call('set', KEYS[1], 0, 'EX', ARGV[2], 'NX') local consumed = redis.call('incrby', KEYS[1], ARGV[1]) local ttl = redis.call('pttl', KEYS[1]) if ttl == -1 then   redis.call('expire', KEYS[1], ARGV[2])   ttl = 1000 * ARGV[2] end return {consumed, ttl} ";let RateLimiterRedis$1=class extends RateLimiterStoreAbstract$4{constructor(e){super(e),e.redis?this.client=e.redis:this.client=e.storeClient,this._rejectIfRedisNotReady=!!e.rejectIfRedisNotReady,typeof this.client.defineCommand=="function"&&this.client.defineCommand("rlflxIncr",{numberOfKeys:1,lua:incrTtlLuaScript})}_isRedisReady(){return this._rejectIfRedisNotReady?!(this.client.status&&this.client.status!=="ready"||typeof this.client.isReady=="function"&&!this.client.isReady()):!0}_getRateLimiterRes(e,n,a){let[o,c]=a;Array.isArray(o)&&([,o]=o,[,c]=c);const u=new RateLimiterRes$a;return u.consumedPoints=parseInt(o),u.isFirstInDuration=u.consumedPoints===n,u.remainingPoints=Math.max(this.points-u.consumedPoints,0),u.msBeforeNext=c,u}_upsert(e,n,a,o=!1){return new Promise((c,u)=>{if(!this._isRedisReady())return u(new Error("Redis connection is not ready"));const l=Math.floor(a/1e3),p=this.client.multi();if(o)l>0?p.set(e,n,"EX",l):p.set(e,n),p.pttl(e).exec((b,v)=>b?u(b):c(v));else if(l>0){const b=function(v,x){return v?u(v):c(x)};typeof this.client.rlflxIncr=="function"?this.client.rlflxIncr(e,n,l,b):this.client.eval(incrTtlLuaScript,1,e,n,l,b)}else p.incrby(e,n).pttl(e).exec((b,v)=>b?u(b):c(v))})}_get(e){return new Promise((n,a)=>{if(!this._isRedisReady())return a(new Error("Redis connection is not ready"));this.client.multi().get(e).pttl(e).exec((o,c)=>{if(o)a(o);else{const[u]=c;if(u===null)return n(null);n(c)}})})}_delete(e){return new Promise((n,a)=>{this.client.del(e,(o,c)=>{o?a(o):n(c>0)})})}};var RateLimiterRedis_1=RateLimiterRedis$1;const RateLimiterStoreAbstract$3=RateLimiterStoreAbstract_1,RateLimiterRes$9=RateLimiterRes_1;function getDriverVersion(t){try{const e=t.client?t.client:t,{version:n}=e.topology.s.options.metadata.driver,a=n.split(".").map(o=>parseInt(o));return{major:a[0],feature:a[1],patch:a[2]}}catch{return{major:0,feature:0,patch:0}}}let RateLimiterMongo$1=class Kt extends RateLimiterStoreAbstract$3{constructor(e){super(e),this.dbName=e.dbName,this.tableName=e.tableName,this.indexKeyPrefix=e.indexKeyPrefix,e.mongo?this.client=e.mongo:this.client=e.storeClient,typeof this.client.then=="function"?this.client.then(n=>{this.client=n,this._initCollection(),this._driverVersion=getDriverVersion(this.client)}):(this._initCollection(),this._driverVersion=getDriverVersion(this.client))}get dbName(){return this._dbName}set dbName(e){this._dbName=typeof e>"u"?Kt.getDbName():e}static getDbName(){return"node-rate-limiter-flexible"}get tableName(){return this._tableName}set tableName(e){this._tableName=typeof e>"u"?this.keyPrefix:e}get client(){return this._client}set client(e){if(typeof e>"u")throw new Error("mongo is not set");this._client=e}get indexKeyPrefix(){return this._indexKeyPrefix}set indexKeyPrefix(e){this._indexKeyPrefix=e||{}}_initCollection(){const n=(typeof this.client.db=="function"?this.client.db(this.dbName):this.client).collection(this.tableName);n.createIndex({expire:-1},{expireAfterSeconds:0}),n.createIndex(Object.assign({},this.indexKeyPrefix,{key:1}),{unique:!0}),this._collection=n}_getRateLimiterRes(e,n,a){const o=new RateLimiterRes$9;let c;return typeof a.value>"u"?c=a:c=a.value,o.isFirstInDuration=c.points===n,o.consumedPoints=c.points,o.remainingPoints=Math.max(this.points-o.consumedPoints,0),o.msBeforeNext=c.expire!==null?Math.max(new Date(c.expire).getTime()-Date.now(),0):-1,o}_upsert(e,n,a,o=!1,c={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const u=c.attrs||{};let l,p;o?(l={key:e},l=Object.assign(l,u),p={$set:{key:e,points:n,expire:a>0?new Date(Date.now()+a):null}},p.$set=Object.assign(p.$set,u)):(l={$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}],key:e},l=Object.assign(l,u),p={$setOnInsert:{key:e,expire:a>0?new Date(Date.now()+a):null},$inc:{points:n}},p.$setOnInsert=Object.assign(p.$setOnInsert,u));const b={upsert:!0};return this._driverVersion.major>=4||this._driverVersion.major===3&&this._driverVersion.feature>=7||this._driverVersion.feature>=6&&this._driverVersion.patch>=7?b.returnDocument="after":b.returnOriginal=!1,new Promise((v,x)=>{this._collection.findOneAndUpdate(l,p,b).then(_=>{v(_)}).catch(_=>{if(_&&_.code===11e3){const E=Object.assign({$or:[{expire:{$lte:new Date}},{expire:{$eq:null}}],key:e},u),$={$set:Object.assign({key:e,points:n,expire:a>0?new Date(Date.now()+a):null},u)};this._collection.findOneAndUpdate(E,$,b).then(S=>{v(S)}).catch(S=>{S&&S.code===11e3?this._upsert(e,n,a,o).then(A=>v(A)).catch(A=>x(A)):x(S)})}else x(_)})})}_get(e,n={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const a=n.attrs||{},o=Object.assign({key:e,$or:[{expire:{$gt:new Date}},{expire:{$eq:null}}]},a);return this._collection.findOne(o)}_delete(e,n={}){if(!this._collection)return Promise.reject(Error("Mongo connection is not established"));const a=n.attrs||{},o=Object.assign({key:e},a);return this._collection.deleteOne(o).then(c=>c.deletedCount>0)}};var RateLimiterMongo_1=RateLimiterMongo$1;const RateLimiterStoreAbstract$2=RateLimiterStoreAbstract_1,RateLimiterRes$8=RateLimiterRes_1;let RateLimiterMySQL$1=class extends RateLimiterStoreAbstract$2{constructor(e,n=null){super(e),this.client=e.storeClient,this.clientType=e.storeType,this.dbName=e.dbName,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?(this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),typeof n=="function"&&n()):this._createDbAndTable().then(()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),typeof n=="function"&&n()}).catch(a=>{if(typeof n=="function")n(a);else throw a})}clearExpired(e){return new Promise(n=>{this._getConnection().then(a=>{a.query("DELETE FROM ??.?? WHERE expire < ?",[this.dbName,this.tableName,e],()=>{this._releaseConnection(a),n()})}).catch(()=>{n()})})}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout(()=>{this.clearExpired(Date.now()-36e5).then(()=>{this._clearExpiredHourAgo()})},3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return new Promise((e,n)=>{this.client.getConnection((a,o)=>{if(a)return n(a);e(o)})});case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return e.release();case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);default:return!0}}_createDbAndTable(){return new Promise((e,n)=>{this._getConnection().then(a=>{a.query(`CREATE DATABASE IF NOT EXISTS \`${this.dbName}\`;`,o=>{if(o)return this._releaseConnection(a),n(o);a.query(this._getCreateTableStmt(),c=>{if(c)return this._releaseConnection(a),n(c);this._releaseConnection(a),e()})})}).catch(a=>{n(a)})})}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS \`${this.dbName}\`.\`${this.tableName}\` (\`key\` VARCHAR(255) CHARACTER SET utf8 NOT NULL,\`points\` INT(9) NOT NULL default 0,\`expire\` BIGINT UNSIGNED,PRIMARY KEY (\`key\`)) ENGINE = INNODB;`}get clientType(){return this._clientType}set clientType(e){if(typeof e>"u")if(this.client.constructor.name==="Connection")e="connection";else if(this.client.constructor.name==="Pool")e="pool";else if(this.client.constructor.name==="Sequelize")e="sequelize";else throw new Error("storeType is not defined");this._clientType=e.toLowerCase()}get dbName(){return this._dbName}set dbName(e){this._dbName=typeof e>"u"?"rtlmtrflx":e}get tableName(){return this._tableName}set tableName(e){this._tableName=typeof e>"u"?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated=typeof e>"u"?!1:!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout=typeof e>"u"?!0:!!e}_getRateLimiterRes(e,n,a){const o=new RateLimiterRes$8,[c]=a;return o.isFirstInDuration=n===c.points,o.consumedPoints=o.isFirstInDuration?n:c.points,o.remainingPoints=Math.max(this.points-o.consumedPoints,0),o.msBeforeNext=c.expire?Math.max(c.expire-Date.now(),0):-1,o}_upsertTransaction(e,n,a,o,c){return new Promise((u,l)=>{e.query("BEGIN",p=>{if(p)return e.rollback(),l(p);const b=Date.now(),v=o>0?b+o:null;let x,_;c?(x=`INSERT INTO ??.?? VALUES (?, ?, ?)
          ON DUPLICATE KEY UPDATE 
            points = ?, 
            expire = ?;`,_=[this.dbName,this.tableName,n,a,v,a,v]):(x=`INSERT INTO ??.?? VALUES (?, ?, ?)
          ON DUPLICATE KEY UPDATE 
            points = IF(expire <= ?, ?, points + (?)), 
            expire = IF(expire <= ?, ?, expire);`,_=[this.dbName,this.tableName,n,a,v,b,a,a,b,v]),e.query(x,_,E=>{if(E)return e.rollback(),l(E);e.query("SELECT points, expire FROM ??.?? WHERE `key` = ?;",[this.dbName,this.tableName,n],($,S)=>{if($)return e.rollback(),l($);e.query("COMMIT",A=>{if(A)return e.rollback(),l(A);u(S)})})})})})}_upsert(e,n,a,o=!1){return this.tableCreated?new Promise((c,u)=>{this._getConnection().then(l=>{this._upsertTransaction(l,e,n,a,o).then(p=>{c(p),this._releaseConnection(l)}).catch(p=>{u(p),this._releaseConnection(l)})}).catch(l=>{u(l)})}):Promise.reject(Error("Table is not created yet"))}_get(e){return this.tableCreated?new Promise((n,a)=>{this._getConnection().then(o=>{o.query("SELECT points, expire FROM ??.?? WHERE `key` = ? AND (`expire` > ? OR `expire` IS NULL)",[this.dbName,this.tableName,e,Date.now()],(c,u)=>{c?a(c):u.length===0?n(null):n(u),this._releaseConnection(o)})}).catch(o=>{a(o)})}):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?new Promise((n,a)=>{this._getConnection().then(o=>{o.query("DELETE FROM ??.?? WHERE `key` = ?",[this.dbName,this.tableName,e],(c,u)=>{c?a(c):n(u.affectedRows>0),this._releaseConnection(o)})}).catch(o=>{a(o)})}):Promise.reject(Error("Table is not created yet"))}};var RateLimiterMySQL_1=RateLimiterMySQL$1;const RateLimiterStoreAbstract$1=RateLimiterStoreAbstract_1,RateLimiterRes$7=RateLimiterRes_1;let RateLimiterPostgres$1=class extends RateLimiterStoreAbstract$1{constructor(e,n=null){super(e),this.client=e.storeClient,this.clientType=e.storeType,this.tableName=e.tableName,this.clearExpiredByTimeout=e.clearExpiredByTimeout,this.tableCreated=e.tableCreated,this.tableCreated?typeof n=="function"&&n():this._createTable().then(()=>{this.tableCreated=!0,this.clearExpiredByTimeout&&this._clearExpiredHourAgo(),typeof n=="function"&&n()}).catch(a=>{if(typeof n=="function")n(a);else throw a})}clearExpired(e){return new Promise(n=>{const a={name:"rlflx-clear-expired",text:`DELETE FROM ${this.tableName} WHERE expire < $1`,values:[e]};this._query(a).then(()=>{n()}).catch(()=>{n()})})}_clearExpiredHourAgo(){this._clearExpiredTimeoutId&&clearTimeout(this._clearExpiredTimeoutId),this._clearExpiredTimeoutId=setTimeout(()=>{this.clearExpired(Date.now()-36e5).then(()=>{this._clearExpiredHourAgo()})},3e5),this._clearExpiredTimeoutId.unref()}_getConnection(){switch(this.clientType){case"pool":return Promise.resolve(this.client);case"sequelize":return this.client.connectionManager.getConnection();case"knex":return this.client.client.acquireConnection();case"typeorm":return Promise.resolve(this.client.driver.master);default:return Promise.resolve(this.client)}}_releaseConnection(e){switch(this.clientType){case"pool":return!0;case"sequelize":return this.client.connectionManager.releaseConnection(e);case"knex":return this.client.client.releaseConnection(e);case"typeorm":return!0;default:return!0}}_createTable(){return new Promise((e,n)=>{this._query({text:this._getCreateTableStmt()}).then(()=>{e()}).catch(a=>{a.code==="23505"?e():n(a)})})}_getCreateTableStmt(){return`CREATE TABLE IF NOT EXISTS ${this.tableName} ( 
      key varchar(255) PRIMARY KEY,
      points integer NOT NULL DEFAULT 0,
      expire bigint
    );`}get clientType(){return this._clientType}set clientType(e){const n=this.client.constructor.name;if(typeof e>"u")if(n==="Client")e="client";else if(n==="Pool"||n==="BoundPool")e="pool";else if(n==="Sequelize")e="sequelize";else throw new Error("storeType is not defined");this._clientType=e.toLowerCase()}get tableName(){return this._tableName}set tableName(e){this._tableName=typeof e>"u"?this.keyPrefix:e}get tableCreated(){return this._tableCreated}set tableCreated(e){this._tableCreated=typeof e>"u"?!1:!!e}get clearExpiredByTimeout(){return this._clearExpiredByTimeout}set clearExpiredByTimeout(e){this._clearExpiredByTimeout=typeof e>"u"?!0:!!e}_getRateLimiterRes(e,n,a){const o=new RateLimiterRes$7,c=a.rows[0];return o.isFirstInDuration=n===c.points,o.consumedPoints=o.isFirstInDuration?n:c.points,o.remainingPoints=Math.max(this.points-o.consumedPoints,0),o.msBeforeNext=c.expire?Math.max(c.expire-Date.now(),0):-1,o}_query(e){const a={name:`${this.tableName.toLowerCase()}:${e.name}`,text:e.text,values:e.values};return new Promise((o,c)=>{this._getConnection().then(u=>{u.query(a).then(l=>{o(l),this._releaseConnection(u)}).catch(l=>{c(l),this._releaseConnection(u)})}).catch(u=>{c(u)})})}_upsert(e,n,a,o=!1){if(!this.tableCreated)return Promise.reject(Error("Table is not created yet"));const c=a>0?Date.now()+a:null,u=o?" $3 ":` CASE
             WHEN ${this.tableName}.expire <= $4 THEN $3
             ELSE ${this.tableName}.expire
            END `;return this._query({name:o?"rlflx-upsert-force":"rlflx-upsert",text:`
            INSERT INTO ${this.tableName} VALUES ($1, $2, $3)
              ON CONFLICT(key) DO UPDATE SET
                points = CASE
                          WHEN (${this.tableName}.expire <= $4 OR 1=${o?1:0}) THEN $2
                          ELSE ${this.tableName}.points + ($2)
                         END,
                expire = ${u}
            RETURNING points, expire;`,values:[e,n,c,Date.now()]})}_get(e){return this.tableCreated?new Promise((n,a)=>{this._query({name:"rlflx-get",text:`
            SELECT points, expire FROM ${this.tableName} WHERE key = $1 AND (expire > $2 OR expire IS NULL);`,values:[e,Date.now()]}).then(o=>{o.rowCount===0&&(o=null),n(o)}).catch(o=>{a(o)})}):Promise.reject(Error("Table is not created yet"))}_delete(e){return this.tableCreated?this._query({name:"rlflx-delete",text:`DELETE FROM ${this.tableName} WHERE key = $1`,values:[e]}).then(n=>n.rowCount>0):Promise.reject(Error("Table is not created yet"))}};var RateLimiterPostgres_1=RateLimiterPostgres$1,empty=null,empty_1=empty,Record_1=class{constructor(e,n,a=null){this.value=e,this.expiresAt=n,this.timeoutId=a}get value(){return this._value}set value(e){this._value=parseInt(e)}get expiresAt(){return this._expiresAt}set expiresAt(e){!(e instanceof Date)&&Number.isInteger(e)&&(e=new Date(e)),this._expiresAt=e}get timeoutId(){return this._timeoutId}set timeoutId(e){this._timeoutId=e}};const Record=Record_1,RateLimiterRes$6=RateLimiterRes_1;var MemoryStorage_1=class{constructor(){this._storage={}}incrby(e,n,a){if(this._storage[e]){const o=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-new Date().getTime():-1;return o!==0?(this._storage[e].value=this._storage[e].value+n,new RateLimiterRes$6(0,o,this._storage[e].value,!1)):this.set(e,n,a)}return this.set(e,n,a)}set(e,n,a){const o=a*1e3;return this._storage[e]&&this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),this._storage[e]=new Record(n,o>0?new Date(Date.now()+o):null),o>0&&(this._storage[e].timeoutId=setTimeout(()=>{delete this._storage[e]},o),this._storage[e].timeoutId.unref&&this._storage[e].timeoutId.unref()),new RateLimiterRes$6(0,o===0?-1:o,this._storage[e].value,!0)}get(e){if(this._storage[e]){const n=this._storage[e].expiresAt?this._storage[e].expiresAt.getTime()-new Date().getTime():-1;return new RateLimiterRes$6(0,n,this._storage[e].value,!1)}return null}delete(e){return this._storage[e]?(this._storage[e].timeoutId&&clearTimeout(this._storage[e].timeoutId),delete this._storage[e],!0):!1}};const RateLimiterAbstract$2=RateLimiterAbstract_1,MemoryStorage=MemoryStorage_1,RateLimiterRes$5=RateLimiterRes_1;let RateLimiterMemory$2=class extends RateLimiterAbstract$2{constructor(e={}){super(e),this._memoryStorage=new MemoryStorage}consume(e,n=1,a={}){return new Promise((o,c)=>{const u=this.getKey(e),l=this._getKeySecDuration(a);let p=this._memoryStorage.incrby(u,n,l);if(p.remainingPoints=Math.max(this.points-p.consumedPoints,0),p.consumedPoints>this.points)this.blockDuration>0&&p.consumedPoints<=this.points+n&&(p=this._memoryStorage.set(u,p.consumedPoints,this.blockDuration)),c(p);else if(this.execEvenly&&p.msBeforeNext>0&&!p.isFirstInDuration){let b=Math.ceil(p.msBeforeNext/(p.remainingPoints+2));b<this.execEvenlyMinDelayMs&&(b=p.consumedPoints*this.execEvenlyMinDelayMs),setTimeout(o,b,p)}else o(p)})}penalty(e,n=1,a={}){const o=this.getKey(e);return new Promise(c=>{const u=this._getKeySecDuration(a),l=this._memoryStorage.incrby(o,n,u);l.remainingPoints=Math.max(this.points-l.consumedPoints,0),c(l)})}reward(e,n=1,a={}){const o=this.getKey(e);return new Promise(c=>{const u=this._getKeySecDuration(a),l=this._memoryStorage.incrby(o,-n,u);l.remainingPoints=Math.max(this.points-l.consumedPoints,0),c(l)})}block(e,n){const a=n*1e3,o=this.points+1;return this._memoryStorage.set(this.getKey(e),o,n),Promise.resolve(new RateLimiterRes$5(0,a===0?-1:a,o))}set(e,n,a){const o=(a>=0?a:this.duration)*1e3;return this._memoryStorage.set(this.getKey(e),n,a),Promise.resolve(new RateLimiterRes$5(0,o===0?-1:o,n))}get(e){const n=this._memoryStorage.get(this.getKey(e));return n!==null&&(n.remainingPoints=Math.max(this.points-n.consumedPoints,0)),Promise.resolve(n)}delete(e){return Promise.resolve(this._memoryStorage.delete(this.getKey(e)))}};var RateLimiterMemory_1=RateLimiterMemory$2;const cluster=empty_1,crypto$2=requireCryptoBrowserify(),RateLimiterAbstract$1=RateLimiterAbstract_1,RateLimiterMemory$1=RateLimiterMemory_1,RateLimiterRes$4=RateLimiterRes_1,channel="rate_limiter_flexible";let masterInstance=null;const masterSendToWorker=function(t,e,n,a){let o;a===null||a===!0||a===!1?o=a:o={remainingPoints:a.remainingPoints,msBeforeNext:a.msBeforeNext,consumedPoints:a.consumedPoints,isFirstInDuration:a.isFirstInDuration},t.send({channel,keyPrefix:e.keyPrefix,promiseId:e.promiseId,type:n,data:o})},workerWaitInit=function(t){setTimeout(()=>{this._initiated?process$1.send(t):typeof this._promises[t.promiseId]<"u"&&workerWaitInit.call(this,t)},30)},workerSendToMaster=function(t,e,n,a,o){const c={channel,keyPrefix:this.keyPrefix,func:t,promiseId:e,data:{key:n,arg:a,opts:o}};this._initiated?process$1.send(c):workerWaitInit.call(this,c)},masterProcessMsg=function(t,e){if(!e||e.channel!==channel||typeof this._rateLimiters[e.keyPrefix]>"u")return!1;let n;switch(e.func){case"consume":n=this._rateLimiters[e.keyPrefix].consume(e.data.key,e.data.arg,e.data.opts);break;case"penalty":n=this._rateLimiters[e.keyPrefix].penalty(e.data.key,e.data.arg,e.data.opts);break;case"reward":n=this._rateLimiters[e.keyPrefix].reward(e.data.key,e.data.arg,e.data.opts);break;case"block":n=this._rateLimiters[e.keyPrefix].block(e.data.key,e.data.arg,e.data.opts);break;case"get":n=this._rateLimiters[e.keyPrefix].get(e.data.key,e.data.opts);break;case"delete":n=this._rateLimiters[e.keyPrefix].delete(e.data.key,e.data.opts);break;default:return!1}n&&n.then(a=>{masterSendToWorker(t,e,"resolve",a)}).catch(a=>{masterSendToWorker(t,e,"reject",a)})},workerProcessMsg=function(t){if(!t||t.channel!==channel||t.keyPrefix!==this.keyPrefix)return!1;if(this._promises[t.promiseId]){clearTimeout(this._promises[t.promiseId].timeoutId);let e;switch(t.data===null||t.data===!0||t.data===!1?e=t.data:e=new RateLimiterRes$4(t.data.remainingPoints,t.data.msBeforeNext,t.data.consumedPoints,t.data.isFirstInDuration),t.type){case"resolve":this._promises[t.promiseId].resolve(e);break;case"reject":this._promises[t.promiseId].reject(e);break;default:throw new Error(`RateLimiterCluster: no such message type '${t.type}'`)}delete this._promises[t.promiseId]}},getOpts=function(){return{points:this.points,duration:this.duration,blockDuration:this.blockDuration,execEvenly:this.execEvenly,execEvenlyMinDelayMs:this.execEvenlyMinDelayMs,keyPrefix:this.keyPrefix}},savePromise=function(t,e){const n=process$1.hrtime();let a=n[0].toString()+n[1].toString();return typeof this._promises[a]<"u"&&(a+=crypto$2.randomBytes(12).toString("base64")),this._promises[a]={resolve:t,reject:e,timeoutId:setTimeout(()=>{delete this._promises[a],e(new Error("RateLimiterCluster timeout: no answer from master in time"))},this.timeoutMs)},a};let RateLimiterClusterMaster$1=class{constructor(){if(masterInstance)return masterInstance;this._rateLimiters={},cluster.setMaxListeners(0),cluster.on("message",(e,n)=>{n&&n.channel===channel&&n.type==="init"?(typeof this._rateLimiters[n.opts.keyPrefix]>"u"&&(this._rateLimiters[n.opts.keyPrefix]=new RateLimiterMemory$1(n.opts)),e.send({channel,type:"init",keyPrefix:n.opts.keyPrefix})):masterProcessMsg.call(this,e,n)}),masterInstance=this}},RateLimiterClusterMasterPM2$1=class{constructor(e){if(masterInstance)return masterInstance;this._rateLimiters={},e.launchBus((n,a)=>{a.on("process:msg",o=>{const c=o.raw;if(c&&c.channel===channel&&c.type==="init")typeof this._rateLimiters[c.opts.keyPrefix]>"u"&&(this._rateLimiters[c.opts.keyPrefix]=new RateLimiterMemory$1(c.opts)),e.sendDataToProcessId(o.process.pm_id,{data:{},topic:channel,channel,type:"init",keyPrefix:c.opts.keyPrefix},(u,l)=>{u&&console.log(u,l)});else{const u={send:l=>{const p=l;p.topic=channel,typeof p.data>"u"&&(p.data={}),e.sendDataToProcessId(o.process.pm_id,p,(b,v)=>{b&&console.log(b,v)})}};masterProcessMsg.call(this,u,c)}})}),masterInstance=this}};class RateLimiterClusterWorker extends RateLimiterAbstract$1{get timeoutMs(){return this._timeoutMs}set timeoutMs(e){this._timeoutMs=typeof e>"u"?5e3:Math.abs(parseInt(e))}constructor(e={}){super(e),process$1.setMaxListeners(0),this.timeoutMs=e.timeoutMs,this._initiated=!1,process$1.on("message",n=>{n&&n.channel===channel&&n.type==="init"&&n.keyPrefix===this.keyPrefix?this._initiated=!0:workerProcessMsg.call(this,n)}),process$1.send({channel,type:"init",opts:getOpts.call(this)}),this._promises={}}consume(e,n=1,a={}){return new Promise((o,c)=>{const u=savePromise.call(this,o,c);workerSendToMaster.call(this,"consume",u,e,n,a)})}penalty(e,n=1,a={}){return new Promise((o,c)=>{const u=savePromise.call(this,o,c);workerSendToMaster.call(this,"penalty",u,e,n,a)})}reward(e,n=1,a={}){return new Promise((o,c)=>{const u=savePromise.call(this,o,c);workerSendToMaster.call(this,"reward",u,e,n,a)})}block(e,n,a={}){return new Promise((o,c)=>{const u=savePromise.call(this,o,c);workerSendToMaster.call(this,"block",u,e,n,a)})}get(e,n={}){return new Promise((a,o)=>{const c=savePromise.call(this,a,o);workerSendToMaster.call(this,"get",c,e,n)})}delete(e,n={}){return new Promise((a,o)=>{const c=savePromise.call(this,a,o);workerSendToMaster.call(this,"delete",c,e,n)})}}var RateLimiterCluster$1={RateLimiterClusterMaster:RateLimiterClusterMaster$1,RateLimiterClusterMasterPM2:RateLimiterClusterMasterPM2$1,RateLimiterCluster:RateLimiterClusterWorker};const RateLimiterStoreAbstract=RateLimiterStoreAbstract_1,RateLimiterRes$3=RateLimiterRes_1;let RateLimiterMemcache$1=class extends RateLimiterStoreAbstract{constructor(e){super(e),this.client=e.storeClient}_getRateLimiterRes(e,n,a){const o=new RateLimiterRes$3;return o.consumedPoints=parseInt(a.consumedPoints),o.isFirstInDuration=a.consumedPoints===n,o.remainingPoints=Math.max(this.points-o.consumedPoints,0),o.msBeforeNext=a.msBeforeNext,o}_upsert(e,n,a,o=!1,c={}){return new Promise((u,l)=>{const p=Date.now(),b=Math.floor(a/1e3);o?this.client.set(e,n,b,v=>{v?l(v):this.client.set(`${e}_expire`,b>0?p+b*1e3:-1,b,()=>{const x={consumedPoints:n,msBeforeNext:b>0?b*1e3:-1};u(x)})}):this.client.incr(e,n,(v,x)=>{v||x===!1?this.client.add(e,n,b,(_,E)=>{if(_||!E)if(typeof c.attemptNumber>"u"||c.attemptNumber<3){const $=Object.assign({},c);$.attemptNumber=$.attemptNumber?$.attemptNumber+1:1,this._upsert(e,n,a,o,$).then(S=>u(S)).catch(S=>l(S))}else l(new Error("Can not add key"));else this.client.add(`${e}_expire`,b>0?p+b*1e3:-1,b,()=>{const $={consumedPoints:n,msBeforeNext:b>0?b*1e3:-1};u($)})}):this.client.get(`${e}_expire`,(_,E)=>{if(_)l(_);else{const $=E===!1?0:E,S={consumedPoints:x,msBeforeNext:$>=0?Math.max($-p,0):-1};u(S)}})})})}_get(e){return new Promise((n,a)=>{const o=Date.now();this.client.get(e,(c,u)=>{u?this.client.get(`${e}_expire`,(l,p)=>{if(l)a(l);else{const b=p===!1?0:p,v={consumedPoints:u,msBeforeNext:b>=0?Math.max(b-o,0):-1};n(v)}}):n(null)})})}_delete(e){return new Promise((n,a)=>{this.client.del(e,(o,c)=>{o?a(o):c===!1?n(c):this.client.del(`${e}_expire`,u=>{u?a(u):n(c)})})})}};var RateLimiterMemcache_1=RateLimiterMemcache$1;const RateLimiterRes$2=RateLimiterRes_1;var RLWrapperBlackAndWhite_1=class{constructor(e={}){this.limiter=e.limiter,this.blackList=e.blackList,this.whiteList=e.whiteList,this.isBlackListed=e.isBlackListed,this.isWhiteListed=e.isWhiteListed,this.runActionAnyway=e.runActionAnyway}get limiter(){return this._limiter}set limiter(e){if(typeof e>"u")throw new Error("limiter is not set");this._limiter=e}get runActionAnyway(){return this._runActionAnyway}set runActionAnyway(e){this._runActionAnyway=typeof e>"u"?!1:e}get blackList(){return this._blackList}set blackList(e){this._blackList=Array.isArray(e)?e:[]}get isBlackListed(){return this._isBlackListed}set isBlackListed(e){if(typeof e>"u"&&(e=()=>!1),typeof e!="function")throw new Error("isBlackListed must be function");this._isBlackListed=e}get whiteList(){return this._whiteList}set whiteList(e){this._whiteList=Array.isArray(e)?e:[]}get isWhiteListed(){return this._isWhiteListed}set isWhiteListed(e){if(typeof e>"u"&&(e=()=>!1),typeof e!="function")throw new Error("isWhiteListed must be function");this._isWhiteListed=e}isBlackListedSomewhere(e){return this.blackList.indexOf(e)>=0||this.isBlackListed(e)}isWhiteListedSomewhere(e){return this.whiteList.indexOf(e)>=0||this.isWhiteListed(e)}getBlackRes(){return new RateLimiterRes$2(0,Number.MAX_SAFE_INTEGER,0,!1)}getWhiteRes(){return new RateLimiterRes$2(Number.MAX_SAFE_INTEGER,0,0,!1)}rejectBlack(){return Promise.reject(this.getBlackRes())}resolveBlack(){return Promise.resolve(this.getBlackRes())}resolveWhite(){return Promise.resolve(this.getWhiteRes())}consume(e,n=1){let a;return this.isWhiteListedSomewhere(e)?a=this.resolveWhite():this.isBlackListedSomewhere(e)&&(a=this.rejectBlack()),typeof a>"u"?this.limiter.consume(e,n):(this.runActionAnyway&&this.limiter.consume(e,n).catch(()=>{}),a)}block(e,n){let a;return this.isWhiteListedSomewhere(e)?a=this.resolveWhite():this.isBlackListedSomewhere(e)&&(a=this.resolveBlack()),typeof a>"u"?this.limiter.block(e,n):(this.runActionAnyway&&this.limiter.block(e,n).catch(()=>{}),a)}penalty(e,n){let a;return this.isWhiteListedSomewhere(e)?a=this.resolveWhite():this.isBlackListedSomewhere(e)&&(a=this.resolveBlack()),typeof a>"u"?this.limiter.penalty(e,n):(this.runActionAnyway&&this.limiter.penalty(e,n).catch(()=>{}),a)}reward(e,n){let a;return this.isWhiteListedSomewhere(e)?a=this.resolveWhite():this.isBlackListedSomewhere(e)&&(a=this.resolveBlack()),typeof a>"u"?this.limiter.reward(e,n):(this.runActionAnyway&&this.limiter.reward(e,n).catch(()=>{}),a)}get(e){let n;return this.isWhiteListedSomewhere(e)?n=this.resolveWhite():this.isBlackListedSomewhere(e)&&(n=this.resolveBlack()),typeof n>"u"||this.runActionAnyway?this.limiter.get(e):n}delete(e){return this.limiter.delete(e)}};const RateLimiterAbstract=RateLimiterAbstract_1;var RateLimiterUnion_1=class{constructor(...e){if(e.length<1)throw new Error("RateLimiterUnion: at least one limiter have to be passed");e.forEach(n=>{if(!(n instanceof RateLimiterAbstract))throw new Error("RateLimiterUnion: all limiters have to be instance of RateLimiterAbstract")}),this._limiters=e}consume(e,n=1){return new Promise((a,o)=>{const c=[];this._limiters.forEach(u=>{c.push(u.consume(e,n).catch(l=>({rejected:!0,rej:l})))}),Promise.all(c).then(u=>{const l={};let p=!1;u.forEach(b=>{b.rejected===!0&&(p=!0)});for(let b=0;b<u.length;b++)p&&u[b].rejected===!0?l[this._limiters[b].keyPrefix]=u[b].rej:p||(l[this._limiters[b].keyPrefix]=u[b]);p?o(l):a(l)})})}},RateLimiterQueueError_1=class extends Error{constructor(e,n){super(),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="CustomError",this.message=e,n&&(this.extra=n)}};const RateLimiterQueueError=RateLimiterQueueError_1,MAX_QUEUE_SIZE=4294967295,KEY_DEFAULT="limiter";var RateLimiterQueue_1=class{constructor(e,n={maxQueueSize:MAX_QUEUE_SIZE}){this._queueLimiters={KEY_DEFAULT:new RateLimiterQueueInternal(e,n)},this._limiterFlexible=e,this._maxQueueSize=n.maxQueueSize}getTokensRemaining(e=KEY_DEFAULT){return this._queueLimiters[e]?this._queueLimiters[e].getTokensRemaining():Promise.resolve(this._limiterFlexible.points)}removeTokens(e,n=KEY_DEFAULT){return this._queueLimiters[n]||(this._queueLimiters[n]=new RateLimiterQueueInternal(this._limiterFlexible,{key:n,maxQueueSize:this._maxQueueSize})),this._queueLimiters[n].removeTokens(e)}};class RateLimiterQueueInternal{constructor(e,n={maxQueueSize:MAX_QUEUE_SIZE,key:KEY_DEFAULT}){this._key=n.key,this._waitTimeout=null,this._queue=[],this._limiterFlexible=e,this._maxQueueSize=n.maxQueueSize}getTokensRemaining(){return this._limiterFlexible.get(this._key).then(e=>e!==null?e.remainingPoints:this._limiterFlexible.points)}removeTokens(e){const n=this;return new Promise((a,o)=>{if(e>n._limiterFlexible.points){o(new RateLimiterQueueError(`Requested tokens ${e} exceeds maximum ${n._limiterFlexible.points} tokens per interval`));return}n._queue.length>0?n._queueRequest.call(n,a,o,e):n._limiterFlexible.consume(n._key,e).then(c=>{a(c.remainingPoints)}).catch(c=>{c instanceof Error?o(c):(n._queueRequest.call(n,a,o,e),n._waitTimeout===null&&(n._waitTimeout=setTimeout(n._processFIFO.bind(n),c.msBeforeNext)))})})}_queueRequest(e,n,a){const o=this;o._queue.length<o._maxQueueSize?o._queue.push({resolve:e,reject:n,tokens:a}):n(new RateLimiterQueueError(`Number of requests reached it's maximum ${o._maxQueueSize}`))}_processFIFO(){const e=this;if(e._waitTimeout!==null&&(clearTimeout(e._waitTimeout),e._waitTimeout=null),e._queue.length===0)return;const n=e._queue.shift();e._limiterFlexible.consume(e._key,n.tokens).then(a=>{n.resolve(a.remainingPoints),e._processFIFO.call(e)}).catch(a=>{a instanceof Error?(n.reject(a),e._processFIFO.call(e)):(e._queue.unshift(n),e._waitTimeout===null&&(e._waitTimeout=setTimeout(e._processFIFO.bind(e),a.msBeforeNext)))})}}const RateLimiterRes$1=RateLimiterRes_1;var BurstyRateLimiter_1=class{constructor(e,n){this._rateLimiter=e,this._burstLimiter=n}_combineRes(e,n){return new RateLimiterRes$1(e.remainingPoints,Math.min(e.msBeforeNext,n.msBeforeNext),e.consumedPoints,e.isFirstInDuration)}consume(e,n=1,a={}){return this._rateLimiter.consume(e,n,a).catch(o=>o instanceof RateLimiterRes$1?this._burstLimiter.consume(e,n,a).then(c=>Promise.resolve(this._combineRes(o,c))).catch(c=>c instanceof RateLimiterRes$1?Promise.reject(this._combineRes(o,c)):Promise.reject(c)):Promise.reject(o))}get(e){return Promise.all([this._rateLimiter.get(e),this._burstLimiter.get(e)]).then(([n,a])=>this._combineRes(n,a))}get points(){return this._rateLimiter.points}};const RateLimiterRedis=RateLimiterRedis_1,RateLimiterMongo=RateLimiterMongo_1,RateLimiterMySQL=RateLimiterMySQL_1,RateLimiterPostgres=RateLimiterPostgres_1,{RateLimiterClusterMaster,RateLimiterClusterMasterPM2,RateLimiterCluster}=RateLimiterCluster$1,RateLimiterMemory=RateLimiterMemory_1,RateLimiterMemcache=RateLimiterMemcache_1,RLWrapperBlackAndWhite=RLWrapperBlackAndWhite_1,RateLimiterUnion=RateLimiterUnion_1,RateLimiterQueue=RateLimiterQueue_1,BurstyRateLimiter=BurstyRateLimiter_1,RateLimiterRes=RateLimiterRes_1;var rateLimiterFlexible={RateLimiterRedis,RateLimiterMongo,RateLimiterMySQL,RateLimiterPostgres,RateLimiterMemory,RateLimiterMemcache,RateLimiterClusterMaster,RateLimiterClusterMasterPM2,RateLimiterCluster,RLWrapperBlackAndWhite,RateLimiterUnion,RateLimiterQueue,BurstyRateLimiter,RateLimiterRes};let AbortError$1=class extends Error{constructor(e,n){super(e??"The operation was aborted"),this.type="aborted",this.code=n??"ABORT_ERR"}};function abortableSource(t,e,n){const a=n??{},o=getIterator(t);async function*c(){let u;const l=()=>{u?.()};for(e.addEventListener("abort",l);;){let p;try{if(e.aborted){const{abortMessage:v,abortCode:x}=a;throw new AbortError$1(v,x)}const b=new Promise((v,x)=>{u=()=>{const{abortMessage:_,abortCode:E}=a;x(new AbortError$1(_,E))}});p=await Promise.race([b,o.next()]),u=null}catch(b){e.removeEventListener("abort",l);const v=b.type==="aborted"&&e.aborted;if(v&&a.onAbort!=null&&a.onAbort(t),typeof o.return=="function")try{const x=o.return();x instanceof Promise&&x.catch(_=>{a.onReturnError!=null&&a.onReturnError(_)})}catch(x){a.onReturnError!=null&&a.onReturnError(x)}if(v&&a.returnOnAbort===!0)return;throw b}if(p.done===!0)break;yield p.value}e.removeEventListener("abort",l)}return c()}function handshake(t){const e=pushable(),n=reader$1(t.source),a=pDefer$1();let o;const c=t.sink(async function*(){yield*e,yield*await a.promise}());return c.catch(l=>{o=l}),{reader:n,writer:e,stream:{sink:async l=>{if(o!=null){await Promise.reject(o);return}a.resolve(l),await c},source:n},rest:()=>e.end(),write:e.push,read:async()=>{const l=await n.next();if(l.value!=null)return l.value}}}var Netmask_1;(function(){var t,e,n,a,o,c,u,l;l=function(p){var b,v,x,_;return b=(p&255<<24)>>>24,v=(p&255<<16)>>>16,x=(p&65280)>>>8,_=p&255,[b,v,x,_].join(".")},u=function(p){var b,v,x,_,E,$;for(b=[],x=_=0;_<=3&&p.length!==0;x=++_){if(x>0){if(p[0]!==".")throw new Error("Invalid IP");p=p.substring(1)}$=e(p),E=$[0],v=$[1],p=p.substring(v),b.push(E)}if(p.length!==0)throw new Error("Invalid IP");switch(b.length){case 1:if(b[0]>4294967295)throw new Error("Invalid IP");return b[0]>>>0;case 2:if(b[0]>255||b[1]>16777215)throw new Error("Invalid IP");return(b[0]<<24|b[1])>>>0;case 3:if(b[0]>255||b[1]>255||b[2]>65535)throw new Error("Invalid IP");return(b[0]<<24|b[1]<<16|b[2])>>>0;case 4:if(b[0]>255||b[1]>255||b[2]>255||b[3]>255)throw new Error("Invalid IP");return(b[0]<<24|b[1]<<16|b[2]<<8|b[3])>>>0;default:throw new Error("Invalid IP")}},n=function(p){return p.charCodeAt(0)},a=n("0"),c=n("a"),o=n("A"),e=function(p){var b,v,x,_,E;for(_=0,b=10,v="9",x=0,p.length>1&&p[x]==="0"&&(p[x+1]==="x"||p[x+1]==="X"?(x+=2,b=16):"0"<=p[x+1]&&p[x+1]<="9"&&(x++,b=8,v="7")),E=x;x<p.length;){if("0"<=p[x]&&p[x]<=v)_=_*b+(n(p[x])-a)>>>0;else if(b===16)if("a"<=p[x]&&p[x]<="f")_=_*b+(10+n(p[x])-c)>>>0;else if("A"<=p[x]&&p[x]<="F")_=_*b+(10+n(p[x])-o)>>>0;else break;else break;if(_>4294967295)throw new Error("too large");x++}if(x===E)throw new Error("empty octet");return[_,x]},t=function(){function p(b,v){var x,_,E;if(typeof b!="string")throw new Error("Missing `net' parameter");if(v||(E=b.split("/",2),b=E[0],v=E[1]),v||(v=32),typeof v=="string"&&v.indexOf(".")>-1){try{this.maskLong=u(v)}catch{throw new Error("Invalid mask: "+v)}for(x=_=32;_>=0;x=--_)if(this.maskLong===4294967295<<32-x>>>0){this.bitmask=x;break}}else if(v||v===0)this.bitmask=parseInt(v,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(u(b)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+b)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+v);this.size=Math.pow(2,32-this.bitmask),this.base=l(this.netLong),this.mask=l(this.maskLong),this.hostmask=l(~this.maskLong),this.first=this.bitmask<=30?l(this.netLong+1):this.base,this.last=this.bitmask<=30?l(this.netLong+this.size-2):l(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?l(this.netLong+this.size-1):void 0}return p.prototype.contains=function(b){return typeof b=="string"&&(b.indexOf("/")>0||b.split(".").length!==4)&&(b=new p(b)),b instanceof p?this.contains(b.base)&&this.contains(b.broadcast||b.last):(u(b)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},p.prototype.next=function(b){return b==null&&(b=1),new p(l(this.netLong+this.size*b),this.mask)},p.prototype.forEach=function(b){var v,x,_;for(_=u(this.first),x=u(this.last),v=0;_<=x;)b(l(_),_,v),v++,_++},p.prototype.toString=function(){return this.base+"/"+this.bitmask},p}(),Netmask_1=t}).call(commonjsGlobal);const word="[a-fA-F\\d:]",boundry=t=>t&&t.includeBoundaries?`(?:(?<=\\s|^)(?=${word})|(?<=${word})(?=\\s|$))`:"",v4="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v6segment="[a-fA-F\\d]{1,4}",v6=`
(?:
(?:${v6segment}:){7}(?:${v6segment}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${v6segment}:){6}(?:${v4}|:${v6segment}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${v6segment}:){5}(?::${v4}|(?::${v6segment}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${v6segment}:){4}(?:(?::${v6segment}){0,1}:${v4}|(?::${v6segment}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${v6segment}:){3}(?:(?::${v6segment}){0,2}:${v4}|(?::${v6segment}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${v6segment}:){2}(?:(?::${v6segment}){0,3}:${v4}|(?::${v6segment}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${v6segment}:){1}(?:(?::${v6segment}){0,4}:${v4}|(?::${v6segment}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${v6segment}){0,5}:${v4}|(?::${v6segment}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),v46Exact=new RegExp(`(?:^${v4}$)|(?:^${v6}$)`),v4exact=new RegExp(`^${v4}$`),v6exact=new RegExp(`^${v6}$`),ipRegex=t=>t&&t.exact?v46Exact:new RegExp(`(?:${boundry(t)}${v4}${boundry(t)})|(?:${boundry(t)}${v6}${boundry(t)})`,"g");ipRegex.v4=t=>t&&t.exact?v4exact:new RegExp(`${boundry(t)}${v4}${boundry(t)}`,"g");ipRegex.v6=t=>t&&t.exact?v6exact:new RegExp(`${boundry(t)}${v6}${boundry(t)}`,"g");var ipaddr$1={exports:{}};(function(t){(function(e){const n="(0?\\d+|0x[a-f0-9]+)",a={fourOctet:new RegExp(`^${n}\\.${n}\\.${n}\\.${n}$`,"i"),threeOctet:new RegExp(`^${n}\\.${n}\\.${n}$`,"i"),twoOctet:new RegExp(`^${n}\\.${n}$`,"i"),longValue:new RegExp(`^${n}$`,"i")},o=new RegExp("^0[0-7]+$","i"),c=new RegExp("^0x[a-f0-9]+$","i"),u="%[0-9a-z]{1,}",l="(?:[0-9a-f]+::?)+",p={zoneIndex:new RegExp(u,"i"),native:new RegExp(`^(::)?(${l})?([0-9a-f]+)?(::)?(${u})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${n}\\.${n}\\.${n}\\.${n}(${u})?)$`,"i"),transitional:new RegExp(`^((?:${l})|(?:::)(?:${l})?)${n}\\.${n}\\.${n}\\.${n}(${u})?$`,"i")};function b($,S){if($.indexOf("::")!==$.lastIndexOf("::"))return null;let A=0,I=-1,O=($.match(p.zoneIndex)||[])[0],F,U;for(O&&(O=O.substring(1),$=$.replace(/%.+$/,""));(I=$.indexOf(":",I+1))>=0;)A++;if($.substr(0,2)==="::"&&A--,$.substr(-2,2)==="::"&&A--,A>S)return null;for(U=S-A,F=":";U--;)F+="0:";return $=$.replace("::",F),$[0]===":"&&($=$.slice(1)),$[$.length-1]===":"&&($=$.slice(0,-1)),S=function(){const G=$.split(":"),J=[];for(let k=0;k<G.length;k++)J.push(parseInt(G[k],16));return J}(),{parts:S,zoneId:O}}function v($,S,A,I){if($.length!==S.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let O=0,F;for(;I>0;){if(F=A-I,F<0&&(F=0),$[O]>>F!==S[O]>>F)return!1;I-=A,O+=1}return!0}function x($){if(c.test($))return parseInt($,16);if($[0]==="0"&&!isNaN(parseInt($[1],10))){if(o.test($))return parseInt($,8);throw new Error(`ipaddr: cannot parse ${$} as octal`)}return parseInt($,10)}function _($,S){for(;$.length<S;)$=`0${$}`;return $}const E={};E.IPv4=function(){function $(S){if(S.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let A,I;for(A=0;A<S.length;A++)if(I=S[A],!(0<=I&&I<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=S}return $.prototype.SpecialRanges={unspecified:[[new $([0,0,0,0]),8]],broadcast:[[new $([255,255,255,255]),32]],multicast:[[new $([224,0,0,0]),4]],linkLocal:[[new $([169,254,0,0]),16]],loopback:[[new $([127,0,0,0]),8]],carrierGradeNat:[[new $([100,64,0,0]),10]],private:[[new $([10,0,0,0]),8],[new $([172,16,0,0]),12],[new $([192,168,0,0]),16]],reserved:[[new $([192,0,0,0]),24],[new $([192,0,2,0]),24],[new $([192,88,99,0]),24],[new $([198,51,100,0]),24],[new $([203,0,113,0]),24],[new $([240,0,0,0]),4]]},$.prototype.kind=function(){return"ipv4"},$.prototype.match=function(S,A){let I;if(A===void 0&&(I=S,S=I[0],A=I[1]),S.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return v(this.octets,S.octets,8,A)},$.prototype.prefixLengthFromSubnetMask=function(){let S=0,A=!1;const I={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let O,F,U;for(O=3;O>=0;O-=1)if(F=this.octets[O],F in I){if(U=I[F],A&&U!==0)return null;U!==8&&(A=!0),S+=U}else return null;return 32-S},$.prototype.range=function(){return E.subnetMatch(this,this.SpecialRanges)},$.prototype.toByteArray=function(){return this.octets.slice(0)},$.prototype.toIPv4MappedAddress=function(){return E.IPv6.parse(`::ffff:${this.toString()}`)},$.prototype.toNormalizedString=function(){return this.toString()},$.prototype.toString=function(){return this.octets.join(".")},$}(),E.IPv4.broadcastAddressFromCIDR=function($){try{const S=this.parseCIDR($),A=S[0].toByteArray(),I=this.subnetMaskFromPrefixLength(S[1]).toByteArray(),O=[];let F=0;for(;F<4;)O.push(parseInt(A[F],10)|parseInt(I[F],10)^255),F++;return new this(O)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},E.IPv4.isIPv4=function($){return this.parser($)!==null},E.IPv4.isValid=function($){try{return new this(this.parser($)),!0}catch{return!1}},E.IPv4.isValidFourPartDecimal=function($){return!!(E.IPv4.isValid($)&&$.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},E.IPv4.networkAddressFromCIDR=function($){let S,A,I,O,F;try{for(S=this.parseCIDR($),I=S[0].toByteArray(),F=this.subnetMaskFromPrefixLength(S[1]).toByteArray(),O=[],A=0;A<4;)O.push(parseInt(I[A],10)&parseInt(F[A],10)),A++;return new this(O)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},E.IPv4.parse=function($){const S=this.parser($);if(S===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(S)},E.IPv4.parseCIDR=function($){let S;if(S=$.match(/^(.+)\/(\d+)$/)){const A=parseInt(S[2]);if(A>=0&&A<=32){const I=[this.parse(S[1]),A];return Object.defineProperty(I,"toString",{value:function(){return this.join("/")}}),I}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},E.IPv4.parser=function($){let S,A,I;if(S=$.match(a.fourOctet))return function(){const O=S.slice(1,6),F=[];for(let U=0;U<O.length;U++)A=O[U],F.push(x(A));return F}();if(S=$.match(a.longValue)){if(I=x(S[1]),I>4294967295||I<0)throw new Error("ipaddr: address outside defined range");return function(){const O=[];let F;for(F=0;F<=24;F+=8)O.push(I>>F&255);return O}().reverse()}else return(S=$.match(a.twoOctet))?function(){const O=S.slice(1,4),F=[];if(I=x(O[1]),I>16777215||I<0)throw new Error("ipaddr: address outside defined range");return F.push(x(O[0])),F.push(I>>16&255),F.push(I>>8&255),F.push(I&255),F}():(S=$.match(a.threeOctet))?function(){const O=S.slice(1,5),F=[];if(I=x(O[2]),I>65535||I<0)throw new Error("ipaddr: address outside defined range");return F.push(x(O[0])),F.push(x(O[1])),F.push(I>>8&255),F.push(I&255),F}():null},E.IPv4.subnetMaskFromPrefixLength=function($){if($=parseInt($),$<0||$>32)throw new Error("ipaddr: invalid IPv4 prefix length");const S=[0,0,0,0];let A=0;const I=Math.floor($/8);for(;A<I;)S[A]=255,A++;return I<4&&(S[I]=Math.pow(2,$%8)-1<<8-$%8),new this(S)},E.IPv6=function(){function $(S,A){let I,O;if(S.length===16)for(this.parts=[],I=0;I<=14;I+=2)this.parts.push(S[I]<<8|S[I+1]);else if(S.length===8)this.parts=S;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(I=0;I<this.parts.length;I++)if(O=this.parts[I],!(0<=O&&O<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");A&&(this.zoneId=A)}return $.prototype.SpecialRanges={unspecified:[new $([0,0,0,0,0,0,0,0]),128],linkLocal:[new $([65152,0,0,0,0,0,0,0]),10],multicast:[new $([65280,0,0,0,0,0,0,0]),8],loopback:[new $([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new $([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new $([0,0,0,0,0,65535,0,0]),96],rfc6145:[new $([0,0,0,0,65535,0,0,0]),96],rfc6052:[new $([100,65435,0,0,0,0,0,0]),96],"6to4":[new $([8194,0,0,0,0,0,0,0]),16],teredo:[new $([8193,0,0,0,0,0,0,0]),32],reserved:[[new $([8193,3512,0,0,0,0,0,0]),32]]},$.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},$.prototype.kind=function(){return"ipv6"},$.prototype.match=function(S,A){let I;if(A===void 0&&(I=S,S=I[0],A=I[1]),S.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return v(this.parts,S.parts,16,A)},$.prototype.prefixLengthFromSubnetMask=function(){let S=0,A=!1;const I={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let O,F;for(let U=7;U>=0;U-=1)if(O=this.parts[U],O in I){if(F=I[O],A&&F!==0)return null;F!==16&&(A=!0),S+=F}else return null;return 128-S},$.prototype.range=function(){return E.subnetMatch(this,this.SpecialRanges)},$.prototype.toByteArray=function(){let S;const A=[],I=this.parts;for(let O=0;O<I.length;O++)S=I[O],A.push(S>>8),A.push(S&255);return A},$.prototype.toFixedLengthString=function(){const S=function(){const I=[];for(let O=0;O<this.parts.length;O++)I.push(_(this.parts[O].toString(16),4));return I}.call(this).join(":");let A="";return this.zoneId&&(A=`%${this.zoneId}`),S+A},$.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const S=this.parts.slice(-2),A=S[0],I=S[1];return new E.IPv4([A>>8,A&255,I>>8,I&255])},$.prototype.toNormalizedString=function(){const S=function(){const I=[];for(let O=0;O<this.parts.length;O++)I.push(this.parts[O].toString(16));return I}.call(this).join(":");let A="";return this.zoneId&&(A=`%${this.zoneId}`),S+A},$.prototype.toRFC5952String=function(){const S=/((^|:)(0(:|$)){2,})/g,A=this.toNormalizedString();let I=0,O=-1,F;for(;F=S.exec(A);)F[0].length>O&&(I=F.index,O=F[0].length);return O<0?A:`${A.substring(0,I)}::${A.substring(I+O)}`},$.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},$}(),E.IPv6.broadcastAddressFromCIDR=function($){try{const S=this.parseCIDR($),A=S[0].toByteArray(),I=this.subnetMaskFromPrefixLength(S[1]).toByteArray(),O=[];let F=0;for(;F<16;)O.push(parseInt(A[F],10)|parseInt(I[F],10)^255),F++;return new this(O)}catch(S){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${S})`)}},E.IPv6.isIPv6=function($){return this.parser($)!==null},E.IPv6.isValid=function($){if(typeof $=="string"&&$.indexOf(":")===-1)return!1;try{const S=this.parser($);return new this(S.parts,S.zoneId),!0}catch{return!1}},E.IPv6.networkAddressFromCIDR=function($){let S,A,I,O,F;try{for(S=this.parseCIDR($),I=S[0].toByteArray(),F=this.subnetMaskFromPrefixLength(S[1]).toByteArray(),O=[],A=0;A<16;)O.push(parseInt(I[A],10)&parseInt(F[A],10)),A++;return new this(O)}catch(U){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${U})`)}},E.IPv6.parse=function($){const S=this.parser($);if(S.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(S.parts,S.zoneId)},E.IPv6.parseCIDR=function($){let S,A,I;if((A=$.match(/^(.+)\/(\d+)$/))&&(S=parseInt(A[2]),S>=0&&S<=128))return I=[this.parse(A[1]),S],Object.defineProperty(I,"toString",{value:function(){return this.join("/")}}),I;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},E.IPv6.parser=function($){let S,A,I,O,F,U;if(I=$.match(p.deprecatedTransitional))return this.parser(`::ffff:${I[1]}`);if(p.native.test($))return b($,8);if((I=$.match(p.transitional))&&(U=I[6]||"",S=b(I[1].slice(0,-1)+U,6),S.parts)){for(F=[parseInt(I[2]),parseInt(I[3]),parseInt(I[4]),parseInt(I[5])],A=0;A<F.length;A++)if(O=F[A],!(0<=O&&O<=255))return null;return S.parts.push(F[0]<<8|F[1]),S.parts.push(F[2]<<8|F[3]),{parts:S.parts,zoneId:S.zoneId}}return null},E.IPv6.subnetMaskFromPrefixLength=function($){if($=parseInt($),$<0||$>128)throw new Error("ipaddr: invalid IPv6 prefix length");const S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let A=0;const I=Math.floor($/8);for(;A<I;)S[A]=255,A++;return I<16&&(S[I]=Math.pow(2,$%8)-1<<8-$%8),new this(S)},E.fromByteArray=function($){const S=$.length;if(S===4)return new E.IPv4($);if(S===16)return new E.IPv6($);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},E.isValid=function($){return E.IPv6.isValid($)||E.IPv4.isValid($)},E.parse=function($){if(E.IPv6.isValid($))return E.IPv6.parse($);if(E.IPv4.isValid($))return E.IPv4.parse($);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},E.parseCIDR=function($){try{return E.IPv6.parseCIDR($)}catch{try{return E.IPv4.parseCIDR($)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},E.process=function($){const S=this.parse($);return S.kind()==="ipv6"&&S.isIPv4MappedAddress()?S.toIPv4Address():S},E.subnetMatch=function($,S,A){let I,O,F,U;A==null&&(A="unicast");for(O in S)if(Object.prototype.hasOwnProperty.call(S,O)){for(F=S[O],F[0]&&!(F[0]instanceof Array)&&(F=[F]),I=0;I<F.length;I++)if(U=F[I],$.kind()===U[0].kind()&&$.match.apply($,U))return O}return A},t.exports?t.exports=E:e.ipaddr=E})(commonjsGlobal)})(ipaddr$1);var ipaddrExports=ipaddr$1.exports;const ipaddr=getDefaultExportFromCjs(ipaddrExports),{isValid:is_valid,parse:parse$3}=ipaddr,PRIVATE_IP_RANGES=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],NETMASK_RANGES=PRIVATE_IP_RANGES.map(t=>new Netmask_1(t));function ipv4_check(t){for(let e of NETMASK_RANGES)if(e.contains(t))return!0;return!1}function ipv6_check(t){return/^::$/.test(t)||/^::1$/.test(t)||/^::f{4}:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^::f{4}:0.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(t)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(t)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(t)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(t)||/^ff([0-9a-fA-F]{2,2}):/i.test(t)}const is_ip_private=t=>{if(is_valid(t)){const e=parse$3(t);if(e.kind()==="ipv4")return ipv4_check(e.toNormalizedString());if(e.kind()==="ipv6")return ipv6_check(t)}else if(isIP(t)&&ipRegex.v6().test(t))return ipv6_check(t)};function isHighSurrogate$1(t){return t>=55296&&t<=56319}function isLowSurrogate$1(t){return t>=56320&&t<=57343}var truncate$2=function t(e,n,a){if(typeof n!="string")throw new Error("Input must be string");for(var o=n.length,c=0,u,l,p=0;p<o;p+=1){if(u=n.charCodeAt(p),l=n[p],isHighSurrogate$1(u)&&isLowSurrogate$1(n.charCodeAt(p+1))&&(p+=1,l+=n[p]),c+=e(l),c===a)return n.slice(0,p+1);if(c>a)return n.slice(0,p-l.length+1)}return n};function isHighSurrogate(t){return t>=55296&&t<=56319}function isLowSurrogate(t){return t>=56320&&t<=57343}var browser$3=function t(e){if(typeof e!="string")throw new Error("Input must be string");for(var n=e.length,a=0,o=null,c=null,u=0;u<n;u++)o=e.charCodeAt(u),isLowSurrogate(o)?c!=null&&isHighSurrogate(c)?a+=1:a+=3:o<=127?a+=1:o>=128&&o<=2047?a+=2:o>=2048&&o<=65535&&(a+=3),c=o;return a},truncate$1=truncate$2,getLength$1=browser$3,browser$2=truncate$1.bind(null,getLength$1),truncate=browser$2,illegalRe=/[\/\?<>\\:\*\|"]/g,controlRe=/[\x00-\x1f\x80-\x9f]/g,reservedRe=/^\.+$/,windowsReservedRe=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,windowsTrailingRe=/[\. ]+$/;function sanitize(t,e){if(typeof t!="string")throw new Error("Input must be string");var n=t.replace(illegalRe,e).replace(controlRe,e).replace(reservedRe,e).replace(windowsReservedRe,e).replace(windowsTrailingRe,e);return truncate(n,255)}var sanitizeFilename=function(t,e){var n=e&&e.replacement||"",a=sanitize(t,n);return n===""?a:sanitize(a,"")};const sanitize$1=getDefaultExportFromCjs(sanitizeFilename);var forge$5=forge$s,asn1$2=forge$5.asn1,p7v=forge$5.pkcs7asn1=forge$5.pkcs7asn1||{};forge$5.pkcs7=forge$5.pkcs7||{};forge$5.pkcs7.asn1=p7v;var contentInfoValidator={name:"ContentInfo",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:asn1$2.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};p7v.contentInfoValidator=contentInfoValidator;var encryptedContentInfoValidator={name:"EncryptedContentInfo",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:asn1$2.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:asn1$2.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};p7v.envelopedDataValidator={name:"EnvelopedData",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(encryptedContentInfoValidator)};p7v.encryptedDataValidator={name:"EncryptedData",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.INTEGER,constructed:!1,capture:"version"}].concat(encryptedContentInfoValidator)};var signerValidator={name:"SignerInfo",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:asn1$2.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:asn1$2.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:asn1$2.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};p7v.signedDataValidator={name:"SignedData",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},contentInfoValidator,{name:"SignedData.Certificates",tagClass:asn1$2.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:asn1$2.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SET,capture:"signerInfos",optional:!0,value:[signerValidator]}]};p7v.recipientInfoValidator={name:"RecipientInfo",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:asn1$2.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:asn1$2.Class.UNIVERSAL,type:asn1$2.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var forge$4=forge$s;forge$4.mgf=forge$4.mgf||{};var mgf1=forge$4.mgf.mgf1=forge$4.mgf1=forge$4.mgf1||{};mgf1.create=function(t){var e={generate:function(n,a){for(var o=new forge$4.util.ByteBuffer,c=Math.ceil(a/t.digestLength),u=0;u<c;u++){var l=new forge$4.util.ByteBuffer;l.putInt32(u),t.start(),t.update(n+l.getBytes()),o.putBuffer(t.digest())}return o.truncate(o.length()-a),o.getBytes()}};return e};var forge$3=forge$s;forge$3.mgf=forge$3.mgf||{};forge$3.mgf.mgf1=forge$3.mgf1;var forge$2=forge$s,pss=forge$2.pss=forge$2.pss||{};pss.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,n=t.mgf,a=e.digestLength,o=t.salt||null;typeof o=="string"&&(o=forge$2.util.createBuffer(o));var c;if("saltLength"in t)c=t.saltLength;else if(o!==null)c=o.length();else throw new Error("Salt length not specified or specific salt not given.");if(o!==null&&o.length()!==c)throw new Error("Given salt length does not match length of given salt.");var u=t.prng||forge$2.random,l={};return l.encode=function(p,b){var v,x=b-1,_=Math.ceil(x/8),E=p.digest().getBytes();if(_<a+c+2)throw new Error("Message is too long to encrypt.");var $;o===null?$=u.getBytesSync(c):$=o.bytes();var S=new forge$2.util.ByteBuffer;S.fillWithByte(0,8),S.putBytes(E),S.putBytes($),e.start(),e.update(S.getBytes());var A=e.digest().getBytes(),I=new forge$2.util.ByteBuffer;I.fillWithByte(0,_-c-a-2),I.putByte(1),I.putBytes($);var O=I.getBytes(),F=_-a-1,U=n.generate(A,F),G="";for(v=0;v<F;v++)G+=String.fromCharCode(O.charCodeAt(v)^U.charCodeAt(v));var J=65280>>8*_-x&255;return G=String.fromCharCode(G.charCodeAt(0)&~J)+G.substr(1),G+A+String.fromCharCode(188)},l.verify=function(p,b,v){var x,_=v-1,E=Math.ceil(_/8);if(b=b.substr(-E),E<a+c+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(b.charCodeAt(E-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var $=E-a-1,S=b.substr(0,$),A=b.substr($,a),I=65280>>8*E-_&255;if(S.charCodeAt(0)&I)throw new Error("Bits beyond keysize not zero as expected.");var O=n.generate(A,$),F="";for(x=0;x<$;x++)F+=String.fromCharCode(S.charCodeAt(x)^O.charCodeAt(x));F=String.fromCharCode(F.charCodeAt(0)&~I)+F.substr(1);var U=E-a-c-2;for(x=0;x<U;x++)if(F.charCodeAt(x)!==0)throw new Error("Leftmost octets not zero as expected");if(F.charCodeAt(U)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var G=F.substr(-c),J=new forge$2.util.ByteBuffer;J.fillWithByte(0,8),J.putBytes(p),J.putBytes(G),e.start(),e.update(J.getBytes());var k=e.digest().getBytes();return A===k},l};var forge$1=forge$s,asn1$1=forge$1.asn1,pki=forge$1.pki=forge$1.pki||{},oids=pki.oids,_shortNames={};_shortNames.CN=oids.commonName;_shortNames.commonName="CN";_shortNames.C=oids.countryName;_shortNames.countryName="C";_shortNames.L=oids.localityName;_shortNames.localityName="L";_shortNames.ST=oids.stateOrProvinceName;_shortNames.stateOrProvinceName="ST";_shortNames.O=oids.organizationName;_shortNames.organizationName="O";_shortNames.OU=oids.organizationalUnitName;_shortNames.organizationalUnitName="OU";_shortNames.E=oids.emailAddress;_shortNames.emailAddress="E";var publicKeyValidator=forge$1.pki.rsa.publicKeyValidator,x509CertificateValidator={name:"Certificate",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:asn1$1.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:asn1$1.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},publicKeyValidator,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:asn1$1.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:asn1$1.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:asn1$1.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:asn1$1.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},rsassaPssParameterValidator={name:"rsapss",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:asn1$1.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:asn1$1.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:asn1$1.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:asn1$1.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},certificationRequestInfoValidator={name:"CertificationRequestInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},publicKeyValidator,{name:"CertificationRequestInfo.attributes",tagClass:asn1$1.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SET,constructed:!0}]}]}]},certificationRequestValidator={name:"CertificationRequest",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[certificationRequestInfoValidator,{name:"CertificationRequest.signatureAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:asn1$1.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};pki.RDNAttributesAsArray=function(t,e){for(var n=[],a,o,c,u=0;u<t.value.length;++u){a=t.value[u];for(var l=0;l<a.value.length;++l)c={},o=a.value[l],c.type=asn1$1.derToOid(o.value[0].value),c.value=o.value[1].value,c.valueTagClass=o.value[1].type,c.type in oids&&(c.name=oids[c.type],c.name in _shortNames&&(c.shortName=_shortNames[c.name])),e&&(e.update(c.type),e.update(c.value)),n.push(c)}return n};pki.CRIAttributesAsArray=function(t){for(var e=[],n=0;n<t.length;++n)for(var a=t[n],o=asn1$1.derToOid(a.value[0].value),c=a.value[1].value,u=0;u<c.length;++u){var l={};if(l.type=o,l.value=c[u].value,l.valueTagClass=c[u].type,l.type in oids&&(l.name=oids[l.type],l.name in _shortNames&&(l.shortName=_shortNames[l.name])),l.type===oids.extensionRequest){l.extensions=[];for(var p=0;p<l.value.length;++p)l.extensions.push(pki.certificateExtensionFromAsn1(l.value[p]))}e.push(l)}return e};function _getAttribute(t,e){typeof e=="string"&&(e={shortName:e});for(var n=null,a,o=0;n===null&&o<t.attributes.length;++o)a=t.attributes[o],(e.type&&e.type===a.type||e.name&&e.name===a.name||e.shortName&&e.shortName===a.shortName)&&(n=a);return n}var _readSignatureParameters=function(t,e,n){var a={};if(t!==oids["RSASSA-PSS"])return a;n&&(a={hash:{algorithmOid:oids.sha1},mgf:{algorithmOid:oids.mgf1,hash:{algorithmOid:oids.sha1}},saltLength:20});var o={},c=[];if(!asn1$1.validate(e,rsassaPssParameterValidator,o,c)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=c,u}return o.hashOid!==void 0&&(a.hash=a.hash||{},a.hash.algorithmOid=asn1$1.derToOid(o.hashOid)),o.maskGenOid!==void 0&&(a.mgf=a.mgf||{},a.mgf.algorithmOid=asn1$1.derToOid(o.maskGenOid),a.mgf.hash=a.mgf.hash||{},a.mgf.hash.algorithmOid=asn1$1.derToOid(o.maskGenHashOid)),o.saltLength!==void 0&&(a.saltLength=o.saltLength.charCodeAt(0)),a},_createSignatureDigest=function(t){switch(oids[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return forge$1.md.sha1.create();case"md5WithRSAEncryption":return forge$1.md.md5.create();case"sha256WithRSAEncryption":return forge$1.md.sha256.create();case"sha384WithRSAEncryption":return forge$1.md.sha384.create();case"sha512WithRSAEncryption":return forge$1.md.sha512.create();case"RSASSA-PSS":return forge$1.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},_verifySignature=function(t){var e=t.certificate,n;switch(e.signatureOid){case oids.sha1WithRSAEncryption:case oids.sha1WithRSASignature:break;case oids["RSASSA-PSS"]:var a,o;if(a=oids[e.signatureParameters.mgf.hash.algorithmOid],a===void 0||forge$1.md[a]===void 0){var c=new Error("Unsupported MGF hash function.");throw c.oid=e.signatureParameters.mgf.hash.algorithmOid,c.name=a,c}if(o=oids[e.signatureParameters.mgf.algorithmOid],o===void 0||forge$1.mgf[o]===void 0){var c=new Error("Unsupported MGF function.");throw c.oid=e.signatureParameters.mgf.algorithmOid,c.name=o,c}if(o=forge$1.mgf[o].create(forge$1.md[a].create()),a=oids[e.signatureParameters.hash.algorithmOid],a===void 0||forge$1.md[a]===void 0){var c=new Error("Unsupported RSASSA-PSS hash function.");throw c.oid=e.signatureParameters.hash.algorithmOid,c.name=a,c}n=forge$1.pss.create(forge$1.md[a].create(),o,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,n)};pki.certificateFromPem=function(t,e,n){var a=forge$1.pem.decode(t)[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var o=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw o.headerType=a.type,o}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=asn1$1.fromDer(a.body,n);return pki.certificateFromAsn1(c,e)};pki.certificateToPem=function(t,e){var n={type:"CERTIFICATE",body:asn1$1.toDer(pki.certificateToAsn1(t)).getBytes()};return forge$1.pem.encode(n,{maxline:e})};pki.publicKeyFromPem=function(t){var e=forge$1.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var a=asn1$1.fromDer(e.body);return pki.publicKeyFromAsn1(a)};pki.publicKeyToPem=function(t,e){var n={type:"PUBLIC KEY",body:asn1$1.toDer(pki.publicKeyToAsn1(t)).getBytes()};return forge$1.pem.encode(n,{maxline:e})};pki.publicKeyToRSAPublicKeyPem=function(t,e){var n={type:"RSA PUBLIC KEY",body:asn1$1.toDer(pki.publicKeyToRSAPublicKey(t)).getBytes()};return forge$1.pem.encode(n,{maxline:e})};pki.getPublicKeyFingerprint=function(t,e){e=e||{};var n=e.md||forge$1.md.sha1.create(),a=e.type||"RSAPublicKey",o;switch(a){case"RSAPublicKey":o=asn1$1.toDer(pki.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":o=asn1$1.toDer(pki.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}n.start(),n.update(o);var c=n.digest();if(e.encoding==="hex"){var u=c.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}else{if(e.encoding==="binary")return c.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return c};pki.certificationRequestFromPem=function(t,e,n){var a=forge$1.pem.decode(t)[0];if(a.type!=="CERTIFICATE REQUEST"){var o=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw o.headerType=a.type,o}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var c=asn1$1.fromDer(a.body,n);return pki.certificationRequestFromAsn1(c,e)};pki.certificationRequestToPem=function(t,e){var n={type:"CERTIFICATE REQUEST",body:asn1$1.toDer(pki.certificationRequestToAsn1(t)).getBytes()};return forge$1.pem.encode(n,{maxline:e})};pki.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return _getAttribute(t.issuer,e)},t.issuer.addField=function(e){_fillMissingFields([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return _getAttribute(t.subject,e)},t.subject.addField=function(e){_fillMissingFields([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,n){_fillMissingFields(e),t.subject.attributes=e,delete t.subject.uniqueId,n&&(t.subject.uniqueId=n),t.subject.hash=null},t.setIssuer=function(e,n){_fillMissingFields(e),t.issuer.attributes=e,delete t.issuer.uniqueId,n&&(t.issuer.uniqueId=n),t.issuer.hash=null},t.setExtensions=function(e){for(var n=0;n<e.length;++n)_fillMissingExtensionFields(e[n],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var n=null,a,o=0;n===null&&o<t.extensions.length;++o)a=t.extensions[o],(e.id&&a.id===e.id||e.name&&a.name===e.name)&&(n=a);return n},t.sign=function(e,n){t.md=n||forge$1.md.sha1.create();var a=oids[t.md.algorithm+"WithRSAEncryption"];if(!a){var o=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw o.algorithm=t.md.algorithm,o}t.signatureOid=t.siginfo.algorithmOid=a,t.tbsCertificate=pki.getTBSCertificate(t);var c=asn1$1.toDer(t.tbsCertificate);t.md.update(c.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var n=!1;if(!t.issued(e)){var a=e.issuer,o=t.subject,c=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw c.expectedIssuer=o.attributes,c.actualIssuer=a.attributes,c}var u=e.md;if(u===null){u=_createSignatureDigest({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||pki.getTBSCertificate(e),p=asn1$1.toDer(l);u.update(p.getBytes())}return u!==null&&(n=_verifySignature({certificate:t,md:u,signature:e.signature})),n},t.isIssuer=function(e){var n=!1,a=t.issuer,o=e.subject;if(a.hash&&o.hash)n=a.hash===o.hash;else if(a.attributes.length===o.attributes.length){n=!0;for(var c,u,l=0;n&&l<a.attributes.length;++l)c=a.attributes[l],u=o.attributes[l],(c.type!==u.type||c.value!==u.value)&&(n=!1)}return n},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return pki.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=oids.subjectKeyIdentifier,n=0;n<t.extensions.length;++n){var a=t.extensions[n];if(a.id===e){var o=t.generateSubjectKeyIdentifier().getBytes();return forge$1.util.hexToBytes(a.subjectKeyIdentifier)===o}}return!1},t};pki.certificateFromAsn1=function(t,e){var n={},a=[];if(!asn1$1.validate(t,x509CertificateValidator,n,a)){var o=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw o.errors=a,o}var c=asn1$1.derToOid(n.publicKeyOid);if(c!==pki.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=pki.createCertificate();u.version=n.certVersion?n.certVersion.charCodeAt(0):0;var l=forge$1.util.createBuffer(n.certSerialNumber);u.serialNumber=l.toHex(),u.signatureOid=forge$1.asn1.derToOid(n.certSignatureOid),u.signatureParameters=_readSignatureParameters(u.signatureOid,n.certSignatureParams,!0),u.siginfo.algorithmOid=forge$1.asn1.derToOid(n.certinfoSignatureOid),u.siginfo.parameters=_readSignatureParameters(u.siginfo.algorithmOid,n.certinfoSignatureParams,!1),u.signature=n.certSignature;var p=[];if(n.certValidity1UTCTime!==void 0&&p.push(asn1$1.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==void 0&&p.push(asn1$1.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==void 0&&p.push(asn1$1.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==void 0&&p.push(asn1$1.generalizedTimeToDate(n.certValidity4GeneralizedTime)),p.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(p.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=p[0],u.validity.notAfter=p[1],u.tbsCertificate=n.tbsCertificate,e){u.md=_createSignatureDigest({signatureOid:u.signatureOid,type:"certificate"});var b=asn1$1.toDer(u.tbsCertificate);u.md.update(b.getBytes())}var v=forge$1.md.sha1.create(),x=asn1$1.toDer(n.certIssuer);v.update(x.getBytes()),u.issuer.getField=function($){return _getAttribute(u.issuer,$)},u.issuer.addField=function($){_fillMissingFields([$]),u.issuer.attributes.push($)},u.issuer.attributes=pki.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(u.issuer.uniqueId=n.certIssuerUniqueId),u.issuer.hash=v.digest().toHex();var _=forge$1.md.sha1.create(),E=asn1$1.toDer(n.certSubject);return _.update(E.getBytes()),u.subject.getField=function($){return _getAttribute(u.subject,$)},u.subject.addField=function($){_fillMissingFields([$]),u.subject.attributes.push($)},u.subject.attributes=pki.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(u.subject.uniqueId=n.certSubjectUniqueId),u.subject.hash=_.digest().toHex(),n.certExtensions?u.extensions=pki.certificateExtensionsFromAsn1(n.certExtensions):u.extensions=[],u.publicKey=pki.publicKeyFromAsn1(n.subjectPublicKeyInfo),u};pki.certificateExtensionsFromAsn1=function(t){for(var e=[],n=0;n<t.value.length;++n)for(var a=t.value[n],o=0;o<a.value.length;++o)e.push(pki.certificateExtensionFromAsn1(a.value[o]));return e};pki.certificateExtensionFromAsn1=function(t){var e={};if(e.id=asn1$1.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===asn1$1.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in oids){if(e.name=oids[e.id],e.name==="keyUsage"){var n=asn1$1.fromDer(e.value),a=0,o=0;n.value.length>1&&(a=n.value.charCodeAt(1),o=n.value.length>2?n.value.charCodeAt(2):0),e.digitalSignature=(a&128)===128,e.nonRepudiation=(a&64)===64,e.keyEncipherment=(a&32)===32,e.dataEncipherment=(a&16)===16,e.keyAgreement=(a&8)===8,e.keyCertSign=(a&4)===4,e.cRLSign=(a&2)===2,e.encipherOnly=(a&1)===1,e.decipherOnly=(o&128)===128}else if(e.name==="basicConstraints"){var n=asn1$1.fromDer(e.value);n.value.length>0&&n.value[0].type===asn1$1.Type.BOOLEAN?e.cA=n.value[0].value.charCodeAt(0)!==0:e.cA=!1;var c=null;n.value.length>0&&n.value[0].type===asn1$1.Type.INTEGER?c=n.value[0].value:n.value.length>1&&(c=n.value[1].value),c!==null&&(e.pathLenConstraint=asn1$1.derToInteger(c))}else if(e.name==="extKeyUsage")for(var n=asn1$1.fromDer(e.value),u=0;u<n.value.length;++u){var l=asn1$1.derToOid(n.value[u].value);l in oids?e[oids[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var n=asn1$1.fromDer(e.value),a=0;n.value.length>1&&(a=n.value.charCodeAt(1)),e.client=(a&128)===128,e.server=(a&64)===64,e.email=(a&32)===32,e.objsign=(a&16)===16,e.reserved=(a&8)===8,e.sslCA=(a&4)===4,e.emailCA=(a&2)===2,e.objCA=(a&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var p,n=asn1$1.fromDer(e.value),b=0;b<n.value.length;++b){p=n.value[b];var v={type:p.type,value:p.value};switch(e.altNames.push(v),p.type){case 1:case 2:case 6:break;case 7:v.ip=forge$1.util.bytesToIP(p.value);break;case 8:v.oid=asn1$1.derToOid(p.value);break}}}else if(e.name==="subjectKeyIdentifier"){var n=asn1$1.fromDer(e.value);e.subjectKeyIdentifier=forge$1.util.bytesToHex(n.value)}}return e};pki.certificationRequestFromAsn1=function(t,e){var n={},a=[];if(!asn1$1.validate(t,certificationRequestValidator,n,a)){var o=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw o.errors=a,o}var c=asn1$1.derToOid(n.publicKeyOid);if(c!==pki.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=pki.createCertificationRequest();if(u.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,u.signatureOid=forge$1.asn1.derToOid(n.csrSignatureOid),u.signatureParameters=_readSignatureParameters(u.signatureOid,n.csrSignatureParams,!0),u.siginfo.algorithmOid=forge$1.asn1.derToOid(n.csrSignatureOid),u.siginfo.parameters=_readSignatureParameters(u.siginfo.algorithmOid,n.csrSignatureParams,!1),u.signature=n.csrSignature,u.certificationRequestInfo=n.certificationRequestInfo,e){u.md=_createSignatureDigest({signatureOid:u.signatureOid,type:"certification request"});var l=asn1$1.toDer(u.certificationRequestInfo);u.md.update(l.getBytes())}var p=forge$1.md.sha1.create();return u.subject.getField=function(b){return _getAttribute(u.subject,b)},u.subject.addField=function(b){_fillMissingFields([b]),u.subject.attributes.push(b)},u.subject.attributes=pki.RDNAttributesAsArray(n.certificationRequestInfoSubject,p),u.subject.hash=p.digest().toHex(),u.publicKey=pki.publicKeyFromAsn1(n.subjectPublicKeyInfo),u.getAttribute=function(b){return _getAttribute(u,b)},u.addAttribute=function(b){_fillMissingFields([b]),u.attributes.push(b)},u.attributes=pki.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),u};pki.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return _getAttribute(t.subject,e)},t.subject.addField=function(e){_fillMissingFields([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return _getAttribute(t,e)},t.addAttribute=function(e){_fillMissingFields([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){_fillMissingFields(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){_fillMissingFields(e),t.attributes=e},t.sign=function(e,n){t.md=n||forge$1.md.sha1.create();var a=oids[t.md.algorithm+"WithRSAEncryption"];if(!a){var o=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw o.algorithm=t.md.algorithm,o}t.signatureOid=t.siginfo.algorithmOid=a,t.certificationRequestInfo=pki.getCertificationRequestInfo(t);var c=asn1$1.toDer(t.certificationRequestInfo);t.md.update(c.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,n=t.md;if(n===null){n=_createSignatureDigest({signatureOid:t.signatureOid,type:"certification request"});var a=t.certificationRequestInfo||pki.getCertificationRequestInfo(t),o=asn1$1.toDer(a);n.update(o.getBytes())}return n!==null&&(e=_verifySignature({certificate:t,md:n,signature:t.signature})),e},t};function _dnToAsn1(t){for(var e=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]),n,a,o=t.attributes,c=0;c<o.length;++c){n=o[c];var u=n.value,l=asn1$1.Type.PRINTABLESTRING;"valueTagClass"in n&&(l=n.valueTagClass,l===asn1$1.Type.UTF8&&(u=forge$1.util.encodeUtf8(u))),a=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SET,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(n.type).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,l,!1,u)])]),e.value.push(a)}return e}function _fillMissingFields(t){for(var e,n=0;n<t.length;++n){if(e=t[n],typeof e.name>"u"&&(e.type&&e.type in pki.oids?e.name=pki.oids[e.type]:e.shortName&&e.shortName in _shortNames&&(e.name=pki.oids[_shortNames[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in pki.oids)e.type=pki.oids[e.name];else{var a=new Error("Attribute type not specified.");throw a.attribute=e,a}if(typeof e.shortName>"u"&&e.name&&e.name in _shortNames&&(e.shortName=_shortNames[e.name]),e.type===oids.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=asn1$1.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var o=0;o<e.extensions.length;++o)e.value.push(pki.certificateExtensionToAsn1(_fillMissingExtensionFields(e.extensions[o])))}if(typeof e.value>"u"){var a=new Error("Attribute value not specified.");throw a.attribute=e,a}}}function _fillMissingExtensionFields(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in pki.oids&&(t.name=pki.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in pki.oids)t.id=pki.oids[t.name];else{var n=new Error("Extension ID not specified.");throw n.extension=t,n}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var a=0,o=0,c=0;t.digitalSignature&&(o|=128,a=7),t.nonRepudiation&&(o|=64,a=6),t.keyEncipherment&&(o|=32,a=5),t.dataEncipherment&&(o|=16,a=4),t.keyAgreement&&(o|=8,a=3),t.keyCertSign&&(o|=4,a=2),t.cRLSign&&(o|=2,a=1),t.encipherOnly&&(o|=1,a=0),t.decipherOnly&&(c|=128,a=7);var u=String.fromCharCode(a);c!==0?u+=String.fromCharCode(o)+String.fromCharCode(c):o!==0&&(u+=String.fromCharCode(o)),t.value=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,u)}else if(t.name==="basicConstraints")t.value=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var p in t)t[p]===!0&&(p in oids?l.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(oids[p]).getBytes())):p.indexOf(".")!==-1&&l.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(p).getBytes())))}else if(t.name==="nsCertType"){var a=0,o=0;t.client&&(o|=128,a=7),t.server&&(o|=64,a=6),t.email&&(o|=32,a=5),t.objsign&&(o|=16,a=4),t.reserved&&(o|=8,a=3),t.sslCA&&(o|=4,a=2),t.emailCA&&(o|=2,a=1),t.objCA&&(o|=1,a=0);var u=String.fromCharCode(a);o!==0&&(u+=String.fromCharCode(o)),t.value=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,u)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);for(var b,v=0;v<t.altNames.length;++v){b=t.altNames[v];var u=b.value;if(b.type===7&&b.ip){if(u=forge$1.util.bytesFromIP(b.ip),u===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=t,n}}else b.type===8&&(b.oid?u=asn1$1.oidToDer(asn1$1.oidToDer(b.oid)):u=asn1$1.oidToDer(u));t.value.value.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,b.type,!1,u))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var x=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=x.toHex(),t.value=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,x.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var _=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,0,!1,_))}if(t.authorityCertIssuer){var E=[asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,4,!0,[_dnToAsn1(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,1,!0,E))}if(t.serialNumber){var $=forge$1.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,2,!1,$))}}else if(t.name==="cRLDistributionPoints"){t.value=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);for(var l=t.value.value,S=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]),A=asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,0,!0,[]),b,v=0;v<t.altNames.length;++v){b=t.altNames[v];var u=b.value;if(b.type===7&&b.ip){if(u=forge$1.util.bytesFromIP(b.ip),u===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=t,n}}else b.type===8&&(b.oid?u=asn1$1.oidToDer(asn1$1.oidToDer(b.oid)):u=asn1$1.oidToDer(u));A.value.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,b.type,!1,u))}S.value.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,0,!0,[A])),l.push(S)}if(typeof t.value>"u"){var n=new Error("Extension value not specified.");throw n.extension=t,n}return t}function _signatureParametersToAsn1(t,e){switch(t){case oids["RSASSA-PSS"]:var n=[];return e.hash.algorithmOid!==void 0&&n.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,0,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(e.hash.algorithmOid).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&n.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,1,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(e.mgf.algorithmOid).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(e.mgf.hash.algorithmOid).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&n.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,2,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(e.saltLength).getBytes())])),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,n);default:return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")}}function _CRIAttributesToAsn1(t){var e=asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var n=t.attributes,a=0;a<n.length;++a){var o=n[a],c=o.value,u=asn1$1.Type.UTF8;"valueTagClass"in o&&(u=o.valueTagClass),u===asn1$1.Type.UTF8&&(c=forge$1.util.encodeUtf8(c));var l=!1;"valueConstructed"in o&&(l=o.valueConstructed);var p=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(o.type).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SET,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,u,l,c)])]);e.value.push(p)}return e}var jan_1_1950=new Date("1950-01-01T00:00:00Z"),jan_1_2050=new Date("2050-01-01T00:00:00Z");function _dateToAsn1(t){return t>=jan_1_1950&&t<jan_1_2050?asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.UTCTIME,!1,asn1$1.dateToUtcTime(t)):asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.GENERALIZEDTIME,!1,asn1$1.dateToGeneralizedTime(t))}pki.getTBSCertificate=function(t){var e=_dateToAsn1(t.validity.notBefore),n=_dateToAsn1(t.validity.notAfter),a=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,0,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(t.version).getBytes())]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,forge$1.util.hexToBytes(t.serialNumber)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(t.siginfo.algorithmOid).getBytes()),_signatureParametersToAsn1(t.siginfo.algorithmOid,t.siginfo.parameters)]),_dnToAsn1(t.issuer),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[e,n]),_dnToAsn1(t.subject),pki.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&a.value.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,1,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&a.value.push(asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,2,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&a.value.push(pki.certificateExtensionsToAsn1(t.extensions)),a};pki.getCertificationRequestInfo=function(t){var e=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(t.version).getBytes()),_dnToAsn1(t.subject),pki.publicKeyToAsn1(t.publicKey),_CRIAttributesToAsn1(t)]);return e};pki.distinguishedNameToAsn1=function(t){return _dnToAsn1(t)};pki.certificateToAsn1=function(t){var e=t.tbsCertificate||pki.getTBSCertificate(t);return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[e,asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(t.signatureOid).getBytes()),_signatureParametersToAsn1(t.signatureOid,t.signatureParameters)]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};pki.certificateExtensionsToAsn1=function(t){var e=asn1$1.create(asn1$1.Class.CONTEXT_SPECIFIC,3,!0,[]),n=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);e.value.push(n);for(var a=0;a<t.length;++a)n.value.push(pki.certificateExtensionToAsn1(t[a]));return e};pki.certificateExtensionToAsn1=function(t){var e=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);e.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(t.id).getBytes())),t.critical&&e.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BOOLEAN,!1,String.fromCharCode(255)));var n=t.value;return typeof t.value!="string"&&(n=asn1$1.toDer(n).getBytes()),e.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,n)),e};pki.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||pki.getCertificationRequestInfo(t);return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[e,asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(t.signatureOid).getBytes()),_signatureParametersToAsn1(t.signatureOid,t.signatureParameters)]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};pki.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(u){var l=n(u.issuer);return l},e.addCertificate=function(u){if(typeof u=="string"&&(u=forge$1.pki.certificateFromPem(u)),a(u.subject),!e.hasCertificate(u))if(u.subject.hash in e.certs){var l=e.certs[u.subject.hash];forge$1.util.isArray(l)||(l=[l]),l.push(u),e.certs[u.subject.hash]=l}else e.certs[u.subject.hash]=u},e.hasCertificate=function(u){typeof u=="string"&&(u=forge$1.pki.certificateFromPem(u));var l=n(u.subject);if(!l)return!1;forge$1.util.isArray(l)||(l=[l]);for(var p=asn1$1.toDer(pki.certificateToAsn1(u)).getBytes(),b=0;b<l.length;++b){var v=asn1$1.toDer(pki.certificateToAsn1(l[b])).getBytes();if(p===v)return!0}return!1},e.listAllCertificates=function(){var u=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var p=e.certs[l];if(!forge$1.util.isArray(p))u.push(p);else for(var b=0;b<p.length;++b)u.push(p[b])}return u},e.removeCertificate=function(u){var l;if(typeof u=="string"&&(u=forge$1.pki.certificateFromPem(u)),a(u.subject),!e.hasCertificate(u))return null;var p=n(u.subject);if(!forge$1.util.isArray(p))return l=e.certs[u.subject.hash],delete e.certs[u.subject.hash],l;for(var b=asn1$1.toDer(pki.certificateToAsn1(u)).getBytes(),v=0;v<p.length;++v){var x=asn1$1.toDer(pki.certificateToAsn1(p[v])).getBytes();b===x&&(l=p[v],p.splice(v,1))}return p.length===0&&delete e.certs[u.subject.hash],l};function n(u){return a(u),e.certs[u.hash]||null}function a(u){if(!u.hash){var l=forge$1.md.sha1.create();u.attributes=pki.RDNAttributesAsArray(_dnToAsn1(u),l),u.hash=l.digest().toHex()}}if(t)for(var o=0;o<t.length;++o){var c=t[o];e.addCertificate(c)}return e};pki.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};pki.verifyCertificateChain=function(t,e,n){typeof n=="function"&&(n={verify:n}),n=n||{},e=e.slice(0);var a=e.slice(0),o=n.validityCheckDate;typeof o>"u"&&(o=new Date);var c=!0,u=null,l=0;do{var p=e.shift(),b=null,v=!1;if(o&&(o<p.validity.notBefore||o>p.validity.notAfter)&&(u={message:"Certificate is not valid yet or has expired.",error:pki.certificateError.certificate_expired,notBefore:p.validity.notBefore,notAfter:p.validity.notAfter,now:o}),u===null){if(b=e[0]||t.getIssuer(p),b===null&&p.isIssuer(p)&&(v=!0,b=p),b){var x=b;forge$1.util.isArray(x)||(x=[x]);for(var _=!1;!_&&x.length>0;){b=x.shift();try{_=b.verify(p)}catch{}}_||(u={message:"Certificate signature is invalid.",error:pki.certificateError.bad_certificate})}u===null&&(!b||v)&&!t.hasCertificate(p)&&(u={message:"Certificate is not trusted.",error:pki.certificateError.unknown_ca})}if(u===null&&b&&!p.isIssuer(b)&&(u={message:"Certificate issuer is invalid.",error:pki.certificateError.bad_certificate}),u===null)for(var E={keyUsage:!0,basicConstraints:!0},$=0;u===null&&$<p.extensions.length;++$){var S=p.extensions[$];S.critical&&!(S.name in E)&&(u={message:"Certificate has an unsupported critical extension.",error:pki.certificateError.unsupported_certificate})}if(u===null&&(!c||e.length===0&&(!b||v))){var A=p.getExtension("basicConstraints"),I=p.getExtension("keyUsage");if(I!==null&&(!I.keyCertSign||A===null)&&(u={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:pki.certificateError.bad_certificate}),u===null&&A!==null&&!A.cA&&(u={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:pki.certificateError.bad_certificate}),u===null&&I!==null&&"pathLenConstraint"in A){var O=l-1;O>A.pathLenConstraint&&(u={message:"Certificate basicConstraints pathLenConstraint violated.",error:pki.certificateError.bad_certificate})}}var F=u===null?!0:u.error,U=n.verify?n.verify(F,l,a):F;if(U===!0)u=null;else throw F===!0&&(u={message:"The application rejected the certificate.",error:pki.certificateError.bad_certificate}),(U||U===0)&&(typeof U=="object"&&!forge$1.util.isArray(U)?(U.message&&(u.message=U.message),U.error&&(u.error=U.error)):typeof U=="string"&&(u.error=U)),u;c=!1,++l}while(e.length>0);return!0};var forge=forge$s,asn1=forge.asn1,p7=forge.pkcs7=forge.pkcs7||{};p7.messageFromPem=function(t){var e=forge.pem.decode(t)[0];if(e.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var a=asn1.fromDer(e.body);return p7.messageFromAsn1(a)};p7.messageToPem=function(t,e){var n={type:"PKCS7",body:asn1.toDer(t.toAsn1()).getBytes()};return forge.pem.encode(n,{maxline:e})};p7.messageFromAsn1=function(t){var e={},n=[];if(!asn1.validate(t,p7.asn1.contentInfoValidator,e,n)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw a.errors=n,a}var o=asn1.derToOid(e.contentType),c;switch(o){case forge.pki.oids.envelopedData:c=p7.createEnvelopedData();break;case forge.pki.oids.encryptedData:c=p7.createEncryptedData();break;case forge.pki.oids.signedData:c=p7.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+o+" is not (yet) supported.")}return c.fromAsn1(e.content.value[0]),c};p7.createSignedData=function(){var t=null;return t={type:forge.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(a){if(_fromAsn1(t,a,p7.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var o=t.rawCapture.certificates.value,c=0;c<o.length;++c)t.certificates.push(forge.pki.certificateFromAsn1(o[c]))},toAsn1:function(){t.contentInfo||t.sign();for(var a=[],o=0;o<t.certificates.length;++o)a.push(forge.pki.certificateToAsn1(t.certificates[o]));var c=[],u=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(t.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return a.length>0&&u.value[0].value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,a)),c.length>0&&u.value[0].value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,!0,c)),u.value[0].value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,t.signerInfos)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(t.type).getBytes()),u])},addSigner:function(a){var o=a.issuer,c=a.serialNumber;if(a.certificate){var u=a.certificate;typeof u=="string"&&(u=forge.pki.certificateFromPem(u)),o=u.issuer.attributes,c=u.serialNumber}var l=a.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=forge.pki.privateKeyFromPem(l));var p=a.digestAlgorithm||forge.pki.oids.sha1;switch(p){case forge.pki.oids.sha1:case forge.pki.oids.sha256:case forge.pki.oids.sha384:case forge.pki.oids.sha512:case forge.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+p)}var b=a.authenticatedAttributes||[];if(b.length>0){for(var v=!1,x=!1,_=0;_<b.length;++_){var E=b[_];if(!v&&E.type===forge.pki.oids.contentType){if(v=!0,x)break;continue}if(!x&&E.type===forge.pki.oids.messageDigest){if(x=!0,v)break;continue}}if(!v||!x)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:o,serialNumber:c,digestAlgorithm:p,signatureAlgorithm:forge.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:b,unauthenticatedAttributes:[]})},sign:function(a){if(a=a||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(forge.pki.oids.data).getBytes())]),"content"in t)){var o;t.content instanceof forge.util.ByteBuffer?o=t.content.bytes():typeof t.content=="string"&&(o=forge.util.encodeUtf8(t.content)),a.detached?t.detachedContent=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,o):t.contentInfo.value.push(asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,o)]))}if(t.signers.length!==0){var c=e();n(c)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(a){typeof a=="string"&&(a=forge.pki.certificateFromPem(a)),t.certificates.push(a)},addCertificateRevokationList:function(a){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var a={},o=0;o<t.signers.length;++o){var c=t.signers[o],u=c.digestAlgorithm;u in a||(a[u]=forge.md[forge.pki.oids[u]].create()),c.authenticatedAttributes.length===0?c.md=a[u]:c.md=forge.md[forge.pki.oids[u]].create()}t.digestAlgorithmIdentifiers=[];for(var u in a)t.digestAlgorithmIdentifiers.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(u).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")]));return a}function n(a){var o;if(t.detachedContent?o=t.detachedContent:(o=t.contentInfo.value[1],o=o.value[0]),!o)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var c=asn1.derToOid(t.contentInfo.value[0].value),u=asn1.toDer(o);u.getByte(),asn1.getBerValueLength(u),u=u.getBytes();for(var l in a)a[l].start().update(u);for(var p=new Date,b=0;b<t.signers.length;++b){var v=t.signers[b];if(v.authenticatedAttributes.length===0){if(c!==forge.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{v.authenticatedAttributesAsn1=asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var x=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,[]),_=0;_<v.authenticatedAttributes.length;++_){var E=v.authenticatedAttributes[_];E.type===forge.pki.oids.messageDigest?E.value=a[v.digestAlgorithm].digest():E.type===forge.pki.oids.signingTime&&(E.value||(E.value=p)),x.value.push(_attributeToAsn1(E)),v.authenticatedAttributesAsn1.value.push(_attributeToAsn1(E))}u=asn1.toDer(x).getBytes(),v.md.start().update(u)}v.signature=v.key.sign(v.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=_signersToAsn1(t.signers)}};p7.createEncryptedData=function(){var t=null;return t={type:forge.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:forge.pki.oids["aes256-CBC"]},fromAsn1:function(e){_fromAsn1(t,e,p7.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),_decryptContent(t)}},t};p7.createEnvelopedData=function(){var t=null;return t={type:forge.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:forge.pki.oids["aes256-CBC"]},fromAsn1:function(e){var n=_fromAsn1(t,e,p7.asn1.envelopedDataValidator);t.recipients=_recipientsFromAsn1(n.recipientInfos.value)},toAsn1:function(){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(t.type).getBytes()),asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(t.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,_recipientsToAsn1(t.recipients)),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,_encryptedContentToAsn1(t.encryptedContent))])])])},findRecipient:function(e){for(var n=e.issuer.attributes,a=0;a<t.recipients.length;++a){var o=t.recipients[a],c=o.issuer;if(o.serialNumber===e.serialNumber&&c.length===n.length){for(var u=!0,l=0;l<n.length;++l)if(c[l].type!==n[l].type||c[l].value!==n[l].value){u=!1;break}if(u)return o}}return null},decrypt:function(e,n){if(t.encryptedContent.key===void 0&&e!==void 0&&n!==void 0)switch(e.encryptedContent.algorithm){case forge.pki.oids.rsaEncryption:case forge.pki.oids.desCBC:var a=n.decrypt(e.encryptedContent.content);t.encryptedContent.key=forge.util.createBuffer(a);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}_decryptContent(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:forge.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,n){if(t.encryptedContent.content===void 0){n=n||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var a,o,c;switch(n){case forge.pki.oids["aes128-CBC"]:a=16,o=16,c=forge.aes.createEncryptionCipher;break;case forge.pki.oids["aes192-CBC"]:a=24,o=16,c=forge.aes.createEncryptionCipher;break;case forge.pki.oids["aes256-CBC"]:a=32,o=16,c=forge.aes.createEncryptionCipher;break;case forge.pki.oids["des-EDE3-CBC"]:a=24,o=8,c=forge.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(e===void 0)e=forge.util.createBuffer(forge.random.getBytes(a));else if(e.length()!=a)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+a+".");t.encryptedContent.algorithm=n,t.encryptedContent.key=e,t.encryptedContent.parameter=forge.util.createBuffer(forge.random.getBytes(o));var u=c(e);if(u.start(t.encryptedContent.parameter.copy()),u.update(t.content),!u.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=u.output}for(var l=0;l<t.recipients.length;++l){var p=t.recipients[l];if(p.encryptedContent.content===void 0)switch(p.encryptedContent.algorithm){case forge.pki.oids.rsaEncryption:p.encryptedContent.content=p.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+p.encryptedContent.algorithm)}}}},t};function _recipientFromAsn1(t){var e={},n=[];if(!asn1.validate(t,p7.asn1.recipientInfoValidator,e,n)){var a=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw a.errors=n,a}return{version:e.version.charCodeAt(0),issuer:forge.pki.RDNAttributesAsArray(e.issuer),serialNumber:forge.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:asn1.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function _recipientToAsn1(t){return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(t.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[forge.pki.distinguishedNameToAsn1({attributes:t.issuer}),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge.util.hexToBytes(t.serialNumber))]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(t.encryptedContent.algorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function _recipientsFromAsn1(t){for(var e=[],n=0;n<t.length;++n)e.push(_recipientFromAsn1(t[n]));return e}function _recipientsToAsn1(t){for(var e=[],n=0;n<t.length;++n)e.push(_recipientToAsn1(t[n]));return e}function _signerToAsn1(t){var e=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,asn1.integerToDer(t.version).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[forge.pki.distinguishedNameToAsn1({attributes:t.issuer}),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge.util.hexToBytes(t.serialNumber))]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(t.digestAlgorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(t.signatureAlgorithm).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])),e.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var n=asn1.create(asn1.Class.CONTEXT_SPECIFIC,1,!0,[]),a=0;a<t.unauthenticatedAttributes.length;++a){var o=t.unauthenticatedAttributes[a];n.values.push(_attributeToAsn1(o))}e.value.push(n)}return e}function _signersToAsn1(t){for(var e=[],n=0;n<t.length;++n)e.push(_signerToAsn1(t[n]));return e}function _attributeToAsn1(t){var e;if(t.type===forge.pki.oids.contentType)e=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(t.value).getBytes());else if(t.type===forge.pki.oids.messageDigest)e=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===forge.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),a=new Date("2050-01-01T00:00:00Z"),o=t.value;if(typeof o=="string"){var c=Date.parse(o);isNaN(c)?o.length===13?o=asn1.utcTimeToDate(o):o=asn1.generalizedTimeToDate(o):o=new Date(c)}o>=n&&o<a?e=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.UTCTIME,!1,asn1.dateToUtcTime(o)):e=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.GENERALIZEDTIME,!1,asn1.dateToGeneralizedTime(o))}return asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(t.type).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SET,!0,[e])])}function _encryptedContentToAsn1(t){return[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(forge.pki.oids.data).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(t.algorithm).getBytes()),t.parameter?asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),asn1.create(asn1.Class.CONTEXT_SPECIFIC,0,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,t.content.getBytes())])]}function _fromAsn1(t,e,n){var a={},o=[];if(!asn1.validate(e,n,a,o)){var c=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw c.errors=c,c}var u=asn1.derToOid(a.contentType);if(u!==forge.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(a.encryptedContent){var l="";if(forge.util.isArray(a.encryptedContent))for(var p=0;p<a.encryptedContent.length;++p){if(a.encryptedContent[p].type!==asn1.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=a.encryptedContent[p].value}else l=a.encryptedContent;t.encryptedContent={algorithm:asn1.derToOid(a.encAlgorithm),parameter:forge.util.createBuffer(a.encParameter.value),content:forge.util.createBuffer(l)}}if(a.content){var l="";if(forge.util.isArray(a.content))for(var p=0;p<a.content.length;++p){if(a.content[p].type!==asn1.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=a.content[p].value}else l=a.content;t.content=forge.util.createBuffer(l)}return t.version=a.version.charCodeAt(0),t.rawCapture=a,a}function _decryptContent(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case forge.pki.oids["aes128-CBC"]:case forge.pki.oids["aes192-CBC"]:case forge.pki.oids["aes256-CBC"]:e=forge.aes.createDecryptionCipher(t.encryptedContent.key);break;case forge.pki.oids.desCBC:case forge.pki.oids["des-EDE3-CBC"]:e=forge.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}async function pReflect(t){try{return{status:"fulfilled",value:await t,isFulfilled:!0,isRejected:!1}}catch(e){return{status:"rejected",reason:e,isFulfilled:!1,isRejected:!0}}}class Node{constructor(e){Bt(this,"value");Bt(this,"next");this.value=e}}var dt,It,Ct;class Queue{constructor(){kt(this,dt,void 0);kt(this,It,void 0);kt(this,Ct,void 0);this.clear()}enqueue(e){const n=new Node(e);pt(this,dt)?(pt(this,It).next=n,ht(this,It,n)):(ht(this,dt,n),ht(this,It,n)),Ot(this,Ct)._++}dequeue(){const e=pt(this,dt);if(e)return ht(this,dt,pt(this,dt).next),Ot(this,Ct)._--,e.value}clear(){ht(this,dt,void 0),ht(this,It,void 0),ht(this,Ct,0)}get size(){return pt(this,Ct)}*[Symbol.iterator](){let e=pt(this,dt);for(;e;)yield e.value,e=e.next}}dt=new WeakMap,It=new WeakMap,Ct=new WeakMap;function pLimit(t){if(!((Number.isInteger(t)||t===Number.POSITIVE_INFINITY)&&t>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");const e=new Queue;let n=0;const a=()=>{n--,e.size>0&&e.dequeue()()},o=async(l,p,b)=>{n++;const v=(async()=>l(...b))();p(v);try{await v}catch{}a()},c=(l,p,b)=>{e.enqueue(o.bind(void 0,l,p,b)),(async()=>(await Promise.resolve(),n<t&&e.size>0&&e.dequeue()()))()},u=(l,...p)=>new Promise(b=>{c(l,b,p)});return Object.defineProperties(u,{activeCount:{get:()=>n},pendingCount:{get:()=>e.size},clearQueue:{value:()=>{e.clear()}}}),u}async function pSettle(t,e={}){const{concurrency:n=Number.POSITIVE_INFINITY}=e,a=pLimit(n);return Promise.all(t.map(o=>o&&typeof o.then=="function"?pReflect(o):pReflect(typeof o=="function"?a(()=>o()):Promise.resolve(o))))}function isAsyncIterable$3(t){return t[Symbol.asyncIterator]!=null}const defaultEncoder=t=>{const e=unsigned.encodingLength(t),n=allocUnsafe$2(e);return unsigned.encode(t,n),defaultEncoder.bytes=e,n};defaultEncoder.bytes=0;function encode$3(t,e){e=e??{};const n=e.lengthEncoder??defaultEncoder;function*a(o){const c=n(o.byteLength);c instanceof Uint8Array?yield c:yield*c,o instanceof Uint8Array?yield o:yield*o}return isAsyncIterable$3(t)?async function*(){for await(const o of t)yield*a(o)}():function*(){for(const o of t)yield*a(o)}()}encode$3.single=(t,e)=>{e=e??{};const n=e.lengthEncoder??defaultEncoder;return new Uint8ArrayList(n(t.byteLength),t)};const MAX_LENGTH_LENGTH=8,MAX_DATA_LENGTH=1024*1024*4;var ReadMode;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(ReadMode||(ReadMode={}));const defaultDecoder=t=>{const e=unsigned.decode(t);return defaultDecoder.bytes=unsigned.encodingLength(e),e};defaultDecoder.bytes=0;function decode$2(t,e){const n=new Uint8ArrayList;let a=ReadMode.LENGTH,o=-1;const c=e?.lengthDecoder??defaultDecoder,u=e?.maxLengthLength??MAX_LENGTH_LENGTH,l=e?.maxDataLength??MAX_DATA_LENGTH;function*p(){for(;n.byteLength>0;){if(a===ReadMode.LENGTH)try{if(o=c(n),o<0)throw errCode$1(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(o>l)throw errCode$1(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");const b=c.bytes;n.consume(b),e?.onLength!=null&&e.onLength(o),a=ReadMode.DATA}catch(b){if(b instanceof RangeError){if(n.byteLength>u)throw errCode$1(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw b}if(a===ReadMode.DATA){if(n.byteLength<o)break;const b=n.sublist(0,o);n.consume(o),e?.onData!=null&&e.onData(b),yield b,a=ReadMode.LENGTH}}}return isAsyncIterable$3(t)?async function*(){for await(const b of t)n.append(b),yield*p();if(n.byteLength>0)throw errCode$1(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(const b of t)n.append(b),yield*p();if(n.byteLength>0)throw errCode$1(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}decode$2.fromReader=(t,e)=>{let n=1;const a=async function*(){for(;;)try{const{done:c,value:u}=await t.next(n);if(c===!0)return;u!=null&&(yield u)}catch(c){if(c.code==="ERR_UNDER_READ")return{done:!0,value:null};throw c}finally{n=1}}();return decode$2(a,{...e??{},onLength:c=>{n=c}})};function isAsyncIterable$2(t){return t[Symbol.asyncIterator]!=null}function merge(...t){const e=[];for(const n of t)isAsyncIterable$2(n)||e.push(n);return e.length===t.length?function*(){for(const n of e)yield*n}():async function*(){const n=pushable({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async a=>{for await(const o of a)n.push(o)})),n.end()}catch(a){n.end(a)}}),yield*n}()}function pipe(t,...e){if(t==null)throw new Error("Empty pipeline");if(isDuplex(t)){const a=t;t=()=>a.source}else if(isIterable(t)||isAsyncIterable$1(t)){const a=t;t=()=>a}const n=[t,...e];if(n.length>1&&isDuplex(n[n.length-1])&&(n[n.length-1]=n[n.length-1].sink),n.length>2)for(let a=1;a<n.length-1;a++)isDuplex(n[a])&&(n[a]=duplexPipelineFn(n[a]));return rawPipe(...n)}const rawPipe=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},isAsyncIterable$1=t=>t?.[Symbol.asyncIterator]!=null,isIterable=t=>t?.[Symbol.iterator]!=null,isDuplex=t=>t==null?!1:t.sink!=null&&t.source!=null,duplexPipelineFn=t=>e=>{const n=t.sink(e);if(n?.then!=null){const a=pushable({objectMode:!0});n.then(()=>{a.end()},u=>{a.end(u)});let o;const c=t.source;if(isAsyncIterable$1(c))o=async function*(){yield*c,a.end()};else if(isIterable(c))o=function*(){yield*c,a.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return merge(a,o())}return t.source};function isAsyncIterable(t){return t[Symbol.asyncIterator]!=null}function first(t){if(isAsyncIterable(t))return(async()=>{for await(const e of t)return e})();for(const e of t)return e}async function upnpNat(){throw new Error("Not supported in browsers")}const isEnvWithDom=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,isElectron=detectElectron(),isBrowser=isEnvWithDom&&!isElectron,isElectronMain=isElectron&&!isEnvWithDom,isElectronRenderer$1=isElectron&&isEnvWithDom,isNode=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!isElectron,isWebWorker=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"];const isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";function isLoopbackAddr(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^::1$/.test(t)}var s=1e3,m=s*60,h$1=m*60,d=h$1*24,w=d*7,y=d*365.25,ms=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return parse$2(t);if(n==="number"&&isFinite(t))return e.long?fmtLong(t):fmtShort(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function parse$2(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),a=(e[2]||"ms").toLowerCase();switch(a){case"years":case"year":case"yrs":case"yr":case"y":return n*y;case"weeks":case"week":case"w":return n*w;case"days":case"day":case"d":return n*d;case"hours":case"hour":case"hrs":case"hr":case"h":return n*h$1;case"minutes":case"minute":case"mins":case"min":case"m":return n*m;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function fmtShort(t){var e=Math.abs(t);return e>=d?Math.round(t/d)+"d":e>=h$1?Math.round(t/h$1)+"h":e>=m?Math.round(t/m)+"m":e>=s?Math.round(t/s)+"s":t+"ms"}function fmtLong(t){var e=Math.abs(t);return e>=d?plural(t,e,d,"day"):e>=h$1?plural(t,e,h$1,"hour"):e>=m?plural(t,e,m,"minute"):e>=s?plural(t,e,s,"second"):t+" ms"}function plural(t,e,n,a){var o=e>=n*1.5;return Math.round(t/n)+" "+a+(o?"s":"")}var receptacle=Receptacle,toMS=ms,cache=Receptacle.prototype,counter=new Date%1e9;function getUID(){return(Math.random()*1e9>>>0)+counter++}function Receptacle(t){t=t||{},this.id=t.id||getUID(),this.max=t.max||1/0,this.items=t.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(t.lastModified||new Date);for(var e,n,a=this.items.length;a--;)e=this.items[a],n=new Date(e.expires)-new Date,this._lookup[e.key]=e,n>0?this.expire(e.key,n):n<=0&&this.delete(e.key)}cache.has=function(t){return t in this._lookup};cache.get=function(t){if(!this.has(t))return null;var e=this._lookup[t];return e.refresh&&this.expire(t,e.refresh),this.items.splice(this.items.indexOf(e),1),this.items.push(e),e.value};cache.meta=function(t){if(!this.has(t))return null;var e=this._lookup[t];return"meta"in e?e.meta:null};cache.set=function(t,e,n){var a=this._lookup[t],o=this._lookup[t]={key:t,value:e};return this.lastModified=new Date,a?(clearTimeout(a.timeout),this.items.splice(this.items.indexOf(a),1,o)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(o),this.size++),n&&("ttl"in n&&this.expire(t,n.ttl),"meta"in n&&(o.meta=n.meta),n.refresh&&(o.refresh=n.ttl)),this};cache.delete=function(t){var e=this._lookup[t];return e?(this.lastModified=new Date,this.items.splice(this.items.indexOf(e),1),clearTimeout(e.timeout),delete this._lookup[t],this.size--,this):!1};cache.expire=function(t,e){var n=e||0,a=this._lookup[t];if(!a)return this;if(typeof n=="string"&&(n=toMS(e)),typeof n!="number")throw new TypeError("Expiration time must be a string or number.");return clearTimeout(a.timeout),a.timeout=setTimeout(this.delete.bind(this,a.key),n),a.expires=Number(new Date)+n,this};cache.clear=function(){for(var t=this.items.length;t--;)this.delete(this.items[t].key);return this};cache.toJSON=function(){for(var t=new Array(this.items.length),e,n=t.length;n--;)e=this.items[n],t[n]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:void 0,lastModified:this.lastModified,items:t}};const Receptacle$1=getDefaultExportFromCjs(receptacle),globalFetch=globalThis.fetch,globalHeaders=globalThis.Headers;function buildResource(t,e,n){return`${t}?name=${e}&type=${n}`}async function request(t,e){return await(await globalFetch(t,{headers:new globalHeaders({accept:"application/dns-json"}),signal:e})).json()}function getCacheKey(t,e){return`${e}_${t}`}const log=Object.assign(debug("dns-over-http-resolver"),{error:debug("dns-over-http-resolver:error")});let Resolver$1=class{constructor(e={}){this._cache=new Receptacle$1({max:e?.maxCache??100}),this._TXTcache=new Receptacle$1({max:e?.maxCache??100}),this._servers=["https://cloudflare-dns.com/dns-query","https://dns.google/resolve"],this._request=e.request??request,this._abortControllers=[]}cancel(){this._abortControllers.forEach(e=>e.abort())}getServers(){return this._servers}_getShuffledServers(){const e=[...this._servers];for(let n=e.length-1;n>0;n--){const a=Math.floor(Math.random()*n),o=e[n];e[n]=e[a],e[a]=o}return e}setServers(e){this._servers=e}async resolve(e,n="A"){switch(n){case"A":return await this.resolve4(e);case"AAAA":return await this.resolve6(e);case"TXT":return await this.resolveTxt(e);default:throw new Error(`${n} is not supported`)}}async resolve4(e){const n="A",a=this._cache.get(getCacheKey(e,n));if(a!=null)return a;let o=!1;for(const c of this._getShuffledServers()){const u=new AbortController;this._abortControllers.push(u);try{const l=await this._request(buildResource(c,e,n),u.signal),p=l.Answer.map(v=>v.data),b=Math.min(...l.Answer.map(v=>v.TTL));return this._cache.set(getCacheKey(e,n),p,{ttl:b}),p}catch{u.signal.aborted&&(o=!0),log.error(`${c} could not resolve ${e} record ${n}`)}finally{this._abortControllers=this._abortControllers.filter(l=>l!==u)}}throw o?Object.assign(new Error("queryA ECANCELLED"),{code:"ECANCELLED"}):new Error(`Could not resolve ${e} record ${n}`)}async resolve6(e){const n="AAAA",a=this._cache.get(getCacheKey(e,n));if(a!=null)return a;let o=!1;for(const c of this._getShuffledServers()){const u=new AbortController;this._abortControllers.push(u);try{const l=await this._request(buildResource(c,e,n),u.signal),p=l.Answer.map(v=>v.data),b=Math.min(...l.Answer.map(v=>v.TTL));return this._cache.set(getCacheKey(e,n),p,{ttl:b}),p}catch{u.signal.aborted&&(o=!0),log.error(`${c} could not resolve ${e} record ${n}`)}finally{this._abortControllers=this._abortControllers.filter(l=>l!==u)}}throw o?Object.assign(new Error("queryAaaa ECANCELLED"),{code:"ECANCELLED"}):new Error(`Could not resolve ${e} record ${n}`)}async resolveTxt(e){const n="TXT",a=this._TXTcache.get(getCacheKey(e,n));if(a!=null)return a;let o=!1;for(const c of this._getShuffledServers()){const u=new AbortController;this._abortControllers.push(u);try{const l=await this._request(buildResource(c,e,n),u.signal),p=l.Answer.map(v=>[v.data.replace(/['"]+/g,"")]),b=Math.min(...l.Answer.map(v=>v.TTL));return this._TXTcache.set(getCacheKey(e,n),p,{ttl:b}),p}catch{u.signal.aborted&&(o=!0),log.error(`${c} could not resolve ${e} record ${n}`)}finally{this._abortControllers=this._abortControllers.filter(l=>l!==u)}}throw o?Object.assign(new Error("queryTxt ECANCELLED"),{code:"ECANCELLED"}):new Error(`Could not resolve ${e} record ${n}`)}clearCache(){this._cache.clear(),this._TXTcache.clear()}};var fixedSize=class{constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){const e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}peek(){return this.buffer[this.btm]}isEmpty(){return this.buffer[this.btm]===void 0}};const FixedFIFO=fixedSize;var fastFifo=class{constructor(e){this.hwm=e||16,this.head=new FixedFIFO(this.hwm),this.tail=this.head,this.length=0}push(e){if(this.length++,!this.head.push(e)){const n=this.head;this.head=n.next=new FixedFIFO(2*this.head.buffer.length),this.head.push(e)}}shift(){this.length!==0&&this.length--;const e=this.tail.shift();if(e===void 0&&this.tail.next){const n=this.tail.next;return this.tail.next=null,this.tail=n,this.tail.shift()}return e}peek(){return this.tail.peek()}isEmpty(){return this.head.isEmpty()}};const pDefer=()=>{const t={};return t.promise=new Promise((e,n)=>{t.resolve=e,t.reject=n}),t};var pDefer_1=pDefer;const Fifo=fastFifo,defer=pDefer_1;var pFifo=class{constructor(){this._buffer=new Fifo,this._waitingConsumers=new Fifo}push(e){const{promise:n,resolve:a}=defer();return this._buffer.push({chunk:e,resolve:a}),this._consume(),n}_consume(){for(;!this._waitingConsumers.isEmpty()&&!this._buffer.isEmpty();){const e=this._waitingConsumers.shift(),n=this._buffer.shift();e.resolve(n.chunk),n.resolve()}}shift(){const{promise:e,resolve:n}=defer();return this._waitingConsumers.push({resolve:n}),this._consume(),e}isEmpty(){return this._buffer.isEmpty()}};const FIFO=getDefaultExportFromCjs(pFifo),randomBytes$1=requireBrowser$b(),{EventEmitter:EventEmitter$1}=eventsExports;function arrayEquals(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0,a=t.length;n<a;++n)if(t[n]!==e[n])return!1;return!0}function createNode(){return{contacts:[],dontSplit:!1,left:null,right:null}}function ensureInt8(t,e){if(!(e instanceof Uint8Array))throw new TypeError(t+" is not a Uint8Array")}class KBucket extends EventEmitter$1{constructor(e={}){super(),this.localNodeId=e.localNodeId||randomBytes$1(20),this.numberOfNodesPerKBucket=e.numberOfNodesPerKBucket||20,this.numberOfNodesToPing=e.numberOfNodesToPing||3,this.distance=e.distance||KBucket.distance,this.arbiter=e.arbiter||KBucket.arbiter,this.metadata=Object.assign({},e.metadata),ensureInt8("option.localNodeId as parameter 1",this.localNodeId),this.root=createNode()}static arbiter(e,n){return e.vectorClock>n.vectorClock?e:n}static distance(e,n){let a=0,o=0;const c=Math.min(e.length,n.length),u=Math.max(e.length,n.length);for(;o<c;++o)a=a*256+(e[o]^n[o]);for(;o<u;++o)a=a*256+255;return a}add(e){ensureInt8("contact.id",(e||{}).id);let n=0,a=this.root;for(;a.contacts===null;)a=this._determineNode(a,e.id,n++);const o=this._indexOf(a,e.id);return o>=0?(this._update(a,o,e),this):a.contacts.length<this.numberOfNodesPerKBucket?(a.contacts.push(e),this.emit("added",e),this):a.dontSplit?(this.emit("ping",a.contacts.slice(0,this.numberOfNodesToPing),e),this):(this._split(a,n),this.add(e))}closest(e,n=1/0){if(ensureInt8("id",e),!Number.isInteger(n)&&n!==1/0||n<=0)throw new TypeError("n is not positive number");let a=[];for(let o=[this.root],c=0;o.length>0&&a.length<n;){const u=o.pop();if(u.contacts===null){const l=this._determineNode(u,e,c++);o.push(u.left===l?u.right:u.left),o.push(l)}else a=a.concat(u.contacts)}return a.map(o=>[this.distance(o.id,e),o]).sort((o,c)=>o[0]-c[0]).slice(0,n).map(o=>o[1])}count(){let e=0;for(const n=[this.root];n.length>0;){const a=n.pop();a.contacts===null?n.push(a.right,a.left):e+=a.contacts.length}return e}_determineNode(e,n,a){const o=a>>3,c=a%8;return n.length<=o&&c!==0?e.left:n[o]&1<<7-c?e.right:e.left}get(e){ensureInt8("id",e);let n=0,a=this.root;for(;a.contacts===null;)a=this._determineNode(a,e,n++);const o=this._indexOf(a,e);return o>=0?a.contacts[o]:null}_indexOf(e,n){for(let a=0;a<e.contacts.length;++a)if(arrayEquals(e.contacts[a].id,n))return a;return-1}remove(e){ensureInt8("the id as parameter 1",e);let n=0,a=this.root;for(;a.contacts===null;)a=this._determineNode(a,e,n++);const o=this._indexOf(a,e);if(o>=0){const c=a.contacts.splice(o,1)[0];this.emit("removed",c)}return this}_split(e,n){e.left=createNode(),e.right=createNode();for(const c of e.contacts)this._determineNode(e,c.id,n).contacts.push(c);e.contacts=null;const a=this._determineNode(e,this.localNodeId,n),o=e.left===a?e.right:e.left;o.dontSplit=!0}toArray(){let e=[];for(const n=[this.root];n.length>0;){const a=n.pop();a.contacts===null?n.push(a.right,a.left):e=e.concat(a.contacts)}return e}*toIterable(){for(const e=[this.root];e.length>0;){const n=e.pop();n.contacts===null?e.push(n.right,n.left):yield*n.contacts}}_update(e,n,a){if(!arrayEquals(e.contacts[n].id,a.id))throw new Error("wrong index for _update");const o=e.contacts[n],c=this.arbiter(o,a);c===o&&o!==a||(e.contacts.splice(n,1),e.contacts.push(c),this.emit("updated",o,c))}}var kBucket=KBucket;const KBuck=getDefaultExportFromCjs(kBucket),WebSocket$1=WebSocket;var dom={},eventIterator={};Object.defineProperty(eventIterator,"__esModule",{value:!0});class EventQueue{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(e){if(this.isStopped)return;const n={value:e,done:!1};if(this.pullQueue.length){const a=this.pullQueue.shift();a&&a.resolve(n)}else this.pushQueue.push(Promise.resolve(n)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const e of this.pullQueue)e.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(e){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const n of this.pullQueue)n.reject(e);this.pullQueue.length=0}else{const n=Promise.reject(e);n.catch(()=>{}),this.pushQueue.push(n)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:e=>{const n=this.pushQueue.shift();return n?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),n):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((a,o)=>{this.pullQueue.push({resolve:a,reject:o})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}let EventIterator$1=class{constructor(e,{highWaterMark:n=100,lowWaterMark:a=1}={}){const o=new EventQueue;o.highWaterMark=n,o.lowWaterMark=a,o.removeCallback=e({push:c=>o.push(c),stop:()=>o.stop(),fail:c=>o.fail(c),on:(c,u)=>{o.eventHandlers[c]=u}})||(()=>{}),this[Symbol.asyncIterator]=()=>o[Symbol.asyncIterator](),Object.freeze(this)}};eventIterator.EventIterator=EventIterator$1;eventIterator.default=EventIterator$1;Object.defineProperty(dom,"__esModule",{value:!0});const event_iterator_1=eventIterator;var EventIterator=dom.EventIterator=event_iterator_1.EventIterator;function subscribe(t,e,n){return new event_iterator_1.EventIterator(({push:a})=>(this.addEventListener(t,a,e),()=>this.removeEventListener(t,a,e)),n)}dom.subscribe=subscribe;dom.default=event_iterator_1.EventIterator;function isArrayBuffer(t){return t instanceof ArrayBuffer||t?.constructor?.name==="ArrayBuffer"&&typeof t?.byteLength=="number"}const source=t=>{t.binaryType="arraybuffer";const e=async()=>await new Promise((c,u)=>{if(a)return c();if(o!=null)return u(o);const l=v=>{t.removeEventListener("open",p),t.removeEventListener("error",b),v()},p=()=>l(c),b=v=>{l(()=>u(v.error??new Error(`connect ECONNREFUSED ${t.url}`)))};t.addEventListener("open",p),t.addEventListener("error",b)}),n=async function*(){const c=new EventIterator(({push:u,stop:l,fail:p})=>{const b=x=>{let _=null;typeof x.data=="string"&&(_=fromString$2(x.data)),isArrayBuffer(x.data)&&(_=new Uint8Array(x.data)),x.data instanceof Uint8Array&&(_=x.data),_!=null&&u(_)},v=x=>p(x.error??new Error("Socket error"));return t.addEventListener("message",b),t.addEventListener("error",v),t.addEventListener("close",l),()=>{t.removeEventListener("message",b),t.removeEventListener("error",v),t.removeEventListener("close",l)}},{highWaterMark:1/0});await e();for await(const u of c)yield isArrayBuffer(u)?new Uint8Array(u):u}();let a=t.readyState===1,o;return t.addEventListener("open",()=>{a=!0,o=null}),t.addEventListener("close",()=>{a=!1,o=null}),t.addEventListener("error",c=>{a||(o=c.error??new Error(`connect ECONNREFUSED ${t.url}`))}),Object.assign(n,{connected:e})},ready=t=>{if(t.readyState>=2)throw new Error("socket closed");if(t.readyState!==1)return new Promise((e,n)=>{function a(){t.removeEventListener("open",o),t.removeEventListener("error",c)}function o(){a(),e()}function c(u){a(),n(u.error??new Error(`connect ECONNREFUSED ${t.url}`))}t.addEventListener("open",o),t.addEventListener("error",c)})},sink=(t,e)=>(e=e??{},e.closeOnEnd=e.closeOnEnd!==!1,async a=>{for await(const o of a){try{await ready(t)}catch(c){if(c.message==="socket closed")break;throw c}t.send(o)}if(e.closeOnEnd!=null&&t.readyState<=1)return await new Promise((o,c)=>{t.addEventListener("close",u=>{if(u.wasClean||u.code===1006)o();else{const l=Object.assign(new Error("ws error"),{event:u});c(l)}}),setTimeout(()=>t.close())})}),duplex=(t,e)=>{e=e??{};const n=source(t);let a=e.remoteAddress,o=e.remotePort;if(t.url!=null)try{const u=new URL(t.url);a=u.hostname,o=parseInt(u.port,10)}catch{}if(a==null||o==null)throw new Error("Remote connection did not have address and/or port");return{sink:sink(t,e),source:n,connected:async()=>await n.connected(),close:async()=>{(t.readyState===t.CONNECTING||t.readyState===t.OPEN)&&await new Promise(u=>{t.addEventListener("close",()=>{u()}),t.close()})},destroy:()=>{t.terminate!=null?t.terminate():t.close()},remoteAddress:a,remotePort:o,socket:t}},map={http:"ws",https:"wss"},def="ws",wsurl=(t,e)=>isoUrl.relative(t,e,map,def);function connect(t,e){const n=typeof window>"u"?"":window.location;e=e??{};const a=wsurl(t,n.toString()),o=new WebSocket$1(a,e.websocket);return duplex(o,e)}const DEFAULT_BATCH_SIZE=1024*1024,DEFAULT_SERIALIZE=(t,e)=>{e.append(t)};async function*batchedBytes(t,e={}){let n=new Uint8ArrayList,a=!1,o=pDefer$1(),c=Number(e.size??DEFAULT_BATCH_SIZE);(isNaN(c)||c===0||c<0)&&(c=DEFAULT_BATCH_SIZE);const u=e.yieldAfter??0,l=e.serialize??DEFAULT_SERIALIZE;for(Promise.resolve().then(async()=>{try{let p;for await(const b of t){if(l(b,n),n.byteLength>=c){clearTimeout(p),o.resolve();continue}p=setTimeout(()=>{o.resolve()},u)}clearTimeout(p),o.resolve()}catch(p){o.reject(p)}finally{a=!0}});!a;)if(await o.promise,o=pDefer$1(),n.byteLength>0){const p=n;n=new Uint8ArrayList,yield p.subarray()}}function anySignal(t){const e=new globalThis.AbortController;function n(){e.abort();for(const c of t)c?.removeEventListener!=null&&c.removeEventListener("abort",n)}for(const c of t){if(c?.aborted===!0){n();break}c?.addEventListener!=null&&c.addEventListener("abort",n)}function a(){for(const c of t)c?.removeEventListener!=null&&c.removeEventListener("abort",n)}const o=e.signal;return o.clear=a,o}const defaultLengthDecoder=t=>unsigned.decode(t);defaultLengthDecoder.bytes=0;function pbStream(t,e={}){const n=pushable();t.sink(n).catch(u=>{n.end(u)}),t.sink=async u=>{for await(const l of u)n.push(l)};let a=t.source;t.source[Symbol.iterator]!=null?a=t.source[Symbol.iterator]():t.source[Symbol.asyncIterator]!=null&&(a=t.source[Symbol.asyncIterator]());const o=new Uint8ArrayList,c={read:async u=>{if(u==null){const{done:p,value:b}=await a.next();return p===!0?new Uint8ArrayList:b}for(;o.byteLength<u;){const{value:p,done:b}=await a.next();if(b===!0)throw errCode$1(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");o.append(p)}const l=o.sublist(0,u);return o.consume(u),l},readLP:async()=>{let u=-1;const l=new Uint8ArrayList,p=e?.lengthDecoder??defaultLengthDecoder;for(;;){l.append(await c.read(1));try{u=p(l)}catch(b){if(b instanceof RangeError)continue;throw b}if(u>-1)break;if(e?.maxLengthLength!=null&&l.byteLength>e.maxLengthLength)throw errCode$1(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG")}if(e?.maxDataLength!=null&&u>e.maxDataLength)throw errCode$1(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");return await c.read(u)},readPB:async u=>{const l=await c.readLP();if(l==null)throw new Error("Value is null");const p=l instanceof Uint8Array?l:l.subarray();return u.decode(p)},write:u=>{u instanceof Uint8Array?n.push(u):n.push(u.subarray())},writeLP:u=>{c.write(encode$3.single(u,e))},writePB:(u,l)=>{c.writeLP(l.encode(u))},pb:u=>({read:async()=>await c.readPB(u),write:l=>{c.writePB(l,u)},unwrap:()=>c}),unwrap:()=>{const u=t.source;return t.source=async function*(){yield*o,yield*u}(),t}};return c}function pair(){const t=pDefer$1();let e=!1;return{sink:async n=>{if(e)throw new Error("already piped");e=!0,t.resolve(n)},source:async function*(){yield*await t.promise}()}}function duplexPair(){const t=pair(),e=pair();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}var hkdf={},hmac$1={},hash={};Object.defineProperty(hash,"__esModule",{value:!0});function isSerializableHash(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}hash.isSerializableHash=isSerializableHash;var constantTime={};Object.defineProperty(constantTime,"__esModule",{value:!0});function select(t,e,n){return~(t-1)&e|t-1&n}constantTime.select=select;function lessOrEqual(t,e){return(t|0)-(e|0)-1>>>31&1}constantTime.lessOrEqual=lessOrEqual;function compare(t,e){if(t.length!==e.length)return 0;for(var n=0,a=0;a<t.length;a++)n|=t[a]^e[a];return 1&n-1>>>8}constantTime.compare=compare;function equal(t,e){return t.length===0||e.length===0?!1:compare(t,e)!==0}constantTime.equal=equal;var wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:!0});function wipe(t){for(var e=0;e<t.length;e++)t[e]=0;return t}wipe$1.wipe=wipe;Object.defineProperty(hmac$1,"__esModule",{value:!0});var hash_1=hash,constant_time_1=constantTime,wipe_1$4=wipe$1,HMAC=function(){function t(e,n){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var a=new Uint8Array(this.blockSize);n.length>this.blockSize?this._inner.update(n).finish(a).clean():a.set(n);for(var o=0;o<a.length;o++)a[o]^=54;this._inner.update(a);for(var o=0;o<a.length;o++)a[o]^=106;this._outer.update(a),hash_1.isSerializableHash(this._inner)&&hash_1.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),wipe_1$4.wipe(a)}return t.prototype.reset=function(){if(!hash_1.isSerializableHash(this._inner)||!hash_1.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){hash_1.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),hash_1.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!hash_1.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!hash_1.isSerializableHash(this._inner)||!hash_1.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!hash_1.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();hmac$1.HMAC=HMAC;function hmac(t,e,n){var a=new HMAC(t,e);a.update(n);var o=a.digest();return a.clean(),o}hmac$1.hmac=hmac;hmac$1.equal=constant_time_1.equal;Object.defineProperty(hkdf,"__esModule",{value:!0});var hmac_1=hmac$1,wipe_1$3=wipe$1,HKDF=function(){function t(e,n,a,o){a===void 0&&(a=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=o;var c=hmac_1.hmac(this._hash,a,n);this._hmac=new hmac_1.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var n=new Uint8Array(e),a=0;a<n.length;a++)this._bufpos===this._buffer.length&&this._fillBuffer(),n[a]=this._buffer[this._bufpos++];return n},t.prototype.clean=function(){this._hmac.clean(),wipe_1$3.wipe(this._buffer),wipe_1$3.wipe(this._counter),this._bufpos=0},t}(),HKDF_1=hkdf.HKDF=HKDF,x25519={},random={},system={},browser$1={};Object.defineProperty(browser$1,"__esModule",{value:!0});browser$1.BrowserRandomSource=void 0;const QUOTA=65536;class BrowserRandomSource{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const n=new Uint8Array(e);for(let a=0;a<n.length;a+=QUOTA)this._crypto.getRandomValues(n.subarray(a,a+Math.min(n.length-a,QUOTA)));return n}}browser$1.BrowserRandomSource=BrowserRandomSource;var node={};Object.defineProperty(node,"__esModule",{value:!0});node.NodeRandomSource=void 0;const wipe_1$2=wipe$1;class NodeRandomSource{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof commonjsRequire$1<"u"){const e=requireCryptoBrowserify();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let n=this._crypto.randomBytes(e);if(n.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const a=new Uint8Array(e);for(let o=0;o<a.length;o++)a[o]=n[o];return(0,wipe_1$2.wipe)(n),a}}node.NodeRandomSource=NodeRandomSource;Object.defineProperty(system,"__esModule",{value:!0});system.SystemRandomSource=void 0;const browser_1=browser$1,node_1=node;class SystemRandomSource{constructor(){if(this.isAvailable=!1,this.name="",this._source=new browser_1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new node_1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}system.SystemRandomSource=SystemRandomSource;var binary={},int={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(l,p){var b=l>>>16&65535,v=l&65535,x=p>>>16&65535,_=p&65535;return v*_+(b*_+v*x<<16>>>0)|0}t.mul=Math.imul||e;function n(l,p){return l+p|0}t.add=n;function a(l,p){return l-p|0}t.sub=a;function o(l,p){return l<<p|l>>>32-p}t.rotl=o;function c(l,p){return l<<32-p|l>>>p}t.rotr=c;function u(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}t.isInteger=Number.isInteger||u,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(l){return t.isInteger(l)&&l>=-t.MAX_SAFE_INTEGER&&l<=t.MAX_SAFE_INTEGER}})(int);Object.defineProperty(binary,"__esModule",{value:!0});var int_1=int;function readInt16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(t,e,n){return e===void 0&&(e=new Uint8Array(2)),n===void 0&&(n=0),e[n+0]=t>>>8,e[n+1]=t>>>0,e}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(t,e,n){return e===void 0&&(e=new Uint8Array(2)),n===void 0&&(n=0),e[n+0]=t>>>0,e[n+1]=t>>>8,e}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}binary.readInt32BE=readInt32BE;function readUint32BE(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}binary.readInt32LE=readInt32LE;function readUint32LE(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE$1(t,e,n){return e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0),e[n+0]=t>>>24,e[n+1]=t>>>16,e[n+2]=t>>>8,e[n+3]=t>>>0,e}binary.writeUint32BE=writeUint32BE$1;binary.writeInt32BE=writeUint32BE$1;function writeUint32LE(t,e,n){return e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0),e[n+0]=t>>>0,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24,e}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE(t,e){e===void 0&&(e=0);var n=readInt32BE(t,e),a=readInt32BE(t,e+4);return n*4294967296+a-(a>>31)*4294967296}binary.readInt64BE=readInt64BE;function readUint64BE(t,e){e===void 0&&(e=0);var n=readUint32BE(t,e),a=readUint32BE(t,e+4);return n*4294967296+a}binary.readUint64BE=readUint64BE;function readInt64LE(t,e){e===void 0&&(e=0);var n=readInt32LE(t,e),a=readInt32LE(t,e+4);return a*4294967296+n-(n>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(t,e){e===void 0&&(e=0);var n=readUint32LE(t,e),a=readUint32LE(t,e+4);return a*4294967296+n}binary.readUint64LE=readUint64LE;function writeUint64BE(t,e,n){return e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0),writeUint32BE$1(t/4294967296>>>0,e,n),writeUint32BE$1(t>>>0,e,n+4),e}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(t,e,n){return e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0),writeUint32LE(t>>>0,e,n),writeUint32LE(t/4294967296>>>0,e,n+4),e}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE(t,e,n){if(n===void 0&&(n=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var a=0,o=1,c=t/8+n-1;c>=n;c--)a+=e[c]*o,o*=256;return a}binary.readUintBE=readUintBE;function readUintLE(t,e,n){if(n===void 0&&(n=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var a=0,o=1,c=n;c<n+t/8;c++)a+=e[c]*o,o*=256;return a}binary.readUintLE=readUintLE;function writeUintBE(t,e,n,a){if(n===void 0&&(n=new Uint8Array(t/8)),a===void 0&&(a=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=t/8+a-1;c>=a;c--)n[c]=e/o&255,o*=256;return n}binary.writeUintBE=writeUintBE;function writeUintLE(t,e,n,a){if(n===void 0&&(n=new Uint8Array(t/8)),a===void 0&&(a=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=a;c<a+t/8;c++)n[c]=e/o&255,o*=256;return n}binary.writeUintLE=writeUintLE;function readFloat32BE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(e)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(e,!0)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(e)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(e,!0)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(t,e,n){e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat32(n,t),e}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(t,e,n){e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat32(n,t,!0),e}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(t,e,n){e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat64(n,t),e}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(t,e,n){e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat64(n,t,!0),e}binary.writeFloat64LE=writeFloat64LE;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=system,n=binary,a=wipe$1;t.defaultRandomSource=new e.SystemRandomSource;function o(b,v=t.defaultRandomSource){return v.randomBytes(b)}t.randomBytes=o;function c(b=t.defaultRandomSource){const v=o(4,b),x=(0,n.readUint32LE)(v);return(0,a.wipe)(v),x}t.randomUint32=c;const u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(b,v=u,x=t.defaultRandomSource){if(v.length<2)throw new Error("randomString charset is too short");if(v.length>256)throw new Error("randomString charset is too long");let _="";const E=v.length,$=256-256%E;for(;b>0;){const S=o(Math.ceil(b*256/$),x);for(let A=0;A<S.length&&b>0;A++){const I=S[A];I<$&&(_+=v.charAt(I%E),b--)}(0,a.wipe)(S)}return _}t.randomString=l;function p(b,v=u,x=t.defaultRandomSource){const _=Math.ceil(b/(Math.log(v.length)/Math.LN2));return l(_,v,x)}t.randomStringForEntropy=p})(random);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=random,n=wipe$1;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function a(U){const G=new Float64Array(16);if(U)for(let J=0;J<U.length;J++)G[J]=U[J];return G}const o=new Uint8Array(32);o[0]=9;const c=a([56129,1]);function u(U){let G=1;for(let J=0;J<16;J++){let k=U[J]+G+65535;G=Math.floor(k/65536),U[J]=k-G*65536}U[0]+=G-1+37*(G-1)}function l(U,G,J){const k=~(J-1);for(let ne=0;ne<16;ne++){const ee=k&(U[ne]^G[ne]);U[ne]^=ee,G[ne]^=ee}}function p(U,G){const J=a(),k=a();for(let ne=0;ne<16;ne++)k[ne]=G[ne];u(k),u(k),u(k);for(let ne=0;ne<2;ne++){J[0]=k[0]-65517;for(let de=1;de<15;de++)J[de]=k[de]-65535-(J[de-1]>>16&1),J[de-1]&=65535;J[15]=k[15]-32767-(J[14]>>16&1);const ee=J[15]>>16&1;J[14]&=65535,l(k,J,1-ee)}for(let ne=0;ne<16;ne++)U[2*ne]=k[ne]&255,U[2*ne+1]=k[ne]>>8}function b(U,G){for(let J=0;J<16;J++)U[J]=G[2*J]+(G[2*J+1]<<8);U[15]&=32767}function v(U,G,J){for(let k=0;k<16;k++)U[k]=G[k]+J[k]}function x(U,G,J){for(let k=0;k<16;k++)U[k]=G[k]-J[k]}function _(U,G,J){let k,ne,ee=0,de=0,ae=0,L=0,P=0,T=0,C=0,q=0,z=0,X=0,W=0,M=0,D=0,B=0,Z=0,he=0,j=0,fe=0,ie=0,oe=0,ce=0,V=0,Q=0,se=0,ye=0,be=0,ve=0,le=0,Y=0,te=0,ue=0,pe=J[0],ge=J[1],me=J[2],we=J[3],xe=J[4],Ee=J[5],$e=J[6],_e=J[7],Te=J[8],Ie=J[9],Se=J[10],Ne=J[11],Le=J[12],Ae=J[13],Me=J[14],Oe=J[15];k=G[0],ee+=k*pe,de+=k*ge,ae+=k*me,L+=k*we,P+=k*xe,T+=k*Ee,C+=k*$e,q+=k*_e,z+=k*Te,X+=k*Ie,W+=k*Se,M+=k*Ne,D+=k*Le,B+=k*Ae,Z+=k*Me,he+=k*Oe,k=G[1],de+=k*pe,ae+=k*ge,L+=k*me,P+=k*we,T+=k*xe,C+=k*Ee,q+=k*$e,z+=k*_e,X+=k*Te,W+=k*Ie,M+=k*Se,D+=k*Ne,B+=k*Le,Z+=k*Ae,he+=k*Me,j+=k*Oe,k=G[2],ae+=k*pe,L+=k*ge,P+=k*me,T+=k*we,C+=k*xe,q+=k*Ee,z+=k*$e,X+=k*_e,W+=k*Te,M+=k*Ie,D+=k*Se,B+=k*Ne,Z+=k*Le,he+=k*Ae,j+=k*Me,fe+=k*Oe,k=G[3],L+=k*pe,P+=k*ge,T+=k*me,C+=k*we,q+=k*xe,z+=k*Ee,X+=k*$e,W+=k*_e,M+=k*Te,D+=k*Ie,B+=k*Se,Z+=k*Ne,he+=k*Le,j+=k*Ae,fe+=k*Me,ie+=k*Oe,k=G[4],P+=k*pe,T+=k*ge,C+=k*me,q+=k*we,z+=k*xe,X+=k*Ee,W+=k*$e,M+=k*_e,D+=k*Te,B+=k*Ie,Z+=k*Se,he+=k*Ne,j+=k*Le,fe+=k*Ae,ie+=k*Me,oe+=k*Oe,k=G[5],T+=k*pe,C+=k*ge,q+=k*me,z+=k*we,X+=k*xe,W+=k*Ee,M+=k*$e,D+=k*_e,B+=k*Te,Z+=k*Ie,he+=k*Se,j+=k*Ne,fe+=k*Le,ie+=k*Ae,oe+=k*Me,ce+=k*Oe,k=G[6],C+=k*pe,q+=k*ge,z+=k*me,X+=k*we,W+=k*xe,M+=k*Ee,D+=k*$e,B+=k*_e,Z+=k*Te,he+=k*Ie,j+=k*Se,fe+=k*Ne,ie+=k*Le,oe+=k*Ae,ce+=k*Me,V+=k*Oe,k=G[7],q+=k*pe,z+=k*ge,X+=k*me,W+=k*we,M+=k*xe,D+=k*Ee,B+=k*$e,Z+=k*_e,he+=k*Te,j+=k*Ie,fe+=k*Se,ie+=k*Ne,oe+=k*Le,ce+=k*Ae,V+=k*Me,Q+=k*Oe,k=G[8],z+=k*pe,X+=k*ge,W+=k*me,M+=k*we,D+=k*xe,B+=k*Ee,Z+=k*$e,he+=k*_e,j+=k*Te,fe+=k*Ie,ie+=k*Se,oe+=k*Ne,ce+=k*Le,V+=k*Ae,Q+=k*Me,se+=k*Oe,k=G[9],X+=k*pe,W+=k*ge,M+=k*me,D+=k*we,B+=k*xe,Z+=k*Ee,he+=k*$e,j+=k*_e,fe+=k*Te,ie+=k*Ie,oe+=k*Se,ce+=k*Ne,V+=k*Le,Q+=k*Ae,se+=k*Me,ye+=k*Oe,k=G[10],W+=k*pe,M+=k*ge,D+=k*me,B+=k*we,Z+=k*xe,he+=k*Ee,j+=k*$e,fe+=k*_e,ie+=k*Te,oe+=k*Ie,ce+=k*Se,V+=k*Ne,Q+=k*Le,se+=k*Ae,ye+=k*Me,be+=k*Oe,k=G[11],M+=k*pe,D+=k*ge,B+=k*me,Z+=k*we,he+=k*xe,j+=k*Ee,fe+=k*$e,ie+=k*_e,oe+=k*Te,ce+=k*Ie,V+=k*Se,Q+=k*Ne,se+=k*Le,ye+=k*Ae,be+=k*Me,ve+=k*Oe,k=G[12],D+=k*pe,B+=k*ge,Z+=k*me,he+=k*we,j+=k*xe,fe+=k*Ee,ie+=k*$e,oe+=k*_e,ce+=k*Te,V+=k*Ie,Q+=k*Se,se+=k*Ne,ye+=k*Le,be+=k*Ae,ve+=k*Me,le+=k*Oe,k=G[13],B+=k*pe,Z+=k*ge,he+=k*me,j+=k*we,fe+=k*xe,ie+=k*Ee,oe+=k*$e,ce+=k*_e,V+=k*Te,Q+=k*Ie,se+=k*Se,ye+=k*Ne,be+=k*Le,ve+=k*Ae,le+=k*Me,Y+=k*Oe,k=G[14],Z+=k*pe,he+=k*ge,j+=k*me,fe+=k*we,ie+=k*xe,oe+=k*Ee,ce+=k*$e,V+=k*_e,Q+=k*Te,se+=k*Ie,ye+=k*Se,be+=k*Ne,ve+=k*Le,le+=k*Ae,Y+=k*Me,te+=k*Oe,k=G[15],he+=k*pe,j+=k*ge,fe+=k*me,ie+=k*we,oe+=k*xe,ce+=k*Ee,V+=k*$e,Q+=k*_e,se+=k*Te,ye+=k*Ie,be+=k*Se,ve+=k*Ne,le+=k*Le,Y+=k*Ae,te+=k*Me,ue+=k*Oe,ee+=38*j,de+=38*fe,ae+=38*ie,L+=38*oe,P+=38*ce,T+=38*V,C+=38*Q,q+=38*se,z+=38*ye,X+=38*be,W+=38*ve,M+=38*le,D+=38*Y,B+=38*te,Z+=38*ue,ne=1,k=ee+ne+65535,ne=Math.floor(k/65536),ee=k-ne*65536,k=de+ne+65535,ne=Math.floor(k/65536),de=k-ne*65536,k=ae+ne+65535,ne=Math.floor(k/65536),ae=k-ne*65536,k=L+ne+65535,ne=Math.floor(k/65536),L=k-ne*65536,k=P+ne+65535,ne=Math.floor(k/65536),P=k-ne*65536,k=T+ne+65535,ne=Math.floor(k/65536),T=k-ne*65536,k=C+ne+65535,ne=Math.floor(k/65536),C=k-ne*65536,k=q+ne+65535,ne=Math.floor(k/65536),q=k-ne*65536,k=z+ne+65535,ne=Math.floor(k/65536),z=k-ne*65536,k=X+ne+65535,ne=Math.floor(k/65536),X=k-ne*65536,k=W+ne+65535,ne=Math.floor(k/65536),W=k-ne*65536,k=M+ne+65535,ne=Math.floor(k/65536),M=k-ne*65536,k=D+ne+65535,ne=Math.floor(k/65536),D=k-ne*65536,k=B+ne+65535,ne=Math.floor(k/65536),B=k-ne*65536,k=Z+ne+65535,ne=Math.floor(k/65536),Z=k-ne*65536,k=he+ne+65535,ne=Math.floor(k/65536),he=k-ne*65536,ee+=ne-1+37*(ne-1),ne=1,k=ee+ne+65535,ne=Math.floor(k/65536),ee=k-ne*65536,k=de+ne+65535,ne=Math.floor(k/65536),de=k-ne*65536,k=ae+ne+65535,ne=Math.floor(k/65536),ae=k-ne*65536,k=L+ne+65535,ne=Math.floor(k/65536),L=k-ne*65536,k=P+ne+65535,ne=Math.floor(k/65536),P=k-ne*65536,k=T+ne+65535,ne=Math.floor(k/65536),T=k-ne*65536,k=C+ne+65535,ne=Math.floor(k/65536),C=k-ne*65536,k=q+ne+65535,ne=Math.floor(k/65536),q=k-ne*65536,k=z+ne+65535,ne=Math.floor(k/65536),z=k-ne*65536,k=X+ne+65535,ne=Math.floor(k/65536),X=k-ne*65536,k=W+ne+65535,ne=Math.floor(k/65536),W=k-ne*65536,k=M+ne+65535,ne=Math.floor(k/65536),M=k-ne*65536,k=D+ne+65535,ne=Math.floor(k/65536),D=k-ne*65536,k=B+ne+65535,ne=Math.floor(k/65536),B=k-ne*65536,k=Z+ne+65535,ne=Math.floor(k/65536),Z=k-ne*65536,k=he+ne+65535,ne=Math.floor(k/65536),he=k-ne*65536,ee+=ne-1+37*(ne-1),U[0]=ee,U[1]=de,U[2]=ae,U[3]=L,U[4]=P,U[5]=T,U[6]=C,U[7]=q,U[8]=z,U[9]=X,U[10]=W,U[11]=M,U[12]=D,U[13]=B,U[14]=Z,U[15]=he}function E(U,G){_(U,G,G)}function $(U,G){const J=a();for(let k=0;k<16;k++)J[k]=G[k];for(let k=253;k>=0;k--)E(J,J),k!==2&&k!==4&&_(J,J,G);for(let k=0;k<16;k++)U[k]=J[k]}function S(U,G){const J=new Uint8Array(32),k=new Float64Array(80),ne=a(),ee=a(),de=a(),ae=a(),L=a(),P=a();for(let z=0;z<31;z++)J[z]=U[z];J[31]=U[31]&127|64,J[0]&=248,b(k,G);for(let z=0;z<16;z++)ee[z]=k[z];ne[0]=ae[0]=1;for(let z=254;z>=0;--z){const X=J[z>>>3]>>>(z&7)&1;l(ne,ee,X),l(de,ae,X),v(L,ne,de),x(ne,ne,de),v(de,ee,ae),x(ee,ee,ae),E(ae,L),E(P,ne),_(ne,de,ne),_(de,ee,L),v(L,ne,de),x(ne,ne,de),E(ee,ne),x(de,ae,P),_(ne,de,c),v(ne,ne,ae),_(de,de,ne),_(ne,ae,P),_(ae,ee,k),E(ee,L),l(ne,ee,X),l(de,ae,X)}for(let z=0;z<16;z++)k[z+16]=ne[z],k[z+32]=de[z],k[z+48]=ee[z],k[z+64]=ae[z];const T=k.subarray(32),C=k.subarray(16);$(T,T),_(C,C,T);const q=new Uint8Array(32);return p(q,C),q}t.scalarMult=S;function A(U){return S(U,o)}t.scalarMultBase=A;function I(U){if(U.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const G=new Uint8Array(U);return{publicKey:A(G),secretKey:G}}t.generateKeyPairFromSeed=I;function O(U){const G=(0,e.randomBytes)(32,U),J=I(G);return(0,n.wipe)(G),J}t.generateKeyPair=O;function F(U,G,J=!1){if(U.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(G.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const k=S(U,G);if(J){let ne=0;for(let ee=0;ee<k.length;ee++)ne|=k[ee];if(ne===0)throw new Error("X25519: invalid shared key")}return k}t.sharedKey=F})(x25519);var sha256$2={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=binary,n=wipe$1;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var a=function(){function l(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},l.prototype.update=function(p,b){if(b===void 0&&(b=p.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var v=0;if(this._bytesHashed+=b,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&b>0;)this._buffer[this._bufferLength++]=p[v++],b--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(b>=this.blockSize&&(v=c(this._temp,this._state,p,v,b),b%=this.blockSize);b>0;)this._buffer[this._bufferLength++]=p[v++],b--;return this},l.prototype.finish=function(p){if(!this._finished){var b=this._bytesHashed,v=this._bufferLength,x=b/536870912|0,_=b<<3,E=b%64<56?64:128;this._buffer[v]=128;for(var $=v+1;$<E-8;$++)this._buffer[$]=0;e.writeUint32BE(x,this._buffer,E-8),e.writeUint32BE(_,this._buffer,E-4),c(this._temp,this._state,this._buffer,0,E),this._finished=!0}for(var $=0;$<this.digestLength/4;$++)e.writeUint32BE(this._state[$],p,$*4);return this},l.prototype.digest=function(){var p=new Uint8Array(this.digestLength);return this.finish(p),p},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(p){return this._state.set(p.state),this._bufferLength=p.bufferLength,p.buffer&&this._buffer.set(p.buffer),this._bytesHashed=p.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(p){n.wipe(p.state),p.buffer&&n.wipe(p.buffer),p.bufferLength=0,p.bytesHashed=0},l}();t.SHA256=a;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(l,p,b,v,x){for(;x>=64;){for(var _=p[0],E=p[1],$=p[2],S=p[3],A=p[4],I=p[5],O=p[6],F=p[7],U=0;U<16;U++){var G=v+U*4;l[U]=e.readUint32BE(b,G)}for(var U=16;U<64;U++){var J=l[U-2],k=(J>>>17|J<<32-17)^(J>>>19|J<<32-19)^J>>>10;J=l[U-15];var ne=(J>>>7|J<<32-7)^(J>>>18|J<<32-18)^J>>>3;l[U]=(k+l[U-7]|0)+(ne+l[U-16]|0)}for(var U=0;U<64;U++){var k=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&I^~A&O)|0)+(F+(o[U]+l[U]|0)|0)|0,ne=((_>>>2|_<<32-2)^(_>>>13|_<<32-13)^(_>>>22|_<<32-22))+(_&E^_&$^E&$)|0;F=O,O=I,I=A,A=S+k|0,S=$,$=E,E=_,_=k+ne|0}p[0]+=_,p[1]+=E,p[2]+=$,p[3]+=S,p[4]+=A,p[5]+=I,p[6]+=O,p[7]+=F,v+=64,x-=64}return v}function u(l){var p=new a;p.update(l);var b=p.digest();return p.clean(),b}t.hash=u})(sha256$2);var chacha20poly1305={},chacha={};Object.defineProperty(chacha,"__esModule",{value:!0});var binary_1$1=binary,wipe_1$1=wipe$1,ROUNDS$1=20;function core(t,e,n){for(var a=1634760805,o=857760878,c=2036477234,u=1797285236,l=n[3]<<24|n[2]<<16|n[1]<<8|n[0],p=n[7]<<24|n[6]<<16|n[5]<<8|n[4],b=n[11]<<24|n[10]<<16|n[9]<<8|n[8],v=n[15]<<24|n[14]<<16|n[13]<<8|n[12],x=n[19]<<24|n[18]<<16|n[17]<<8|n[16],_=n[23]<<24|n[22]<<16|n[21]<<8|n[20],E=n[27]<<24|n[26]<<16|n[25]<<8|n[24],$=n[31]<<24|n[30]<<16|n[29]<<8|n[28],S=e[3]<<24|e[2]<<16|e[1]<<8|e[0],A=e[7]<<24|e[6]<<16|e[5]<<8|e[4],I=e[11]<<24|e[10]<<16|e[9]<<8|e[8],O=e[15]<<24|e[14]<<16|e[13]<<8|e[12],F=a,U=o,G=c,J=u,k=l,ne=p,ee=b,de=v,ae=x,L=_,P=E,T=$,C=S,q=A,z=I,X=O,W=0;W<ROUNDS$1;W+=2)F=F+k|0,C^=F,C=C>>>32-16|C<<16,ae=ae+C|0,k^=ae,k=k>>>32-12|k<<12,U=U+ne|0,q^=U,q=q>>>32-16|q<<16,L=L+q|0,ne^=L,ne=ne>>>32-12|ne<<12,G=G+ee|0,z^=G,z=z>>>32-16|z<<16,P=P+z|0,ee^=P,ee=ee>>>32-12|ee<<12,J=J+de|0,X^=J,X=X>>>32-16|X<<16,T=T+X|0,de^=T,de=de>>>32-12|de<<12,G=G+ee|0,z^=G,z=z>>>32-8|z<<8,P=P+z|0,ee^=P,ee=ee>>>32-7|ee<<7,J=J+de|0,X^=J,X=X>>>32-8|X<<8,T=T+X|0,de^=T,de=de>>>32-7|de<<7,U=U+ne|0,q^=U,q=q>>>32-8|q<<8,L=L+q|0,ne^=L,ne=ne>>>32-7|ne<<7,F=F+k|0,C^=F,C=C>>>32-8|C<<8,ae=ae+C|0,k^=ae,k=k>>>32-7|k<<7,F=F+ne|0,X^=F,X=X>>>32-16|X<<16,P=P+X|0,ne^=P,ne=ne>>>32-12|ne<<12,U=U+ee|0,C^=U,C=C>>>32-16|C<<16,T=T+C|0,ee^=T,ee=ee>>>32-12|ee<<12,G=G+de|0,q^=G,q=q>>>32-16|q<<16,ae=ae+q|0,de^=ae,de=de>>>32-12|de<<12,J=J+k|0,z^=J,z=z>>>32-16|z<<16,L=L+z|0,k^=L,k=k>>>32-12|k<<12,G=G+de|0,q^=G,q=q>>>32-8|q<<8,ae=ae+q|0,de^=ae,de=de>>>32-7|de<<7,J=J+k|0,z^=J,z=z>>>32-8|z<<8,L=L+z|0,k^=L,k=k>>>32-7|k<<7,U=U+ee|0,C^=U,C=C>>>32-8|C<<8,T=T+C|0,ee^=T,ee=ee>>>32-7|ee<<7,F=F+ne|0,X^=F,X=X>>>32-8|X<<8,P=P+X|0,ne^=P,ne=ne>>>32-7|ne<<7;binary_1$1.writeUint32LE(F+a|0,t,0),binary_1$1.writeUint32LE(U+o|0,t,4),binary_1$1.writeUint32LE(G+c|0,t,8),binary_1$1.writeUint32LE(J+u|0,t,12),binary_1$1.writeUint32LE(k+l|0,t,16),binary_1$1.writeUint32LE(ne+p|0,t,20),binary_1$1.writeUint32LE(ee+b|0,t,24),binary_1$1.writeUint32LE(de+v|0,t,28),binary_1$1.writeUint32LE(ae+x|0,t,32),binary_1$1.writeUint32LE(L+_|0,t,36),binary_1$1.writeUint32LE(P+E|0,t,40),binary_1$1.writeUint32LE(T+$|0,t,44),binary_1$1.writeUint32LE(C+S|0,t,48),binary_1$1.writeUint32LE(q+A|0,t,52),binary_1$1.writeUint32LE(z+I|0,t,56),binary_1$1.writeUint32LE(X+O|0,t,60)}function streamXOR$1(t,e,n,a,o){if(o===void 0&&(o=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(a.length<n.length)throw new Error("ChaCha: destination is shorter than source");var c,u;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),u=c.length-e.length,c.set(e,u)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,u=o}for(var l=new Uint8Array(64),p=0;p<n.length;p+=64){core(l,c,t);for(var b=p;b<p+64&&b<n.length;b++)a[b]=n[b]^l[b-p];incrementCounter(c,0,u)}return wipe_1$1.wipe(l),o===0&&wipe_1$1.wipe(c),a}chacha.streamXOR=streamXOR$1;function stream$1(t,e,n,a){return a===void 0&&(a=0),wipe_1$1.wipe(n),streamXOR$1(t,e,n,n,a)}chacha.stream=stream$1;function incrementCounter(t,e,n){for(var a=1;n--;)a=a+(t[e]&255)|0,t[e]=a&255,a>>>=8,e++;if(a>0)throw new Error("ChaCha: counter overflow")}var poly1305={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=constantTime,n=wipe$1;t.DIGEST_LENGTH=16;var a=function(){function u(l){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var p=l[0]|l[1]<<8;this._r[0]=p&8191;var b=l[2]|l[3]<<8;this._r[1]=(p>>>13|b<<3)&8191;var v=l[4]|l[5]<<8;this._r[2]=(b>>>10|v<<6)&7939;var x=l[6]|l[7]<<8;this._r[3]=(v>>>7|x<<9)&8191;var _=l[8]|l[9]<<8;this._r[4]=(x>>>4|_<<12)&255,this._r[5]=_>>>1&8190;var E=l[10]|l[11]<<8;this._r[6]=(_>>>14|E<<2)&8191;var $=l[12]|l[13]<<8;this._r[7]=(E>>>11|$<<5)&8065;var S=l[14]|l[15]<<8;this._r[8]=($>>>8|S<<8)&8191,this._r[9]=S>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return u.prototype._blocks=function(l,p,b){for(var v=this._fin?0:2048,x=this._h[0],_=this._h[1],E=this._h[2],$=this._h[3],S=this._h[4],A=this._h[5],I=this._h[6],O=this._h[7],F=this._h[8],U=this._h[9],G=this._r[0],J=this._r[1],k=this._r[2],ne=this._r[3],ee=this._r[4],de=this._r[5],ae=this._r[6],L=this._r[7],P=this._r[8],T=this._r[9];b>=16;){var C=l[p+0]|l[p+1]<<8;x+=C&8191;var q=l[p+2]|l[p+3]<<8;_+=(C>>>13|q<<3)&8191;var z=l[p+4]|l[p+5]<<8;E+=(q>>>10|z<<6)&8191;var X=l[p+6]|l[p+7]<<8;$+=(z>>>7|X<<9)&8191;var W=l[p+8]|l[p+9]<<8;S+=(X>>>4|W<<12)&8191,A+=W>>>1&8191;var M=l[p+10]|l[p+11]<<8;I+=(W>>>14|M<<2)&8191;var D=l[p+12]|l[p+13]<<8;O+=(M>>>11|D<<5)&8191;var B=l[p+14]|l[p+15]<<8;F+=(D>>>8|B<<8)&8191,U+=B>>>5|v;var Z=0,he=Z;he+=x*G,he+=_*(5*T),he+=E*(5*P),he+=$*(5*L),he+=S*(5*ae),Z=he>>>13,he&=8191,he+=A*(5*de),he+=I*(5*ee),he+=O*(5*ne),he+=F*(5*k),he+=U*(5*J),Z+=he>>>13,he&=8191;var j=Z;j+=x*J,j+=_*G,j+=E*(5*T),j+=$*(5*P),j+=S*(5*L),Z=j>>>13,j&=8191,j+=A*(5*ae),j+=I*(5*de),j+=O*(5*ee),j+=F*(5*ne),j+=U*(5*k),Z+=j>>>13,j&=8191;var fe=Z;fe+=x*k,fe+=_*J,fe+=E*G,fe+=$*(5*T),fe+=S*(5*P),Z=fe>>>13,fe&=8191,fe+=A*(5*L),fe+=I*(5*ae),fe+=O*(5*de),fe+=F*(5*ee),fe+=U*(5*ne),Z+=fe>>>13,fe&=8191;var ie=Z;ie+=x*ne,ie+=_*k,ie+=E*J,ie+=$*G,ie+=S*(5*T),Z=ie>>>13,ie&=8191,ie+=A*(5*P),ie+=I*(5*L),ie+=O*(5*ae),ie+=F*(5*de),ie+=U*(5*ee),Z+=ie>>>13,ie&=8191;var oe=Z;oe+=x*ee,oe+=_*ne,oe+=E*k,oe+=$*J,oe+=S*G,Z=oe>>>13,oe&=8191,oe+=A*(5*T),oe+=I*(5*P),oe+=O*(5*L),oe+=F*(5*ae),oe+=U*(5*de),Z+=oe>>>13,oe&=8191;var ce=Z;ce+=x*de,ce+=_*ee,ce+=E*ne,ce+=$*k,ce+=S*J,Z=ce>>>13,ce&=8191,ce+=A*G,ce+=I*(5*T),ce+=O*(5*P),ce+=F*(5*L),ce+=U*(5*ae),Z+=ce>>>13,ce&=8191;var V=Z;V+=x*ae,V+=_*de,V+=E*ee,V+=$*ne,V+=S*k,Z=V>>>13,V&=8191,V+=A*J,V+=I*G,V+=O*(5*T),V+=F*(5*P),V+=U*(5*L),Z+=V>>>13,V&=8191;var Q=Z;Q+=x*L,Q+=_*ae,Q+=E*de,Q+=$*ee,Q+=S*ne,Z=Q>>>13,Q&=8191,Q+=A*k,Q+=I*J,Q+=O*G,Q+=F*(5*T),Q+=U*(5*P),Z+=Q>>>13,Q&=8191;var se=Z;se+=x*P,se+=_*L,se+=E*ae,se+=$*de,se+=S*ee,Z=se>>>13,se&=8191,se+=A*ne,se+=I*k,se+=O*J,se+=F*G,se+=U*(5*T),Z+=se>>>13,se&=8191;var ye=Z;ye+=x*T,ye+=_*P,ye+=E*L,ye+=$*ae,ye+=S*de,Z=ye>>>13,ye&=8191,ye+=A*ee,ye+=I*ne,ye+=O*k,ye+=F*J,ye+=U*G,Z+=ye>>>13,ye&=8191,Z=(Z<<2)+Z|0,Z=Z+he|0,he=Z&8191,Z=Z>>>13,j+=Z,x=he,_=j,E=fe,$=ie,S=oe,A=ce,I=V,O=Q,F=se,U=ye,p+=16,b-=16}this._h[0]=x,this._h[1]=_,this._h[2]=E,this._h[3]=$,this._h[4]=S,this._h[5]=A,this._h[6]=I,this._h[7]=O,this._h[8]=F,this._h[9]=U},u.prototype.finish=function(l,p){p===void 0&&(p=0);var b=new Uint16Array(10),v,x,_,E;if(this._leftover){for(E=this._leftover,this._buffer[E++]=1;E<16;E++)this._buffer[E]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(v=this._h[1]>>>13,this._h[1]&=8191,E=2;E<10;E++)this._h[E]+=v,v=this._h[E]>>>13,this._h[E]&=8191;for(this._h[0]+=v*5,v=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=v,v=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=v,b[0]=this._h[0]+5,v=b[0]>>>13,b[0]&=8191,E=1;E<10;E++)b[E]=this._h[E]+v,v=b[E]>>>13,b[E]&=8191;for(b[9]-=8192,x=(v^1)-1,E=0;E<10;E++)b[E]&=x;for(x=~x,E=0;E<10;E++)this._h[E]=this._h[E]&x|b[E];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,_=this._h[0]+this._pad[0],this._h[0]=_&65535,E=1;E<8;E++)_=(this._h[E]+this._pad[E]|0)+(_>>>16)|0,this._h[E]=_&65535;return l[p+0]=this._h[0]>>>0,l[p+1]=this._h[0]>>>8,l[p+2]=this._h[1]>>>0,l[p+3]=this._h[1]>>>8,l[p+4]=this._h[2]>>>0,l[p+5]=this._h[2]>>>8,l[p+6]=this._h[3]>>>0,l[p+7]=this._h[3]>>>8,l[p+8]=this._h[4]>>>0,l[p+9]=this._h[4]>>>8,l[p+10]=this._h[5]>>>0,l[p+11]=this._h[5]>>>8,l[p+12]=this._h[6]>>>0,l[p+13]=this._h[6]>>>8,l[p+14]=this._h[7]>>>0,l[p+15]=this._h[7]>>>8,this._finished=!0,this},u.prototype.update=function(l){var p=0,b=l.length,v;if(this._leftover){v=16-this._leftover,v>b&&(v=b);for(var x=0;x<v;x++)this._buffer[this._leftover+x]=l[p+x];if(b-=v,p+=v,this._leftover+=v,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(b>=16&&(v=b-b%16,this._blocks(l,p,v),p+=v,b-=v),b){for(var x=0;x<b;x++)this._buffer[this._leftover+x]=l[p+x];this._leftover+=b}return this},u.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},u.prototype.clean=function(){return n.wipe(this._buffer),n.wipe(this._r),n.wipe(this._h),n.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},u}();t.Poly1305=a;function o(u,l){var p=new a(u);p.update(l);var b=p.digest();return p.clean(),b}t.oneTimeAuth=o;function c(u,l){return u.length!==t.DIGEST_LENGTH||l.length!==t.DIGEST_LENGTH?!1:e.equal(u,l)}t.equal=c})(poly1305);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=chacha,n=poly1305,a=wipe$1,o=binary,c=constantTime;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var u=new Uint8Array(16),l=function(){function p(b){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,b.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(b)}return p.prototype.seal=function(b,v,x,_){if(b.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var E=new Uint8Array(16);E.set(b,E.length-b.length);var $=new Uint8Array(32);e.stream(this._key,E,$,4);var S=v.length+this.tagLength,A;if(_){if(_.length!==S)throw new Error("ChaCha20Poly1305: incorrect destination length");A=_}else A=new Uint8Array(S);return e.streamXOR(this._key,E,v,A,4),this._authenticate(A.subarray(A.length-this.tagLength,A.length),$,A.subarray(0,A.length-this.tagLength),x),a.wipe(E),A},p.prototype.open=function(b,v,x,_){if(b.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(v.length<this.tagLength)return null;var E=new Uint8Array(16);E.set(b,E.length-b.length);var $=new Uint8Array(32);e.stream(this._key,E,$,4);var S=new Uint8Array(this.tagLength);if(this._authenticate(S,$,v.subarray(0,v.length-this.tagLength),x),!c.equal(S,v.subarray(v.length-this.tagLength,v.length)))return null;var A=v.length-this.tagLength,I;if(_){if(_.length!==A)throw new Error("ChaCha20Poly1305: incorrect destination length");I=_}else I=new Uint8Array(A);return e.streamXOR(this._key,E,v.subarray(0,v.length-this.tagLength),I,4),a.wipe(E),I},p.prototype.clean=function(){return a.wipe(this._key),this},p.prototype._authenticate=function(b,v,x,_){var E=new n.Poly1305(v);_&&(E.update(_),_.length%16>0&&E.update(u.subarray(_.length%16))),E.update(x),x.length%16>0&&E.update(u.subarray(x.length%16));var $=new Uint8Array(8);_&&o.writeUint64LE(_.length,$),E.update($),o.writeUint64LE(x.length,$),E.update($);for(var S=E.digest(),A=0;A<S.length;A++)b[A]=S[A];E.clean(),a.wipe(S),a.wipe($)},p}();t.ChaCha20Poly1305=l})(chacha20poly1305);var encode_1=encode$2,MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode$2(t,e,n){e=e||[],n=n||0;for(var a=n;t>=INT;)e[n++]=t&255|MSB$1,t/=128;for(;t&MSBALL;)e[n++]=t&255|MSB$1,t>>>=7;return e[n]=t|0,encode$2.bytes=n-a+1,e}var decode$1=read,MSB=128,REST=127;function read(t,a){var n=0,a=a||0,o=0,c=a,u,l=t.length;do{if(c>=l)throw read.bytes=0,new RangeError("Could not decode varint");u=t[c++],n+=o<28?(u&REST)<<o:(u&REST)*Math.pow(2,o),o+=7}while(u>=MSB);return read.bytes=c-a,n}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(t){return t<N1?1:t<N2?2:t<N3?3:t<N4?4:t<N5?5:t<N6?6:t<N7?7:t<N8?8:t<N9?9:10},varint$1={encode:encode_1,decode:decode$1,encodingLength:length};const varint=varint$1;var src$1=t=>{if(!(t instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const e=[];for(;t.length>0;){const n=varint.decode(t);e.push(n),t=t.slice(varint.decode.bytes)}return e};const vd=getDefaultExportFromCjs(src$1);var functionDebounce=debounce;function debounce(t,e,n){var a=null,o=null,c=function(){a&&(clearTimeout(a),o=null,a=null)},u=function(){var p=o;c(),p&&p()},l=function(){if(!e)return t.apply(this,arguments);var p=this,b=arguments,v=n&&!a;if(c(),o=function(){t.apply(p,b)},a=setTimeout(function(){if(a=null,!v){var x=o;return o=null,x()}},e),v)return o()};return l.cancel=c,l.flush=u,l}var movingAverage={exports:{}};(function(t,e){const n=Math.exp;t.exports=function(o){if(typeof o!="number")throw new Error("must provide a timespan to the moving average constructor");if(o<=0)throw new Error("must provide a timespan > 0 to the moving average constructor");let c,u=0,l=0,p=0,b,v={};function x(_,E){return 1-n(-(_-E)/o)}return v.push=function(E,$){if(b){const S=x(E,b),A=$-c,I=S*A;c=S*$+(1-S)*c,u=(1-S)*(u+A*I),l=Math.sqrt(u),p=c+S*A}else c=$;b=E},v.movingAverage=function(){return c},v.variance=function(){return u},v.deviation=function(){return l},v.forecast=function(){return p},v}})(movingAverage);var movingAverageExports=movingAverage.exports;const MovingAverage=getDefaultExportFromCjs(movingAverageExports);function assertPath(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function normalizeStringPosix(t,e){for(var n="",a=0,o=-1,c=0,u,l=0;l<=t.length;++l){if(l<t.length)u=t.charCodeAt(l);else{if(u===47)break;u=47}if(u===47){if(!(o===l-1||c===1))if(o!==l-1&&c===2){if(n.length<2||a!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var p=n.lastIndexOf("/");if(p!==n.length-1){p===-1?(n="",a=0):(n=n.slice(0,p),a=n.length-1-n.lastIndexOf("/")),o=l,c=0;continue}}else if(n.length===2||n.length===1){n="",a=0,o=l,c=0;continue}}e&&(n.length>0?n+="/..":n="..",a=2)}else n.length>0?n+="/"+t.slice(o+1,l):n=t.slice(o+1,l),a=l-o-1;o=l,c=0}else u===46&&c!==-1?++c:c=-1}return n}function _format(t,e){var n=e.dir||e.root,a=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+a:n+t+a:a}var posix={resolve:function t(){for(var e="",n=!1,a,o=arguments.length-1;o>=-1&&!n;o--){var c;o>=0?c=arguments[o]:(a===void 0&&(a=process$1.cwd()),c=a),assertPath(c),c.length!==0&&(e=c+"/"+e,n=c.charCodeAt(0)===47)}return e=normalizeStringPosix(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function t(e){if(assertPath(e),e.length===0)return".";var n=e.charCodeAt(0)===47,a=e.charCodeAt(e.length-1)===47;return e=normalizeStringPosix(e,!n),e.length===0&&!n&&(e="."),e.length>0&&a&&(e+="/"),n?"/"+e:e},isAbsolute:function t(e){return assertPath(e),e.length>0&&e.charCodeAt(0)===47},join:function t(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var a=arguments[n];assertPath(a),a.length>0&&(e===void 0?e=a:e+="/"+a)}return e===void 0?".":posix.normalize(e)},relative:function t(e,n){if(assertPath(e),assertPath(n),e===n||(e=posix.resolve(e),n=posix.resolve(n),e===n))return"";for(var a=1;a<e.length&&e.charCodeAt(a)===47;++a);for(var o=e.length,c=o-a,u=1;u<n.length&&n.charCodeAt(u)===47;++u);for(var l=n.length,p=l-u,b=c<p?c:p,v=-1,x=0;x<=b;++x){if(x===b){if(p>b){if(n.charCodeAt(u+x)===47)return n.slice(u+x+1);if(x===0)return n.slice(u+x)}else c>b&&(e.charCodeAt(a+x)===47?v=x:x===0&&(v=0));break}var _=e.charCodeAt(a+x),E=n.charCodeAt(u+x);if(_!==E)break;_===47&&(v=x)}var $="";for(x=a+v+1;x<=o;++x)(x===o||e.charCodeAt(x)===47)&&($.length===0?$+="..":$+="/..");return $.length>0?$+n.slice(u+v):(u+=v,n.charCodeAt(u)===47&&++u,n.slice(u))},_makeLong:function t(e){return e},dirname:function t(e){if(assertPath(e),e.length===0)return".";for(var n=e.charCodeAt(0),a=n===47,o=-1,c=!0,u=e.length-1;u>=1;--u)if(n=e.charCodeAt(u),n===47){if(!c){o=u;break}}else c=!1;return o===-1?a?"/":".":a&&o===1?"//":e.slice(0,o)},basename:function t(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');assertPath(e);var a=0,o=-1,c=!0,u;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var l=n.length-1,p=-1;for(u=e.length-1;u>=0;--u){var b=e.charCodeAt(u);if(b===47){if(!c){a=u+1;break}}else p===-1&&(c=!1,p=u+1),l>=0&&(b===n.charCodeAt(l)?--l===-1&&(o=u):(l=-1,o=p))}return a===o?o=p:o===-1&&(o=e.length),e.slice(a,o)}else{for(u=e.length-1;u>=0;--u)if(e.charCodeAt(u)===47){if(!c){a=u+1;break}}else o===-1&&(c=!1,o=u+1);return o===-1?"":e.slice(a,o)}},extname:function t(e){assertPath(e);for(var n=-1,a=0,o=-1,c=!0,u=0,l=e.length-1;l>=0;--l){var p=e.charCodeAt(l);if(p===47){if(!c){a=l+1;break}continue}o===-1&&(c=!1,o=l+1),p===46?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return n===-1||o===-1||u===0||u===1&&n===o-1&&n===a+1?"":e.slice(n,o)},format:function t(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return _format("/",e)},parse:function t(e){assertPath(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var a=e.charCodeAt(0),o=a===47,c;o?(n.root="/",c=1):c=0;for(var u=-1,l=0,p=-1,b=!0,v=e.length-1,x=0;v>=c;--v){if(a=e.charCodeAt(v),a===47){if(!b){l=v+1;break}continue}p===-1&&(b=!1,p=v+1),a===46?u===-1?u=v:x!==1&&(x=1):u!==-1&&(x=-1)}return u===-1||p===-1||x===0||x===1&&u===p-1&&u===l+1?p!==-1&&(l===0&&o?n.base=n.name=e.slice(1,p):n.base=n.name=e.slice(l,p)):(l===0&&o?(n.name=e.slice(1,u),n.base=e.slice(1,p)):(n.name=e.slice(l,u),n.base=e.slice(l,p)),n.ext=e.slice(u,p)),l>0?n.dir=e.slice(0,l-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};posix.posix=posix;var pathBrowserify=posix;const path=getDefaultExportFromCjs(pathBrowserify),pEachSeries=async(t,e)=>{let n=0;for(const a of t)if(await e(await a,n++)===pEachSeries.stop)break;return t};pEachSeries.stop=Symbol("pEachSeries.stop");function indentString(t,e=1,n={}){const{indent:a=" ",includeEmptyLines:o=!1}=n;if(typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(e<0)throw new RangeError(`Expected \`count\` to be at least 0, got \`${e}\``);if(typeof a!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof a}\``);if(e===0)return t;const c=o?/^/gm:/^(?!\s*$)/gm;return t.replace(c,a.repeat(e))}var browser={};browser.endianness=function(){return"LE"};browser.hostname=function(){return typeof location<"u"?location.hostname:""};browser.loadavg=function(){return[]};browser.uptime=function(){return 0};browser.freemem=function(){return Number.MAX_VALUE};browser.totalmem=function(){return Number.MAX_VALUE};browser.cpus=function(){return[]};browser.type=function(){return"Browser"};browser.release=function(){return typeof navigator<"u"?navigator.appVersion:""};browser.networkInterfaces=browser.getNetworkInterfaces=function(){return{}};browser.arch=function(){return"javascript"};browser.platform=function(){return"browser"};browser.tmpdir=browser.tmpDir=function(){return"/tmp"};browser.EOL=`
`;browser.homedir=function(){return"/"};function escapeStringRegexp(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const extractPathRegex=/\s+at.*[(\s](.*)\)?/,pathRegex=/^(?:(?:(?:node|node:[\w/]+|(?:(?:node:)?internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)(?:\.js)?:\d+:\d+)|native)/,homeDir=typeof browser.homedir>"u"?"":browser.homedir().replace(/\\/g,"/");function cleanStack(t,{pretty:e=!1,basePath:n}={}){const a=n&&new RegExp(`(at | \\()${escapeStringRegexp(n.replace(/\\/g,"/"))}`,"g");if(typeof t=="string")return t.replace(/\\/g,"/").split(`
`).filter(o=>{const c=o.match(extractPathRegex);if(c===null||!c[1])return!0;const u=c[1];return u.includes(".app/Contents/Resources/electron.asar")||u.includes(".app/Contents/Resources/default_app.asar")||u.includes("node_modules/electron/dist/resources/electron.asar")||u.includes("node_modules/electron/dist/resources/default_app.asar")?!1:!pathRegex.test(u)}).filter(o=>o.trim()!=="").map(o=>(a&&(o=o.replace(a,"$1")),e&&(o=o.replace(extractPathRegex,(c,u)=>c.replace(u,u.replace(homeDir,"~")))),o)).join(`
`)}const cleanInternalStack=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");var Pt,Ut;let AggregateError$1=(Ut=class extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);n=n.map(o=>o instanceof Error?o:o!==null&&typeof o=="object"?Object.assign(new Error(o.message),o):new Error(o));let a=n.map(o=>typeof o.stack=="string"&&o.stack.length>0?cleanInternalStack(cleanStack(o.stack)):String(o)).join(`
`);a=`
`+indentString(a,4);super(a);kt(this,Pt,void 0);Bt(this,"name","AggregateError");ht(this,Pt,n)}get errors(){return pt(this,Pt).slice()}},Pt=new WeakMap,Ut);class AbortError extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const getDOMException=t=>globalThis.DOMException===void 0?new AbortError(t):new DOMException(t),getAbortedReason=t=>{const e=t.reason===void 0?getDOMException("This operation was aborted."):t.reason;return e instanceof Error?e:getDOMException(e)};async function pMap$2(t,e,{concurrency:n=Number.POSITIVE_INFINITY,stopOnError:a=!0,signal:o}={}){return new Promise((c,u)=>{if(t[Symbol.iterator]===void 0&&t[Symbol.asyncIterator]===void 0)throw new TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof t})`);if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(n)||n===Number.POSITIVE_INFINITY)&&n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);const l=[],p=[],b=new Map;let v=!1,x=!1,_=!1,E=0,$=0;const S=t[Symbol.iterator]===void 0?t[Symbol.asyncIterator]():t[Symbol.iterator](),A=O=>{v=!0,x=!0,u(O)};o&&(o.aborted&&A(getAbortedReason(o)),o.addEventListener("abort",()=>{A(getAbortedReason(o))}));const I=async()=>{if(x)return;const O=await S.next(),F=$;if($++,O.done){if(_=!0,E===0&&!x){if(!a&&p.length>0){A(new AggregateError$1(p));return}if(x=!0,b.size===0){c(l);return}const U=[];for(const[G,J]of l.entries())b.get(G)!==pMapSkip&&U.push(J);c(U)}return}E++,(async()=>{try{const U=await O.value;if(x)return;const G=await e(U,F);G===pMapSkip&&b.set(F,G),l[F]=G,E--,await I()}catch(U){if(a)A(U);else{p.push(U),E--;try{await I()}catch(G){A(G)}}}})()};(async()=>{for(let O=0;O<n;O++){try{await I()}catch(F){A(F);break}if(_||v)break}})()})}const pMapSkip=Symbol("skip");var defaults={space:"",cycles:!1,replacer:(t,e)=>e,stringify:JSON.stringify},util={isArray:Array.isArray,assign:Object.assign,isObject:t=>typeof t=="object",isFunction:t=>typeof t=="function",isBoolean:t=>typeof t=="boolean",isRegex:t=>t instanceof RegExp,keys:Object.keys};const DEFAULTS=defaults,isFunction=util.isFunction,isBoolean=util.isBoolean,isObject=util.isObject,isArray=util.isArray,isRegex=util.isRegex,assign=util.assign,keys=util.keys;function serialize$1(t){return t==null?t:isRegex(t)?t.toString():t.toJSON?t.toJSON():t}function stringifyDeterministic(t,e){e=e||assign({},DEFAULTS),isFunction(e)&&(e={compare:e});const n=e.space||DEFAULTS.space,a=isBoolean(e.cycles)?e.cycles:DEFAULTS.cycles,o=e.replacer||DEFAULTS.replacer,c=e.stringify||DEFAULTS.stringify,u=e.compare&&function(p){return function(b){return function(v,x){const _={key:v,value:b[v]},E={key:x,value:b[x]};return p(_,E)}}}(e.compare);a||c(t);const l=[];return function p(b,v,x,_){const E=n?`
`+new Array(_+1).join(n):"",$=n?": ":":";if(x=serialize$1(x),x=o.call(b,v,x),x!==void 0){if(!isObject(x)||x===null)return c(x);if(isArray(x)){const S=[];for(let A=0;A<x.length;A++){const I=p(x,A,x[A],_+1)||c(null);S.push(E+n+I)}return"["+S.join(",")+E+"]"}else{if(a){if(l.indexOf(x)!==-1)return c("[Circular]");l.push(x)}const S=keys(x).sort(u&&u(x)),A=[];for(let I=0;I<S.length;I++){const O=S[I],F=p(x,O,x[O],_+1);if(!F)continue;const U=c(O)+$+F;A.push(E+n+U)}return l.splice(l.indexOf(x),1),"{"+A.join(",")+E+"}"}}}({"":t},"",t,0)}var lib$1=stringifyDeterministic;const stringify=getDefaultExportFromCjs(lib$1);async function pDoWhilst(t,e){const n=await t();if(e(n))return pDoWhilst(t,e)}const require$$0$1=getAugmentedNamespace(fs_),fs=require$$0$1,format$1=util$3.format,EventEmitter=eventsExports.EventEmitter;let isElectronRenderer=process$1.type&&process$1.type==="renderer",isNodejs=!!(!isElectronRenderer&&process$1.version);const LogLevels$1={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"};let GlobalLogLevel=LogLevels$1.DEBUG,GlobalLogfile=null,GlobalEvents=new EventEmitter,Colors={Black:0,Red:1,Green:2,Yellow:3,Blue:4,Magenta:5,Cyan:6,Grey:7,White:9,Default:9};isNodejs||(Colors={Black:"Black",Red:"IndianRed",Green:"LimeGreen",Yellow:"Orange",Blue:"RoyalBlue",Magenta:"Orchid",Cyan:"SkyBlue",Grey:"DimGrey",White:"White",Default:"Black"});const loglevelColors=[Colors.Cyan,Colors.Green,Colors.Yellow,Colors.Red,Colors.Default],defaultOptions={useColors:!0,color:Colors.Default,showTimestamp:!0,useLocalTime:!1,showLevel:!0,filename:GlobalLogfile,appendFile:!0};let Logger$1=class{constructor(e,n){this.category=e;let a={};Object.assign(a,defaultOptions),Object.assign(a,n),this.options=a,this.debug=this.debug.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this)}debug(){this._shouldLog(LogLevels$1.DEBUG)&&this._write(LogLevels$1.DEBUG,format$1.apply(null,arguments))}log(){this._shouldLog(LogLevels$1.DEBUG)&&this.debug.apply(this,arguments)}info(){this._shouldLog(LogLevels$1.INFO)&&this._write(LogLevels$1.INFO,format$1.apply(null,arguments))}warn(){this._shouldLog(LogLevels$1.WARN)&&this._write(LogLevels$1.WARN,format$1.apply(null,arguments))}error(){this._shouldLog(LogLevels$1.ERROR)&&this._write(LogLevels$1.ERROR,format$1.apply(null,arguments))}_write(e,n){(this.options.filename||GlobalLogfile)&&!this.fileWriter&&isNodejs&&(this.fileWriter=fs.openSync(this.options.filename||GlobalLogfile,this.options.appendFile?"a+":"w+"));let a=this._format(e,n),o=this._createLogMessage(e,n),c=this._createLogMessage(e,n,a.timestamp,a.level,a.category,a.text);this.fileWriter&&isNodejs&&fs.writeSync(this.fileWriter,o+`
`,null,"utf-8"),isNodejs||!this.options.useColors?(console.log(c),GlobalEvents.emit("data",this.category,e,n)):e===LogLevels$1.ERROR?this.options.showTimestamp&&this.options.showLevel?console.error(c,a.timestamp,a.level,a.category,a.text):this.options.showTimestamp&&!this.options.showLevel?console.error(c,a.timestamp,a.category,a.text):!this.options.showTimestamp&&this.options.showLevel?console.error(c,a.level,a.category,a.text):console.error(c,a.category,a.text):this.options.showTimestamp&&this.options.showLevel?console.log(c,a.timestamp,a.level,a.category,a.text):this.options.showTimestamp&&!this.options.showLevel?console.log(c,a.timestamp,a.category,a.text):!this.options.showTimestamp&&this.options.showLevel?console.log(c,a.level,a.category,a.text):console.log(c,a.category,a.text)}_format(e,n){let a="",o="",c="",u=": ";if(this.options.useColors){const l=Object.keys(LogLevels$1).map(b=>LogLevels$1[b]).indexOf(e),p=this.options.color;isNodejs?(this.options.showTimestamp&&(a="\x1B[3"+Colors.Grey+"m"),this.options.showLevel&&(o="\x1B[3"+loglevelColors[l]+";22m"),c="\x1B[3"+p+";1m",u="\x1B[0m: "):(this.options.showTimestamp&&(a="color:"+Colors.Grey),this.options.showLevel&&(o="color:"+loglevelColors[l]),c="color:"+p+"; font-weight: bold")}return{timestamp:a,level:o,category:c,text:u}}_createLogMessage(e,n,a,o,c,u){a=a||"",o=o||"",c=c||"",u=u||": ",!isNodejs&&this.options.useColors&&(this.options.showTimestamp&&(a="%c"),this.options.showLevel&&(o="%c"),c="%c",u=": %c");let l="";return this.options.showTimestamp&&!this.options.useLocalTime&&(l+=""+new Date().toISOString()+" "),this.options.showTimestamp&&this.options.useLocalTime&&(l+=""+new Date().toLocaleString()+" "),l=a+l,this.options.showLevel&&(l+=o+"["+e+"]"+(e===LogLevels$1.INFO||e===LogLevels$1.WARN?" ":"")+" "),l+=c+this.category,l+=u+n,l}_shouldLog(e){let n=typeof process$1<"u"&&process$1.env!==void 0&&{}.LOG!==void 0?{}.LOG.toUpperCase():null;n=typeof window<"u"&&window.LOG?window.LOG.toUpperCase():n;const a=n||GlobalLogLevel,o=Object.keys(LogLevels$1).map(l=>LogLevels$1[l]),c=o.indexOf(e),u=o.indexOf(a);return c>=u}};var src={Colors,LogLevels:LogLevels$1,setLogLevel:t=>{GlobalLogLevel=t},setLogfile:t=>{GlobalLogfile=t},create:(t,e)=>new Logger$1(t,e),forceBrowserMode:t=>isNodejs=!t,events:GlobalEvents};const Logger$2=getDefaultExportFromCjs(src),deepEqual=(t,e)=>{const n=Object.getOwnPropertyNames(t),a=Object.getOwnPropertyNames(e);if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++){const c=n[o];if(t[c]!==e[c])return!1}return!0},sum=(t,e)=>t+e;class GCounter{constructor(e,n){this.id=e,this._counters=n||{},this._counters[this.id]=this._counters[this.id]?this._counters[this.id]:0}get value(){return Object.values(this._counters).reduce(sum,0)}increment(e){e&&e<1||(e==null&&(e=1),this._counters[this.id]=this._counters[this.id]+e)}merge(e){Object.entries(e._counters).forEach(([n,a])=>{this._counters[n]=Math.max(this._counters[n]||0,a)})}toJSON(){return{id:this.id,counters:this._counters}}isEqual(e){return GCounter.isEqual(this,e)}static from(e){return new GCounter(e.id,e.counters)}static isEqual(e,n){return e.id!==n.id?!1:deepEqual(e._counters,n._counters)}}var pMap=(t,e,n)=>new Promise((a,o)=>{n=Object.assign({concurrency:1/0},n);const c=n.concurrency;if(c<1)throw new TypeError("Expected `concurrency` to be a number from 1 and up");const u=[],l=t[Symbol.iterator]();let p=!1,b=!1,v=0,x=0;const _=()=>{if(p)return;const E=l.next(),$=x;if(x++,E.done){b=!0,v===0&&a(u);return}v++,Promise.resolve(E.value).then(S=>e(S,$)).then(S=>{u[$]=S,v--,_()},S=>{p=!0,o(S)})};for(let E=0;E<c&&(_(),!b);E++);});const pMap$1=getDefaultExportFromCjs(pMap);var pReduce$1=(t,e,n)=>new Promise((a,o)=>{const c=t[Symbol.iterator]();let u=0;const l=p=>{const b=c.next();if(b.done){a(p);return}Promise.all([p,b.value]).then(v=>{l(e(v[0],v[1],u++))}).catch(o)};l(n)}),dist$1={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=util$3,a=Object.prototype.toString,o=p=>b=>typeof b===p,c=p=>{const b=a.call(p).slice(8,-1);return b||null},u=p=>b=>c(b)===p;function l(p){if(p===null)return"null";if(p===!0||p===!1)return"boolean";const b=typeof p;if(b==="undefined")return"undefined";if(b==="string")return"string";if(b==="number")return"number";if(b==="symbol")return"symbol";if(l.function_(p))return"Function";if(Array.isArray(p))return"Array";if(buffer$2.Buffer.isBuffer(p))return"Buffer";const v=c(p);if(v)return v;if(p instanceof String||p instanceof Boolean||p instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}(function(p){const b=ee=>typeof ee=="object";p.undefined=o("undefined"),p.string=o("string"),p.number=o("number"),p.function_=o("function"),p.null_=ee=>ee===null,p.class_=ee=>p.function_(ee)&&ee.toString().startsWith("class "),p.boolean=ee=>ee===!0||ee===!1,p.symbol=o("symbol"),p.array=Array.isArray,p.buffer=buffer$2.Buffer.isBuffer,p.nullOrUndefined=ee=>p.null_(ee)||p.undefined(ee),p.object=ee=>!p.nullOrUndefined(ee)&&(p.function_(ee)||b(ee)),p.iterable=ee=>!p.nullOrUndefined(ee)&&p.function_(ee[Symbol.iterator]),p.generator=ee=>p.iterable(ee)&&p.function_(ee.next)&&p.function_(ee.throw),p.nativePromise=u("Promise");const v=ee=>!p.null_(ee)&&b(ee)&&p.function_(ee.then)&&p.function_(ee.catch);p.promise=ee=>p.nativePromise(ee)||v(ee);const x=ee=>de=>p.function_(de)&&p.function_(de.constructor)&&de.constructor.name===ee;p.generatorFunction=x("GeneratorFunction"),p.asyncFunction=x("AsyncFunction"),p.boundFunction=ee=>p.function_(ee)&&!ee.hasOwnProperty("prototype"),p.regExp=u("RegExp"),p.date=u("Date"),p.error=u("Error"),p.map=u("Map"),p.set=u("Set"),p.weakMap=u("WeakMap"),p.weakSet=u("WeakSet"),p.int8Array=u("Int8Array"),p.uint8Array=u("Uint8Array"),p.uint8ClampedArray=u("Uint8ClampedArray"),p.int16Array=u("Int16Array"),p.uint16Array=u("Uint16Array"),p.int32Array=u("Int32Array"),p.uint32Array=u("Uint32Array"),p.float32Array=u("Float32Array"),p.float64Array=u("Float64Array"),p.arrayBuffer=u("ArrayBuffer"),p.sharedArrayBuffer=u("SharedArrayBuffer"),p.dataView=u("DataView"),p.directInstanceOf=(ee,de)=>p.object(ee)&&p.object(de)&&Object.getPrototypeOf(ee)===de.prototype,p.truthy=ee=>!!ee,p.falsy=ee=>!ee,p.nan=ee=>Number.isNaN(ee);const _=new Set(["undefined","string","number","boolean","symbol"]);p.primitive=ee=>p.null_(ee)||_.has(typeof ee),p.integer=ee=>Number.isInteger(ee),p.safeInteger=ee=>Number.isSafeInteger(ee),p.plainObject=ee=>{let de;return c(ee)==="Object"&&(de=Object.getPrototypeOf(ee),de===null||de===Object.getPrototypeOf({}))};const E=new Set(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"]);p.typedArray=ee=>{const de=c(ee);return de===null?!1:E.has(de)};const $=ee=>p.safeInteger(ee)&&ee>-1;p.arrayLike=ee=>!p.nullOrUndefined(ee)&&!p.function_(ee)&&$(ee.length),p.inRange=(ee,de)=>{if(p.number(de))return ee>=Math.min(0,de)&&ee<=Math.max(de,0);if(p.array(de)&&de.length===2)return ee>=Math.min.apply(null,de)&&ee<=Math.max.apply(null,de);throw new TypeError(`Invalid range: ${n.inspect(de)}`)};const S=1,A=["innerHTML","ownerDocument","style","attributes","nodeValue"];p.domElement=ee=>p.object(ee)&&ee.nodeType===S&&p.string(ee.nodeName)&&!p.plainObject(ee)&&A.every(de=>de in ee),p.nodeStream=ee=>!p.nullOrUndefined(ee)&&b(ee)&&p.function_(ee.pipe),p.infinite=ee=>ee===1/0||ee===-1/0;const I=ee=>de=>p.integer(de)&&Math.abs(de%2)===ee;p.even=I(0),p.odd=I(1);const O=ee=>p.string(ee)&&/\S/.test(ee)===!1,F=ee=>(p.string(ee)||p.array(ee))&&ee.length===0,U=ee=>!p.map(ee)&&!p.set(ee)&&p.object(ee)&&Object.keys(ee).length===0,G=ee=>(p.map(ee)||p.set(ee))&&ee.size===0;p.empty=ee=>p.falsy(ee)||F(ee)||U(ee)||G(ee),p.emptyOrWhitespace=ee=>p.empty(ee)||O(ee);const J=(ee,de,ae)=>{const L=Array.prototype.slice.call(ae,1);if(p.function_(de)===!1)throw new TypeError(`Invalid predicate: ${n.inspect(de)}`);if(L.length===0)throw new TypeError("Invalid number of values");return ee.call(L,de)};function k(ee){return J(Array.prototype.some,ee,arguments)}p.any=k;function ne(ee){return J(Array.prototype.every,ee,arguments)}p.all=ne})(l||(l={})),Object.defineProperties(l,{class:{value:l.class_},function:{value:l.function_},null:{value:l.null_}}),e.default=l,t.exports=l,t.exports.default=l})(dist$1,dist$1.exports);var distExports=dist$1.exports;const pReduce=pReduce$1,is=distExports;var pSeries=t=>{const e=[];for(const n of t){const a=is(n);if(a!=="Function")return Promise.reject(new TypeError(`Expected task to be a \`Function\`, received \`${a}\``))}return pReduce(t,(n,a)=>Promise.resolve().then(a).then(o=>{e.push(o)})).then(()=>e)};const pSeries$1=getDefaultExportFromCjs(pSeries),errors={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function assert$6(t,e){if(!t)throw new Error(e)}function isUint8Array(t,e,n){if(assert$6(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),n!==void 0)if(Array.isArray(n)){const a=n.join(", "),o=`Expected ${t} to be an Uint8Array with length [${a}]`;assert$6(n.includes(e.length),o)}else{const a=`Expected ${t} to be an Uint8Array with length ${n}`;assert$6(e.length===n,a)}}function isCompressed(t){assert$6(toTypeString(t)==="Boolean","Expected compressed to be a Boolean")}function getAssertedOutput(t=n=>new Uint8Array(n),e){return typeof t=="function"&&(t=t(e)),isUint8Array("output",t,e),t}function toTypeString(t){return Object.prototype.toString.call(t).slice(8,-1)}var lib=t=>({contextRandomize(e){switch(assert$6(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&isUint8Array("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(errors.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return isUint8Array("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(isUint8Array("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(errors.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,n){switch(isUint8Array("private key",e,32),isUint8Array("tweak",n,32),t.privateKeyTweakAdd(e,n)){case 0:return e;case 1:throw new Error(errors.TWEAK_ADD)}},privateKeyTweakMul(e,n){switch(isUint8Array("private key",e,32),isUint8Array("tweak",n,32),t.privateKeyTweakMul(e,n)){case 0:return e;case 1:throw new Error(errors.TWEAK_MUL)}},publicKeyVerify(e){return isUint8Array("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,n=!0,a){switch(isUint8Array("private key",e,32),isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyCreate(a,e)){case 0:return a;case 1:throw new Error(errors.SECKEY_INVALID);case 2:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyConvert(e,n=!0,a){switch(isUint8Array("public key",e,[33,65]),isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyConvert(a,e)){case 0:return a;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyNegate(e,n=!0,a){switch(isUint8Array("public key",e,[33,65]),isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyNegate(a,e)){case 0:return a;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.IMPOSSIBLE_CASE);case 3:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyCombine(e,n=!0,a){assert$6(Array.isArray(e),"Expected public keys to be an Array"),assert$6(e.length>0,"Expected public keys array will have more than zero items");for(const o of e)isUint8Array("public key",o,[33,65]);switch(isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyCombine(a,e)){case 0:return a;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.PUBKEY_COMBINE);case 3:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,n,a=!0,o){switch(isUint8Array("public key",e,[33,65]),isUint8Array("tweak",n,32),isCompressed(a),o=getAssertedOutput(o,a?33:65),t.publicKeyTweakAdd(o,e,n)){case 0:return o;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.TWEAK_ADD)}},publicKeyTweakMul(e,n,a=!0,o){switch(isUint8Array("public key",e,[33,65]),isUint8Array("tweak",n,32),isCompressed(a),o=getAssertedOutput(o,a?33:65),t.publicKeyTweakMul(o,e,n)){case 0:return o;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.TWEAK_MUL)}},signatureNormalize(e){switch(isUint8Array("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(errors.SIG_PARSE)}},signatureExport(e,n){isUint8Array("signature",e,64),n=getAssertedOutput(n,72);const a={output:n,outputlen:72};switch(t.signatureExport(a,e)){case 0:return n.slice(0,a.outputlen);case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.IMPOSSIBLE_CASE)}},signatureImport(e,n){switch(isUint8Array("signature",e),n=getAssertedOutput(n,64),t.signatureImport(n,e)){case 0:return n;case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.IMPOSSIBLE_CASE)}},ecdsaSign(e,n,a={},o){isUint8Array("message",e,32),isUint8Array("private key",n,32),assert$6(toTypeString(a)==="Object","Expected options to be an Object"),a.data!==void 0&&isUint8Array("options.data",a.data),a.noncefn!==void 0&&assert$6(toTypeString(a.noncefn)==="Function","Expected options.noncefn to be a Function"),o=getAssertedOutput(o,64);const c={signature:o,recid:null};switch(t.ecdsaSign(c,e,n,a.data,a.noncefn)){case 0:return c;case 1:throw new Error(errors.SIGN);case 2:throw new Error(errors.IMPOSSIBLE_CASE)}},ecdsaVerify(e,n,a){switch(isUint8Array("signature",e,64),isUint8Array("message",n,32),isUint8Array("public key",a,[33,65]),t.ecdsaVerify(e,n,a)){case 0:return!0;case 3:return!1;case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.PUBKEY_PARSE)}},ecdsaRecover(e,n,a,o=!0,c){switch(isUint8Array("signature",e,64),assert$6(toTypeString(n)==="Number"&&n>=0&&n<=3,"Expected recovery id to be a Number within interval [0, 3]"),isUint8Array("message",a,32),isCompressed(o),c=getAssertedOutput(c,o?33:65),t.ecdsaRecover(c,e,n,a)){case 0:return c;case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.RECOVER);case 3:throw new Error(errors.IMPOSSIBLE_CASE)}},ecdh(e,n,a={},o){switch(isUint8Array("public key",e,[33,65]),isUint8Array("private key",n,32),assert$6(toTypeString(a)==="Object","Expected options to be an Object"),a.data!==void 0&&isUint8Array("options.data",a.data),a.hashfn!==void 0?(assert$6(toTypeString(a.hashfn)==="Function","Expected options.hashfn to be a Function"),a.xbuf!==void 0&&isUint8Array("options.xbuf",a.xbuf,32),a.ybuf!==void 0&&isUint8Array("options.ybuf",a.ybuf,32),isUint8Array("output",o)):o=getAssertedOutput(o,32),t.ecdh(o,e,n,a.data,a.hashfn,a.xbuf,a.ybuf)){case 0:return o;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.ECDH)}}});const EC$3=requireElliptic().ec,ec$1=new EC$3("secp256k1"),ecparams=ec$1.curve,BN$2=ecparams.n.constructor;function loadCompressedPublicKey(t,e){let n=new BN$2(e);if(n.cmp(ecparams.p)>=0)return null;n=n.toRed(ecparams.red);let a=n.redSqr().redIMul(n).redIAdd(ecparams.b).redSqrt();return t===3!==a.isOdd()&&(a=a.redNeg()),ec$1.keyPair({pub:{x:n,y:a}})}function loadUncompressedPublicKey(t,e,n){let a=new BN$2(e),o=new BN$2(n);if(a.cmp(ecparams.p)>=0||o.cmp(ecparams.p)>=0||(a=a.toRed(ecparams.red),o=o.toRed(ecparams.red),(t===6||t===7)&&o.isOdd()!==(t===7)))return null;const c=a.redSqr().redIMul(a);return o.redSqr().redISub(c.redIAdd(ecparams.b)).isZero()?ec$1.keyPair({pub:{x:a,y:o}}):null}function loadPublicKey(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:loadCompressedPublicKey(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:loadUncompressedPublicKey(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function savePublicKey(t,e){const n=e.encode(null,t.length===33);for(let a=0;a<t.length;++a)t[a]=n[a]}var elliptic$2={contextRandomize(){return 0},privateKeyVerify(t){const e=new BN$2(t);return e.cmp(ecparams.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new BN$2(t),n=ecparams.n.sub(e).umod(ecparams.n).toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakAdd(t,e){const n=new BN$2(e);if(n.cmp(ecparams.n)>=0||(n.iadd(new BN$2(t)),n.cmp(ecparams.n)>=0&&n.isub(ecparams.n),n.isZero()))return 1;const a=n.toArrayLike(Uint8Array,"be",32);return t.set(a),0},privateKeyTweakMul(t,e){let n=new BN$2(e);if(n.cmp(ecparams.n)>=0||n.isZero())return 1;n.imul(new BN$2(t)),n.cmp(ecparams.n)>=0&&(n=n.umod(ecparams.n));const a=n.toArrayLike(Uint8Array,"be",32);return t.set(a),0},publicKeyVerify(t){return loadPublicKey(t)===null?1:0},publicKeyCreate(t,e){const n=new BN$2(e);if(n.cmp(ecparams.n)>=0||n.isZero())return 1;const a=ec$1.keyFromPrivate(e).getPublic();return savePublicKey(t,a),0},publicKeyConvert(t,e){const n=loadPublicKey(e);if(n===null)return 1;const a=n.getPublic();return savePublicKey(t,a),0},publicKeyNegate(t,e){const n=loadPublicKey(e);if(n===null)return 1;const a=n.getPublic();return a.y=a.y.redNeg(),savePublicKey(t,a),0},publicKeyCombine(t,e){const n=new Array(e.length);for(let o=0;o<e.length;++o)if(n[o]=loadPublicKey(e[o]),n[o]===null)return 1;let a=n[0].getPublic();for(let o=1;o<n.length;++o)a=a.add(n[o].pub);return a.isInfinity()?2:(savePublicKey(t,a),0)},publicKeyTweakAdd(t,e,n){const a=loadPublicKey(e);if(a===null)return 1;if(n=new BN$2(n),n.cmp(ecparams.n)>=0)return 2;const o=a.getPublic().add(ecparams.g.mul(n));return o.isInfinity()?2:(savePublicKey(t,o),0)},publicKeyTweakMul(t,e,n){const a=loadPublicKey(e);if(a===null)return 1;if(n=new BN$2(n),n.cmp(ecparams.n)>=0||n.isZero())return 2;const o=a.getPublic().mul(n);return savePublicKey(t,o),0},signatureNormalize(t){const e=new BN$2(t.subarray(0,32)),n=new BN$2(t.subarray(32,64));return e.cmp(ecparams.n)>=0||n.cmp(ecparams.n)>=0?1:(n.cmp(ec$1.nh)===1&&t.set(ecparams.n.sub(n).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const n=e.subarray(0,32),a=e.subarray(32,64);if(new BN$2(n).cmp(ecparams.n)>=0||new BN$2(a).cmp(ecparams.n)>=0)return 1;const{output:o}=t;let c=o.subarray(4,4+33);c[0]=0,c.set(n,1);let u=33,l=0;for(;u>1&&c[l]===0&&!(c[l+1]&128);--u,++l);if(c=c.subarray(l),c[0]&128||u>1&&c[0]===0&&!(c[1]&128))return 1;let p=o.subarray(6+33,6+33+33);p[0]=0,p.set(a,1);let b=33,v=0;for(;b>1&&p[v]===0&&!(p[v+1]&128);--b,++v);return p=p.subarray(v),p[0]&128||b>1&&p[0]===0&&!(p[1]&128)?1:(t.outputlen=6+u+b,o[0]=48,o[1]=t.outputlen-2,o[2]=2,o[3]=c.length,o.set(c,4),o[4+u]=2,o[5+u]=p.length,o.set(p,6+u),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const n=e[3];if(n===0||5+n>=e.length||e[4+n]!==2)return 1;const a=e[5+n];if(a===0||6+n+a!==e.length||e[4]&128||n>1&&e[4]===0&&!(e[5]&128)||e[n+6]&128||a>1&&e[n+6]===0&&!(e[n+7]&128))return 1;let o=e.subarray(4,4+n);if(o.length===33&&o[0]===0&&(o=o.subarray(1)),o.length>32)return 1;let c=e.subarray(6+n);if(c.length===33&&c[0]===0&&(c=c.slice(1)),c.length>32)throw new Error("S length is too long");let u=new BN$2(o);u.cmp(ecparams.n)>=0&&(u=new BN$2(0));let l=new BN$2(e.subarray(6+n));return l.cmp(ecparams.n)>=0&&(l=new BN$2(0)),t.set(u.toArrayLike(Uint8Array,"be",32),0),t.set(l.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,n,a,o){if(o){const l=o;o=p=>{const b=l(e,n,null,a,p);if(!(b instanceof Uint8Array&&b.length===32))throw new Error("This is the way");return new BN$2(b)}}const c=new BN$2(n);if(c.cmp(ecparams.n)>=0||c.isZero())return 1;let u;try{u=ec$1.sign(e,n,{canonical:!0,k:o,pers:a})}catch{return 1}return t.signature.set(u.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(u.s.toArrayLike(Uint8Array,"be",32),32),t.recid=u.recoveryParam,0},ecdsaVerify(t,e,n){const a={r:t.subarray(0,32),s:t.subarray(32,64)},o=new BN$2(a.r),c=new BN$2(a.s);if(o.cmp(ecparams.n)>=0||c.cmp(ecparams.n)>=0)return 1;if(c.cmp(ec$1.nh)===1||o.isZero()||c.isZero())return 3;const u=loadPublicKey(n);if(u===null)return 2;const l=u.getPublic();return ec$1.verify(e,a,l)?0:3},ecdsaRecover(t,e,n,a){const o={r:e.slice(0,32),s:e.slice(32,64)},c=new BN$2(o.r),u=new BN$2(o.s);if(c.cmp(ecparams.n)>=0||u.cmp(ecparams.n)>=0)return 1;if(c.isZero()||u.isZero())return 2;let l;try{l=ec$1.recoverPubKey(a,o,n)}catch{return 2}return savePublicKey(t,l),0},ecdh(t,e,n,a,o,c,u){const l=loadPublicKey(e);if(l===null)return 1;const p=new BN$2(n);if(p.cmp(ecparams.n)>=0||p.isZero())return 2;const b=l.getPublic().mul(p);if(o===void 0){const v=b.encode(null,!0),x=ec$1.hash().update(v).digest();for(let _=0;_<32;++_)t[_]=x[_]}else{c||(c=new Uint8Array(32));const v=b.getX().toArray("be",32);for(let $=0;$<32;++$)c[$]=v[$];u||(u=new Uint8Array(32));const x=b.getY().toArray("be",32);for(let $=0;$<32;++$)u[$]=x[$];const _=o(c,u,a);if(!(_ instanceof Uint8Array&&_.length===t.length))return 2;t.set(_)}return 0}},elliptic$1=lib(elliptic$2);const secp256k1$1=getDefaultExportFromCjs(elliptic$1);var events=eventsExports,inherits=inherits_browserExports,lru=LRU;function LRU(t){if(!(this instanceof LRU))return new LRU(t);typeof t=="number"&&(t={max:t}),t||(t={}),events.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=t.max||1e3,this.maxAge=t.maxAge||0}inherits(LRU,events.EventEmitter);Object.defineProperty(LRU.prototype,"keys",{get:function(){return Object.keys(this.cache)}});LRU.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};LRU.prototype.remove=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var e=this.cache[t];return delete this.cache[t],this._unlink(t,e.prev,e.next),e.value}};LRU.prototype._unlink=function(t,e,n){this.length--,this.length===0?this.head=this.tail=null:this.head===t?(this.head=e,this.cache[this.head].next=null):this.tail===t?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[e].next=n,this.cache[n].prev=e)};LRU.prototype.peek=function(t){if(this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return e.value}};LRU.prototype.set=function(t,e){typeof t!="string"&&(t=""+t);var n;if(this.cache.hasOwnProperty(t)){if(n=this.cache[t],n.value=e,this.maxAge&&(n.modified=Date.now()),t===this.head)return e;this._unlink(t,n.prev,n.next)}else n={value:e,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[t]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=t),this.head=t,this.tail||(this.tail=t),e};LRU.prototype._checkAge=function(t,e){return this.maxAge&&Date.now()-e.modified>this.maxAge?(this.remove(t),this.emit("evict",{key:t,value:e.value}),!1):!0};LRU.prototype.get=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return this.head!==t&&(t===this.tail?(this.tail=e.next,this.cache[this.tail].prev=null):this.cache[e.prev].next=e.next,this.cache[e.next].prev=e.prev,this.cache[this.head].next=t,e.prev=this.head,e.next=null,this.head=t),e.value}};LRU.prototype.evict=function(){if(this.tail){var t=this.tail,e=this.remove(this.tail);this.emit("evict",{key:t,value:e})}};const LRU$1=getDefaultExportFromCjs(lru);var ellipticExports=requireElliptic();const elliptic=getDefaultExportFromCjs(ellipticExports);function _catch(t,e){try{var n=t()}catch(a){return e(a)}return n&&n.then?n.then(void 0,e):n}function inMemoryCache(){const t=new Map;return function(e,n){try{let o=function(u){if(a)return u;const l=t.get(e.didUrl);return l!==void 0?l:Promise.resolve(n()).then(function(p){var b;return((b=p.didResolutionMetadata)==null?void 0:b.error)!=="notFound"&&t.set(e.didUrl,p),p})},a;const c=function(){if(e.params&&e.params["no-cache"]==="true")return Promise.resolve(n()).then(function(u){return a=1,u})}();return Promise.resolve(c&&c.then?c.then(o):o(c))}catch(a){return Promise.reject(a)}}}function noCache(t,e){return e()}const PCT_ENCODED="(?:%[0-9a-fA-F]{2})",ID_CHAR=`(?:[a-zA-Z0-9._-]|${PCT_ENCODED})`,METHOD="([a-z0-9]+)",METHOD_ID=`((?:${ID_CHAR}*:)*(${ID_CHAR}+))`,PARAM_CHAR="[a-zA-Z0-9_.:%-]",PARAM=`;${PARAM_CHAR}+=${PARAM_CHAR}*`,PARAMS=`((${PARAM})*)`,PATH="(/[^#?]*)?",QUERY="([?][^#]*)?",FRAGMENT="(#.*)?",DID_MATCHER=new RegExp(`^did:${METHOD}:${METHOD_ID}${PARAMS}${PATH}${QUERY}${FRAGMENT}$`);function parse$1(t){if(t===""||!t)return null;const e=t.match(DID_MATCHER);if(e){const n={did:`did:${e[1]}:${e[2]}`,method:e[1],id:e[2],didUrl:t};if(e[4]){const a=e[4].slice(1).split(";");n.params={};for(const o of a){const c=o.split("=");n.params[c[0]]=c[1]}}return e[6]&&(n.path=e[6]),e[7]&&(n.query=e[7].slice(1)),e[8]&&(n.fragment=e[8].slice(1)),n}return null}const EMPTY_RESULT={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function wrapLegacyResolver(t){return function(e,n,a){try{return Promise.resolve(_catch(function(){return Promise.resolve(t(e,n,a)).then(function(o){return{...EMPTY_RESULT,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:o}})},function(o){return{...EMPTY_RESULT,didResolutionMetadata:{error:"notFound",message:o.toString()}}}))}catch(o){return Promise.reject(o)}}}class Resolver{constructor(e={},n={}){this.registry=void 0,this.cache=void 0,this.registry=e,this.cache=n.cache===!0?inMemoryCache():n.cache||noCache,n.legacyResolvers&&Object.keys(n.legacyResolvers).map(a=>{this.registry[a]||(this.registry[a]=wrapLegacyResolver(n.legacyResolvers[a]))})}resolve(e,n={}){try{const a=this,o=parse$1(e);if(o===null)return Promise.resolve({...EMPTY_RESULT,didResolutionMetadata:{error:"invalidDid"}});const c=a.registry[o.method];return c?Promise.resolve(a.cache(o,()=>c(o.did,o,a,n))):Promise.resolve({...EMPTY_RESULT,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(a){return Promise.reject(a)}}}function asUint8Array(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function concat$1(t,e){e||(e=t.reduce((o,c)=>o+c.length,0));const n=allocUnsafe(e);let a=0;for(const o of t)n.set(o,a),a+=o.length;return asUint8Array(n)}function createCodec(t,e,n,a){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:a}}}const string=createCodec("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii=createCodec("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=allocUnsafe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BASES={utf8:string,"utf-8":string,hex:bases$2.base16,latin1:ascii,ascii,binary:ascii,...bases$2};function fromString(t,e="utf8"){const n=BASES[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function toString(t,e="utf8"){const n=BASES[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}var sha3$1={exports:{}};(function(t){(function(){var e="input is invalid type",n="finalize already called",a=typeof window=="object",o=a?window:{};o.JS_SHA3_NO_WINDOW&&(a=!1);var c=!a&&typeof self=="object",u=!o.JS_SHA3_NO_NODE_JS&&typeof process$1=="object"&&process$1.versions&&process$1.versions.node;u?o=commonjsGlobal:c&&(o=self);var l=!o.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,p=!o.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",b="0123456789abcdef".split(""),v=[31,7936,2031616,520093696],x=[4,1024,262144,67108864],_=[1,256,65536,16777216],E=[6,1536,393216,100663296],$=[0,8,16,24],S=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],A=[224,256,384,512],I=[128,256],O=["hex","buffer","arrayBuffer","array","digest"],F={128:168,256:136};(o.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(j){return Object.prototype.toString.call(j)==="[object Array]"}),p&&(o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(j){return typeof j=="object"&&j.buffer&&j.buffer.constructor===ArrayBuffer});for(var U=function(j,fe,ie){return function(oe){return new B(j,fe,j).update(oe)[ie]()}},G=function(j,fe,ie){return function(oe,ce){return new B(j,fe,ce).update(oe)[ie]()}},J=function(j,fe,ie){return function(oe,ce,V,Q){return T["cshake"+j].update(oe,ce,V,Q)[ie]()}},k=function(j,fe,ie){return function(oe,ce,V,Q){return T["kmac"+j].update(oe,ce,V,Q)[ie]()}},ne=function(j,fe,ie,oe){for(var ce=0;ce<O.length;++ce){var V=O[ce];j[V]=fe(ie,oe,V)}return j},ee=function(j,fe){var ie=U(j,fe,"hex");return ie.create=function(){return new B(j,fe,j)},ie.update=function(oe){return ie.create().update(oe)},ne(ie,U,j,fe)},de=function(j,fe){var ie=G(j,fe,"hex");return ie.create=function(oe){return new B(j,fe,oe)},ie.update=function(oe,ce){return ie.create(ce).update(oe)},ne(ie,G,j,fe)},ae=function(j,fe){var ie=F[j],oe=J(j,fe,"hex");return oe.create=function(ce,V,Q){return!V&&!Q?T["shake"+j].create(ce):new B(j,fe,ce).bytepad([V,Q],ie)},oe.update=function(ce,V,Q,se){return oe.create(V,Q,se).update(ce)},ne(oe,J,j,fe)},L=function(j,fe){var ie=F[j],oe=k(j,fe,"hex");return oe.create=function(ce,V,Q){return new Z(j,fe,V).bytepad(["KMAC",Q],ie).bytepad([ce],ie)},oe.update=function(ce,V,Q,se){return oe.create(ce,Q,se).update(V)},ne(oe,k,j,fe)},P=[{name:"keccak",padding:_,bits:A,createMethod:ee},{name:"sha3",padding:E,bits:A,createMethod:ee},{name:"shake",padding:v,bits:I,createMethod:de},{name:"cshake",padding:x,bits:I,createMethod:ae},{name:"kmac",padding:x,bits:I,createMethod:L}],T={},C=[],q=0;q<P.length;++q)for(var z=P[q],X=z.bits,W=0;W<X.length;++W){var M=z.name+"_"+X[W];if(C.push(M),T[M]=z.createMethod(X[W],z.padding),z.name!=="sha3"){var D=z.name+X[W];C.push(D),T[D]=T[M]}}function B(j,fe,ie){this.blocks=[],this.s=[],this.padding=fe,this.outputBits=ie,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(j<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=ie>>5,this.extraBytes=(ie&31)>>3;for(var oe=0;oe<50;++oe)this.s[oe]=0}B.prototype.update=function(j){if(this.finalized)throw new Error(n);var fe,ie=typeof j;if(ie!=="string"){if(ie==="object"){if(j===null)throw new Error(e);if(p&&j.constructor===ArrayBuffer)j=new Uint8Array(j);else if(!Array.isArray(j)&&(!p||!ArrayBuffer.isView(j)))throw new Error(e)}else throw new Error(e);fe=!0}for(var oe=this.blocks,ce=this.byteCount,V=j.length,Q=this.blockCount,se=0,ye=this.s,be,ve;se<V;){if(this.reset)for(this.reset=!1,oe[0]=this.block,be=1;be<Q+1;++be)oe[be]=0;if(fe)for(be=this.start;se<V&&be<ce;++se)oe[be>>2]|=j[se]<<$[be++&3];else for(be=this.start;se<V&&be<ce;++se)ve=j.charCodeAt(se),ve<128?oe[be>>2]|=ve<<$[be++&3]:ve<2048?(oe[be>>2]|=(192|ve>>6)<<$[be++&3],oe[be>>2]|=(128|ve&63)<<$[be++&3]):ve<55296||ve>=57344?(oe[be>>2]|=(224|ve>>12)<<$[be++&3],oe[be>>2]|=(128|ve>>6&63)<<$[be++&3],oe[be>>2]|=(128|ve&63)<<$[be++&3]):(ve=65536+((ve&1023)<<10|j.charCodeAt(++se)&1023),oe[be>>2]|=(240|ve>>18)<<$[be++&3],oe[be>>2]|=(128|ve>>12&63)<<$[be++&3],oe[be>>2]|=(128|ve>>6&63)<<$[be++&3],oe[be>>2]|=(128|ve&63)<<$[be++&3]);if(this.lastByteIndex=be,be>=ce){for(this.start=be-ce,this.block=oe[Q],be=0;be<Q;++be)ye[be]^=oe[be];he(ye),this.reset=!0}else this.start=be}return this},B.prototype.encode=function(j,fe){var ie=j&255,oe=1,ce=[ie];for(j=j>>8,ie=j&255;ie>0;)ce.unshift(ie),j=j>>8,ie=j&255,++oe;return fe?ce.push(oe):ce.unshift(oe),this.update(ce),ce.length},B.prototype.encodeString=function(j){var fe,ie=typeof j;if(ie!=="string"){if(ie==="object"){if(j===null)throw new Error(e);if(p&&j.constructor===ArrayBuffer)j=new Uint8Array(j);else if(!Array.isArray(j)&&(!p||!ArrayBuffer.isView(j)))throw new Error(e)}else throw new Error(e);fe=!0}var oe=0,ce=j.length;if(fe)oe=ce;else for(var V=0;V<j.length;++V){var Q=j.charCodeAt(V);Q<128?oe+=1:Q<2048?oe+=2:Q<55296||Q>=57344?oe+=3:(Q=65536+((Q&1023)<<10|j.charCodeAt(++V)&1023),oe+=4)}return oe+=this.encode(oe*8),this.update(j),oe},B.prototype.bytepad=function(j,fe){for(var ie=this.encode(fe),oe=0;oe<j.length;++oe)ie+=this.encodeString(j[oe]);var ce=fe-ie%fe,V=[];return V.length=ce,this.update(V),this},B.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var j=this.blocks,fe=this.lastByteIndex,ie=this.blockCount,oe=this.s;if(j[fe>>2]|=this.padding[fe&3],this.lastByteIndex===this.byteCount)for(j[0]=j[ie],fe=1;fe<ie+1;++fe)j[fe]=0;for(j[ie-1]|=2147483648,fe=0;fe<ie;++fe)oe[fe]^=j[fe];he(oe)}},B.prototype.toString=B.prototype.hex=function(){this.finalize();for(var j=this.blockCount,fe=this.s,ie=this.outputBlocks,oe=this.extraBytes,ce=0,V=0,Q="",se;V<ie;){for(ce=0;ce<j&&V<ie;++ce,++V)se=fe[ce],Q+=b[se>>4&15]+b[se&15]+b[se>>12&15]+b[se>>8&15]+b[se>>20&15]+b[se>>16&15]+b[se>>28&15]+b[se>>24&15];V%j===0&&(he(fe),ce=0)}return oe&&(se=fe[ce],Q+=b[se>>4&15]+b[se&15],oe>1&&(Q+=b[se>>12&15]+b[se>>8&15]),oe>2&&(Q+=b[se>>20&15]+b[se>>16&15])),Q},B.prototype.arrayBuffer=function(){this.finalize();var j=this.blockCount,fe=this.s,ie=this.outputBlocks,oe=this.extraBytes,ce=0,V=0,Q=this.outputBits>>3,se;oe?se=new ArrayBuffer(ie+1<<2):se=new ArrayBuffer(Q);for(var ye=new Uint32Array(se);V<ie;){for(ce=0;ce<j&&V<ie;++ce,++V)ye[V]=fe[ce];V%j===0&&he(fe)}return oe&&(ye[ce]=fe[ce],se=se.slice(0,Q)),se},B.prototype.buffer=B.prototype.arrayBuffer,B.prototype.digest=B.prototype.array=function(){this.finalize();for(var j=this.blockCount,fe=this.s,ie=this.outputBlocks,oe=this.extraBytes,ce=0,V=0,Q=[],se,ye;V<ie;){for(ce=0;ce<j&&V<ie;++ce,++V)se=V<<2,ye=fe[ce],Q[se]=ye&255,Q[se+1]=ye>>8&255,Q[se+2]=ye>>16&255,Q[se+3]=ye>>24&255;V%j===0&&he(fe)}return oe&&(se=V<<2,ye=fe[ce],Q[se]=ye&255,oe>1&&(Q[se+1]=ye>>8&255),oe>2&&(Q[se+2]=ye>>16&255)),Q};function Z(j,fe,ie){B.call(this,j,fe,ie)}Z.prototype=new B,Z.prototype.finalize=function(){return this.encode(this.outputBits,!0),B.prototype.finalize.call(this)};var he=function(j){var fe,ie,oe,ce,V,Q,se,ye,be,ve,le,Y,te,ue,pe,ge,me,we,xe,Ee,$e,_e,Te,Ie,Se,Ne,Le,Ae,Me,Oe,De,Je,et,Fe,tt,rt,Ue,Ke,He,Ce,Ve,ze,Be,Ge,je,Re,We,Ze,ke,Qe,Ye,Pe,Xe,at,qe,st,nt,it,ot,ft,ct,ut,lt;for(oe=0;oe<48;oe+=2)ce=j[0]^j[10]^j[20]^j[30]^j[40],V=j[1]^j[11]^j[21]^j[31]^j[41],Q=j[2]^j[12]^j[22]^j[32]^j[42],se=j[3]^j[13]^j[23]^j[33]^j[43],ye=j[4]^j[14]^j[24]^j[34]^j[44],be=j[5]^j[15]^j[25]^j[35]^j[45],ve=j[6]^j[16]^j[26]^j[36]^j[46],le=j[7]^j[17]^j[27]^j[37]^j[47],Y=j[8]^j[18]^j[28]^j[38]^j[48],te=j[9]^j[19]^j[29]^j[39]^j[49],fe=Y^(Q<<1|se>>>31),ie=te^(se<<1|Q>>>31),j[0]^=fe,j[1]^=ie,j[10]^=fe,j[11]^=ie,j[20]^=fe,j[21]^=ie,j[30]^=fe,j[31]^=ie,j[40]^=fe,j[41]^=ie,fe=ce^(ye<<1|be>>>31),ie=V^(be<<1|ye>>>31),j[2]^=fe,j[3]^=ie,j[12]^=fe,j[13]^=ie,j[22]^=fe,j[23]^=ie,j[32]^=fe,j[33]^=ie,j[42]^=fe,j[43]^=ie,fe=Q^(ve<<1|le>>>31),ie=se^(le<<1|ve>>>31),j[4]^=fe,j[5]^=ie,j[14]^=fe,j[15]^=ie,j[24]^=fe,j[25]^=ie,j[34]^=fe,j[35]^=ie,j[44]^=fe,j[45]^=ie,fe=ye^(Y<<1|te>>>31),ie=be^(te<<1|Y>>>31),j[6]^=fe,j[7]^=ie,j[16]^=fe,j[17]^=ie,j[26]^=fe,j[27]^=ie,j[36]^=fe,j[37]^=ie,j[46]^=fe,j[47]^=ie,fe=ve^(ce<<1|V>>>31),ie=le^(V<<1|ce>>>31),j[8]^=fe,j[9]^=ie,j[18]^=fe,j[19]^=ie,j[28]^=fe,j[29]^=ie,j[38]^=fe,j[39]^=ie,j[48]^=fe,j[49]^=ie,ue=j[0],pe=j[1],Re=j[11]<<4|j[10]>>>28,We=j[10]<<4|j[11]>>>28,Ae=j[20]<<3|j[21]>>>29,Me=j[21]<<3|j[20]>>>29,ft=j[31]<<9|j[30]>>>23,ct=j[30]<<9|j[31]>>>23,ze=j[40]<<18|j[41]>>>14,Be=j[41]<<18|j[40]>>>14,Fe=j[2]<<1|j[3]>>>31,tt=j[3]<<1|j[2]>>>31,ge=j[13]<<12|j[12]>>>20,me=j[12]<<12|j[13]>>>20,Ze=j[22]<<10|j[23]>>>22,ke=j[23]<<10|j[22]>>>22,Oe=j[33]<<13|j[32]>>>19,De=j[32]<<13|j[33]>>>19,ut=j[42]<<2|j[43]>>>30,lt=j[43]<<2|j[42]>>>30,at=j[5]<<30|j[4]>>>2,qe=j[4]<<30|j[5]>>>2,rt=j[14]<<6|j[15]>>>26,Ue=j[15]<<6|j[14]>>>26,we=j[25]<<11|j[24]>>>21,xe=j[24]<<11|j[25]>>>21,Qe=j[34]<<15|j[35]>>>17,Ye=j[35]<<15|j[34]>>>17,Je=j[45]<<29|j[44]>>>3,et=j[44]<<29|j[45]>>>3,Ie=j[6]<<28|j[7]>>>4,Se=j[7]<<28|j[6]>>>4,st=j[17]<<23|j[16]>>>9,nt=j[16]<<23|j[17]>>>9,Ke=j[26]<<25|j[27]>>>7,He=j[27]<<25|j[26]>>>7,Ee=j[36]<<21|j[37]>>>11,$e=j[37]<<21|j[36]>>>11,Pe=j[47]<<24|j[46]>>>8,Xe=j[46]<<24|j[47]>>>8,Ge=j[8]<<27|j[9]>>>5,je=j[9]<<27|j[8]>>>5,Ne=j[18]<<20|j[19]>>>12,Le=j[19]<<20|j[18]>>>12,it=j[29]<<7|j[28]>>>25,ot=j[28]<<7|j[29]>>>25,Ce=j[38]<<8|j[39]>>>24,Ve=j[39]<<8|j[38]>>>24,_e=j[48]<<14|j[49]>>>18,Te=j[49]<<14|j[48]>>>18,j[0]=ue^~ge&we,j[1]=pe^~me&xe,j[10]=Ie^~Ne&Ae,j[11]=Se^~Le&Me,j[20]=Fe^~rt&Ke,j[21]=tt^~Ue&He,j[30]=Ge^~Re&Ze,j[31]=je^~We&ke,j[40]=at^~st&it,j[41]=qe^~nt&ot,j[2]=ge^~we&Ee,j[3]=me^~xe&$e,j[12]=Ne^~Ae&Oe,j[13]=Le^~Me&De,j[22]=rt^~Ke&Ce,j[23]=Ue^~He&Ve,j[32]=Re^~Ze&Qe,j[33]=We^~ke&Ye,j[42]=st^~it&ft,j[43]=nt^~ot&ct,j[4]=we^~Ee&_e,j[5]=xe^~$e&Te,j[14]=Ae^~Oe&Je,j[15]=Me^~De&et,j[24]=Ke^~Ce&ze,j[25]=He^~Ve&Be,j[34]=Ze^~Qe&Pe,j[35]=ke^~Ye&Xe,j[44]=it^~ft&ut,j[45]=ot^~ct&lt,j[6]=Ee^~_e&ue,j[7]=$e^~Te&pe,j[16]=Oe^~Je&Ie,j[17]=De^~et&Se,j[26]=Ce^~ze&Fe,j[27]=Ve^~Be&tt,j[36]=Qe^~Pe&Ge,j[37]=Ye^~Xe&je,j[46]=ft^~ut&at,j[47]=ct^~lt&qe,j[8]=_e^~ue&ge,j[9]=Te^~pe&me,j[18]=Je^~Ie&Ne,j[19]=et^~Se&Le,j[28]=ze^~Fe&rt,j[29]=Be^~tt&Ue,j[38]=Pe^~Ge&Re,j[39]=Xe^~je&We,j[48]=ut^~at&st,j[49]=lt^~qe&nt,j[0]^=S[oe],j[1]^=S[oe+1]};if(l)t.exports=T;else for(q=0;q<C.length;++q)o[C[q]]=T[C[q]]})()})(sha3$1);var sha3Exports=sha3$1.exports;const sha3=getDefaultExportFromCjs(sha3Exports);var ed25519={},sha512={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=binary,n=wipe$1;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var a=function(){function l(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},l.prototype.update=function(p,b){if(b===void 0&&(b=p.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var v=0;if(this._bytesHashed+=b,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&b>0;)this._buffer[this._bufferLength++]=p[v++],b--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(b>=this.blockSize&&(v=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,p,v,b),b%=this.blockSize);b>0;)this._buffer[this._bufferLength++]=p[v++],b--;return this},l.prototype.finish=function(p){if(!this._finished){var b=this._bytesHashed,v=this._bufferLength,x=b/536870912|0,_=b<<3,E=b%128<112?128:256;this._buffer[v]=128;for(var $=v+1;$<E-8;$++)this._buffer[$]=0;e.writeUint32BE(x,this._buffer,E-8),e.writeUint32BE(_,this._buffer,E-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,E),this._finished=!0}for(var $=0;$<this.digestLength/8;$++)e.writeUint32BE(this._stateHi[$],p,$*8),e.writeUint32BE(this._stateLo[$],p,$*8+4);return this},l.prototype.digest=function(){var p=new Uint8Array(this.digestLength);return this.finish(p),p},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(p){return this._stateHi.set(p.stateHi),this._stateLo.set(p.stateLo),this._bufferLength=p.bufferLength,p.buffer&&this._buffer.set(p.buffer),this._bytesHashed=p.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(p){n.wipe(p.stateHi),n.wipe(p.stateLo),p.buffer&&n.wipe(p.buffer),p.bufferLength=0,p.bytesHashed=0},l}();t.SHA512=a;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(l,p,b,v,x,_,E){for(var $=b[0],S=b[1],A=b[2],I=b[3],O=b[4],F=b[5],U=b[6],G=b[7],J=v[0],k=v[1],ne=v[2],ee=v[3],de=v[4],ae=v[5],L=v[6],P=v[7],T,C,q,z,X,W,M,D;E>=128;){for(var B=0;B<16;B++){var Z=8*B+_;l[B]=e.readUint32BE(x,Z),p[B]=e.readUint32BE(x,Z+4)}for(var B=0;B<80;B++){var he=$,j=S,fe=A,ie=I,oe=O,ce=F,V=U,Q=G,se=J,ye=k,be=ne,ve=ee,le=de,Y=ae,te=L,ue=P;if(T=G,C=P,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=(O>>>14|de<<32-14)^(O>>>18|de<<32-18)^(de>>>41-32|O<<32-(41-32)),C=(de>>>14|O<<32-14)^(de>>>18|O<<32-18)^(O>>>41-32|de<<32-(41-32)),X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,T=O&F^~O&U,C=de&ae^~de&L,X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,T=o[B*2],C=o[B*2+1],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,T=l[B%16],C=p[B%16],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,q=M&65535|D<<16,z=X&65535|W<<16,T=q,C=z,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=($>>>28|J<<32-28)^(J>>>34-32|$<<32-(34-32))^(J>>>39-32|$<<32-(39-32)),C=(J>>>28|$<<32-28)^($>>>34-32|J<<32-(34-32))^($>>>39-32|J<<32-(39-32)),X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,T=$&S^$&A^S&A,C=J&k^J&ne^k&ne,X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,Q=M&65535|D<<16,ue=X&65535|W<<16,T=ie,C=ve,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=q,C=z,X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,ie=M&65535|D<<16,ve=X&65535|W<<16,S=he,A=j,I=fe,O=ie,F=oe,U=ce,G=V,$=Q,k=se,ne=ye,ee=be,de=ve,ae=le,L=Y,P=te,J=ue,B%16===15)for(var Z=0;Z<16;Z++)T=l[Z],C=p[Z],X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=l[(Z+9)%16],C=p[(Z+9)%16],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,q=l[(Z+1)%16],z=p[(Z+1)%16],T=(q>>>1|z<<32-1)^(q>>>8|z<<32-8)^q>>>7,C=(z>>>1|q<<32-1)^(z>>>8|q<<32-8)^(z>>>7|q<<32-7),X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,q=l[(Z+14)%16],z=p[(Z+14)%16],T=(q>>>19|z<<32-19)^(z>>>61-32|q<<32-(61-32))^q>>>6,C=(z>>>19|q<<32-19)^(q>>>61-32|z<<32-(61-32))^(z>>>6|q<<32-6),X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,l[Z]=M&65535|D<<16,p[Z]=X&65535|W<<16}T=$,C=J,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=b[0],C=v[0],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,b[0]=$=M&65535|D<<16,v[0]=J=X&65535|W<<16,T=S,C=k,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=b[1],C=v[1],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,b[1]=S=M&65535|D<<16,v[1]=k=X&65535|W<<16,T=A,C=ne,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=b[2],C=v[2],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,b[2]=A=M&65535|D<<16,v[2]=ne=X&65535|W<<16,T=I,C=ee,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=b[3],C=v[3],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,b[3]=I=M&65535|D<<16,v[3]=ee=X&65535|W<<16,T=O,C=de,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=b[4],C=v[4],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,b[4]=O=M&65535|D<<16,v[4]=de=X&65535|W<<16,T=F,C=ae,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=b[5],C=v[5],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,b[5]=F=M&65535|D<<16,v[5]=ae=X&65535|W<<16,T=U,C=L,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=b[6],C=v[6],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,b[6]=U=M&65535|D<<16,v[6]=L=X&65535|W<<16,T=G,C=P,X=C&65535,W=C>>>16,M=T&65535,D=T>>>16,T=b[7],C=v[7],X+=C&65535,W+=C>>>16,M+=T&65535,D+=T>>>16,W+=X>>>16,M+=W>>>16,D+=M>>>16,b[7]=G=M&65535|D<<16,v[7]=P=X&65535|W<<16,_+=128,E-=128}return _}function u(l){var p=new a;p.update(l);var b=p.digest();return p.clean(),b}t.hash=u})(sha512);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=random,n=sha512,a=wipe$1;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function o(ie){const oe=new Float64Array(16);if(ie)for(let ce=0;ce<ie.length;ce++)oe[ce]=ie[ce];return oe}const c=new Uint8Array(32);c[0]=9;const u=o(),l=o([1]),p=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),b=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),v=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),x=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function E(ie,oe){for(let ce=0;ce<16;ce++)ie[ce]=oe[ce]|0}function $(ie){let oe=1;for(let ce=0;ce<16;ce++){let V=ie[ce]+oe+65535;oe=Math.floor(V/65536),ie[ce]=V-oe*65536}ie[0]+=oe-1+37*(oe-1)}function S(ie,oe,ce){const V=~(ce-1);for(let Q=0;Q<16;Q++){const se=V&(ie[Q]^oe[Q]);ie[Q]^=se,oe[Q]^=se}}function A(ie,oe){const ce=o(),V=o();for(let Q=0;Q<16;Q++)V[Q]=oe[Q];$(V),$(V),$(V);for(let Q=0;Q<2;Q++){ce[0]=V[0]-65517;for(let ye=1;ye<15;ye++)ce[ye]=V[ye]-65535-(ce[ye-1]>>16&1),ce[ye-1]&=65535;ce[15]=V[15]-32767-(ce[14]>>16&1);const se=ce[15]>>16&1;ce[14]&=65535,S(V,ce,1-se)}for(let Q=0;Q<16;Q++)ie[2*Q]=V[Q]&255,ie[2*Q+1]=V[Q]>>8}function I(ie,oe){let ce=0;for(let V=0;V<32;V++)ce|=ie[V]^oe[V];return(1&ce-1>>>8)-1}function O(ie,oe){const ce=new Uint8Array(32),V=new Uint8Array(32);return A(ce,ie),A(V,oe),I(ce,V)}function F(ie){const oe=new Uint8Array(32);return A(oe,ie),oe[0]&1}function U(ie,oe){for(let ce=0;ce<16;ce++)ie[ce]=oe[2*ce]+(oe[2*ce+1]<<8);ie[15]&=32767}function G(ie,oe,ce){for(let V=0;V<16;V++)ie[V]=oe[V]+ce[V]}function J(ie,oe,ce){for(let V=0;V<16;V++)ie[V]=oe[V]-ce[V]}function k(ie,oe,ce){let V,Q,se=0,ye=0,be=0,ve=0,le=0,Y=0,te=0,ue=0,pe=0,ge=0,me=0,we=0,xe=0,Ee=0,$e=0,_e=0,Te=0,Ie=0,Se=0,Ne=0,Le=0,Ae=0,Me=0,Oe=0,De=0,Je=0,et=0,Fe=0,tt=0,rt=0,Ue=0,Ke=ce[0],He=ce[1],Ce=ce[2],Ve=ce[3],ze=ce[4],Be=ce[5],Ge=ce[6],je=ce[7],Re=ce[8],We=ce[9],Ze=ce[10],ke=ce[11],Qe=ce[12],Ye=ce[13],Pe=ce[14],Xe=ce[15];V=oe[0],se+=V*Ke,ye+=V*He,be+=V*Ce,ve+=V*Ve,le+=V*ze,Y+=V*Be,te+=V*Ge,ue+=V*je,pe+=V*Re,ge+=V*We,me+=V*Ze,we+=V*ke,xe+=V*Qe,Ee+=V*Ye,$e+=V*Pe,_e+=V*Xe,V=oe[1],ye+=V*Ke,be+=V*He,ve+=V*Ce,le+=V*Ve,Y+=V*ze,te+=V*Be,ue+=V*Ge,pe+=V*je,ge+=V*Re,me+=V*We,we+=V*Ze,xe+=V*ke,Ee+=V*Qe,$e+=V*Ye,_e+=V*Pe,Te+=V*Xe,V=oe[2],be+=V*Ke,ve+=V*He,le+=V*Ce,Y+=V*Ve,te+=V*ze,ue+=V*Be,pe+=V*Ge,ge+=V*je,me+=V*Re,we+=V*We,xe+=V*Ze,Ee+=V*ke,$e+=V*Qe,_e+=V*Ye,Te+=V*Pe,Ie+=V*Xe,V=oe[3],ve+=V*Ke,le+=V*He,Y+=V*Ce,te+=V*Ve,ue+=V*ze,pe+=V*Be,ge+=V*Ge,me+=V*je,we+=V*Re,xe+=V*We,Ee+=V*Ze,$e+=V*ke,_e+=V*Qe,Te+=V*Ye,Ie+=V*Pe,Se+=V*Xe,V=oe[4],le+=V*Ke,Y+=V*He,te+=V*Ce,ue+=V*Ve,pe+=V*ze,ge+=V*Be,me+=V*Ge,we+=V*je,xe+=V*Re,Ee+=V*We,$e+=V*Ze,_e+=V*ke,Te+=V*Qe,Ie+=V*Ye,Se+=V*Pe,Ne+=V*Xe,V=oe[5],Y+=V*Ke,te+=V*He,ue+=V*Ce,pe+=V*Ve,ge+=V*ze,me+=V*Be,we+=V*Ge,xe+=V*je,Ee+=V*Re,$e+=V*We,_e+=V*Ze,Te+=V*ke,Ie+=V*Qe,Se+=V*Ye,Ne+=V*Pe,Le+=V*Xe,V=oe[6],te+=V*Ke,ue+=V*He,pe+=V*Ce,ge+=V*Ve,me+=V*ze,we+=V*Be,xe+=V*Ge,Ee+=V*je,$e+=V*Re,_e+=V*We,Te+=V*Ze,Ie+=V*ke,Se+=V*Qe,Ne+=V*Ye,Le+=V*Pe,Ae+=V*Xe,V=oe[7],ue+=V*Ke,pe+=V*He,ge+=V*Ce,me+=V*Ve,we+=V*ze,xe+=V*Be,Ee+=V*Ge,$e+=V*je,_e+=V*Re,Te+=V*We,Ie+=V*Ze,Se+=V*ke,Ne+=V*Qe,Le+=V*Ye,Ae+=V*Pe,Me+=V*Xe,V=oe[8],pe+=V*Ke,ge+=V*He,me+=V*Ce,we+=V*Ve,xe+=V*ze,Ee+=V*Be,$e+=V*Ge,_e+=V*je,Te+=V*Re,Ie+=V*We,Se+=V*Ze,Ne+=V*ke,Le+=V*Qe,Ae+=V*Ye,Me+=V*Pe,Oe+=V*Xe,V=oe[9],ge+=V*Ke,me+=V*He,we+=V*Ce,xe+=V*Ve,Ee+=V*ze,$e+=V*Be,_e+=V*Ge,Te+=V*je,Ie+=V*Re,Se+=V*We,Ne+=V*Ze,Le+=V*ke,Ae+=V*Qe,Me+=V*Ye,Oe+=V*Pe,De+=V*Xe,V=oe[10],me+=V*Ke,we+=V*He,xe+=V*Ce,Ee+=V*Ve,$e+=V*ze,_e+=V*Be,Te+=V*Ge,Ie+=V*je,Se+=V*Re,Ne+=V*We,Le+=V*Ze,Ae+=V*ke,Me+=V*Qe,Oe+=V*Ye,De+=V*Pe,Je+=V*Xe,V=oe[11],we+=V*Ke,xe+=V*He,Ee+=V*Ce,$e+=V*Ve,_e+=V*ze,Te+=V*Be,Ie+=V*Ge,Se+=V*je,Ne+=V*Re,Le+=V*We,Ae+=V*Ze,Me+=V*ke,Oe+=V*Qe,De+=V*Ye,Je+=V*Pe,et+=V*Xe,V=oe[12],xe+=V*Ke,Ee+=V*He,$e+=V*Ce,_e+=V*Ve,Te+=V*ze,Ie+=V*Be,Se+=V*Ge,Ne+=V*je,Le+=V*Re,Ae+=V*We,Me+=V*Ze,Oe+=V*ke,De+=V*Qe,Je+=V*Ye,et+=V*Pe,Fe+=V*Xe,V=oe[13],Ee+=V*Ke,$e+=V*He,_e+=V*Ce,Te+=V*Ve,Ie+=V*ze,Se+=V*Be,Ne+=V*Ge,Le+=V*je,Ae+=V*Re,Me+=V*We,Oe+=V*Ze,De+=V*ke,Je+=V*Qe,et+=V*Ye,Fe+=V*Pe,tt+=V*Xe,V=oe[14],$e+=V*Ke,_e+=V*He,Te+=V*Ce,Ie+=V*Ve,Se+=V*ze,Ne+=V*Be,Le+=V*Ge,Ae+=V*je,Me+=V*Re,Oe+=V*We,De+=V*Ze,Je+=V*ke,et+=V*Qe,Fe+=V*Ye,tt+=V*Pe,rt+=V*Xe,V=oe[15],_e+=V*Ke,Te+=V*He,Ie+=V*Ce,Se+=V*Ve,Ne+=V*ze,Le+=V*Be,Ae+=V*Ge,Me+=V*je,Oe+=V*Re,De+=V*We,Je+=V*Ze,et+=V*ke,Fe+=V*Qe,tt+=V*Ye,rt+=V*Pe,Ue+=V*Xe,se+=38*Te,ye+=38*Ie,be+=38*Se,ve+=38*Ne,le+=38*Le,Y+=38*Ae,te+=38*Me,ue+=38*Oe,pe+=38*De,ge+=38*Je,me+=38*et,we+=38*Fe,xe+=38*tt,Ee+=38*rt,$e+=38*Ue,Q=1,V=se+Q+65535,Q=Math.floor(V/65536),se=V-Q*65536,V=ye+Q+65535,Q=Math.floor(V/65536),ye=V-Q*65536,V=be+Q+65535,Q=Math.floor(V/65536),be=V-Q*65536,V=ve+Q+65535,Q=Math.floor(V/65536),ve=V-Q*65536,V=le+Q+65535,Q=Math.floor(V/65536),le=V-Q*65536,V=Y+Q+65535,Q=Math.floor(V/65536),Y=V-Q*65536,V=te+Q+65535,Q=Math.floor(V/65536),te=V-Q*65536,V=ue+Q+65535,Q=Math.floor(V/65536),ue=V-Q*65536,V=pe+Q+65535,Q=Math.floor(V/65536),pe=V-Q*65536,V=ge+Q+65535,Q=Math.floor(V/65536),ge=V-Q*65536,V=me+Q+65535,Q=Math.floor(V/65536),me=V-Q*65536,V=we+Q+65535,Q=Math.floor(V/65536),we=V-Q*65536,V=xe+Q+65535,Q=Math.floor(V/65536),xe=V-Q*65536,V=Ee+Q+65535,Q=Math.floor(V/65536),Ee=V-Q*65536,V=$e+Q+65535,Q=Math.floor(V/65536),$e=V-Q*65536,V=_e+Q+65535,Q=Math.floor(V/65536),_e=V-Q*65536,se+=Q-1+37*(Q-1),Q=1,V=se+Q+65535,Q=Math.floor(V/65536),se=V-Q*65536,V=ye+Q+65535,Q=Math.floor(V/65536),ye=V-Q*65536,V=be+Q+65535,Q=Math.floor(V/65536),be=V-Q*65536,V=ve+Q+65535,Q=Math.floor(V/65536),ve=V-Q*65536,V=le+Q+65535,Q=Math.floor(V/65536),le=V-Q*65536,V=Y+Q+65535,Q=Math.floor(V/65536),Y=V-Q*65536,V=te+Q+65535,Q=Math.floor(V/65536),te=V-Q*65536,V=ue+Q+65535,Q=Math.floor(V/65536),ue=V-Q*65536,V=pe+Q+65535,Q=Math.floor(V/65536),pe=V-Q*65536,V=ge+Q+65535,Q=Math.floor(V/65536),ge=V-Q*65536,V=me+Q+65535,Q=Math.floor(V/65536),me=V-Q*65536,V=we+Q+65535,Q=Math.floor(V/65536),we=V-Q*65536,V=xe+Q+65535,Q=Math.floor(V/65536),xe=V-Q*65536,V=Ee+Q+65535,Q=Math.floor(V/65536),Ee=V-Q*65536,V=$e+Q+65535,Q=Math.floor(V/65536),$e=V-Q*65536,V=_e+Q+65535,Q=Math.floor(V/65536),_e=V-Q*65536,se+=Q-1+37*(Q-1),ie[0]=se,ie[1]=ye,ie[2]=be,ie[3]=ve,ie[4]=le,ie[5]=Y,ie[6]=te,ie[7]=ue,ie[8]=pe,ie[9]=ge,ie[10]=me,ie[11]=we,ie[12]=xe,ie[13]=Ee,ie[14]=$e,ie[15]=_e}function ne(ie,oe){k(ie,oe,oe)}function ee(ie,oe){const ce=o();let V;for(V=0;V<16;V++)ce[V]=oe[V];for(V=253;V>=0;V--)ne(ce,ce),V!==2&&V!==4&&k(ce,ce,oe);for(V=0;V<16;V++)ie[V]=ce[V]}function de(ie,oe){const ce=o();let V;for(V=0;V<16;V++)ce[V]=oe[V];for(V=250;V>=0;V--)ne(ce,ce),V!==1&&k(ce,ce,oe);for(V=0;V<16;V++)ie[V]=ce[V]}function ae(ie,oe){const ce=o(),V=o(),Q=o(),se=o(),ye=o(),be=o(),ve=o(),le=o(),Y=o();J(ce,ie[1],ie[0]),J(Y,oe[1],oe[0]),k(ce,ce,Y),G(V,ie[0],ie[1]),G(Y,oe[0],oe[1]),k(V,V,Y),k(Q,ie[3],oe[3]),k(Q,Q,b),k(se,ie[2],oe[2]),G(se,se,se),J(ye,V,ce),J(be,se,Q),G(ve,se,Q),G(le,V,ce),k(ie[0],ye,be),k(ie[1],le,ve),k(ie[2],ve,be),k(ie[3],ye,le)}function L(ie,oe,ce){for(let V=0;V<4;V++)S(ie[V],oe[V],ce)}function P(ie,oe){const ce=o(),V=o(),Q=o();ee(Q,oe[2]),k(ce,oe[0],Q),k(V,oe[1],Q),A(ie,V),ie[31]^=F(ce)<<7}function T(ie,oe,ce){E(ie[0],u),E(ie[1],l),E(ie[2],l),E(ie[3],u);for(let V=255;V>=0;--V){const Q=ce[V/8|0]>>(V&7)&1;L(ie,oe,Q),ae(oe,ie),ae(ie,ie),L(ie,oe,Q)}}function C(ie,oe){const ce=[o(),o(),o(),o()];E(ce[0],v),E(ce[1],x),E(ce[2],l),k(ce[3],v,x),T(ie,ce,oe)}function q(ie){if(ie.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const oe=(0,n.hash)(ie);oe[0]&=248,oe[31]&=127,oe[31]|=64;const ce=new Uint8Array(32),V=[o(),o(),o(),o()];C(V,oe),P(ce,V);const Q=new Uint8Array(64);return Q.set(ie),Q.set(ce,32),{publicKey:ce,secretKey:Q}}t.generateKeyPairFromSeed=q;function z(ie){const oe=(0,e.randomBytes)(32,ie),ce=q(oe);return(0,a.wipe)(oe),ce}t.generateKeyPair=z;function X(ie){if(ie.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(ie.subarray(32))}t.extractPublicKeyFromSecretKey=X;const W=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function M(ie,oe){let ce,V,Q,se;for(V=63;V>=32;--V){for(ce=0,Q=V-32,se=V-12;Q<se;++Q)oe[Q]+=ce-16*oe[V]*W[Q-(V-32)],ce=Math.floor((oe[Q]+128)/256),oe[Q]-=ce*256;oe[Q]+=ce,oe[V]=0}for(ce=0,Q=0;Q<32;Q++)oe[Q]+=ce-(oe[31]>>4)*W[Q],ce=oe[Q]>>8,oe[Q]&=255;for(Q=0;Q<32;Q++)oe[Q]-=ce*W[Q];for(V=0;V<32;V++)oe[V+1]+=oe[V]>>8,ie[V]=oe[V]&255}function D(ie){const oe=new Float64Array(64);for(let ce=0;ce<64;ce++)oe[ce]=ie[ce];for(let ce=0;ce<64;ce++)ie[ce]=0;M(ie,oe)}function B(ie,oe){const ce=new Float64Array(64),V=[o(),o(),o(),o()],Q=(0,n.hash)(ie.subarray(0,32));Q[0]&=248,Q[31]&=127,Q[31]|=64;const se=new Uint8Array(64);se.set(Q.subarray(32),32);const ye=new n.SHA512;ye.update(se.subarray(32)),ye.update(oe);const be=ye.digest();ye.clean(),D(be),C(V,be),P(se,V),ye.reset(),ye.update(se.subarray(0,32)),ye.update(ie.subarray(32)),ye.update(oe);const ve=ye.digest();D(ve);for(let le=0;le<32;le++)ce[le]=be[le];for(let le=0;le<32;le++)for(let Y=0;Y<32;Y++)ce[le+Y]+=ve[le]*Q[Y];return M(se.subarray(32),ce),se}t.sign=B;function Z(ie,oe){const ce=o(),V=o(),Q=o(),se=o(),ye=o(),be=o(),ve=o();return E(ie[2],l),U(ie[1],oe),ne(Q,ie[1]),k(se,Q,p),J(Q,Q,ie[2]),G(se,ie[2],se),ne(ye,se),ne(be,ye),k(ve,be,ye),k(ce,ve,Q),k(ce,ce,se),de(ce,ce),k(ce,ce,Q),k(ce,ce,se),k(ce,ce,se),k(ie[0],ce,se),ne(V,ie[0]),k(V,V,se),O(V,Q)&&k(ie[0],ie[0],_),ne(V,ie[0]),k(V,V,se),O(V,Q)?-1:(F(ie[0])===oe[31]>>7&&J(ie[0],u,ie[0]),k(ie[3],ie[0],ie[1]),0)}function he(ie,oe,ce){const V=new Uint8Array(32),Q=[o(),o(),o(),o()],se=[o(),o(),o(),o()];if(ce.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(Z(se,ie))return!1;const ye=new n.SHA512;ye.update(ce.subarray(0,32)),ye.update(ie),ye.update(oe);const be=ye.digest();return D(be),T(Q,se,be),C(se,ce.subarray(32)),ae(Q,se),P(V,Q),!I(ce,V)}t.verify=he;function j(ie){let oe=[o(),o(),o(),o()];if(Z(oe,ie))throw new Error("Ed25519: invalid public key");let ce=o(),V=o(),Q=oe[1];G(ce,l,Q),J(V,l,Q),ee(V,V),k(ce,ce,V);let se=new Uint8Array(32);return A(se,ce),se}t.convertPublicKeyToX25519=j;function fe(ie){const oe=(0,n.hash)(ie.subarray(0,32));oe[0]&=248,oe[31]&=127,oe[31]|=64;const ce=new Uint8Array(oe.subarray(0,32));return(0,a.wipe)(oe),ce}t.convertSecretKeyToX25519=fe})(ed25519);var dist={};Object.defineProperty(dist,"__esModule",{value:!0});dist.bech32m=bech32=dist.bech32=void 0;const ALPHABET="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(let t=0;t<ALPHABET.length;t++){const e=ALPHABET.charAt(t);ALPHABET_MAP[e]=t}function polymodStep(t){const e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function prefixChk(t){let e=1;for(let n=0;n<t.length;++n){const a=t.charCodeAt(n);if(a<33||a>126)return"Invalid prefix ("+t+")";e=polymodStep(e)^a>>5}e=polymodStep(e);for(let n=0;n<t.length;++n){const a=t.charCodeAt(n);e=polymodStep(e)^a&31}return e}function convert(t,e,n,a){let o=0,c=0;const u=(1<<n)-1,l=[];for(let p=0;p<t.length;++p)for(o=o<<e|t[p],c+=e;c>=n;)c-=n,l.push(o>>c&u);if(a)c>0&&l.push(o<<n-c&u);else{if(c>=e)return"Excess padding";if(o<<n-c&u)return"Non-zero padding"}return l}function toWords(t){return convert(t,8,5,!0)}function fromWordsUnsafe(t){const e=convert(t,5,8,!1);if(Array.isArray(e))return e}function fromWords(t){const e=convert(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function getLibraryFromEncoding(t){let e;t==="bech32"?e=1:e=734539939;function n(u,l,p){if(p=p||90,u.length+7+l.length>p)throw new TypeError("Exceeds length limit");u=u.toLowerCase();let b=prefixChk(u);if(typeof b=="string")throw new Error(b);let v=u+"1";for(let x=0;x<l.length;++x){const _=l[x];if(_>>5)throw new Error("Non 5-bit word");b=polymodStep(b)^_,v+=ALPHABET.charAt(_)}for(let x=0;x<6;++x)b=polymodStep(b);b^=e;for(let x=0;x<6;++x){const _=b>>(5-x)*5&31;v+=ALPHABET.charAt(_)}return v}function a(u,l){if(l=l||90,u.length<8)return u+" too short";if(u.length>l)return"Exceeds length limit";const p=u.toLowerCase(),b=u.toUpperCase();if(u!==p&&u!==b)return"Mixed-case string "+u;u=p;const v=u.lastIndexOf("1");if(v===-1)return"No separator character for "+u;if(v===0)return"Missing prefix for "+u;const x=u.slice(0,v),_=u.slice(v+1);if(_.length<6)return"Data too short";let E=prefixChk(x);if(typeof E=="string")return E;const $=[];for(let S=0;S<_.length;++S){const A=_.charAt(S),I=ALPHABET_MAP[A];if(I===void 0)return"Unknown character "+A;E=polymodStep(E)^I,!(S+6>=_.length)&&$.push(I)}return E!==e?"Invalid checksum for "+u:{prefix:x,words:$}}function o(u,l){const p=a(u,l);if(typeof p=="object")return p}function c(u,l){const p=a(u,l);if(typeof p=="object")return p;throw new Error(p)}return{decodeUnsafe:o,decode:c,encode:n,toWords,fromWordsUnsafe,fromWords}}var bech32=dist.bech32=getLibraryFromEncoding("bech32");dist.bech32m=getLibraryFromEncoding("bech32m");var xchacha20poly1305={},xchacha20={};Object.defineProperty(xchacha20,"__esModule",{value:!0});var binary_1=binary,wipe_1=wipe$1,chacha_1=chacha,ROUNDS=20;function streamXOR(t,e,n,a){if(e.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var o=hchacha(t,e.subarray(0,16),new Uint8Array(32)),c=new Uint8Array(12);c.set(e.subarray(16),4);var u=chacha_1.streamXOR(o,c,n,a);return wipe_1.wipe(o),u}xchacha20.streamXOR=streamXOR;function stream(t,e,n){return wipe_1.wipe(n),streamXOR(t,e,n,n)}xchacha20.stream=stream;function hchacha(t,e,n){for(var a=1634760805,o=857760878,c=2036477234,u=1797285236,l=t[3]<<24|t[2]<<16|t[1]<<8|t[0],p=t[7]<<24|t[6]<<16|t[5]<<8|t[4],b=t[11]<<24|t[10]<<16|t[9]<<8|t[8],v=t[15]<<24|t[14]<<16|t[13]<<8|t[12],x=t[19]<<24|t[18]<<16|t[17]<<8|t[16],_=t[23]<<24|t[22]<<16|t[21]<<8|t[20],E=t[27]<<24|t[26]<<16|t[25]<<8|t[24],$=t[31]<<24|t[30]<<16|t[29]<<8|t[28],S=e[3]<<24|e[2]<<16|e[1]<<8|e[0],A=e[7]<<24|e[6]<<16|e[5]<<8|e[4],I=e[11]<<24|e[10]<<16|e[9]<<8|e[8],O=e[15]<<24|e[14]<<16|e[13]<<8|e[12],F=a,U=o,G=c,J=u,k=l,ne=p,ee=b,de=v,ae=x,L=_,P=E,T=$,C=S,q=A,z=I,X=O,W=0;W<ROUNDS;W+=2)F=F+k|0,C^=F,C=C>>>32-16|C<<16,ae=ae+C|0,k^=ae,k=k>>>32-12|k<<12,U=U+ne|0,q^=U,q=q>>>32-16|q<<16,L=L+q|0,ne^=L,ne=ne>>>32-12|ne<<12,G=G+ee|0,z^=G,z=z>>>32-16|z<<16,P=P+z|0,ee^=P,ee=ee>>>32-12|ee<<12,J=J+de|0,X^=J,X=X>>>32-16|X<<16,T=T+X|0,de^=T,de=de>>>32-12|de<<12,G=G+ee|0,z^=G,z=z>>>32-8|z<<8,P=P+z|0,ee^=P,ee=ee>>>32-7|ee<<7,J=J+de|0,X^=J,X=X>>>32-8|X<<8,T=T+X|0,de^=T,de=de>>>32-7|de<<7,U=U+ne|0,q^=U,q=q>>>32-8|q<<8,L=L+q|0,ne^=L,ne=ne>>>32-7|ne<<7,F=F+k|0,C^=F,C=C>>>32-8|C<<8,ae=ae+C|0,k^=ae,k=k>>>32-7|k<<7,F=F+ne|0,X^=F,X=X>>>32-16|X<<16,P=P+X|0,ne^=P,ne=ne>>>32-12|ne<<12,U=U+ee|0,C^=U,C=C>>>32-16|C<<16,T=T+C|0,ee^=T,ee=ee>>>32-12|ee<<12,G=G+de|0,q^=G,q=q>>>32-16|q<<16,ae=ae+q|0,de^=ae,de=de>>>32-12|de<<12,J=J+k|0,z^=J,z=z>>>32-16|z<<16,L=L+z|0,k^=L,k=k>>>32-12|k<<12,G=G+de|0,q^=G,q=q>>>32-8|q<<8,ae=ae+q|0,de^=ae,de=de>>>32-7|de<<7,J=J+k|0,z^=J,z=z>>>32-8|z<<8,L=L+z|0,k^=L,k=k>>>32-7|k<<7,U=U+ee|0,C^=U,C=C>>>32-8|C<<8,T=T+C|0,ee^=T,ee=ee>>>32-7|ee<<7,F=F+ne|0,X^=F,X=X>>>32-8|X<<8,P=P+X|0,ne^=P,ne=ne>>>32-7|ne<<7;return binary_1.writeUint32LE(F,n,0),binary_1.writeUint32LE(U,n,4),binary_1.writeUint32LE(G,n,8),binary_1.writeUint32LE(J,n,12),binary_1.writeUint32LE(C,n,16),binary_1.writeUint32LE(q,n,20),binary_1.writeUint32LE(z,n,24),binary_1.writeUint32LE(X,n,28),n}xchacha20.hchacha=hchacha;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=xchacha20,n=chacha20poly1305,a=wipe$1;t.KEY_LENGTH=32,t.NONCE_LENGTH=24,t.TAG_LENGTH=16;var o=function(){function c(u){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,u.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return c.prototype.seal=function(u,l,p,b){if(u.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var v=e.hchacha(this._key,u.subarray(0,16),new Uint8Array(32)),x=new Uint8Array(12);x.set(u.subarray(16),4);var _=new n.ChaCha20Poly1305(v),E=_.seal(x,l,p,b);return a.wipe(v),a.wipe(x),_.clean(),E},c.prototype.open=function(u,l,p,b){if(u.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(l.length<this.tagLength)return null;var v=e.hchacha(this._key,u.subarray(0,16),new Uint8Array(32)),x=new Uint8Array(12);x.set(u.subarray(16),4);var _=new n.ChaCha20Poly1305(v),E=_.open(x,l,p,b);return a.wipe(v),a.wipe(x),_.clean(),E},c.prototype.clean=function(){return a.wipe(this._key),this},c}();t.XChaCha20Poly1305=o})(xchacha20poly1305);function bytesToBase64url(t){return toString(t,"base64url")}function base64ToBytes(t){const e=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return fromString(e,"base64url")}function base58ToBytes(t){return fromString(t,"base58btc")}function bytesToBase58(t){return toString(t,"base58btc")}function hexToBytes(t){const e=t.startsWith("0x")?t.substring(2):t;return fromString(e.toLowerCase(),"base16")}function encodeBase64url(t){return bytesToBase64url(fromString(t))}function decodeBase64url(t){return toString(base64ToBytes(t))}function bytesToHex(t){return toString(t,"base16")}function stringToBytes(t){return fromString(t)}const zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function rotl(t,e){return t<<e|t>>>32-e}function fn1(t,e,n,a,o,c,u,l){return rotl(t+(e^n^a)+c+u|0,l)+o|0}function fn2(t,e,n,a,o,c,u,l){return rotl(t+(e&n|~e&a)+c+u|0,l)+o|0}function fn3(t,e,n,a,o,c,u,l){return rotl(t+((e|~n)^a)+c+u|0,l)+o|0}function fn4(t,e,n,a,o,c,u,l){return rotl(t+(e&a|n&~a)+c+u|0,l)+o|0}function fn5(t,e,n,a,o,c,u,l){return rotl(t+(e^(n|~a))+c+u|0,l)+o|0}class Ripemd160{constructor(e=64){this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._blockOffset=0,this._block=void 0,this._blockSize=void 0,this._length=[0,0,0,0],this._finalized=void 0,this.update=n=>{if(this._finalized)throw new Error("Digest already called");const a=this._block;let o=0;for(;this._blockOffset+n.length-o>=this._blockSize;){for(let c=this._blockOffset;c<this._blockSize;)a[c++]=n[o++];this._update(),this._blockOffset=0}for(;o<n.length;)a[this._blockOffset++]=n[o++];for(let c=0,u=n.length*8;u>0;++c)this._length[c]+=u,u=this._length[c]/4294967296|0,u>0&&(this._length[c]-=4294967296*u);return this},this.digest=()=>{if(this._finalized)throw new Error("Digest already called");this._finalized=!0;const n=this._digest();this._block.fill(0),this._blockOffset=0;for(let a=0;a<4;++a)this._length[a]=0;return n},this._update=()=>{const n=new Array(16),a=new DataView(this._block.buffer);for(let S=0;S<16;++S)n[S]=n[S]=a.getInt32(S*4,!0);let o=this._a|0,c=this._b|0,u=this._c|0,l=this._d|0,p=this._e|0,b=this._a|0,v=this._b|0,x=this._c|0,_=this._d|0,E=this._e|0;for(let S=0;S<80;S+=1){let A,I;S<16?(A=fn1(o,c,u,l,p,n[zl[S]],hl[0],sl[S]),I=fn5(b,v,x,_,E,n[zr[S]],hr[0],sr[S])):S<32?(A=fn2(o,c,u,l,p,n[zl[S]],hl[1],sl[S]),I=fn4(b,v,x,_,E,n[zr[S]],hr[1],sr[S])):S<48?(A=fn3(o,c,u,l,p,n[zl[S]],hl[2],sl[S]),I=fn3(b,v,x,_,E,n[zr[S]],hr[2],sr[S])):S<64?(A=fn4(o,c,u,l,p,n[zl[S]],hl[3],sl[S]),I=fn2(b,v,x,_,E,n[zr[S]],hr[3],sr[S])):(A=fn5(o,c,u,l,p,n[zl[S]],hl[4],sl[S]),I=fn1(b,v,x,_,E,n[zr[S]],hr[4],sr[S])),o=p,p=l,l=rotl(u,10),u=c,c=A,b=E,E=_,_=rotl(x,10),x=v,v=I}const $=this._b+u+_|0;this._b=this._c+l+E|0,this._c=this._d+p+b|0,this._d=this._e+o+v|0,this._e=this._a+c+x|0,this._a=$},this._digest=()=>{this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56);const n=new DataView(this._block.buffer);n.setUint32(56,this._length[0],!0),n.setUint32(60,this._length[1],!0),this._block=new Uint8Array(n.buffer),this._update();const a=new DataView(new Uint8Array(20).buffer);return a.setInt32(0,this._a,!0),a.setInt32(4,this._b,!0),a.setInt32(8,this._c,!0),a.setInt32(12,this._d,!0),a.setInt32(16,this._e,!0),new Uint8Array(a.buffer)},this._block=new Uint8Array(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}}function sha256$1(t){const e=typeof t=="string"?fromString(t):t;return sha256$2.hash(e)}function keccak(t){return new Uint8Array(sha3.keccak_256.arrayBuffer(t))}function toEthereumAddress(t){const e=fromString(t.slice(2),"base16");return`0x${toString(keccak(e).slice(-20),"base16")}`}function ripemd160$1(t){return new Ripemd160().update(t).digest()}function writeUint32BE(t,e=new Uint8Array(4)){const n=fromString(t.toString(),"base10");return e.set(n,4-n.length),e}const lengthAndInput=t=>concat$1([writeUint32BE(t.length),t]);function concatKDF(t,e,n,a,o){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const c=concat$1([lengthAndInput(fromString(n)),lengthAndInput(typeof a>"u"?new Uint8Array(0):a),lengthAndInput(typeof o>"u"?new Uint8Array(0):o),writeUint32BE(e)]);return sha256$1(concat$1([writeUint32BE(1),t,c]))}new elliptic.ec("secp256k1");new elliptic.ec("p256");const publicKeyToAddress$1=(t,e)=>{const n=toString(base58ToBytes(e).slice(0,1),"hex"),a=fromString(t,"hex"),o=ripemd160$1(sha256$1(a)),c=n+toString(o,"hex"),u=sha256$1(fromString(c,"hex")),l=sha256$1(u),p=toString(l,"hex").substring(0,8),b=c+p;return bytesToBase58(fromString(b,"hex"))},EC$2=elliptic.ec,publicKeyToAddress=(t,e)=>{const a=new EC$2("secp256k1").keyFromPublic(t,"hex").getPublic().encode("hex",!0),o=fromString(a,"hex"),c=ripemd160$1(sha256$1(o)),u=bech32.toWords(c);return bech32.encode(e,u).replace(e,"")},verifyBlockchainAccountId=(t,e)=>{if(e){const n=e.split(":");switch(n[0]){case"bip122":n[n.length-1]=publicKeyToAddress$1(t,n[n.length-1]);break;case"cosmos":n[n.length-1]=publicKeyToAddress(t,n[1]);break;case"eip155":n[n.length-1]=toEthereumAddress(t);break;default:return!1}return n.join(":").toLowerCase()===e.toLowerCase()}return!1},secp256k1=new elliptic.ec("secp256k1"),secp256r1=new elliptic.ec("p256");function toSignatureObject(t,e=!1){const n=base64ToBytes(t);if(n.length!==(e?65:64))throw new Error("wrong signature length");const a=bytesToHex(n.slice(0,32)),o=bytesToHex(n.slice(32,64)),c={r:a,s:o};return e&&(c.recoveryParam=n[64]),c}function extractPublicKeyBytes(t){if(t.publicKeyBase58)return base58ToBytes(t.publicKeyBase58);if(t.publicKeyBase64)return base64ToBytes(t.publicKeyBase64);if(t.publicKeyHex)return hexToBytes(t.publicKeyHex);if(t.publicKeyJwk&&t.publicKeyJwk.crv==="secp256k1"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return hexToBytes(secp256k1.keyFromPublic({x:bytesToHex(base64ToBytes(t.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&t.publicKeyJwk.crv==="P-256"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return hexToBytes(secp256r1.keyFromPublic({x:bytesToHex(base64ToBytes(t.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&t.publicKeyJwk.kty==="OKP"&&t.publicKeyJwk.crv==="Ed25519"&&t.publicKeyJwk.x)return base64ToBytes(t.publicKeyJwk.x);if(t.publicKeyMultibase){const{base16:e,base58btc:n,base64:a,base64url:o}=bases$2;return e.decoder.or(n.decoder.or(a.decoder.or(o.decoder))).decode(t.publicKeyMultibase)}return new Uint8Array}function verifyES256(t,e,n){const a=sha256$1(t),o=toSignatureObject(e),u=n.filter(({ethereumAddress:l,blockchainAccountId:p})=>typeof l>"u"&&typeof p>"u").find(l=>{try{const p=extractPublicKeyBytes(l);return secp256r1.keyFromPublic(p).verify(a,o)}catch{return!1}});if(!u)throw new Error("invalid_signature: Signature invalid for JWT");return u}function verifyES256K(t,e,n){const a=sha256$1(t),o=toSignatureObject(e),c=n.filter(({ethereumAddress:p,blockchainAccountId:b})=>typeof p>"u"&&typeof b>"u"),u=n.filter(({ethereumAddress:p,blockchainAccountId:b})=>typeof p<"u"||typeof b<"u");let l=c.find(p=>{try{const b=extractPublicKeyBytes(p);return secp256k1.keyFromPublic(b).verify(a,o)}catch{return!1}});if(!l&&u.length>0&&(l=verifyRecoverableES256K(t,e,u)),!l)throw new Error("invalid_signature: Signature invalid for JWT");return l}function verifyRecoverableES256K(t,e,n){let a;if(e.length>86)a=[toSignatureObject(e,!0)];else{const u=toSignatureObject(e,!1);a=[{...u,recoveryParam:0},{...u,recoveryParam:1}]}const o=u=>{const l=sha256$1(t),p=secp256k1.recoverPubKey(l,u,u.recoveryParam),b=p.encode("hex"),v=p.encode("hex",!0),x=toEthereumAddress(b).toLowerCase();return n.find(E=>{var $,S,A;const I=bytesToHex(extractPublicKeyBytes(E));return I===b||I===v||(($=E.ethereumAddress)==null?void 0:$.toLowerCase())===x||((S=E.blockchainAccountId)==null||(A=S.split("@eip155"))==null?void 0:A[0].toLowerCase())===x||verifyBlockchainAccountId(b,E.blockchainAccountId)})},c=a.map(o).filter(u=>typeof u<"u");if(c.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return c[0]}function verifyEd25519(t,e,n){const a=stringToBytes(t),o=base64ToBytes(e),c=n.find(u=>ed25519.verify(extractPublicKeyBytes(u),a,o));if(!c)throw new Error("invalid_signature: Signature invalid for JWT");return c}const algorithms={ES256:verifyES256,ES256K:verifyES256K,"ES256K-R":verifyRecoverableES256K,Ed25519:verifyEd25519,EdDSA:verifyEd25519};function VerifierAlgorithm(t){const e=algorithms[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}VerifierAlgorithm.toSignatureObject=toSignatureObject;function decodeJWS(t){const e=t.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(e)return{header:JSON.parse(decodeBase64url(e[1])),payload:e[2],signature:e[3],data:`${e[1]}.${e[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function verifyJWSDecoded({header:t,data:e,signature:n},a){return Array.isArray(a)||(a=[a]),VerifierAlgorithm(t.alg)(e,n,a)}function verifyJWS(t,e){const n=decodeJWS(t);return verifyJWSDecoded(n,e)}const _iteratorSymbol=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function _settle(t,e,n){if(!t.s){if(n instanceof _Pact)if(n.s)e&1&&(e=n.s),n=n.v;else{n.o=_settle.bind(null,t,e);return}if(n&&n.then){n.then(_settle.bind(null,t,e),_settle.bind(null,t,2));return}t.s=e,t.v=n;const a=t.o;a&&a(t)}}const _Pact=function(){function t(){}return t.prototype.then=function(e,n){const a=new t,o=this.s;if(o){const c=o&1?e:n;if(c){try{_settle(a,1,c(this.v))}catch(u){_settle(a,2,u)}return a}else return this}return this.o=function(c){try{const u=c.v;c.s&1?_settle(a,1,e?e(u):u):n?_settle(a,1,n(u)):_settle(a,2,u)}catch(u){_settle(a,2,u)}},a},t}();function _isSettledPact(t){return t instanceof _Pact&&t.s&1}function _forTo(t,e,n){var a=-1,o,c;function u(l){try{for(;++a<t.length&&(!n||!n());)if(l=e(a),l&&l.then)if(_isSettledPact(l))l=l.v;else{l.then(u,c||(c=_settle.bind(null,o=new _Pact,2)));return}o?_settle(o,1,l):o=l}catch(p){_settle(o||(o=new _Pact),2,p)}}return u(),o}function _forOf(t,e,n){if(typeof t[_iteratorSymbol]=="function"){let v=function(x){try{for(;!(o=a.next()).done&&(!n||!n());)if(x=e(o.value),x&&x.then)if(_isSettledPact(x))x=x.v;else{x.then(v,u||(u=_settle.bind(null,c=new _Pact,2)));return}c?_settle(c,1,x):c=x}catch(_){_settle(c||(c=new _Pact),2,_)}};var a=t[_iteratorSymbol](),o,c,u;if(v(),a.return){var l=function(x){try{o.done||a.return()}catch{}return x};if(c&&c.then)return c.then(l,function(x){throw l(x)});l()}return c}if(!("length"in t))throw new TypeError("Object is not iterable");for(var p=[],b=0;b<t.length;b++)p.push(t[b]);return _forTo(p,function(v){return e(p[v])},n)}function encodeJWE({ciphertext:t,tag:e,iv:n,protectedHeader:a,recipient:o},c){const u={protected:a,iv:bytesToBase64url(n),ciphertext:bytesToBase64url(t),tag:bytesToBase64url(e)};return c&&(u.aad=bytesToBase64url(c)),o&&(u.recipients=[o]),u}const createJWE=function(t,e,n={},a){try{if(e[0].alg==="dir"){if(e.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(e[0].encrypt(t,n,a)).then(function(o){return encodeJWE(o,a)})}else{const o=e[0].enc;if(!e.reduce((p,b)=>p&&b.enc===o,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let c,u;const l=_forOf(e,function(p){const b=function(){return c?Promise.resolve(p.encryptCek==null?void 0:p.encryptCek(c)).then(function(v){if(v){var x,_;(x=u)==null||(_=x.recipients)==null||_.push(v)}}):Promise.resolve(p.encrypt(t,n,a)).then(function(v){c=v.cek,u=encodeJWE(v,a)})}();if(b&&b.then)return b.then(function(){})});return Promise.resolve(l&&l.then?l.then(function(){return u}):u)}}catch(o){return Promise.reject(o)}},resolveX25519Encrypters=function(t,e){try{const n=function(o,c=[]){try{return Promise.resolve(e.resolve(o)).then(function({didResolutionMetadata:u,didDocument:l}){function p(){var x,_;const E=(x=l.keyAgreement)==null||(_=x.map(S=>typeof S=="string"?[...l.publicKey||[],...l.verificationMethod||[]].find(A=>A.id===S):S))==null?void 0:_.filter(S=>typeof S<"u"),$=E?.filter(S=>S.type==="X25519KeyAgreementKey2019"&&!!S.publicKeyBase58)||[];if(!$.length&&!b.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${o}`);return $.map(S=>x25519Encrypter(base58ToBytes(S.publicKeyBase58),S.id)).concat(...b)}if(c.push(o),u!=null&&u.error||l==null)throw new Error(`resolver_error: Could not resolve ${o}: ${u.error}, ${u.message}`);let b=[];if(!l.controller&&!l.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${o}`);const v=function(){if(l.controller){let x=Array.isArray(l.controller)?l.controller:[l.controller];x=x.filter(E=>!c.includes(E));const _=x.map(E=>n(E,c).catch(()=>[]));return Promise.resolve(Promise.all(_)).then(function(E){b=[].concat(...E)})}}();return v&&v.then?v.then(p):p(v)})}catch(u){return Promise.reject(u)}},a=t.map(o=>n(o));return Promise.resolve(Promise.all(a)).then(function(o){return[].concat(...o)})}catch(n){return Promise.reject(n)}};function xc20pEncrypter(t){const e=new xchacha20poly1305.XChaCha20Poly1305(t);return(n,a)=>{const o=random.randomBytes(e.nonceLength),c=e.seal(o,n,a);return{ciphertext:c.subarray(0,c.length-e.tagLength),tag:c.subarray(c.length-e.tagLength),iv:o}}}function xc20pDirEncrypter(t){const e=function(c,u={},l){try{const p=encodeBase64url(JSON.stringify(Object.assign({alg:o},u,{enc:a}))),b=fromString(l?`${p}.${bytesToBase64url(l)}`:p);return Promise.resolve({...n(c,b),protectedHeader:p})}catch(p){return Promise.reject(p)}},n=xc20pEncrypter(t),a="XC20P",o="dir";return{alg:o,enc:a,encrypt:e}}function x25519Encrypter(t,e){const n=function(l,p={},b){try{Object.assign(p,{alg:void 0});const v=random.randomBytes(32);return Promise.resolve(xc20pDirEncrypter(v).encrypt(l,p,b)).then(function(x){return Promise.resolve(a(v)).then(function(_){return{...x,recipient:_,cek:v}})})}catch(v){return Promise.reject(v)}},a=function(l){try{const p=x25519.generateKeyPair(),b=x25519.sharedKey(p.secretKey,t),v=concatKDF(b,c,o),x=xc20pEncrypter(v)(l),_={encrypted_key:bytesToBase64url(x.ciphertext),header:{alg:o,iv:bytesToBase64url(x.iv),tag:bytesToBase64url(x.tag),epk:{kty:"OKP",crv:u,x:bytesToBase64url(p.publicKey)}}};return e&&(_.header.kid=e),Promise.resolve(_)}catch(p){return Promise.reject(p)}},o="ECDH-ES+XC20PKW",c=256,u="X25519";return{alg:o,enc:"XC20P",encrypt:n,encryptCek:a}}const CID_CBOR_TAG=42;function cidEncoder(t){if(t.asCID!==t)return null;const e=CID$1.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,n)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$1.decode(t.subarray(1))}const decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name="dag-cbor",code=113,encode$1=t=>encode$g(t,encodeOptions),decode=t=>decode$d(t,decodeOptions),dagCbor=Object.freeze(Object.defineProperty({__proto__:null,code,decode,encode:encode$1,name},Symbol.toStringTag,{value:"Module"})),ENC_BLOCK_SIZE=24;async function encodePayload(t){const e=await encode$i({value:t,codec:dagCbor,hasher:sha256$6});return{cid:e.cid,linkedBlock:e.bytes}}function pad(t,e=ENC_BLOCK_SIZE){const n=(e-t.length%e)%e,a=new Uint8Array(t.length+n);return a.set(t,0),a}async function encodeIdentityCID(t){return(await encode$i({value:t,codec:dagCbor,hasher:identity$4})).cid}function decodeIdentityCID(t){if(t=CID$1.asCID(t),t.code!==code)throw new Error("CID codec must be dag-cbor");if(t.multihash.code!==identity$4.code)throw new Error("CID must use identity multihash");return decode(t.multihash.digest)}async function prepareCleartext(t,e){return pad((await encodeIdentityCID(t)).bytes,e)}function decodeCleartext(t){return decodeIdentityCID(CID$1.decodeFirst(t)[0])}const abortedReasonSymbol=Symbol("aborted");function abortable(t,e){if(e.aborted)return Promise.reject(abortedReasonSymbol);let n;const a=new Promise((o,c)=>{n=c});return e.addEventListener("abort",()=>{n(abortedReasonSymbol)}),Promise.race([t,a])}let nanoid=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const ABORT_REQUEST_METHOD="utils_abort_request";var ERROR_CODE;(function(t){t[t.PARSE_ERROR=-32700]="PARSE_ERROR",t[t.INVALID_REQUEST=-32600]="INVALID_REQUEST",t[t.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",t[t.INVALID_PARAMS=-32602]="INVALID_PARAMS",t[t.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(ERROR_CODE||(ERROR_CODE={}));const ERROR_MESSAGE={[ERROR_CODE.PARSE_ERROR]:"Parse error",[ERROR_CODE.INVALID_REQUEST]:"Invalid request",[ERROR_CODE.METHOD_NOT_FOUND]:"Method not found",[ERROR_CODE.INVALID_PARAMS]:"Invalid params",[ERROR_CODE.INTERNAL_ERROR]:"Internal error"};function isServerError(t){return-32e3>=t&&t>=-32099}function getErrorMessage(t){return ERROR_MESSAGE[t.toString()]??(isServerError(t)?"Server error":"Application error")}class RPCError extends Error{static fromObject(e){return new RPCError(e.code,e.message,e.data)}toObject(){return{code:this.code,data:this.data,message:this.message}}constructor(e,n,a){super(),Object.setPrototypeOf(this,RPCError.prototype),this.code=e,this.data=a,this.message=n??getErrorMessage(e)}}function createErrorFactory(t){const e=ERROR_MESSAGE[t];return function(a){return new RPCError(t,e,a)}}createErrorFactory(ERROR_CODE.PARSE_ERROR);createErrorFactory(ERROR_CODE.INVALID_REQUEST);createErrorFactory(ERROR_CODE.METHOD_NOT_FOUND);createErrorFactory(ERROR_CODE.INVALID_PARAMS);createErrorFactory(ERROR_CODE.INTERNAL_ERROR);function _checkPrivateRedeclaration(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classApplyDescriptorGet(t,e){return e.get?e.get.call(t):e.value}function _classApplyDescriptorSet(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function _classExtractFieldDescriptor(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function _classPrivateFieldGet(t,e){var n=_classExtractFieldDescriptor(t,e,"get");return _classApplyDescriptorGet(t,n)}function _classPrivateFieldInit(t,e,n){_checkPrivateRedeclaration(t,e),e.set(t,n)}function _classPrivateFieldSet(t,e,n){var a=_classExtractFieldDescriptor(t,e,"set");return _classApplyDescriptorSet(t,a,n),n}var _connection=new WeakMap;class RPCClient{get connection(){return _classPrivateFieldGet(this,_connection)}createID(){return nanoid()}request(e,n=void 0,a={}){const{signal:o}=a;if(o?.aborted)return Promise.reject(abortedReasonSymbol);const c=this.createID(),u=_classPrivateFieldGet(this,_connection).send({jsonrpc:"2.0",id:c,method:e,params:n}).then(l=>{if(l==null)throw new Error("Missing response");if(l.error!=null)throw RPCError.fromObject(l.error);return l.result});return o==null?u:(o.addEventListener("abort",()=>{this.notify(ABORT_REQUEST_METHOD,{id:c})}),abortable(u,o))}async notify(e,n=void 0){await _classPrivateFieldGet(this,_connection).send({jsonrpc:"2.0",method:e,params:n})}constructor(e){_classPrivateFieldInit(this,_connection,{writable:!0,value:void 0}),_classPrivateFieldSet(this,_connection,e)}}const GRAMMAR=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = dnsauthority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = *( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 4501

dnsauthority    = host [ ":" port ]
                             ; See RFC 3986 for the
                             ; definition of "host" and "port".

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`;class ParsedMessage{constructor(e){const n=new apgApi(GRAMMAR);if(n.generate(),n.errors.length)throw console.error(n.errorsToAscii()),console.error(n.linesToAscii()),console.log(n.displayAttributeErrors()),new Error("ABNF grammar has errors");const a=n.toObject(),o=new apgLib.parser;o.ast=new apgLib.ast;const c=apgLib.ids,u=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.domain=apgLib.utils.charsToString(G,J,k)),ee};o.ast.callbacks.domain=u;const l=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.address=apgLib.utils.charsToString(G,J,k)),ee};o.ast.callbacks.address=l;const p=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.statement=apgLib.utils.charsToString(G,J,k)),ee};o.ast.callbacks.statement=p;const b=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.uri||(ne.uri=apgLib.utils.charsToString(G,J,k))),ee};o.ast.callbacks.uri=b;const v=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.version=apgLib.utils.charsToString(G,J,k)),ee};o.ast.callbacks.version=v;const x=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.chainId=apgLib.utils.charsToString(G,J,k)),ee};o.ast.callbacks["chain-id"]=x;const _=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.nonce=apgLib.utils.charsToString(G,J,k)),ee};o.ast.callbacks.nonce=_;const E=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.issuedAt=apgLib.utils.charsToString(G,J,k)),ee};o.ast.callbacks["issued-at"]=E;const $=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.expirationTime=apgLib.utils.charsToString(G,J,k)),ee};o.ast.callbacks["expiration-time"]=$;const S=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.notBefore=apgLib.utils.charsToString(G,J,k)),ee};o.ast.callbacks["not-before"]=S;const A=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.requestId=apgLib.utils.charsToString(G,J,k)),ee};o.ast.callbacks["request-id"]=A;const I=function(U,G,J,k,ne){const ee=c.SEM_OK;return U===c.SEM_PRE&&(ne.resources=apgLib.utils.charsToString(G,J,k).slice(3).split(`
- `)),ee};o.ast.callbacks.resources=I;const O=o.parse(a,"sign-in-with-ethereum",e);if(!O.success)throw new Error(`Invalid message: ${JSON.stringify(O)}`);const F={};o.ast.translate(F);for(const[U,G]of Object.entries(F))this[U]=G}}function _extends(){return _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_extends.apply(this,arguments)}var CAIP2={name:"chainId",regex:"[-:a-zA-Z0-9]{5,41}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"}}}},CAIP10={name:"accountId",regex:"[-:a-zA-Z0-9]{7,106}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"},2:{name:"address",regex:"[a-zA-Z0-9]{1,64}"}}}},AssetName$1={name:"assetName",regex:"[-:a-zA-Z0-9]{5,73}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,64}"}}}},CAIP19AssetType={name:"assetType",regex:"[-:a-zA-Z0-9]{11,115}",parameters:{delimiter:"/",values:{0:CAIP2,1:AssetName$1}}},CAIP19AssetId={name:"assetId",regex:"[-:a-zA-Z0-9]{13,148}",parameters:{delimiter:"/",values:{0:CAIP2,1:AssetName$1,2:{name:"tokenId",regex:"[-a-zA-Z0-9]{1,32}"}}}},CAIP={2:CAIP2,10:CAIP10,19:{assetName:AssetName$1,assetType:CAIP19AssetType,assetId:CAIP19AssetId}};function splitParams(t,e){return t.split(e.parameters.delimiter)}function getParams(t,e){var n=splitParams(t,e),a={};return n.forEach(function(o,c){a[e.parameters.values[c].name]=o}),a}function joinParams(t,e){return Object.values(e.parameters.values).map(function(n){var a=t[n.name];return typeof a=="string"?a:joinParams(a,n)}).join(e.parameters.delimiter)}function isValidId(t,e){if(!new RegExp(e.regex).test(t))return!1;var n=splitParams(t,e);if(n.length!==Object.keys(e.parameters.values).length)return!1;var a=n.map(function(o,c){return new RegExp(e.parameters.values[c].regex).test(o)}).filter(function(o){return!!o});return a.length===n.length}var ChainId=function(){function t(n){typeof n=="string"&&(n=t.parse(n)),this.namespace=n.namespace,this.reference=n.reference}t.parse=function(a){if(!isValidId(a,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+a);return new t(getParams(a,this.spec)).toJSON()},t.format=function(a){return joinParams(a,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},t}();ChainId.spec=CAIP[2];var AccountId=function(){function t(n){typeof n=="string"&&(n=t.parse(n)),this.chainId=new ChainId(n.chainId),this.address=n.address}t.parse=function(a){if(!isValidId(a,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+a);var o=getParams(a,this.spec),c=o.namespace,u=o.reference,l=o.address,p=new ChainId({namespace:c,reference:u});return new t({chainId:p,address:l}).toJSON()},t.format=function(a){var o=new ChainId(a.chainId),c=_extends({},o.toJSON(),{address:a.address});return joinParams(c,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{chainId:this.chainId.toJSON(),address:this.address}},t}();AccountId.spec=CAIP[10];var ErrorTypes;(function(t){t.INVALID_SIGNATURE="Invalid signature.",t.EXPIRED_MESSAGE="Expired message.",t.MALFORMED_SESSION="Malformed session."})(ErrorTypes||(ErrorTypes={}));var SignatureType;(function(t){t.PERSONAL_SIGNATURE="Personal signature"})(SignatureType||(SignatureType={}));class SiwxMessage{static fromCacao(e){const n=AccountId.parse(e.p.iss.replace("did:pkh:","")),a=new this({domain:e.p.domain,address:n.address,uri:e.p.aud,version:e.p.version,chainId:new ChainId(n.chainId).reference});return e.p.statement&&(a.statement=e.p.statement),e.p.nonce&&(a.nonce=e.p.nonce),e.p.iat&&(a.issuedAt=e.p.iat),e.p.exp&&(a.expirationTime=e.p.exp),e.p.nbf&&(a.notBefore=e.p.nbf),e.p.requestId&&(a.requestId=e.p.requestId),e.p.resources&&(a.resources=e.p.resources),e.s&&(e.s.s&&(a.signature=e.s.s),e.s.t==="eip191"&&(a.type=SignatureType.PERSONAL_SIGNATURE)),a}toMessage(e){return asString(this,e)}constructor(e){if(this.statement=void 0,this.nonce=void 0,this.issuedAt=void 0,this.expirationTime=void 0,this.notBefore=void 0,this.requestId=void 0,this.resources=void 0,this.signature=void 0,typeof e=="string"){const n=new ParsedMessage(e);this.domain=n.domain,this.address=n.address,this.statement=n.statement,this.uri=n.uri,this.version=n.version,this.nonce=n.nonce,this.issuedAt=n.issuedAt,this.expirationTime=n.expirationTime,this.notBefore=n.notBefore,this.requestId=n.requestId,this.chainId=n.chainId,this.resources=n.resources}else Object.assign(this,e)}}function asLegacyChainIdString(t,e){const n=`${t.domain} wants you to sign in with your ${e} account:`,a=`URI: ${t.uri}`;let o=[n,t.address].join(`
`);const c=`Version: ${t.version}`;t.nonce||(t.nonce=(Math.random()+1).toString(36).substring(4));const u=`Nonce: ${t.nonce}`,l=[a,c,u];if(t.issuedAt&&Date.parse(t.issuedAt),t.issuedAt=t.issuedAt?t.issuedAt:new Date().toISOString(),l.push(`Issued At: ${t.issuedAt}`),t.expirationTime){const b=`Expiration Time: ${t.expirationTime}`;l.push(b)}t.notBefore&&l.push(`Not Before: ${t.notBefore}`),t.requestId&&l.push(`Request ID: ${t.requestId}`),t.chainId&&l.push(`Chain ID: ${t.chainId}`),t.resources&&l.push(["Resources:",...t.resources.map(b=>`- ${b}`)].join(`
`));const p=l.join(`
`);return t.statement&&(o=[o,t.statement].join(`

`)),[o,p].join(`

`)}function asString(t,e){const n=`${t.domain} wants you to sign in with your ${e} account:`,a=`URI: ${t.uri}`;let o=[n,t.address].join(`
`);const c=`Version: ${t.version}`;t.nonce||(t.nonce=(Math.random()+1).toString(36).substring(4));const u=`Nonce: ${t.nonce}`,l=`Chain ID: ${t.chainId}`,p=[a,c,l,u];if(t.issuedAt&&Date.parse(t.issuedAt),t.issuedAt=t.issuedAt?t.issuedAt:new Date().toISOString(),p.push(`Issued At: ${t.issuedAt}`),t.expirationTime){const v=`Expiration Time: ${t.expirationTime}`;p.push(v)}t.notBefore&&p.push(`Not Before: ${t.notBefore}`),t.requestId&&p.push(`Request ID: ${t.requestId}`),t.resources&&t.resources.length>=1&&p.push(["Resources:",...t.resources.map(v=>`- ${v}`)].join(`
`));const b=p.join(`
`);return t.statement&&(o=[o,t.statement].join(`

`)),[o,b].join(`

`)}class SiweMessage extends SiwxMessage{toMessage(){return super.toMessage("Ethereum")}signMessage(){let e;switch(this.type){case SignatureType.PERSONAL_SIGNATURE:{e=this.toMessage();break}default:{e=this.toMessage();break}}return e}}const CLOCK_SKEW_DEFAULT_SEC=5*60;new Date("2022-09-20").valueOf();var Cacao;(function(t){function e(l){const p={h:{t:"eip4361"},p:{domain:l.domain,iat:l.issuedAt,iss:`did:pkh:eip155:${l.chainId}:${l.address}`,aud:l.uri,version:l.version,nonce:l.nonce}};return l.signature&&(p.s={t:"eip191",s:l.signature}),l.notBefore&&(p.p.nbf=l.notBefore),l.expirationTime&&(p.p.exp=l.expirationTime),l.statement&&(p.p.statement=l.statement),l.requestId&&(p.p.requestId=l.requestId),l.resources&&(p.p.resources=l.resources),p}t.fromSiweMessage=e;function n(l){const p={h:{t:"caip122"},p:{domain:l.domain,iat:l.issuedAt,iss:`did:pkh:solana:${l.chainId}:${l.address}`,aud:l.uri,version:l.version,nonce:l.nonce}};return l.signature&&(p.s={t:"solana:ed25519",s:l.signature}),l.notBefore&&(p.p.nbf=l.notBefore),l.expirationTime&&(p.p.exp=l.expirationTime),l.statement&&(p.p.statement=l.statement),l.requestId&&(p.p.requestId=l.requestId),l.resources&&(p.p.resources=l.resources),p}t.fromSiwsMessage=n;function a(l){const p={h:{t:"caip122"},p:{domain:l.domain,iat:l.issuedAt,iss:`did:pkh:tezos:${l.chainId}:${l.address}`,aud:l.uri,version:l.version,nonce:l.nonce}};return l.signature&&(p.s={t:"tezos:ed25519",s:l.signature}),l.notBefore&&(p.p.nbf=l.notBefore),l.expirationTime&&(p.p.exp=l.expirationTime),l.statement&&(p.p.statement=l.statement),l.requestId&&(p.p.requestId=l.requestId),l.resources&&(p.p.resources=l.resources),p}t.fromSiwTezosMessage=a;function o(l){const p={h:{t:"caip122"},p:{domain:l.domain,iat:l.issuedAt,iss:`did:pkh:stacks:${l.chainId}:${l.address}`,aud:l.uri,version:l.version,nonce:l.nonce}};return l.signature&&(p.s={t:"stacks:secp256k1",s:l.signature}),l.notBefore&&(p.p.nbf=l.notBefore),l.expirationTime&&(p.p.exp=l.expirationTime),l.statement&&(p.p.statement=l.statement),l.requestId&&(p.p.requestId=l.requestId),l.resources&&(p.p.resources=l.resources),p}t.fromSiwStacksMessage=o;async function c(l){return(await decode$g({bytes:l,codec:dagCbor,hasher:sha256$6})).value}t.fromBlockBytes=c;async function u(l,p={}){assertSigned(l);const b=p.verifiers[l.s.t];if(!b)throw new Error("Unsupported CACAO signature type, register the needed verifier");return b(l,p)}t.verify=u})(Cacao||(Cacao={}));var CacaoBlock;(function(t){function e(n){return encode$i({value:n,codec:dagCbor,hasher:sha256$6})}t.fromCacao=e})(CacaoBlock||(CacaoBlock={}));function assertSigned(t){if(t.s===null||t.s===void 0)throw new Error("CACAO does not have a signature")}function verifyTimeChecks(t,e){const n=e.atTime?e.atTime.getTime():Date.now(),a=(e.clockSkewSecs??CLOCK_SKEW_DEFAULT_SEC)*1e3;if(Date.parse(t.p.iat)>n+a||Date.parse(t.p.nbf)>n+a)throw new Error("CACAO is not valid yet");const o=e.revocationPhaseOutSecs?e.revocationPhaseOutSecs*1e3:0;if(!e.disableExpirationCheck&&Date.parse(t.p.exp)+o+a<n)throw new Error("CACAO has expired")}const version$h="logger/5.7.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,n){const a=e.toLowerCase();LogLevels[a]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(_logLevel>LogLevels[a])&&console.log.apply(console,n)}debug(...e){this._log(Logger.levels.DEBUG,e)}info(...e){this._log(Logger.levels.INFO,e)}warn(...e){this._log(Logger.levels.WARNING,e)}makeError(e,n,a){if(_censorErrors)return this.makeError("censored error",n,{});n||(n=Logger.errors.UNKNOWN_ERROR),a||(a={});const o=[];Object.keys(a).forEach(p=>{const b=a[p];try{if(b instanceof Uint8Array){let v="";for(let x=0;x<b.length;x++)v+=HEX[b[x]>>4],v+=HEX[b[x]&15];o.push(p+"=Uint8Array(0x"+v+")")}else o.push(p+"="+JSON.stringify(b))}catch{o.push(p+"="+JSON.stringify(a[p].toString()))}}),o.push(`code=${n}`),o.push(`version=${this.version}`);const c=e;let u="";switch(n){case ErrorCode.NUMERIC_FAULT:{u="NUMERIC_FAULT";const p=e;switch(p){case"overflow":case"underflow":case"division-by-zero":u+="-"+p;break;case"negative-power":case"negative-width":u+="-unsupported";break;case"unbound-bitwise-result":u+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:u=n;break}u&&(e+=" [ See: https://links.ethers.org/v5-errors-"+u+" ]"),o.length&&(e+=" ("+o.join(", ")+")");const l=new Error(e);return l.reason=c,l.code=n,Object.keys(a).forEach(function(p){l[p]=a[p]}),l}throwError(e,n,a){throw this.makeError(e,n,a)}throwArgumentError(e,n,a){return this.throwError(e,Logger.errors.INVALID_ARGUMENT,{argument:n,value:a})}assert(e,n,a,o){e||this.throwError(n,a,o)}assertArgument(e,n,a,o){e||this.throwArgumentError(n,a,o)}checkNormalize(e){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(e,n){typeof e=="number"&&(n==null&&(n="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(n,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(n,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,n,a){a?a=": "+a:a="",e<n&&this.throwError("missing argument"+a,Logger.errors.MISSING_ARGUMENT,{count:e,expectedCount:n}),e>n&&this.throwError("too many arguments"+a,Logger.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:n})}checkNew(e,n){(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:n.name})}checkAbstract(e,n){e===n?this.throwError("cannot instantiate abstract class "+JSON.stringify(n.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:n.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version$h)),_globalLogger}static setCensorship(e,n){if(!e&&n&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!e)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!e,_permanentCensorErrors=!!n}static setLogLevel(e){const n=LogLevels[e.toLowerCase()];if(n==null){Logger.globalLogger().warn("invalid log level - "+e);return}_logLevel=n}static from(e){return new Logger(e)}}Logger.errors=ErrorCode;Logger.levels=LogLevel;const version$g="bytes/5.7.0",logger$h=new Logger(version$g);function isHexable(t){return!!t.toHexString}function addSlice(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function isBytesLike(t){return isHexString(t)&&!(t.length%2)||isBytes(t)}function isInteger(t){return typeof t=="number"&&t==t&&t%1===0}function isBytes(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!isInteger(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const n=t[e];if(!isInteger(n)||n<0||n>=256)return!1}return!0}function arrayify(t,e){if(e||(e={}),typeof t=="number"){logger$h.checkSafeUint53(t,"invalid arrayify value");const n=[];for(;t;)n.unshift(t&255),t=parseInt(String(t/256));return n.length===0&&n.push(0),addSlice(new Uint8Array(n))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t)&&(t=t.toHexString()),isHexString(t)){let n=t.substring(2);n.length%2&&(e.hexPad==="left"?n="0"+n:e.hexPad==="right"?n+="0":logger$h.throwArgumentError("hex data is odd-length","value",t));const a=[];for(let o=0;o<n.length;o+=2)a.push(parseInt(n.substring(o,o+2),16));return addSlice(new Uint8Array(a))}return isBytes(t)?addSlice(new Uint8Array(t)):logger$h.throwArgumentError("invalid arrayify value","value",t)}function concat(t){const e=t.map(o=>arrayify(o)),n=e.reduce((o,c)=>o+c.length,0),a=new Uint8Array(n);return e.reduce((o,c)=>(a.set(c,o),o+c.length),0),addSlice(a)}function stripZeros(t){let e=arrayify(t);if(e.length===0)return e;let n=0;for(;n<e.length&&e[n]===0;)n++;return n&&(e=e.slice(n)),e}function zeroPad(t,e){t=arrayify(t),t.length>e&&logger$h.throwArgumentError("value out of range","value",arguments[0]);const n=new Uint8Array(e);return n.set(t,e-t.length),addSlice(n)}function isHexString(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const HexCharacters="0123456789abcdef";function hexlify(t,e){if(e||(e={}),typeof t=="number"){logger$h.checkSafeUint53(t,"invalid hexlify value");let n="";for(;t;)n=HexCharacters[t&15]+n,t=Math.floor(t/16);return n.length?(n.length%2&&(n="0"+n),"0x"+n):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t))return t.toHexString();if(isHexString(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":logger$h.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(isBytes(t)){let n="0x";for(let a=0;a<t.length;a++){let o=t[a];n+=HexCharacters[(o&240)>>4]+HexCharacters[o&15]}return n}return logger$h.throwArgumentError("invalid hexlify value","value",t)}function hexDataLength(t){if(typeof t!="string")t=hexlify(t);else if(!isHexString(t)||t.length%2)return null;return(t.length-2)/2}function hexDataSlice(t,e,n){return typeof t!="string"?t=hexlify(t):(!isHexString(t)||t.length%2)&&logger$h.throwArgumentError("invalid hexData","value",t),e=2+2*e,n!=null?"0x"+t.substring(e,2+2*n):"0x"+t.substring(e)}function hexConcat(t){let e="0x";return t.forEach(n=>{e+=hexlify(n).substring(2)}),e}function hexZeroPad(t,e){for(typeof t!="string"?t=hexlify(t):isHexString(t)||logger$h.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&logger$h.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function splitSignature(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(t)){let n=arrayify(t);n.length===64?(e.v=27+(n[32]>>7),n[32]&=127,e.r=hexlify(n.slice(0,32)),e.s=hexlify(n.slice(32,64))):n.length===65?(e.r=hexlify(n.slice(0,32)),e.s=hexlify(n.slice(32,64)),e.v=n[64]):logger$h.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:logger$h.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(n[32]|=128),e._vs=hexlify(n.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const o=zeroPad(arrayify(e._vs),32);e._vs=hexlify(o);const c=o[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=c:e.recoveryParam!==c&&logger$h.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),o[0]&=127;const u=hexlify(o);e.s==null?e.s=u:e.s!==u&&logger$h.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?logger$h.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const o=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==o&&logger$h.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!isHexString(e.r)?logger$h.throwArgumentError("signature missing or invalid r","signature",t):e.r=hexZeroPad(e.r,32),e.s==null||!isHexString(e.s)?logger$h.throwArgumentError("signature missing or invalid s","signature",t):e.s=hexZeroPad(e.s,32);const n=arrayify(e.s);n[0]>=128&&logger$h.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(n[0]|=128);const a=hexlify(n);e._vs&&(isHexString(e._vs)||logger$h.throwArgumentError("signature invalid _vs","signature",t),e._vs=hexZeroPad(e._vs,32)),e._vs==null?e._vs=a:e._vs!==a&&logger$h.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function joinSignature(t){return t=splitSignature(t),hexlify(concat([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}var bnExports=requireBn();const BN$1=getDefaultExportFromCjs(bnExports),version$f="bignumber/5.7.0";var BN=BN$1.BN;const logger$g=new Logger(version$f),_constructorGuard$1={},MAX_SAFE=9007199254740991;let _warnedToStringRadix=!1;class BigNumber{constructor(e,n){e!==_constructorGuard$1&&logger$g.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=n,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return toBigNumber(toBN(this).fromTwos(e))}toTwos(e){return toBigNumber(toBN(this).toTwos(e))}abs(){return this._hex[0]==="-"?BigNumber.from(this._hex.substring(1)):this}add(e){return toBigNumber(toBN(this).add(toBN(e)))}sub(e){return toBigNumber(toBN(this).sub(toBN(e)))}div(e){return BigNumber.from(e).isZero()&&throwFault("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(e)))}mul(e){return toBigNumber(toBN(this).mul(toBN(e)))}mod(e){const n=toBN(e);return n.isNeg()&&throwFault("division-by-zero","mod"),toBigNumber(toBN(this).umod(n))}pow(e){const n=toBN(e);return n.isNeg()&&throwFault("negative-power","pow"),toBigNumber(toBN(this).pow(n))}and(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(n))}or(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(n))}xor(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(n))}mask(e){return(this.isNegative()||e<0)&&throwFault("negative-width","mask"),toBigNumber(toBN(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&throwFault("negative-width","shl"),toBigNumber(toBN(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&throwFault("negative-width","shr"),toBigNumber(toBN(this).shrn(e))}eq(e){return toBN(this).eq(toBN(e))}lt(e){return toBN(this).lt(toBN(e))}lte(e){return toBN(this).lte(toBN(e))}gt(e){return toBN(this).gt(toBN(e))}gte(e){return toBN(this).gte(toBN(e))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch{throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return logger$g.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$g.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?logger$g.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):logger$g.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof BigNumber)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new BigNumber(_constructorGuard$1,toHex(e)):e.match(/^-?[0-9]+$/)?new BigNumber(_constructorGuard$1,toHex(new BN(e))):logger$g.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&throwFault("underflow","BigNumber.from",e),(e>=MAX_SAFE||e<=-MAX_SAFE)&&throwFault("overflow","BigNumber.from",e),BigNumber.from(String(e));const n=e;if(typeof n=="bigint")return BigNumber.from(n.toString());if(isBytes(n))return BigNumber.from(hexlify(n));if(n)if(n.toHexString){const a=n.toHexString();if(typeof a=="string")return BigNumber.from(a)}else{let a=n._hex;if(a==null&&n.type==="BigNumber"&&(a=n.hex),typeof a=="string"&&(isHexString(a)||a[0]==="-"&&isHexString(a.substring(1))))return BigNumber.from(a)}return logger$g.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function toHex(t){if(typeof t!="string")return toHex(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&logger$g.throwArgumentError("invalid hex","value",t),t=toHex(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function toBigNumber(t){return BigNumber.from(toHex(t))}function toBN(t){const e=BigNumber.from(t).toHexString();return e[0]==="-"?new BN("-"+e.substring(3),16):new BN(e.substring(2),16)}function throwFault(t,e,n){const a={fault:t,operation:e};return n!=null&&(a.value=n),logger$g.throwError(t,Logger.errors.NUMERIC_FAULT,a)}function _base36To16(t){return new BN(t,36).toString(16)}function keccak256(t){return"0x"+sha3.keccak_256(arrayify(t))}const version$e="rlp/5.7.0",logger$f=new Logger(version$e);function arrayifyInteger(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function _encode(t){if(Array.isArray(t)){let a=[];if(t.forEach(function(c){a=a.concat(_encode(c))}),a.length<=55)return a.unshift(192+a.length),a;const o=arrayifyInteger(a.length);return o.unshift(247+o.length),o.concat(a)}isBytesLike(t)||logger$f.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(arrayify(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=arrayifyInteger(e.length);return n.unshift(183+n.length),n.concat(e)}function encode(t){return hexlify(_encode(t))}const version$d="address/5.7.0",logger$e=new Logger(version$d);function getChecksumAddress(t){isHexString(t,20)||logger$e.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let o=0;o<40;o++)n[o]=e[o].charCodeAt(0);const a=arrayify(keccak256(n));for(let o=0;o<40;o+=2)a[o>>1]>>4>=8&&(e[o]=e[o].toUpperCase()),(a[o>>1]&15)>=8&&(e[o+1]=e[o+1].toUpperCase());return"0x"+e.join("")}const MAX_SAFE_INTEGER=9007199254740991;function log10(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const ibanLookup={};for(let t=0;t<10;t++)ibanLookup[String(t)]=String(t);for(let t=0;t<26;t++)ibanLookup[String.fromCharCode(65+t)]=String(10+t);const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(a=>ibanLookup[a]).join("");for(;e.length>=safeDigits;){let a=e.substring(0,safeDigits);e=parseInt(a,10)%97+e.substring(a.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}function getAddress(t){let e=null;if(typeof t!="string"&&logger$e.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=getChecksumAddress(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&logger$e.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==ibanChecksum(t)&&logger$e.throwArgumentError("bad icap checksum","address",t),e=_base36To16(t.substring(4));e.length<40;)e="0"+e;e=getChecksumAddress("0x"+e)}else logger$e.throwArgumentError("invalid address","address",t);return e}const version$c="properties/5.7.0";var __awaiter$5=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function l(v){try{b(a.next(v))}catch(x){u(x)}}function p(v){try{b(a.throw(v))}catch(x){u(x)}}function b(v){v.done?c(v.value):o(v.value).then(l,p)}b((a=a.apply(t,e||[])).next())})};const logger$d=new Logger(version$c);function defineReadOnly(t,e,n){Object.defineProperty(t,e,{enumerable:!0,value:n,writable:!1})}function resolveProperties(t){return __awaiter$5(this,void 0,void 0,function*(){const e=Object.keys(t).map(a=>{const o=t[a];return Promise.resolve(o).then(c=>({key:a,value:c}))});return(yield Promise.all(e)).reduce((a,o)=>(a[o.key]=o.value,a),{})})}function checkProperties(t,e){(!t||typeof t!="object")&&logger$d.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(n=>{e[n]||logger$d.throwArgumentError("invalid object key - "+n,"transaction:"+n,t)})}function shallowCopy(t){const e={};for(const n in t)e[n]=t[n];return e}const opaque={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function _isFrozen(t){if(t==null||opaque[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let n=0;n<e.length;n++){let a=null;try{a=t[e[n]]}catch{continue}if(!_isFrozen(a))return!1}return!0}return logger$d.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function _deepCopy(t){if(_isFrozen(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>deepCopy(e)));if(typeof t=="object"){const e={};for(const n in t){const a=t[n];a!==void 0&&defineReadOnly(e,n,deepCopy(a))}return e}return logger$d.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function deepCopy(t){return _deepCopy(t)}class Description{constructor(e){for(const n in e)this[n]=deepCopy(e[n])}}const version$b="abstract-provider/5.7.0";var __awaiter$4=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function l(v){try{b(a.next(v))}catch(x){u(x)}}function p(v){try{b(a.throw(v))}catch(x){u(x)}}function b(v){v.done?c(v.value):o(v.value).then(l,p)}b((a=a.apply(t,e||[])).next())})};const logger$c=new Logger(version$b);class Provider{constructor(){logger$c.checkAbstract(new.target,Provider),defineReadOnly(this,"_isProvider",!0)}getFeeData(){return __awaiter$4(this,void 0,void 0,function*(){const{block:e,gasPrice:n}=yield resolveProperties({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(u=>null)});let a=null,o=null,c=null;return e&&e.baseFeePerGas&&(a=e.baseFeePerGas,c=BigNumber.from("1500000000"),o=e.baseFeePerGas.mul(2).add(c)),{lastBaseFeePerGas:a,maxFeePerGas:o,maxPriorityFeePerGas:c,gasPrice:n}})}addListener(e,n){return this.on(e,n)}removeListener(e,n){return this.off(e,n)}static isProvider(e){return!!(e&&e._isProvider)}}const version$a="abstract-signer/5.7.0";var __awaiter$3=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function l(v){try{b(a.next(v))}catch(x){u(x)}}function p(v){try{b(a.throw(v))}catch(x){u(x)}}function b(v){v.done?c(v.value):o(v.value).then(l,p)}b((a=a.apply(t,e||[])).next())})};const logger$b=new Logger(version$a),allowedTransactionKeys$1=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer{constructor(){logger$b.checkAbstract(new.target,Signer),defineReadOnly(this,"_isSigner",!0)}getBalance(e){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const n=yield resolveProperties(this.checkTransaction(e));return yield this.provider.estimateGas(n)})}call(e,n){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("call");const a=yield resolveProperties(this.checkTransaction(e));return yield this.provider.call(a,n)})}sendTransaction(e){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const n=yield this.populateTransaction(e),a=yield this.signTransaction(n);return yield this.provider.sendTransaction(a)})}getChainId(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const a in e)allowedTransactionKeys$1.indexOf(a)===-1&&logger$b.throwArgumentError("invalid transaction key: "+a,"transaction",e);const n=shallowCopy(e);return n.from==null?n.from=this.getAddress():n.from=Promise.all([Promise.resolve(n.from),this.getAddress()]).then(a=>(a[0].toLowerCase()!==a[1].toLowerCase()&&logger$b.throwArgumentError("from address mismatch","transaction",e),a[0])),n}populateTransaction(e){return __awaiter$3(this,void 0,void 0,function*(){const n=yield resolveProperties(this.checkTransaction(e));n.to!=null&&(n.to=Promise.resolve(n.to).then(o=>__awaiter$3(this,void 0,void 0,function*(){if(o==null)return null;const c=yield this.resolveName(o);return c==null&&logger$b.throwArgumentError("provided ENS name resolves to null","tx.to",o),c})),n.to.catch(o=>{}));const a=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||a)?logger$b.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(n.type===0||n.type===1)&&a&&logger$b.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1)n.gasPrice==null&&(n.gasPrice=this.getGasPrice());else{const o=yield this.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const c=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=c,n.maxPriorityFeePerGas=c}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(a&&logger$b.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):logger$b.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else n.type===2&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return n.nonce==null&&(n.nonce=this.getTransactionCount("pending")),n.gasLimit==null&&(n.gasLimit=this.estimateGas(n).catch(o=>{if(forwardErrors.indexOf(o.code)>=0)throw o;return logger$b.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:o,tx:n})})),n.chainId==null?n.chainId=this.getChainId():n.chainId=Promise.all([Promise.resolve(n.chainId),this.getChainId()]).then(o=>(o[1]!==0&&o[0]!==o[1]&&logger$b.throwArgumentError("chainId address mismatch","transaction",e),o[0])),yield resolveProperties(n)})}_checkProvider(e){this.provider||logger$b.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}const version$9="strings/5.7.0",logger$a=new Logger(version$9);var UnicodeNormalizationForm;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function toUtf8Bytes(t,e=UnicodeNormalizationForm.current){e!=UnicodeNormalizationForm.current&&(logger$a.checkNormalize(),t=t.normalize(e));let n=[];for(let a=0;a<t.length;a++){const o=t.charCodeAt(a);if(o<128)n.push(o);else if(o<2048)n.push(o>>6|192),n.push(o&63|128);else if((o&64512)==55296){a++;const c=t.charCodeAt(a);if(a>=t.length||(c&64512)!==56320)throw new Error("invalid utf-8 string");const u=65536+((o&1023)<<10)+(c&1023);n.push(u>>18|240),n.push(u>>12&63|128),n.push(u>>6&63|128),n.push(u&63|128)}else n.push(o>>12|224),n.push(o>>6&63|128),n.push(o&63|128)}return arrayify(n)}function id(t){return keccak256(toUtf8Bytes(t))}const version$8="hash/5.7.0",messagePrefix=`Ethereum Signed Message:
`;function hashMessage(t){return typeof t=="string"&&(t=toUtf8Bytes(t)),keccak256(concat([toUtf8Bytes(messagePrefix),toUtf8Bytes(String(t.length)),t]))}var __awaiter$2=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function l(v){try{b(a.next(v))}catch(x){u(x)}}function p(v){try{b(a.throw(v))}catch(x){u(x)}}function b(v){v.done?c(v.value):o(v.value).then(l,p)}b((a=a.apply(t,e||[])).next())})};const logger$9=new Logger(version$8),padding=new Uint8Array(32);padding.fill(0);const NegativeOne=BigNumber.from(-1),Zero=BigNumber.from(0),One=BigNumber.from(1),MaxUint256=BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(t){const e=arrayify(t),n=e.length%32;return n?hexConcat([e,padding.slice(n)]):hexlify(e)}const hexTrue=hexZeroPad(One.toHexString(),32),hexFalse=hexZeroPad(Zero.toHexString(),32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(t){return function(e){return typeof e!="string"&&logger$9.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(t){try{return BigNumber.from(t).toString()}catch{}return logger$9.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return getAddress(t).toLowerCase()}catch{}return logger$9.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=arrayify(t);if(e.length!==32)throw new Error("bad length");return hexlify(e)}catch{}return logger$9.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function getBaseEncoder(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const n=e[1]==="",a=parseInt(e[2]||"256");(a%8!==0||a>256||e[2]&&e[2]!==String(a))&&logger$9.throwArgumentError("invalid numeric width","type",t);const o=MaxUint256.mask(n?a-1:a),c=n?o.add(One).mul(NegativeOne):Zero;return function(u){const l=BigNumber.from(u);return(l.lt(c)||l.gt(o))&&logger$9.throwArgumentError(`value out-of-bounds for ${t}`,"value",u),hexZeroPad(l.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return(n===0||n>32||e[1]!==String(n))&&logger$9.throwArgumentError("invalid bytes width","type",t),function(a){return arrayify(a).length!==n&&logger$9.throwArgumentError(`invalid length for ${t}`,"value",a),hexPadRight(a)}}}switch(t){case"address":return function(e){return hexZeroPad(getAddress(e),32)};case"bool":return function(e){return e?hexTrue:hexFalse};case"bytes":return function(e){return keccak256(e)};case"string":return function(e){return id(e)}}return null}function encodeType(t,e){return`${t}(${e.map(({name:n,type:a})=>a+" "+n).join(",")})`}class TypedDataEncoder{constructor(e){defineReadOnly(this,"types",Object.freeze(deepCopy(e))),defineReadOnly(this,"_encoderCache",{}),defineReadOnly(this,"_types",{});const n={},a={},o={};Object.keys(e).forEach(l=>{n[l]={},a[l]=[],o[l]={}});for(const l in e){const p={};e[l].forEach(b=>{p[b.name]&&logger$9.throwArgumentError(`duplicate variable name ${JSON.stringify(b.name)} in ${JSON.stringify(l)}`,"types",e),p[b.name]=!0;const v=b.type.match(/^([^\x5b]*)(\x5b|$)/)[1];v===l&&logger$9.throwArgumentError(`circular type reference to ${JSON.stringify(v)}`,"types",e),!getBaseEncoder(v)&&(a[v]||logger$9.throwArgumentError(`unknown type ${JSON.stringify(v)}`,"types",e),a[v].push(l),n[l][v]=!0)})}const c=Object.keys(a).filter(l=>a[l].length===0);c.length===0?logger$9.throwArgumentError("missing primary type","types",e):c.length>1&&logger$9.throwArgumentError(`ambiguous primary types or unused types: ${c.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),defineReadOnly(this,"primaryType",c[0]);function u(l,p){p[l]&&logger$9.throwArgumentError(`circular type reference to ${JSON.stringify(l)}`,"types",e),p[l]=!0,Object.keys(n[l]).forEach(b=>{a[b]&&(u(b,p),Object.keys(p).forEach(v=>{o[v][b]=!0}))}),delete p[l]}u(this.primaryType,{});for(const l in o){const p=Object.keys(o[l]);p.sort(),this._types[l]=encodeType(l,e[l])+p.map(b=>encodeType(b,e[b])).join("")}}getEncoder(e){let n=this._encoderCache[e];return n||(n=this._encoderCache[e]=this._getEncoder(e)),n}_getEncoder(e){{const o=getBaseEncoder(e);if(o)return o}const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const o=n[1],c=this.getEncoder(o),u=parseInt(n[3]);return l=>{u>=0&&l.length!==u&&logger$9.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",l);let p=l.map(c);return this._types[o]&&(p=p.map(keccak256)),keccak256(hexConcat(p))}}const a=this.types[e];if(a){const o=id(this._types[e]);return c=>{const u=a.map(({name:l,type:p})=>{const b=this.getEncoder(p)(c[l]);return this._types[p]?keccak256(b):b});return u.unshift(o),hexConcat(u)}}return logger$9.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const n=this._types[e];return n||logger$9.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return keccak256(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,a){if(getBaseEncoder(e))return a(e,n);const o=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(o){const u=o[1],l=parseInt(o[3]);return l>=0&&n.length!==l&&logger$9.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",n),n.map(p=>this._visit(u,p,a))}const c=this.types[e];return c?c.reduce((u,{name:l,type:p})=>(u[l]=this._visit(p,n[l],a),u),{}):logger$9.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new TypedDataEncoder(e)}static getPrimaryType(e){return TypedDataEncoder.from(e).primaryType}static hashStruct(e,n,a){return TypedDataEncoder.from(n).hashStruct(e,a)}static hashDomain(e){const n=[];for(const a in e){const o=domainFieldTypes[a];o||logger$9.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(a)}`,"domain",e),n.push({name:a,type:o})}return n.sort((a,o)=>domainFieldNames.indexOf(a.name)-domainFieldNames.indexOf(o.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,a){return hexConcat(["0x1901",TypedDataEncoder.hashDomain(e),TypedDataEncoder.from(n).hash(a)])}static hash(e,n,a){return keccak256(TypedDataEncoder.encode(e,n,a))}static resolveNames(e,n,a,o){return __awaiter$2(this,void 0,void 0,function*(){e=shallowCopy(e);const c={};e.verifyingContract&&!isHexString(e.verifyingContract,20)&&(c[e.verifyingContract]="0x");const u=TypedDataEncoder.from(n);u.visit(a,(l,p)=>(l==="address"&&!isHexString(p,20)&&(c[p]="0x"),p));for(const l in c)c[l]=yield o(l);return e.verifyingContract&&c[e.verifyingContract]&&(e.verifyingContract=c[e.verifyingContract]),a=u.visit(a,(l,p)=>l==="address"&&c[p]?c[p]:p),{domain:e,value:a}})}static getPayload(e,n,a){TypedDataEncoder.hashDomain(e);const o={},c=[];domainFieldNames.forEach(p=>{const b=e[p];b!=null&&(o[p]=domainChecks[p](b),c.push({name:p,type:domainFieldTypes[p]}))});const u=TypedDataEncoder.from(n),l=shallowCopy(n);return l.EIP712Domain?logger$9.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",n):l.EIP712Domain=c,u.encode(a),{types:l,domain:o,primaryType:u.primaryType,message:u.visit(a,(p,b)=>{if(p.match(/^bytes(\d*)/))return hexlify(arrayify(b));if(p.match(/^u?int/))return BigNumber.from(b).toString();switch(p){case"address":return b.toLowerCase();case"bool":return!!b;case"string":return typeof b!="string"&&logger$9.throwArgumentError("invalid string","value",b),b}return logger$9.throwArgumentError("unsupported type","type",p)})}}}class BaseX{constructor(e){defineReadOnly(this,"alphabet",e),defineReadOnly(this,"base",e.length),defineReadOnly(this,"_alphabetMap",{}),defineReadOnly(this,"_leader",e.charAt(0));for(let n=0;n<e.length;n++)this._alphabetMap[e.charAt(n)]=n}encode(e){let n=arrayify(e);if(n.length===0)return"";let a=[0];for(let c=0;c<n.length;++c){let u=n[c];for(let l=0;l<a.length;++l)u+=a[l]<<8,a[l]=u%this.base,u=u/this.base|0;for(;u>0;)a.push(u%this.base),u=u/this.base|0}let o="";for(let c=0;n[c]===0&&c<n.length-1;++c)o+=this._leader;for(let c=a.length-1;c>=0;--c)o+=this.alphabet[a[c]];return o}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let n=[];if(e.length===0)return new Uint8Array(n);n.push(0);for(let a=0;a<e.length;a++){let o=this._alphabetMap[e[a]];if(o===void 0)throw new Error("Non-base"+this.base+" character");let c=o;for(let u=0;u<n.length;++u)c+=n[u]*this.base,n[u]=c&255,c>>=8;for(;c>0;)n.push(c&255),c>>=8}for(let a=0;e[a]===this._leader&&a<e.length-1;++a)n.push(0);return arrayify(new Uint8Array(n.reverse()))}}new BaseX("abcdefghijklmnopqrstuvwxyz234567");const Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var SupportedAlgorithm;(function(t){t.sha256="sha256",t.sha512="sha512"})(SupportedAlgorithm||(SupportedAlgorithm={}));const version$7="sha2/5.7.0",logger$8=new Logger(version$7);function ripemd160(t){return"0x"+hash$4.ripemd160().update(arrayify(t)).digest("hex")}function sha256(t){return"0x"+hash$4.sha256().update(arrayify(t)).digest("hex")}function computeHmac(t,e,n){return SupportedAlgorithm[t]||logger$8.throwError("unsupported algorithm "+t,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+hash$4.hmac(hash$4[t],arrayify(e)).update(arrayify(n)).digest("hex")}function pbkdf2$1(t,e,n,a,o){t=arrayify(t),e=arrayify(e);let c,u=1;const l=new Uint8Array(a),p=new Uint8Array(e.length+4);p.set(e);let b,v;for(let x=1;x<=u;x++){p[e.length]=x>>24&255,p[e.length+1]=x>>16&255,p[e.length+2]=x>>8&255,p[e.length+3]=x&255;let _=arrayify(computeHmac(o,t,p));c||(c=_.length,v=new Uint8Array(c),u=Math.ceil(a/c),b=a-(u-1)*c),v.set(_);for(let S=1;S<n;S++){_=arrayify(computeHmac(o,t,_));for(let A=0;A<c;A++)v[A]^=_[A]}const E=(x-1)*c,$=x===u?b:c;l.set(arrayify(v).slice(0,$),E)}return hexlify(l)}function createCommonjsModule(t,e,n){return n={path:e,exports:{},require:function(a,o){return commonjsRequire(a,o??n.path)}},t(n,n.exports),n.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert;function assert(t,e){if(!t)throw new Error(e||"Assertion failed")}assert.equal=function t(e,n,a){if(e!=n)throw new Error(a||"Assertion failed: "+e+" != "+n)};var utils_1$1=createCommonjsModule(function(t,e){var n=e;function a(u,l){if(Array.isArray(u))return u.slice();if(!u)return[];var p=[];if(typeof u!="string"){for(var b=0;b<u.length;b++)p[b]=u[b]|0;return p}if(l==="hex"){u=u.replace(/[^a-z0-9]+/ig,""),u.length%2!==0&&(u="0"+u);for(var b=0;b<u.length;b+=2)p.push(parseInt(u[b]+u[b+1],16))}else for(var b=0;b<u.length;b++){var v=u.charCodeAt(b),x=v>>8,_=v&255;x?p.push(x,_):p.push(_)}return p}n.toArray=a;function o(u){return u.length===1?"0"+u:u}n.zero2=o;function c(u){for(var l="",p=0;p<u.length;p++)l+=o(u[p].toString(16));return l}n.toHex=c,n.encode=function(l,p){return p==="hex"?c(l):l}}),utils_1$1$1=createCommonjsModule(function(t,e){var n=e;n.assert=minimalisticAssert,n.toArray=utils_1$1.toArray,n.zero2=utils_1$1.zero2,n.toHex=utils_1$1.toHex,n.encode=utils_1$1.encode;function a(p,b,v){var x=new Array(Math.max(p.bitLength(),v)+1);x.fill(0);for(var _=1<<b+1,E=p.clone(),$=0;$<x.length;$++){var S,A=E.andln(_-1);E.isOdd()?(A>(_>>1)-1?S=(_>>1)-A:S=A,E.isubn(S)):S=0,x[$]=S,E.iushrn(1)}return x}n.getNAF=a;function o(p,b){var v=[[],[]];p=p.clone(),b=b.clone();for(var x=0,_=0,E;p.cmpn(-x)>0||b.cmpn(-_)>0;){var $=p.andln(3)+x&3,S=b.andln(3)+_&3;$===3&&($=-1),S===3&&(S=-1);var A;$&1?(E=p.andln(7)+x&7,(E===3||E===5)&&S===2?A=-$:A=$):A=0,v[0].push(A);var I;S&1?(E=b.andln(7)+_&7,(E===3||E===5)&&$===2?I=-S:I=S):I=0,v[1].push(I),2*x===A+1&&(x=1-x),2*_===I+1&&(_=1-_),p.iushrn(1),b.iushrn(1)}return v}n.getJSF=o;function c(p,b,v){var x="_"+b;p.prototype[b]=function(){return this[x]!==void 0?this[x]:this[x]=v.call(this)}}n.cachedProperty=c;function u(p){return typeof p=="string"?n.toArray(p,"hex"):p}n.parseBytes=u;function l(p){return new BN$1(p,"hex","le")}n.intFromLE=l}),getNAF=utils_1$1$1.getNAF,getJSF=utils_1$1$1.getJSF,assert$1=utils_1$1$1.assert;function BaseCurve(t,e){this.type=t,this.p=new BN$1(e.p,16),this.red=e.prime?BN$1.red(e.prime):BN$1.mont(this.p),this.zero=new BN$1(0).toRed(this.red),this.one=new BN$1(1).toRed(this.red),this.two=new BN$1(2).toRed(this.red),this.n=e.n&&new BN$1(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base=BaseCurve;BaseCurve.prototype.point=function t(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function t(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function t(e,n){assert$1(e.precomputed);var a=e._getDoubles(),o=getNAF(n,1,this._bitLength),c=(1<<a.step+1)-(a.step%2===0?2:1);c/=3;var u=[],l,p;for(l=0;l<o.length;l+=a.step){p=0;for(var b=l+a.step-1;b>=l;b--)p=(p<<1)+o[b];u.push(p)}for(var v=this.jpoint(null,null,null),x=this.jpoint(null,null,null),_=c;_>0;_--){for(l=0;l<u.length;l++)p=u[l],p===_?x=x.mixedAdd(a.points[l]):p===-_&&(x=x.mixedAdd(a.points[l].neg()));v=v.add(x)}return v.toP()};BaseCurve.prototype._wnafMul=function t(e,n){var a=4,o=e._getNAFPoints(a);a=o.wnd;for(var c=o.points,u=getNAF(n,a,this._bitLength),l=this.jpoint(null,null,null),p=u.length-1;p>=0;p--){for(var b=0;p>=0&&u[p]===0;p--)b++;if(p>=0&&b++,l=l.dblp(b),p<0)break;var v=u[p];assert$1(v!==0),e.type==="affine"?v>0?l=l.mixedAdd(c[v-1>>1]):l=l.mixedAdd(c[-v-1>>1].neg()):v>0?l=l.add(c[v-1>>1]):l=l.add(c[-v-1>>1].neg())}return e.type==="affine"?l.toP():l};BaseCurve.prototype._wnafMulAdd=function t(e,n,a,o,c){var u=this._wnafT1,l=this._wnafT2,p=this._wnafT3,b=0,v,x,_;for(v=0;v<o;v++){_=n[v];var E=_._getNAFPoints(e);u[v]=E.wnd,l[v]=E.points}for(v=o-1;v>=1;v-=2){var $=v-1,S=v;if(u[$]!==1||u[S]!==1){p[$]=getNAF(a[$],u[$],this._bitLength),p[S]=getNAF(a[S],u[S],this._bitLength),b=Math.max(p[$].length,b),b=Math.max(p[S].length,b);continue}var A=[n[$],null,null,n[S]];n[$].y.cmp(n[S].y)===0?(A[1]=n[$].add(n[S]),A[2]=n[$].toJ().mixedAdd(n[S].neg())):n[$].y.cmp(n[S].y.redNeg())===0?(A[1]=n[$].toJ().mixedAdd(n[S]),A[2]=n[$].add(n[S].neg())):(A[1]=n[$].toJ().mixedAdd(n[S]),A[2]=n[$].toJ().mixedAdd(n[S].neg()));var I=[-3,-1,-5,-7,0,7,5,1,3],O=getJSF(a[$],a[S]);for(b=Math.max(O[0].length,b),p[$]=new Array(b),p[S]=new Array(b),x=0;x<b;x++){var F=O[0][x]|0,U=O[1][x]|0;p[$][x]=I[(F+1)*3+(U+1)],p[S][x]=0,l[$]=A}}var G=this.jpoint(null,null,null),J=this._wnafT4;for(v=b;v>=0;v--){for(var k=0;v>=0;){var ne=!0;for(x=0;x<o;x++)J[x]=p[x][v]|0,J[x]!==0&&(ne=!1);if(!ne)break;k++,v--}if(v>=0&&k++,G=G.dblp(k),v<0)break;for(x=0;x<o;x++){var ee=J[x];ee!==0&&(ee>0?_=l[x][ee-1>>1]:ee<0&&(_=l[x][-ee-1>>1].neg()),_.type==="affine"?G=G.mixedAdd(_):G=G.add(_))}}for(v=0;v<o;v++)l[v]=null;return c?G:G.toP()};function BasePoint(t,e){this.curve=t,this.type=e,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function t(){throw new Error("Not implemented")};BasePoint.prototype.validate=function t(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function t(e,n){e=utils_1$1$1.toArray(e,n);var a=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*a){e[0]===6?assert$1(e[e.length-1]%2===0):e[0]===7&&assert$1(e[e.length-1]%2===1);var o=this.point(e.slice(1,1+a),e.slice(1+a,1+2*a));return o}else if((e[0]===2||e[0]===3)&&e.length-1===a)return this.pointFromX(e.slice(1,1+a),e[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function t(e){return this.encode(e,!0)};BasePoint.prototype._encode=function t(e){var n=this.curve.p.byteLength(),a=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",n))};BasePoint.prototype.encode=function t(e,n){return utils_1$1$1.encode(this._encode(n),e)};BasePoint.prototype.precompute=function t(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};BasePoint.prototype._hasDoubles=function t(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};BasePoint.prototype._getDoubles=function t(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],o=this,c=0;c<n;c+=e){for(var u=0;u<e;u++)o=o.dbl();a.push(o)}return{step:e,points:a}};BasePoint.prototype._getNAFPoints=function t(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],a=(1<<e)-1,o=a===1?null:this.dbl(),c=1;c<a;c++)n[c]=n[c-1].add(o);return{wnd:e,points:n}};BasePoint.prototype._getBeta=function t(){return null};BasePoint.prototype.dblp=function t(e){for(var n=this,a=0;a<e;a++)n=n.dbl();return n};var inherits_browser=createCommonjsModule(function(t){typeof Object.create=="function"?t.exports=function(n,a){a&&(n.super_=a,n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(n,a){if(a){n.super_=a;var o=function(){};o.prototype=a.prototype,n.prototype=new o,n.prototype.constructor=n}}}),assert$2=utils_1$1$1.assert;function ShortCurve(t){base.call(this,"short",t),this.a=new BN$1(t.a,16).toRed(this.red),this.b=new BN$1(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve,base);var short_1=ShortCurve;ShortCurve.prototype._getEndomorphism=function t(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,a;if(e.beta)n=new BN$1(e.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);n=o[0].cmp(o[1])<0?o[0]:o[1],n=n.toRed(this.red)}if(e.lambda)a=new BN$1(e.lambda,16);else{var c=this._getEndoRoots(this.n);this.g.mul(c[0]).x.cmp(this.g.x.redMul(n))===0?a=c[0]:(a=c[1],assert$2(this.g.mul(a).x.cmp(this.g.x.redMul(n))===0))}var u;return e.basis?u=e.basis.map(function(l){return{a:new BN$1(l.a,16),b:new BN$1(l.b,16)}}):u=this._getEndoBasis(a),{beta:n,lambda:a,basis:u}}};ShortCurve.prototype._getEndoRoots=function t(e){var n=e===this.p?this.red:BN$1.mont(e),a=new BN$1(2).toRed(n).redInvm(),o=a.redNeg(),c=new BN$1(3).toRed(n).redNeg().redSqrt().redMul(a),u=o.redAdd(c).fromRed(),l=o.redSub(c).fromRed();return[u,l]};ShortCurve.prototype._getEndoBasis=function t(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),a=e,o=this.n.clone(),c=new BN$1(1),u=new BN$1(0),l=new BN$1(0),p=new BN$1(1),b,v,x,_,E,$,S,A=0,I,O;a.cmpn(0)!==0;){var F=o.div(a);I=o.sub(F.mul(a)),O=l.sub(F.mul(c));var U=p.sub(F.mul(u));if(!x&&I.cmp(n)<0)b=S.neg(),v=c,x=I.neg(),_=O;else if(x&&++A===2)break;S=I,o=a,a=I,l=c,c=O,p=u,u=U}E=I.neg(),$=O;var G=x.sqr().add(_.sqr()),J=E.sqr().add($.sqr());return J.cmp(G)>=0&&(E=b,$=v),x.negative&&(x=x.neg(),_=_.neg()),E.negative&&(E=E.neg(),$=$.neg()),[{a:x,b:_},{a:E,b:$}]};ShortCurve.prototype._endoSplit=function t(e){var n=this.endo.basis,a=n[0],o=n[1],c=o.b.mul(e).divRound(this.n),u=a.b.neg().mul(e).divRound(this.n),l=c.mul(a.a),p=u.mul(o.a),b=c.mul(a.b),v=u.mul(o.b),x=e.sub(l).sub(p),_=b.add(v).neg();return{k1:x,k2:_}};ShortCurve.prototype.pointFromX=function t(e,n){e=new BN$1(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var c=o.fromRed().isOdd();return(n&&!c||!n&&c)&&(o=o.redNeg()),this.point(e,o)};ShortCurve.prototype.validate=function t(e){if(e.inf)return!0;var n=e.x,a=e.y,o=this.a.redMul(n),c=n.redSqr().redMul(n).redIAdd(o).redIAdd(this.b);return a.redSqr().redISub(c).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function t(e,n,a){for(var o=this._endoWnafT1,c=this._endoWnafT2,u=0;u<e.length;u++){var l=this._endoSplit(n[u]),p=e[u],b=p._getBeta();l.k1.negative&&(l.k1.ineg(),p=p.neg(!0)),l.k2.negative&&(l.k2.ineg(),b=b.neg(!0)),o[u*2]=p,o[u*2+1]=b,c[u*2]=l.k1,c[u*2+1]=l.k2}for(var v=this._wnafMulAdd(1,o,c,u*2,a),x=0;x<u*2;x++)o[x]=null,c[x]=null;return v};function Point(t,e,n,a){base.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$1(e,16),this.y=new BN$1(n,16),a&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits_browser(Point,base.BasePoint);ShortCurve.prototype.point=function t(e,n,a){return new Point(this,e,n,a)};ShortCurve.prototype.pointFromJSON=function t(e,n){return Point.fromJSON(this,e,n)};Point.prototype._getBeta=function t(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var a=this.curve,o=function(c){return a.point(c.x.redMul(a.endo.beta),c.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(o)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(o)}}}return n}};Point.prototype.toJSON=function t(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point.fromJSON=function t(e,n,a){typeof n=="string"&&(n=JSON.parse(n));var o=e.point(n[0],n[1],a);if(!n[2])return o;function c(l){return e.point(l[0],l[1],a)}var u=n[2];return o.precomputed={beta:null,doubles:u.doubles&&{step:u.doubles.step,points:[o].concat(u.doubles.points.map(c))},naf:u.naf&&{wnd:u.naf.wnd,points:[o].concat(u.naf.points.map(c))}},o};Point.prototype.inspect=function t(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function t(){return this.inf};Point.prototype.add=function t(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var a=n.redSqr().redISub(this.x).redISub(e.x),o=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point.prototype.dbl=function t(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,a=this.x.redSqr(),o=e.redInvm(),c=a.redAdd(a).redIAdd(a).redIAdd(n).redMul(o),u=c.redSqr().redISub(this.x.redAdd(this.x)),l=c.redMul(this.x.redSub(u)).redISub(this.y);return this.curve.point(u,l)};Point.prototype.getX=function t(){return this.x.fromRed()};Point.prototype.getY=function t(){return this.y.fromRed()};Point.prototype.mul=function t(e){return e=new BN$1(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point.prototype.mulAdd=function t(e,n,a){var o=[this,n],c=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,c):this.curve._wnafMulAdd(1,o,c,2)};Point.prototype.jmulAdd=function t(e,n,a){var o=[this,n],c=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,c,!0):this.curve._wnafMulAdd(1,o,c,2,!0)};Point.prototype.eq=function t(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point.prototype.neg=function t(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var a=this.precomputed,o=function(c){return c.neg()};n.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(o)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(o)}}}return n};Point.prototype.toJ=function t(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint(t,e,n,a){base.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&a===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$1(0)):(this.x=new BN$1(e,16),this.y=new BN$1(n,16),this.z=new BN$1(a,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits_browser(JPoint,base.BasePoint);ShortCurve.prototype.jpoint=function t(e,n,a){return new JPoint(this,e,n,a)};JPoint.prototype.toP=function t(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),a=this.x.redMul(n),o=this.y.redMul(n).redMul(e);return this.curve.point(a,o)};JPoint.prototype.neg=function t(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function t(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),a=this.z.redSqr(),o=this.x.redMul(n),c=e.x.redMul(a),u=this.y.redMul(n.redMul(e.z)),l=e.y.redMul(a.redMul(this.z)),p=o.redSub(c),b=u.redSub(l);if(p.cmpn(0)===0)return b.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var v=p.redSqr(),x=v.redMul(p),_=o.redMul(v),E=b.redSqr().redIAdd(x).redISub(_).redISub(_),$=b.redMul(_.redISub(E)).redISub(u.redMul(x)),S=this.z.redMul(e.z).redMul(p);return this.curve.jpoint(E,$,S)};JPoint.prototype.mixedAdd=function t(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),a=this.x,o=e.x.redMul(n),c=this.y,u=e.y.redMul(n).redMul(this.z),l=a.redSub(o),p=c.redSub(u);if(l.cmpn(0)===0)return p.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=l.redSqr(),v=b.redMul(l),x=a.redMul(b),_=p.redSqr().redIAdd(v).redISub(x).redISub(x),E=p.redMul(x.redISub(_)).redISub(c.redMul(v)),$=this.z.redMul(l);return this.curve.jpoint(_,E,$)};JPoint.prototype.dblp=function t(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var a=this;for(n=0;n<e;n++)a=a.dbl();return a}var o=this.curve.a,c=this.curve.tinv,u=this.x,l=this.y,p=this.z,b=p.redSqr().redSqr(),v=l.redAdd(l);for(n=0;n<e;n++){var x=u.redSqr(),_=v.redSqr(),E=_.redSqr(),$=x.redAdd(x).redIAdd(x).redIAdd(o.redMul(b)),S=u.redMul(_),A=$.redSqr().redISub(S.redAdd(S)),I=S.redISub(A),O=$.redMul(I);O=O.redIAdd(O).redISub(E);var F=v.redMul(p);n+1<e&&(b=b.redMul(E)),u=A,p=F,v=O}return this.curve.jpoint(u,v.redMul(c),p)};JPoint.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function t(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),c=this.y.redSqr(),u=c.redSqr(),l=this.x.redAdd(c).redSqr().redISub(o).redISub(u);l=l.redIAdd(l);var p=o.redAdd(o).redIAdd(o),b=p.redSqr().redISub(l).redISub(l),v=u.redIAdd(u);v=v.redIAdd(v),v=v.redIAdd(v),e=b,n=p.redMul(l.redISub(b)).redISub(v),a=this.y.redAdd(this.y)}else{var x=this.x.redSqr(),_=this.y.redSqr(),E=_.redSqr(),$=this.x.redAdd(_).redSqr().redISub(x).redISub(E);$=$.redIAdd($);var S=x.redAdd(x).redIAdd(x),A=S.redSqr(),I=E.redIAdd(E);I=I.redIAdd(I),I=I.redIAdd(I),e=A.redISub($).redISub($),n=S.redMul($.redISub(e)).redISub(I),a=this.y.redMul(this.z),a=a.redIAdd(a)}return this.curve.jpoint(e,n,a)};JPoint.prototype._threeDbl=function t(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),c=this.y.redSqr(),u=c.redSqr(),l=this.x.redAdd(c).redSqr().redISub(o).redISub(u);l=l.redIAdd(l);var p=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),b=p.redSqr().redISub(l).redISub(l);e=b;var v=u.redIAdd(u);v=v.redIAdd(v),v=v.redIAdd(v),n=p.redMul(l.redISub(b)).redISub(v),a=this.y.redAdd(this.y)}else{var x=this.z.redSqr(),_=this.y.redSqr(),E=this.x.redMul(_),$=this.x.redSub(x).redMul(this.x.redAdd(x));$=$.redAdd($).redIAdd($);var S=E.redIAdd(E);S=S.redIAdd(S);var A=S.redAdd(S);e=$.redSqr().redISub(A),a=this.y.redAdd(this.z).redSqr().redISub(_).redISub(x);var I=_.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I),n=$.redMul(S.redISub(e)).redISub(I)}return this.curve.jpoint(e,n,a)};JPoint.prototype._dbl=function t(){var e=this.curve.a,n=this.x,a=this.y,o=this.z,c=o.redSqr().redSqr(),u=n.redSqr(),l=a.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(e.redMul(c)),b=n.redAdd(n);b=b.redIAdd(b);var v=b.redMul(l),x=p.redSqr().redISub(v.redAdd(v)),_=v.redISub(x),E=l.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var $=p.redMul(_).redISub(E),S=a.redAdd(a).redMul(o);return this.curve.jpoint(x,$,S)};JPoint.prototype.trpl=function t(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),a=this.z.redSqr(),o=n.redSqr(),c=e.redAdd(e).redIAdd(e),u=c.redSqr(),l=this.x.redAdd(n).redSqr().redISub(e).redISub(o);l=l.redIAdd(l),l=l.redAdd(l).redIAdd(l),l=l.redISub(u);var p=l.redSqr(),b=o.redIAdd(o);b=b.redIAdd(b),b=b.redIAdd(b),b=b.redIAdd(b);var v=c.redIAdd(l).redSqr().redISub(u).redISub(p).redISub(b),x=n.redMul(v);x=x.redIAdd(x),x=x.redIAdd(x);var _=this.x.redMul(p).redISub(x);_=_.redIAdd(_),_=_.redIAdd(_);var E=this.y.redMul(v.redMul(b.redISub(v)).redISub(l.redMul(p)));E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var $=this.z.redAdd(l).redSqr().redISub(a).redISub(p);return this.curve.jpoint(_,E,$)};JPoint.prototype.mul=function t(e,n){return e=new BN$1(e,n),this.curve._wnafMul(this,e)};JPoint.prototype.eq=function t(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),a=e.z.redSqr();if(this.x.redMul(a).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var o=n.redMul(this.z),c=a.redMul(e.z);return this.y.redMul(c).redISub(e.y.redMul(o)).cmpn(0)===0};JPoint.prototype.eqXToP=function t(e){var n=this.z.redSqr(),a=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(a)===0)return!0;for(var o=e.clone(),c=this.curve.redN.redMul(n);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(a.redIAdd(c),this.x.cmp(a)===0)return!0}};JPoint.prototype.inspect=function t(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};var curve_1=createCommonjsModule(function(t,e){var n=e;n.base=base,n.short=short_1,n.mont=null,n.edwards=null}),curves_1=createCommonjsModule(function(t,e){var n=e,a=utils_1$1$1.assert;function o(l){l.type==="short"?this.curve=new curve_1.short(l):l.type==="edwards"?this.curve=new curve_1.edwards(l):this.curve=new curve_1.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=o;function c(l,p){Object.defineProperty(n,l,{configurable:!0,enumerable:!0,get:function(){var b=new o(p);return Object.defineProperty(n,l,{configurable:!0,enumerable:!0,value:b}),b}})}c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash$4.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash$4.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash$4.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash$4.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash$4.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$4.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$4.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=null.crash()}catch{u=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash$4.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})});function HmacDRBG(t){if(!(this instanceof HmacDRBG))return new HmacDRBG(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils_1$1.toArray(t.entropy,t.entropyEnc||"hex"),n=utils_1$1.toArray(t.nonce,t.nonceEnc||"hex"),a=utils_1$1.toArray(t.pers,t.persEnc||"hex");minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,a)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function t(e,n,a){var o=e.concat(n).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var c=0;c<this.V.length;c++)this.K[c]=0,this.V[c]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function t(){return new hash$4.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function t(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG.prototype.reseed=function t(e,n,a,o){typeof n!="string"&&(o=a,a=n,n=null),e=utils_1$1.toArray(e,n),a=utils_1$1.toArray(a,o),minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(a||[])),this._reseed=1};HmacDRBG.prototype.generate=function t(e,n,a,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(o=a,a=n,n=null),a&&(a=utils_1$1.toArray(a,o||"hex"),this._update(a));for(var c=[];c.length<e;)this.V=this._hmac().update(this.V).digest(),c=c.concat(this.V);var u=c.slice(0,e);return this._update(a),this._reseed++,utils_1$1.encode(u,n)};var assert$3=utils_1$1$1.assert;function KeyPair(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key=KeyPair;KeyPair.fromPublic=function t(e,n,a){return n instanceof KeyPair?n:new KeyPair(e,{pub:n,pubEnc:a})};KeyPair.fromPrivate=function t(e,n,a){return n instanceof KeyPair?n:new KeyPair(e,{priv:n,privEnc:a})};KeyPair.prototype.validate=function t(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair.prototype.getPublic=function t(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};KeyPair.prototype.getPrivate=function t(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair.prototype._importPrivate=function t(e,n){this.priv=new BN$1(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair.prototype._importPublic=function t(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?assert$3(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$3(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};KeyPair.prototype.derive=function t(e){return e.validate()||assert$3(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair.prototype.sign=function t(e,n,a){return this.ec.sign(e,this,n,a)};KeyPair.prototype.verify=function t(e,n){return this.ec.verify(e,n,this)};KeyPair.prototype.inspect=function t(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4=utils_1$1$1.assert;function Signature(t,e){if(t instanceof Signature)return t;this._importDER(t,e)||(assert$4(t.r&&t.s,"Signature without r or s"),this.r=new BN$1(t.r,16),this.s=new BN$1(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature=Signature;function Position(){this.place=0}function getLength(t,e){var n=t[e.place++];if(!(n&128))return n;var a=n&15;if(a===0||a>4)return!1;for(var o=0,c=0,u=e.place;c<a;c++,u++)o<<=8,o|=t[u],o>>>=0;return o<=127?!1:(e.place=u,o)}function rmPadding(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}Signature.prototype._importDER=function t(e,n){e=utils_1$1$1.toArray(e,n);var a=new Position;if(e[a.place++]!==48)return!1;var o=getLength(e,a);if(o===!1||o+a.place!==e.length||e[a.place++]!==2)return!1;var c=getLength(e,a);if(c===!1)return!1;var u=e.slice(a.place,c+a.place);if(a.place+=c,e[a.place++]!==2)return!1;var l=getLength(e,a);if(l===!1||e.length!==l+a.place)return!1;var p=e.slice(a.place,l+a.place);if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;if(p[0]===0)if(p[1]&128)p=p.slice(1);else return!1;return this.r=new BN$1(u),this.s=new BN$1(p),this.recoveryParam=null,!0};function constructLength(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}Signature.prototype.toDER=function t(e){var n=this.r.toArray(),a=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),a[0]&128&&(a=[0].concat(a)),n=rmPadding(n),a=rmPadding(a);!a[0]&&!(a[1]&128);)a=a.slice(1);var o=[2];constructLength(o,n.length),o=o.concat(n),o.push(2),constructLength(o,a.length);var c=o.concat(a),u=[48];return constructLength(u,c.length),u=u.concat(c),utils_1$1$1.encode(u,e)};var rand=function(){throw new Error("unsupported")},assert$5=utils_1$1$1.assert;function EC(t){if(!(this instanceof EC))return new EC(t);typeof t=="string"&&(assert$5(Object.prototype.hasOwnProperty.call(curves_1,t),"Unknown curve "+t),t=curves_1[t]),t instanceof curves_1.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ec=EC;EC.prototype.keyPair=function t(e){return new key(this,e)};EC.prototype.keyFromPrivate=function t(e,n){return key.fromPrivate(this,e,n)};EC.prototype.keyFromPublic=function t(e,n){return key.fromPublic(this,e,n)};EC.prototype.genKeyPair=function t(e){e||(e={});for(var n=new hmacDrbg({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),a=this.n.byteLength(),o=this.n.sub(new BN$1(2));;){var c=new BN$1(n.generate(a));if(!(c.cmp(o)>0))return c.iaddn(1),this.keyFromPrivate(c)}};EC.prototype._truncateToN=function t(e,n){var a=e.byteLength()*8-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!n&&e.cmp(this.n)>=0?e.sub(this.n):e};EC.prototype.sign=function t(e,n,a,o){typeof a=="object"&&(o=a,a=null),o||(o={}),n=this.keyFromPrivate(n,a),e=this._truncateToN(new BN$1(e,16));for(var c=this.n.byteLength(),u=n.getPrivate().toArray("be",c),l=e.toArray("be",c),p=new hmacDrbg({hash:this.hash,entropy:u,nonce:l,pers:o.pers,persEnc:o.persEnc||"utf8"}),b=this.n.sub(new BN$1(1)),v=0;;v++){var x=o.k?o.k(v):new BN$1(p.generate(this.n.byteLength()));if(x=this._truncateToN(x,!0),!(x.cmpn(1)<=0||x.cmp(b)>=0)){var _=this.g.mul(x);if(!_.isInfinity()){var E=_.getX(),$=E.umod(this.n);if($.cmpn(0)!==0){var S=x.invm(this.n).mul($.mul(n.getPrivate()).iadd(e));if(S=S.umod(this.n),S.cmpn(0)!==0){var A=(_.getY().isOdd()?1:0)|(E.cmp($)!==0?2:0);return o.canonical&&S.cmp(this.nh)>0&&(S=this.n.sub(S),A^=1),new signature({r:$,s:S,recoveryParam:A})}}}}}};EC.prototype.verify=function t(e,n,a,o){e=this._truncateToN(new BN$1(e,16)),a=this.keyFromPublic(a,o),n=new signature(n,"hex");var c=n.r,u=n.s;if(c.cmpn(1)<0||c.cmp(this.n)>=0||u.cmpn(1)<0||u.cmp(this.n)>=0)return!1;var l=u.invm(this.n),p=l.mul(e).umod(this.n),b=l.mul(c).umod(this.n),v;return this.curve._maxwellTrick?(v=this.g.jmulAdd(p,a.getPublic(),b),v.isInfinity()?!1:v.eqXToP(c)):(v=this.g.mulAdd(p,a.getPublic(),b),v.isInfinity()?!1:v.getX().umod(this.n).cmp(c)===0)};EC.prototype.recoverPubKey=function(t,e,n,a){assert$5((3&n)===n,"The recovery param is more than two bits"),e=new signature(e,a);var o=this.n,c=new BN$1(t),u=e.r,l=e.s,p=n&1,b=n>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&b)throw new Error("Unable to find sencond key candinate");b?u=this.curve.pointFromX(u.add(this.curve.n),p):u=this.curve.pointFromX(u,p);var v=e.r.invm(o),x=o.sub(c).mul(v).umod(o),_=l.mul(v).umod(o);return this.g.mulAdd(x,u,_)};EC.prototype.getKeyRecoveryParam=function(t,e,n,a){if(e=new signature(e,a),e.recoveryParam!==null)return e.recoveryParam;for(var o=0;o<4;o++){var c;try{c=this.recoverPubKey(t,e,o)}catch{continue}if(c.eq(n))return o}throw new Error("Unable to find valid recovery factor")};var elliptic_1=createCommonjsModule(function(t,e){var n=e;n.version="6.5.4",n.utils=utils_1$1$1,n.rand=function(){throw new Error("unsupported")},n.curve=curve_1,n.curves=curves_1,n.ec=ec,n.eddsa=null}),EC$1=elliptic_1.ec;const version$6="signing-key/5.7.0",logger$7=new Logger(version$6);let _curve=null;function getCurve(){return _curve||(_curve=new EC$1("secp256k1")),_curve}class SigningKey{constructor(e){defineReadOnly(this,"curve","secp256k1"),defineReadOnly(this,"privateKey",hexlify(e)),hexDataLength(this.privateKey)!==32&&logger$7.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const n=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+n.getPublic(!1,"hex")),defineReadOnly(this,"compressedPublicKey","0x"+n.getPublic(!0,"hex")),defineReadOnly(this,"_isSigningKey",!0)}_addPoint(e){const n=getCurve().keyFromPublic(arrayify(this.publicKey)),a=getCurve().keyFromPublic(arrayify(e));return"0x"+n.pub.add(a.pub).encodeCompressed("hex")}signDigest(e){const n=getCurve().keyFromPrivate(arrayify(this.privateKey)),a=arrayify(e);a.length!==32&&logger$7.throwArgumentError("bad digest length","digest",e);const o=n.sign(a,{canonical:!0});return splitSignature({recoveryParam:o.recoveryParam,r:hexZeroPad("0x"+o.r.toString(16),32),s:hexZeroPad("0x"+o.s.toString(16),32)})}computeSharedSecret(e){const n=getCurve().keyFromPrivate(arrayify(this.privateKey)),a=getCurve().keyFromPublic(arrayify(computePublicKey(e)));return hexZeroPad("0x"+n.derive(a.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function recoverPublicKey(t,e){const n=splitSignature(e),a={r:arrayify(n.r),s:arrayify(n.s)};return"0x"+getCurve().recoverPubKey(arrayify(t),a,n.recoveryParam).encode("hex",!1)}function computePublicKey(t,e){const n=arrayify(t);if(n.length===32){const a=new SigningKey(n);return e?"0x"+getCurve().keyFromPrivate(n).getPublic(!0,"hex"):a.publicKey}else{if(n.length===33)return e?hexlify(n):"0x"+getCurve().keyFromPublic(n).getPublic(!1,"hex");if(n.length===65)return e?"0x"+getCurve().keyFromPublic(n).getPublic(!0,"hex"):hexlify(n)}return logger$7.throwArgumentError("invalid public or private key","key","[REDACTED]")}const version$5="transactions/5.7.0",logger$6=new Logger(version$5);var TransactionTypes;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));const transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function computeAddress(t){const e=computePublicKey(t);return getAddress(hexDataSlice(keccak256(hexDataSlice(e,1)),12))}function recoverAddress(t,e){return computeAddress(recoverPublicKey(arrayify(t),e))}function formatNumber(t,e){const n=stripZeros(BigNumber.from(t).toHexString());return n.length>32&&logger$6.throwArgumentError("invalid length for "+e,"transaction:"+e,t),n}function accessSetify(t,e){return{address:getAddress(t),storageKeys:(e||[]).map((n,a)=>(hexDataLength(n)!==32&&logger$6.throwArgumentError("invalid access list storageKey",`accessList[${t}:${a}]`,n),n.toLowerCase()))}}function accessListify(t){if(Array.isArray(t))return t.map((n,a)=>Array.isArray(n)?(n.length>2&&logger$6.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${a}]`,n),accessSetify(n[0],n[1])):accessSetify(n.address,n.storageKeys));const e=Object.keys(t).map(n=>{const a=t[n].reduce((o,c)=>(o[c]=!0,o),{});return accessSetify(n,Object.keys(a).sort())});return e.sort((n,a)=>n.address.localeCompare(a.address)),e}function formatAccessList(t){return accessListify(t).map(e=>[e.address,e.storageKeys])}function _serializeEip1559(t,e){if(t.gasPrice!=null){const a=BigNumber.from(t.gasPrice),o=BigNumber.from(t.maxFeePerGas||0);a.eq(o)||logger$6.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:a,maxFeePerGas:o})}const n=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(t.maxFeePerGas||0,"maxFeePerGas"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(e){const a=splitSignature(e);n.push(formatNumber(a.recoveryParam,"recoveryParam")),n.push(stripZeros(a.r)),n.push(stripZeros(a.s))}return hexConcat(["0x02",encode(n)])}function _serializeEip2930(t,e){const n=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.gasPrice||0,"gasPrice"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(e){const a=splitSignature(e);n.push(formatNumber(a.recoveryParam,"recoveryParam")),n.push(stripZeros(a.r)),n.push(stripZeros(a.s))}return hexConcat(["0x01",encode(n)])}function _serialize(t,e){checkProperties(t,allowedTransactionKeys);const n=[];transactionFields.forEach(function(u){let l=t[u.name]||[];const p={};u.numeric&&(p.hexPad="left"),l=arrayify(hexlify(l,p)),u.length&&l.length!==u.length&&l.length>0&&logger$6.throwArgumentError("invalid length for "+u.name,"transaction:"+u.name,l),u.maxLength&&(l=stripZeros(l),l.length>u.maxLength&&logger$6.throwArgumentError("invalid length for "+u.name,"transaction:"+u.name,l)),n.push(hexlify(l))});let a=0;if(t.chainId!=null?(a=t.chainId,typeof a!="number"&&logger$6.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!isBytesLike(e)&&e.v>28&&(a=Math.floor((e.v-35)/2)),a!==0&&(n.push(hexlify(a)),n.push("0x"),n.push("0x")),!e)return encode(n);const o=splitSignature(e);let c=27+o.recoveryParam;return a!==0?(n.pop(),n.pop(),n.pop(),c+=a*2+8,o.v>28&&o.v!==c&&logger$6.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):o.v!==c&&logger$6.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),n.push(hexlify(c)),n.push(stripZeros(arrayify(o.r))),n.push(stripZeros(arrayify(o.s))),encode(n)}function serialize(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&logger$6.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),_serialize(t,e);switch(t.type){case 1:return _serializeEip2930(t,e);case 2:return _serializeEip1559(t,e)}return logger$6.throwError(`unsupported transaction type: ${t.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}const version$4="wordlists/5.7.0",logger$5=new Logger(version$4);class Wordlist{constructor(e){logger$5.checkAbstract(new.target,Wordlist),defineReadOnly(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const n=[];for(let a=0;a<2048;a++){const o=e.getWord(a);if(a!==e.getWordIndex(o))return"0x";n.push(o)}return id(n.join(`
`)+`
`)}static register(e,n){n||(n=e.locale)}}const words="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist=null;function loadWords(t){if(wordlist==null&&(wordlist=words.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Wordlist.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw wordlist=null,new Error("BIP39 Wordlist for en (English) FAILED")}class LangEn extends Wordlist{constructor(){super("en")}getWord(e){return loadWords(this),wordlist[e]}getWordIndex(e){return loadWords(this),wordlist.indexOf(e)}}const langEn=new LangEn;Wordlist.register(langEn);const wordlists={en:langEn},version$3="hdnode/5.7.0",logger$4=new Logger(version$3),N=BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MasterSecret=toUtf8Bytes("Bitcoin seed"),HardenedBit=2147483648;function getUpperMask(t){return(1<<t)-1<<8-t}function getLowerMask(t){return(1<<t)-1}function bytes32(t){return hexZeroPad(hexlify(t),32)}function base58check(t){return Base58.encode(concat([t,hexDataSlice(sha256(sha256(t)),0,4)]))}function getWordlist(t){if(t==null)return wordlists.en;if(typeof t=="string"){const e=wordlists[t];return e==null&&logger$4.throwArgumentError("unknown locale","wordlist",t),e}return t}const _constructorGuard={},defaultPath="m/44'/60'/0'/0/0";class HDNode{constructor(e,n,a,o,c,u,l,p){if(e!==_constructorGuard)throw new Error("HDNode constructor cannot be called directly");if(n){const b=new SigningKey(n);defineReadOnly(this,"privateKey",b.privateKey),defineReadOnly(this,"publicKey",b.compressedPublicKey)}else defineReadOnly(this,"privateKey",null),defineReadOnly(this,"publicKey",hexlify(a));defineReadOnly(this,"parentFingerprint",o),defineReadOnly(this,"fingerprint",hexDataSlice(ripemd160(sha256(this.publicKey)),0,4)),defineReadOnly(this,"address",computeAddress(this.publicKey)),defineReadOnly(this,"chainCode",c),defineReadOnly(this,"index",u),defineReadOnly(this,"depth",l),p==null?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",null)):typeof p=="string"?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",p)):(defineReadOnly(this,"mnemonic",p),defineReadOnly(this,"path",p.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return base58check(concat([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify(this.depth),this.parentFingerprint,hexZeroPad(hexlify(this.index),4),this.chainCode,this.privateKey!=null?concat(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode(_constructorGuard,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let n=this.path;n&&(n+="/"+(e&~HardenedBit));const a=new Uint8Array(37);if(e&HardenedBit){if(!this.privateKey)throw new Error("cannot derive child of neutered node");a.set(arrayify(this.privateKey),1),n&&(n+="'")}else a.set(arrayify(this.publicKey));for(let x=24;x>=0;x-=8)a[33+(x>>3)]=e>>24-x&255;const o=arrayify(computeHmac(SupportedAlgorithm.sha512,this.chainCode,a)),c=o.slice(0,32),u=o.slice(32);let l=null,p=null;this.privateKey?l=bytes32(BigNumber.from(c).add(this.privateKey).mod(N)):p=new SigningKey(hexlify(c))._addPoint(this.publicKey);let b=n;const v=this.mnemonic;return v&&(b=Object.freeze({phrase:v.phrase,path:n,locale:v.locale||"en"})),new HDNode(_constructorGuard,l,p,this.fingerprint,bytes32(u),e,this.depth+1,b)}derivePath(e){const n=e.split("/");if(n.length===0||n[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);n[0]==="m"&&n.shift();let a=this;for(let o=0;o<n.length;o++){const c=n[o];if(c.match(/^[0-9]+'$/)){const u=parseInt(c.substring(0,c.length-1));if(u>=HardenedBit)throw new Error("invalid path index - "+c);a=a._derive(HardenedBit+u)}else if(c.match(/^[0-9]+$/)){const u=parseInt(c);if(u>=HardenedBit)throw new Error("invalid path index - "+c);a=a._derive(u)}else throw new Error("invalid path component - "+c)}return a}static _fromSeed(e,n){const a=arrayify(e);if(a.length<16||a.length>64)throw new Error("invalid seed");const o=arrayify(computeHmac(SupportedAlgorithm.sha512,MasterSecret,a));return new HDNode(_constructorGuard,bytes32(o.slice(0,32)),null,"0x00000000",bytes32(o.slice(32)),0,0,n)}static fromMnemonic(e,n,a){return a=getWordlist(a),e=entropyToMnemonic(mnemonicToEntropy(e,a),a),HDNode._fromSeed(mnemonicToSeed(e,n),{phrase:e,path:"m",locale:a.locale})}static fromSeed(e){return HDNode._fromSeed(e,null)}static fromExtendedKey(e){const n=Base58.decode(e);(n.length!==82||base58check(n.slice(0,78))!==e)&&logger$4.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const a=n[4],o=hexlify(n.slice(5,9)),c=parseInt(hexlify(n.slice(9,13)).substring(2),16),u=hexlify(n.slice(13,45)),l=n.slice(45,78);switch(hexlify(n.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode(_constructorGuard,null,hexlify(l),o,u,c,a,null);case"0x0488ade4":case"0x04358394 ":if(l[0]!==0)break;return new HDNode(_constructorGuard,hexlify(l.slice(1)),null,o,u,c,a,null)}return logger$4.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed(t,e){e||(e="");const n=toUtf8Bytes("mnemonic"+e,UnicodeNormalizationForm.NFKD);return pbkdf2$1(toUtf8Bytes(t,UnicodeNormalizationForm.NFKD),n,2048,64,"sha512")}function mnemonicToEntropy(t,e){e=getWordlist(e),logger$4.checkNormalize();const n=e.split(t);if(n.length%3!==0)throw new Error("invalid mnemonic");const a=arrayify(new Uint8Array(Math.ceil(11*n.length/8)));let o=0;for(let b=0;b<n.length;b++){let v=e.getWordIndex(n[b].normalize("NFKD"));if(v===-1)throw new Error("invalid mnemonic");for(let x=0;x<11;x++)v&1<<10-x&&(a[o>>3]|=1<<7-o%8),o++}const c=32*n.length/3,u=n.length/3,l=getUpperMask(u);if((arrayify(sha256(a.slice(0,c/8)))[0]&l)!==(a[a.length-1]&l))throw new Error("invalid checksum");return hexlify(a.slice(0,c/8))}function entropyToMnemonic(t,e){if(e=getWordlist(e),t=arrayify(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const n=[0];let a=11;for(let u=0;u<t.length;u++)a>8?(n[n.length-1]<<=8,n[n.length-1]|=t[u],a-=8):(n[n.length-1]<<=a,n[n.length-1]|=t[u]>>8-a,n.push(t[u]&getLowerMask(8-a)),a+=3);const o=t.length/4,c=arrayify(sha256(t))[0]&getUpperMask(o);return n[n.length-1]<<=o,n[n.length-1]|=c>>8-o,e.join(n.map(u=>e.getWord(u)))}const version$2="random/5.7.0",logger$3=new Logger(version$2);function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof _global<"u")return _global;throw new Error("unable to locate global object")}const anyGlobal=getGlobal();let crypto$1=anyGlobal.crypto||anyGlobal.msCrypto;(!crypto$1||!crypto$1.getRandomValues)&&(logger$3.warn("WARNING: Missing strong random number source"),crypto$1={getRandomValues:function(t){return logger$3.throwError("no secure random source avaialble",Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function randomBytes(t){(t<=0||t>1024||t%1||t!=t)&&logger$3.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return crypto$1.getRandomValues(e),arrayify(e)}var aesJs={exports:{}};(function(t,e){(function(n){function a(D){return parseInt(D)===D}function o(D){if(!a(D.length))return!1;for(var B=0;B<D.length;B++)if(!a(D[B])||D[B]<0||D[B]>255)return!1;return!0}function c(D,B){if(D.buffer&&ArrayBuffer.isView(D)&&D.name==="Uint8Array")return B&&(D.slice?D=D.slice():D=Array.prototype.slice.call(D)),D;if(Array.isArray(D)){if(!o(D))throw new Error("Array contains invalid value: "+D);return new Uint8Array(D)}if(a(D.length)&&o(D))return new Uint8Array(D);throw new Error("unsupported array-like object")}function u(D){return new Uint8Array(D)}function l(D,B,Z,he,j){(he!=null||j!=null)&&(D.slice?D=D.slice(he,j):D=Array.prototype.slice.call(D,he,j)),B.set(D,Z)}var p=function(){function D(Z){var he=[],j=0;for(Z=encodeURI(Z);j<Z.length;){var fe=Z.charCodeAt(j++);fe===37?(he.push(parseInt(Z.substr(j,2),16)),j+=2):he.push(fe)}return c(he)}function B(Z){for(var he=[],j=0;j<Z.length;){var fe=Z[j];fe<128?(he.push(String.fromCharCode(fe)),j++):fe>191&&fe<224?(he.push(String.fromCharCode((fe&31)<<6|Z[j+1]&63)),j+=2):(he.push(String.fromCharCode((fe&15)<<12|(Z[j+1]&63)<<6|Z[j+2]&63)),j+=3)}return he.join("")}return{toBytes:D,fromBytes:B}}(),b=function(){function D(he){for(var j=[],fe=0;fe<he.length;fe+=2)j.push(parseInt(he.substr(fe,2),16));return j}var B="0123456789abcdef";function Z(he){for(var j=[],fe=0;fe<he.length;fe++){var ie=he[fe];j.push(B[(ie&240)>>4]+B[ie&15])}return j.join("")}return{toBytes:D,fromBytes:Z}}(),v={16:10,24:12,32:14},x=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],_=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],E=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],$=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],S=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],A=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],I=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],O=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],F=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],U=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],G=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],J=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],k=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],ne=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],ee=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function de(D){for(var B=[],Z=0;Z<D.length;Z+=4)B.push(D[Z]<<24|D[Z+1]<<16|D[Z+2]<<8|D[Z+3]);return B}var ae=function(D){if(!(this instanceof ae))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:c(D,!0)}),this._prepare()};ae.prototype._prepare=function(){var D=v[this.key.length];if(D==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var B=0;B<=D;B++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var Z=(D+1)*4,he=this.key.length/4,j=de(this.key),fe,B=0;B<he;B++)fe=B>>2,this._Ke[fe][B%4]=j[B],this._Kd[D-fe][B%4]=j[B];for(var ie=0,oe=he,ce;oe<Z;){if(ce=j[he-1],j[0]^=_[ce>>16&255]<<24^_[ce>>8&255]<<16^_[ce&255]<<8^_[ce>>24&255]^x[ie]<<24,ie+=1,he!=8)for(var B=1;B<he;B++)j[B]^=j[B-1];else{for(var B=1;B<he/2;B++)j[B]^=j[B-1];ce=j[he/2-1],j[he/2]^=_[ce&255]^_[ce>>8&255]<<8^_[ce>>16&255]<<16^_[ce>>24&255]<<24;for(var B=he/2+1;B<he;B++)j[B]^=j[B-1]}for(var B=0,V,Q;B<he&&oe<Z;)V=oe>>2,Q=oe%4,this._Ke[V][Q]=j[B],this._Kd[D-V][Q]=j[B++],oe++}for(var V=1;V<D;V++)for(var Q=0;Q<4;Q++)ce=this._Kd[V][Q],this._Kd[V][Q]=J[ce>>24&255]^k[ce>>16&255]^ne[ce>>8&255]^ee[ce&255]},ae.prototype.encrypt=function(D){if(D.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var B=this._Ke.length-1,Z=[0,0,0,0],he=de(D),j=0;j<4;j++)he[j]^=this._Ke[0][j];for(var fe=1;fe<B;fe++){for(var j=0;j<4;j++)Z[j]=$[he[j]>>24&255]^S[he[(j+1)%4]>>16&255]^A[he[(j+2)%4]>>8&255]^I[he[(j+3)%4]&255]^this._Ke[fe][j];he=Z.slice()}for(var ie=u(16),oe,j=0;j<4;j++)oe=this._Ke[B][j],ie[4*j]=(_[he[j]>>24&255]^oe>>24)&255,ie[4*j+1]=(_[he[(j+1)%4]>>16&255]^oe>>16)&255,ie[4*j+2]=(_[he[(j+2)%4]>>8&255]^oe>>8)&255,ie[4*j+3]=(_[he[(j+3)%4]&255]^oe)&255;return ie},ae.prototype.decrypt=function(D){if(D.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var B=this._Kd.length-1,Z=[0,0,0,0],he=de(D),j=0;j<4;j++)he[j]^=this._Kd[0][j];for(var fe=1;fe<B;fe++){for(var j=0;j<4;j++)Z[j]=O[he[j]>>24&255]^F[he[(j+3)%4]>>16&255]^U[he[(j+2)%4]>>8&255]^G[he[(j+1)%4]&255]^this._Kd[fe][j];he=Z.slice()}for(var ie=u(16),oe,j=0;j<4;j++)oe=this._Kd[B][j],ie[4*j]=(E[he[j]>>24&255]^oe>>24)&255,ie[4*j+1]=(E[he[(j+3)%4]>>16&255]^oe>>16)&255,ie[4*j+2]=(E[he[(j+2)%4]>>8&255]^oe>>8)&255,ie[4*j+3]=(E[he[(j+1)%4]&255]^oe)&255;return ie};var L=function(D){if(!(this instanceof L))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new ae(D)};L.prototype.encrypt=function(D){if(D=c(D),D.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var B=u(D.length),Z=u(16),he=0;he<D.length;he+=16)l(D,Z,0,he,he+16),Z=this._aes.encrypt(Z),l(Z,B,he);return B},L.prototype.decrypt=function(D){if(D=c(D),D.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var B=u(D.length),Z=u(16),he=0;he<D.length;he+=16)l(D,Z,0,he,he+16),Z=this._aes.decrypt(Z),l(Z,B,he);return B};var P=function(D,B){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!B)B=u(16);else if(B.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=c(B,!0),this._aes=new ae(D)};P.prototype.encrypt=function(D){if(D=c(D),D.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var B=u(D.length),Z=u(16),he=0;he<D.length;he+=16){l(D,Z,0,he,he+16);for(var j=0;j<16;j++)Z[j]^=this._lastCipherblock[j];this._lastCipherblock=this._aes.encrypt(Z),l(this._lastCipherblock,B,he)}return B},P.prototype.decrypt=function(D){if(D=c(D),D.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var B=u(D.length),Z=u(16),he=0;he<D.length;he+=16){l(D,Z,0,he,he+16),Z=this._aes.decrypt(Z);for(var j=0;j<16;j++)B[he+j]=Z[j]^this._lastCipherblock[j];l(D,this._lastCipherblock,0,he,he+16)}return B};var T=function(D,B,Z){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!B)B=u(16);else if(B.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");Z||(Z=1),this.segmentSize=Z,this._shiftRegister=c(B,!0),this._aes=new ae(D)};T.prototype.encrypt=function(D){if(D.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var B=c(D,!0),Z,he=0;he<B.length;he+=this.segmentSize){Z=this._aes.encrypt(this._shiftRegister);for(var j=0;j<this.segmentSize;j++)B[he+j]^=Z[j];l(this._shiftRegister,this._shiftRegister,0,this.segmentSize),l(B,this._shiftRegister,16-this.segmentSize,he,he+this.segmentSize)}return B},T.prototype.decrypt=function(D){if(D.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var B=c(D,!0),Z,he=0;he<B.length;he+=this.segmentSize){Z=this._aes.encrypt(this._shiftRegister);for(var j=0;j<this.segmentSize;j++)B[he+j]^=Z[j];l(this._shiftRegister,this._shiftRegister,0,this.segmentSize),l(D,this._shiftRegister,16-this.segmentSize,he,he+this.segmentSize)}return B};var C=function(D,B){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!B)B=u(16);else if(B.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=c(B,!0),this._lastPrecipherIndex=16,this._aes=new ae(D)};C.prototype.encrypt=function(D){for(var B=c(D,!0),Z=0;Z<B.length;Z++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),B[Z]^=this._lastPrecipher[this._lastPrecipherIndex++];return B},C.prototype.decrypt=C.prototype.encrypt;var q=function(D){if(!(this instanceof q))throw Error("Counter must be instanitated with `new`");D!==0&&!D&&(D=1),typeof D=="number"?(this._counter=u(16),this.setValue(D)):this.setBytes(D)};q.prototype.setValue=function(D){if(typeof D!="number"||parseInt(D)!=D)throw new Error("invalid counter value (must be an integer)");for(var B=15;B>=0;--B)this._counter[B]=D%256,D=D>>8},q.prototype.setBytes=function(D){if(D=c(D,!0),D.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=D},q.prototype.increment=function(){for(var D=15;D>=0;D--)if(this._counter[D]===255)this._counter[D]=0;else{this._counter[D]++;break}};var z=function(D,B){if(!(this instanceof z))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",B instanceof q||(B=new q(B)),this._counter=B,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ae(D)};z.prototype.encrypt=function(D){for(var B=c(D,!0),Z=0;Z<B.length;Z++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),B[Z]^=this._remainingCounter[this._remainingCounterIndex++];return B},z.prototype.decrypt=z.prototype.encrypt;function X(D){D=c(D,!0);var B=16-D.length%16,Z=u(D.length+B);l(D,Z);for(var he=D.length;he<Z.length;he++)Z[he]=B;return Z}function W(D){if(D=c(D,!0),D.length<16)throw new Error("PKCS#7 invalid length");var B=D[D.length-1];if(B>16)throw new Error("PKCS#7 padding byte out of range");for(var Z=D.length-B,he=0;he<B;he++)if(D[Z+he]!==B)throw new Error("PKCS#7 invalid padding byte");var j=u(Z);return l(D,j,0,0,Z),j}var M={AES:ae,Counter:q,ModeOfOperation:{ecb:L,cbc:P,cfb:T,ofb:C,ctr:z},utils:{hex:b,utf8:p},padding:{pkcs7:{pad:X,strip:W}},_arrayTest:{coerceArray:c,createArray:u,copyArray:l}};t.exports=M})()})(aesJs);var aesJsExports=aesJs.exports;const aes=getDefaultExportFromCjs(aesJsExports),version$1="json-wallets/5.7.0";function looseArrayify(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),arrayify(t)}function zpad(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function getPassword(t){return typeof t=="string"?toUtf8Bytes(t,UnicodeNormalizationForm.NFKC):arrayify(t)}function searchPath(t,e){let n=t;const a=e.toLowerCase().split("/");for(let o=0;o<a.length;o++){let c=null;for(const u in n)if(u.toLowerCase()===a[o]){c=n[u];break}if(c===null)return null;n=c}return n}function uuidV4(t){const e=arrayify(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=hexlify(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const logger$2=new Logger(version$1);class CrowdsaleAccount extends Description{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function decrypt$1(t,e){const n=JSON.parse(t);e=getPassword(e);const a=getAddress(searchPath(n,"ethaddr")),o=looseArrayify(searchPath(n,"encseed"));(!o||o.length%16!==0)&&logger$2.throwArgumentError("invalid encseed","json",t);const c=arrayify(pbkdf2$1(e,e,2e3,32,"sha256")).slice(0,16),u=o.slice(0,16),l=o.slice(16),p=new aes.ModeOfOperation.cbc(c,u),b=aes.padding.pkcs7.strip(arrayify(p.decrypt(l)));let v="";for(let E=0;E<b.length;E++)v+=String.fromCharCode(b[E]);const x=toUtf8Bytes(v),_=keccak256(x);return new CrowdsaleAccount({_isCrowdsaleAccount:!0,address:a,privateKey:_})}function isCrowdsaleWallet(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function isKeystoreWallet(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}var scrypt$1={exports:{}};(function(t,e){(function(n){function o(S){const A=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let I=1779033703,O=3144134277,F=1013904242,U=2773480762,G=1359893119,J=2600822924,k=528734635,ne=1541459225;const ee=new Uint32Array(64);function de(z){let X=0,W=z.length;for(;W>=64;){let M=I,D=O,B=F,Z=U,he=G,j=J,fe=k,ie=ne,oe,ce,V,Q,se;for(ce=0;ce<16;ce++)V=X+ce*4,ee[ce]=(z[V]&255)<<24|(z[V+1]&255)<<16|(z[V+2]&255)<<8|z[V+3]&255;for(ce=16;ce<64;ce++)oe=ee[ce-2],Q=(oe>>>17|oe<<32-17)^(oe>>>19|oe<<32-19)^oe>>>10,oe=ee[ce-15],se=(oe>>>7|oe<<32-7)^(oe>>>18|oe<<32-18)^oe>>>3,ee[ce]=(Q+ee[ce-7]|0)+(se+ee[ce-16]|0)|0;for(ce=0;ce<64;ce++)Q=(((he>>>6|he<<32-6)^(he>>>11|he<<32-11)^(he>>>25|he<<32-25))+(he&j^~he&fe)|0)+(ie+(A[ce]+ee[ce]|0)|0)|0,se=((M>>>2|M<<32-2)^(M>>>13|M<<32-13)^(M>>>22|M<<32-22))+(M&D^M&B^D&B)|0,ie=fe,fe=j,j=he,he=Z+Q|0,Z=B,B=D,D=M,M=Q+se|0;I=I+M|0,O=O+D|0,F=F+B|0,U=U+Z|0,G=G+he|0,J=J+j|0,k=k+fe|0,ne=ne+ie|0,X+=64,W-=64}}de(S);let ae,L=S.length%64,P=S.length/536870912|0,T=S.length<<3,C=L<56?56:120,q=S.slice(S.length-L,S.length);for(q.push(128),ae=L+1;ae<C;ae++)q.push(0);return q.push(P>>>24&255),q.push(P>>>16&255),q.push(P>>>8&255),q.push(P>>>0&255),q.push(T>>>24&255),q.push(T>>>16&255),q.push(T>>>8&255),q.push(T>>>0&255),de(q),[I>>>24&255,I>>>16&255,I>>>8&255,I>>>0&255,O>>>24&255,O>>>16&255,O>>>8&255,O>>>0&255,F>>>24&255,F>>>16&255,F>>>8&255,F>>>0&255,U>>>24&255,U>>>16&255,U>>>8&255,U>>>0&255,G>>>24&255,G>>>16&255,G>>>8&255,G>>>0&255,J>>>24&255,J>>>16&255,J>>>8&255,J>>>0&255,k>>>24&255,k>>>16&255,k>>>8&255,k>>>0&255,ne>>>24&255,ne>>>16&255,ne>>>8&255,ne>>>0&255]}function c(S,A,I){S=S.length<=64?S:o(S);const O=64+A.length+4,F=new Array(O),U=new Array(64);let G,J=[];for(G=0;G<64;G++)F[G]=54;for(G=0;G<S.length;G++)F[G]^=S[G];for(G=0;G<A.length;G++)F[64+G]=A[G];for(G=O-4;G<O;G++)F[G]=0;for(G=0;G<64;G++)U[G]=92;for(G=0;G<S.length;G++)U[G]^=S[G];function k(){for(let ne=O-1;ne>=O-4;ne--){if(F[ne]++,F[ne]<=255)return;F[ne]=0}}for(;I>=32;)k(),J=J.concat(o(U.concat(o(F)))),I-=32;return I>0&&(k(),J=J.concat(o(U.concat(o(F))).slice(0,I))),J}function u(S,A,I,O,F){let U;for(v(S,(2*I-1)*16,F,0,16),U=0;U<2*I;U++)b(S,U*16,F,16),p(F,O),v(F,0,S,A+U*16,16);for(U=0;U<I;U++)v(S,A+U*2*16,S,U*16,16);for(U=0;U<I;U++)v(S,A+(U*2+1)*16,S,(U+I)*16,16)}function l(S,A){return S<<A|S>>>32-A}function p(S,A){v(S,0,A,0,16);for(let I=8;I>0;I-=2)A[4]^=l(A[0]+A[12],7),A[8]^=l(A[4]+A[0],9),A[12]^=l(A[8]+A[4],13),A[0]^=l(A[12]+A[8],18),A[9]^=l(A[5]+A[1],7),A[13]^=l(A[9]+A[5],9),A[1]^=l(A[13]+A[9],13),A[5]^=l(A[1]+A[13],18),A[14]^=l(A[10]+A[6],7),A[2]^=l(A[14]+A[10],9),A[6]^=l(A[2]+A[14],13),A[10]^=l(A[6]+A[2],18),A[3]^=l(A[15]+A[11],7),A[7]^=l(A[3]+A[15],9),A[11]^=l(A[7]+A[3],13),A[15]^=l(A[11]+A[7],18),A[1]^=l(A[0]+A[3],7),A[2]^=l(A[1]+A[0],9),A[3]^=l(A[2]+A[1],13),A[0]^=l(A[3]+A[2],18),A[6]^=l(A[5]+A[4],7),A[7]^=l(A[6]+A[5],9),A[4]^=l(A[7]+A[6],13),A[5]^=l(A[4]+A[7],18),A[11]^=l(A[10]+A[9],7),A[8]^=l(A[11]+A[10],9),A[9]^=l(A[8]+A[11],13),A[10]^=l(A[9]+A[8],18),A[12]^=l(A[15]+A[14],7),A[13]^=l(A[12]+A[15],9),A[14]^=l(A[13]+A[12],13),A[15]^=l(A[14]+A[13],18);for(let I=0;I<16;++I)S[I]+=A[I]}function b(S,A,I,O){for(let F=0;F<O;F++)I[F]^=S[A+F]}function v(S,A,I,O,F){for(;F--;)I[O++]=S[A++]}function x(S){if(!S||typeof S.length!="number")return!1;for(let A=0;A<S.length;A++){const I=S[A];if(typeof I!="number"||I%1||I<0||I>=256)return!1}return!0}function _(S,A){if(typeof S!="number"||S%1)throw new Error("invalid "+A);return S}function E(S,A,I,O,F,U,G){if(I=_(I,"N"),O=_(O,"r"),F=_(F,"p"),U=_(U,"dkLen"),I===0||I&I-1)throw new Error("N must be power of 2");if(I>2147483647/128/O)throw new Error("N too large");if(O>2147483647/128/F)throw new Error("r too large");if(!x(S))throw new Error("password must be an array or buffer");if(S=Array.prototype.slice.call(S),!x(A))throw new Error("salt must be an array or buffer");A=Array.prototype.slice.call(A);let J=c(S,A,F*128*O);const k=new Uint32Array(F*32*O);for(let he=0;he<k.length;he++){const j=he*4;k[he]=(J[j+3]&255)<<24|(J[j+2]&255)<<16|(J[j+1]&255)<<8|(J[j+0]&255)<<0}const ne=new Uint32Array(64*O),ee=new Uint32Array(32*O*I),de=32*O,ae=new Uint32Array(16),L=new Uint32Array(16),P=F*I*2;let T=0,C=null,q=!1,z=0,X=0,W,M;const D=G?parseInt(1e3/O):4294967295,B=typeof setImmediate<"u"?setImmediate:setTimeout,Z=function(){if(q)return G(new Error("cancelled"),T/P);let he;switch(z){case 0:M=X*32*O,v(k,M,ne,0,de),z=1,W=0;case 1:he=I-W,he>D&&(he=D);for(let fe=0;fe<he;fe++)v(ne,0,ee,(W+fe)*de,de),u(ne,de,O,ae,L);if(W+=he,T+=he,G){const fe=parseInt(1e3*T/P);if(fe!==C){if(q=G(null,T/P),q)break;C=fe}}if(W<I)break;W=0,z=2;case 2:he=I-W,he>D&&(he=D);for(let fe=0;fe<he;fe++){const ie=(2*O-1)*16,oe=ne[ie]&I-1;b(ee,oe*de,ne,de),u(ne,de,O,ae,L)}if(W+=he,T+=he,G){const fe=parseInt(1e3*T/P);if(fe!==C){if(q=G(null,T/P),q)break;C=fe}}if(W<I)break;if(v(ne,0,k,M,de),X++,X<F){z=0;break}J=[];for(let fe=0;fe<k.length;fe++)J.push(k[fe]>>0&255),J.push(k[fe]>>8&255),J.push(k[fe]>>16&255),J.push(k[fe]>>24&255);const j=c(S,J,U);return G&&G(null,1,j),j}G&&B(Z)};if(!G)for(;;){const he=Z();if(he!=null)return he}Z()}const $={scrypt:function(S,A,I,O,F,U,G){return new Promise(function(J,k){let ne=0;G&&G(0),E(S,A,I,O,F,U,function(ee,de,ae){if(ee)k(ee);else if(ae)G&&ne!==1&&G(1),J(new Uint8Array(ae));else if(G&&de!==ne)return ne=de,G(de)})})},syncScrypt:function(S,A,I,O,F,U){return new Uint8Array(E(S,A,I,O,F,U))}};t.exports=$})()})(scrypt$1);var scryptExports=scrypt$1.exports;const scrypt=getDefaultExportFromCjs(scryptExports);var __awaiter$1=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function l(v){try{b(a.next(v))}catch(x){u(x)}}function p(v){try{b(a.throw(v))}catch(x){u(x)}}function b(v){v.done?c(v.value):o(v.value).then(l,p)}b((a=a.apply(t,e||[])).next())})};const logger$1=new Logger(version$1);function hasMnemonic$1(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class KeystoreAccount extends Description{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function _decrypt(t,e,n){if(searchPath(t,"crypto/cipher")==="aes-128-ctr"){const o=looseArrayify(searchPath(t,"crypto/cipherparams/iv")),c=new aes.Counter(o),u=new aes.ModeOfOperation.ctr(e,c);return arrayify(u.decrypt(n))}return null}function _getAccount(t,e){const n=looseArrayify(searchPath(t,"crypto/ciphertext"));if(hexlify(keccak256(concat([e.slice(16,32),n]))).substring(2)!==searchPath(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const o=_decrypt(t,e.slice(0,16),n);o||logger$1.throwError("unsupported cipher",Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const c=e.slice(32,64),u=computeAddress(o);if(t.address){let p=t.address.toLowerCase();if(p.substring(0,2)!=="0x"&&(p="0x"+p),getAddress(p)!==u)throw new Error("address mismatch")}const l={_isKeystoreAccount:!0,address:u,privateKey:hexlify(o)};if(searchPath(t,"x-ethers/version")==="0.1"){const p=looseArrayify(searchPath(t,"x-ethers/mnemonicCiphertext")),b=looseArrayify(searchPath(t,"x-ethers/mnemonicCounter")),v=new aes.Counter(b),x=new aes.ModeOfOperation.ctr(c,v),_=searchPath(t,"x-ethers/path")||defaultPath,E=searchPath(t,"x-ethers/locale")||"en",$=arrayify(x.decrypt(p));try{const S=entropyToMnemonic($,E),A=HDNode.fromMnemonic(S,null,E).derivePath(_);if(A.privateKey!=l.privateKey)throw new Error("mnemonic mismatch");l.mnemonic=A.mnemonic}catch(S){if(S.code!==Logger.errors.INVALID_ARGUMENT||S.argument!=="wordlist")throw S}}return new KeystoreAccount(l)}function pbkdf2Sync(t,e,n,a,o){return arrayify(pbkdf2$1(t,e,n,a,o))}function pbkdf2(t,e,n,a,o){return Promise.resolve(pbkdf2Sync(t,e,n,a,o))}function _computeKdfKey(t,e,n,a,o){const c=getPassword(e),u=searchPath(t,"crypto/kdf");if(u&&typeof u=="string"){const l=function(p,b){return logger$1.throwArgumentError("invalid key-derivation function parameters",p,b)};if(u.toLowerCase()==="scrypt"){const p=looseArrayify(searchPath(t,"crypto/kdfparams/salt")),b=parseInt(searchPath(t,"crypto/kdfparams/n")),v=parseInt(searchPath(t,"crypto/kdfparams/r")),x=parseInt(searchPath(t,"crypto/kdfparams/p"));(!b||!v||!x)&&l("kdf",u),b&b-1&&l("N",b);const _=parseInt(searchPath(t,"crypto/kdfparams/dklen"));return _!==32&&l("dklen",_),a(c,p,b,v,x,64,o)}else if(u.toLowerCase()==="pbkdf2"){const p=looseArrayify(searchPath(t,"crypto/kdfparams/salt"));let b=null;const v=searchPath(t,"crypto/kdfparams/prf");v==="hmac-sha256"?b="sha256":v==="hmac-sha512"?b="sha512":l("prf",v);const x=parseInt(searchPath(t,"crypto/kdfparams/c")),_=parseInt(searchPath(t,"crypto/kdfparams/dklen"));return _!==32&&l("dklen",_),n(c,p,x,_,b)}}return logger$1.throwArgumentError("unsupported key-derivation function","kdf",u)}function decryptSync(t,e){const n=JSON.parse(t),a=_computeKdfKey(n,e,pbkdf2Sync,scrypt.syncScrypt);return _getAccount(n,a)}function decrypt(t,e,n){return __awaiter$1(this,void 0,void 0,function*(){const a=JSON.parse(t),o=yield _computeKdfKey(a,e,pbkdf2,scrypt.scrypt,n);return _getAccount(a,o)})}function encrypt(t,e,n,a){try{if(getAddress(t.address)!==computeAddress(t.privateKey))throw new Error("address/privateKey mismatch");if(hasMnemonic$1(t)){const A=t.mnemonic;if(HDNode.fromMnemonic(A.phrase,null,A.locale).derivePath(A.path||defaultPath).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(A){return Promise.reject(A)}typeof n=="function"&&!a&&(a=n,n={}),n||(n={});const o=arrayify(t.privateKey),c=getPassword(e);let u=null,l=null,p=null;if(hasMnemonic$1(t)){const A=t.mnemonic;u=arrayify(mnemonicToEntropy(A.phrase,A.locale||"en")),l=A.path||defaultPath,p=A.locale||"en"}let b=n.client;b||(b="ethers.js");let v=null;n.salt?v=arrayify(n.salt):v=randomBytes(32);let x=null;if(n.iv){if(x=arrayify(n.iv),x.length!==16)throw new Error("invalid iv")}else x=randomBytes(16);let _=null;if(n.uuid){if(_=arrayify(n.uuid),_.length!==16)throw new Error("invalid uuid")}else _=randomBytes(16);let E=1<<17,$=8,S=1;return n.scrypt&&(n.scrypt.N&&(E=n.scrypt.N),n.scrypt.r&&($=n.scrypt.r),n.scrypt.p&&(S=n.scrypt.p)),scrypt.scrypt(c,v,E,$,S,64,a).then(A=>{A=arrayify(A);const I=A.slice(0,16),O=A.slice(16,32),F=A.slice(32,64),U=new aes.Counter(x),G=new aes.ModeOfOperation.ctr(I,U),J=arrayify(G.encrypt(o)),k=keccak256(concat([O,J])),ne={address:t.address.substring(2).toLowerCase(),id:uuidV4(_),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(x).substring(2)},ciphertext:hexlify(J).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(v).substring(2),n:E,dklen:32,p:S,r:$},mac:k.substring(2)}};if(u){const ee=randomBytes(16),de=new aes.Counter(ee),ae=new aes.ModeOfOperation.ctr(F,de),L=arrayify(ae.encrypt(u)),P=new Date,T=P.getUTCFullYear()+"-"+zpad(P.getUTCMonth()+1,2)+"-"+zpad(P.getUTCDate(),2)+"T"+zpad(P.getUTCHours(),2)+"-"+zpad(P.getUTCMinutes(),2)+"-"+zpad(P.getUTCSeconds(),2)+".0Z";ne["x-ethers"]={client:b,gethFilename:"UTC--"+T+"--"+ne.address,mnemonicCounter:hexlify(ee).substring(2),mnemonicCiphertext:hexlify(L).substring(2),path:l,locale:p,version:"0.1"}}return JSON.stringify(ne)})}function decryptJsonWallet(t,e,n){if(isCrowdsaleWallet(t)){n&&n(0);const a=decrypt$1(t,e);return n&&n(1),Promise.resolve(a)}return isKeystoreWallet(t)?decrypt(t,e,n):Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync(t,e){if(isCrowdsaleWallet(t))return decrypt$1(t,e);if(isKeystoreWallet(t))return decryptSync(t,e);throw new Error("invalid JSON wallet")}const version="wallet/5.7.0";var __awaiter=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function l(v){try{b(a.next(v))}catch(x){u(x)}}function p(v){try{b(a.throw(v))}catch(x){u(x)}}function b(v){v.done?c(v.value):o(v.value).then(l,p)}b((a=a.apply(t,e||[])).next())})};const logger=new Logger(version);function isAccount(t){return t!=null&&isHexString(t.privateKey,32)&&t.address!=null}function hasMnemonic(t){const e=t.mnemonic;return e&&e.phrase}class Wallet extends Signer{constructor(e,n){if(super(),isAccount(e)){const a=new SigningKey(e.privateKey);if(defineReadOnly(this,"_signingKey",()=>a),defineReadOnly(this,"address",computeAddress(this.publicKey)),this.address!==getAddress(e.address)&&logger.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),hasMnemonic(e)){const o=e.mnemonic;defineReadOnly(this,"_mnemonic",()=>({phrase:o.phrase,path:o.path||defaultPath,locale:o.locale||"en"}));const c=this.mnemonic,u=HDNode.fromMnemonic(c.phrase,null,c.locale).derivePath(c.path);computeAddress(u.privateKey)!==this.address&&logger.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else defineReadOnly(this,"_mnemonic",()=>null)}else{if(SigningKey.isSigningKey(e))e.curve!=="secp256k1"&&logger.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),defineReadOnly(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const a=new SigningKey(e);defineReadOnly(this,"_signingKey",()=>a)}defineReadOnly(this,"_mnemonic",()=>null),defineReadOnly(this,"address",computeAddress(this.publicKey))}n&&!Provider.isProvider(n)&&logger.throwArgumentError("invalid provider","provider",n),defineReadOnly(this,"provider",n||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Wallet(this,e)}signTransaction(e){return resolveProperties(e).then(n=>{n.from!=null&&(getAddress(n.from)!==this.address&&logger.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete n.from);const a=this._signingKey().signDigest(keccak256(serialize(n)));return serialize(n,a)})}signMessage(e){return __awaiter(this,void 0,void 0,function*(){return joinSignature(this._signingKey().signDigest(hashMessage(e)))})}_signTypedData(e,n,a){return __awaiter(this,void 0,void 0,function*(){const o=yield TypedDataEncoder.resolveNames(e,n,a,c=>(this.provider==null&&logger.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:c}),this.provider.resolveName(c)));return joinSignature(this._signingKey().signDigest(TypedDataEncoder.hash(o.domain,n,o.value)))})}encrypt(e,n,a){if(typeof n=="function"&&!a&&(a=n,n={}),a&&typeof a!="function")throw new Error("invalid callback");return n||(n={}),encrypt(this,e,n,a)}static createRandom(e){let n=randomBytes(16);e||(e={}),e.extraEntropy&&(n=arrayify(hexDataSlice(keccak256(concat([n,e.extraEntropy])),0,16)));const a=entropyToMnemonic(n,e.locale);return Wallet.fromMnemonic(a,e.path,e.locale)}static fromEncryptedJson(e,n,a){return decryptJsonWallet(e,n,a).then(o=>new Wallet(o))}static fromEncryptedJsonSync(e,n){return new Wallet(decryptJsonWalletSync(e,n))}static fromMnemonic(e,n,a){return n||(n=defaultPath),new Wallet(HDNode.fromMnemonic(e,null,a).derivePath(n))}}function verifyMessage(t,e){return recoverAddress(hashMessage(t),e)}function getEIP191Verifier(){return{eip191:async(t,e)=>{verifyEIP191Signature(t,e)}}}const LEGACY_CHAIN_ID_REORG_DATE=new Date("2022-09-20").valueOf();function verifyEIP191Signature(t,e){assertSigned(t),verifyTimeChecks(t,e);const a=[verifyMessage(SiweMessage.fromCacao(t).toMessage(),t.s.s).toLowerCase()];if(Date.parse(t.p.iat)<=LEGACY_CHAIN_ID_REORG_DATE){const c=verifyMessage(asLegacyChainIdString(SiweMessage.fromCacao(t),"Ethereum"),t.s.s).toLowerCase();a.push(c)}const o=AccountId.parse(t.p.iss.replace("did:pkh:","")).address.toLowerCase();if(!a.includes(o))throw new Error("Signature does not belong to issuer")}async function pMapSeries(t,e){const n=[];let a=0;for(const o of t)n.push(await e(await o,a++));return n}const BUILD={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let scopeId,contentRef,hostTagName,useNativeShadowDom=!1,checkSlotFallbackVisibility=!1,checkSlotRelocate=!1,isSvgMode=!1,renderingRef=null,queuePending=!1;const getAssetPath=t=>{const e=new URL(t,plt.$resourcesUrl$);return e.origin!==win.location.origin?e.href:e.pathname},createTime=(t,e="")=>()=>{},XLINK_NS="http://www.w3.org/1999/xlink",EMPTY_OBJ={},SVG_NS="http://www.w3.org/2000/svg",HTML_NS="http://www.w3.org/1999/xhtml",isDef=t=>t!=null,isComplexType=t=>(t=typeof t,t==="object"||t==="function");function queryNonceMetaTagContent(t){var e,n,a;return(a=(n=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&a!==void 0?a:void 0}const h=(t,e,...n)=>{let a=null,o=null,c=null,u=!1,l=!1;const p=[],b=x=>{for(let _=0;_<x.length;_++)a=x[_],Array.isArray(a)?b(a):a!=null&&typeof a!="boolean"&&((u=typeof t!="function"&&!isComplexType(a))&&(a=String(a)),u&&l?p[p.length-1].$text$+=a:p.push(u?newVNode(null,a):a),l=u)};if(b(n),e){e.key&&(o=e.key),e.name&&(c=e.name);{const x=e.className||e.class;x&&(e.class=typeof x!="object"?x:Object.keys(x).filter(_=>x[_]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,p,vdomFnUtils);const v=newVNode(t,null);return v.$attrs$=e,p.length>0&&(v.$children$=p),v.$key$=o,v.$name$=c,v},newVNode=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},Host={},isHost=t=>t&&t.$tag$===Host,vdomFnUtils={forEach:(t,e)=>t.map(convertToPublic).forEach(e),map:(t,e)=>t.map(convertToPublic).map(e).map(convertToPrivate)},convertToPublic=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),convertToPrivate=t=>{if(typeof t.vtag=="function"){const n=Object.assign({},t.vattrs);return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),h(t.vtag,n,...t.vchildren||[])}const e=newVNode(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},computeMode=t=>modeResolutionChain.map(e=>e(t)).find(e=>!!e),setMode=t=>modeResolutionChain.push(t),getMode=t=>getHostRef(t).$modeName$,parsePropertyValue=(t,e)=>t!=null&&!isComplexType(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,getElement=t=>t,createEvent=(t,e,n)=>{const a=getElement(t);return{emit:o=>emitEvent(a,e,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:o})}},emitEvent=(t,e,n)=>{const a=plt.ce(e,n);return t.dispatchEvent(a),a},rootAppliedStyles=new WeakMap,registerStyle=(t,e,n)=>{let a=styles.get(t);supportsConstructableStylesheets&&n?(a=a||new CSSStyleSheet,typeof a=="string"?a=e:a.replaceSync(e)):a=e,styles.set(t,a)},addStyle=(t,e,n,a)=>{var o;let c=getScopeId(e,n);const u=styles.get(c);if(t=t.nodeType===11?t:doc,u)if(typeof u=="string"){t=t.head||t;let l=rootAppliedStyles.get(t),p;if(l||rootAppliedStyles.set(t,l=new Set),!l.has(c)){{p=doc.createElement("style"),p.innerHTML=u;const b=(o=plt.$nonce$)!==null&&o!==void 0?o:queryNonceMetaTagContent(doc);b!=null&&p.setAttribute("nonce",b),t.insertBefore(p,t.querySelector("link"))}l&&l.add(c)}}else t.adoptedStyleSheets.includes(u)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,u]);return c},attachStyles=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,a=e.$flags$,o=createTime("attachStyles",e.$tagName$),c=addStyle(n.shadowRoot?n.shadowRoot:n.getRootNode(),e,t.$modeName$);a&10&&(n["s-sc"]=c,n.classList.add(c+"-h"),a&2&&n.classList.add(c+"-s")),o()},getScopeId=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),setAccessor=(t,e,n,a,o,c)=>{if(n!==a){let u=isMemberInElement(t,e),l=e.toLowerCase();if(e==="class"){const p=t.classList,b=parseClassList(n),v=parseClassList(a);p.remove(...b.filter(x=>x&&!v.includes(x))),p.add(...v.filter(x=>x&&!b.includes(x)))}else if(e==="style"){for(const p in n)(!a||a[p]==null)&&(p.includes("-")?t.style.removeProperty(p):t.style[p]="");for(const p in a)(!n||a[p]!==n[p])&&(p.includes("-")?t.style.setProperty(p,a[p]):t.style[p]=a[p])}else if(e!=="key")if(e==="ref")a&&a(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):isMemberInElement(win,l)?e=l.slice(2):e=l[2]+e.slice(3),n&&plt.rel(t,e,n,!1),a&&plt.ael(t,e,a,!1);else{const p=isComplexType(a);if((u||p&&a!==null)&&!o)try{if(t.tagName.includes("-"))t[e]=a;else{const v=a??"";e==="list"?u=!1:(n==null||t[e]!=v)&&(t[e]=v)}}catch{}let b=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(e=l,b=!0),a==null||a===!1?(a!==!1||t.getAttribute(e)==="")&&(b?t.removeAttributeNS(XLINK_NS,e):t.removeAttribute(e)):(!u||c&4||o)&&!p&&(a=a===!0?"":a,b?t.setAttributeNS(XLINK_NS,e,a):t.setAttribute(e,a))}}},parseClassListRegex=/\s/,parseClassList=t=>t?t.split(parseClassListRegex):[],updateElement=(t,e,n,a)=>{const o=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,c=t&&t.$attrs$||EMPTY_OBJ,u=e.$attrs$||EMPTY_OBJ;for(a in c)a in u||setAccessor(o,a,c[a],void 0,n,e.$flags$);for(a in u)setAccessor(o,a,c[a],u[a],n,e.$flags$)},createElm=(t,e,n,a)=>{const o=e.$children$[n];let c=0,u,l,p;if(useNativeShadowDom||(checkSlotRelocate=!0,o.$tag$==="slot"&&(scopeId&&a.classList.add(scopeId+"-s"),o.$flags$|=o.$children$?2:1)),o.$text$!==null)u=o.$elm$=doc.createTextNode(o.$text$);else if(o.$flags$&1)u=o.$elm$=doc.createTextNode("");else{if(isSvgMode||(isSvgMode=o.$tag$==="svg"),u=o.$elm$=doc.createElementNS(isSvgMode?SVG_NS:HTML_NS,o.$flags$&2?"slot-fb":o.$tag$),isSvgMode&&o.$tag$==="foreignObject"&&(isSvgMode=!1),updateElement(null,o,isSvgMode),isDef(scopeId)&&u["s-si"]!==scopeId&&u.classList.add(u["s-si"]=scopeId),o.$children$)for(c=0;c<o.$children$.length;++c)l=createElm(t,o,c,u),l&&u.appendChild(l);o.$tag$==="svg"?isSvgMode=!1:u.tagName==="foreignObject"&&(isSvgMode=!0)}return u["s-hn"]=hostTagName,o.$flags$&3&&(u["s-sr"]=!0,u["s-cr"]=contentRef,u["s-sn"]=o.$name$||"",p=t&&t.$children$&&t.$children$[n],p&&p.$tag$===o.$tag$&&t.$elm$&&putBackInOriginalLocation(t.$elm$,!1)),u},putBackInOriginalLocation=(t,e)=>{plt.$flags$|=1;const n=t.childNodes;for(let a=n.length-1;a>=0;a--){const o=n[a];o["s-hn"]!==hostTagName&&o["s-ol"]&&(parentReferenceNode(o).insertBefore(o,referenceNode(o)),o["s-ol"].remove(),o["s-ol"]=void 0,checkSlotRelocate=!0),e&&putBackInOriginalLocation(o,e)}plt.$flags$&=-2},addVnodes=(t,e,n,a,o,c)=>{let u=t["s-cr"]&&t["s-cr"].parentNode||t,l;for(u.shadowRoot&&u.tagName===hostTagName&&(u=u.shadowRoot);o<=c;++o)a[o]&&(l=createElm(null,n,o,t),l&&(a[o].$elm$=l,u.insertBefore(l,referenceNode(e))))},removeVnodes=(t,e,n)=>{for(let a=e;a<=n;++a){const o=t[a];if(o){const c=o.$elm$;nullifyVNodeRefs(o),c&&(checkSlotFallbackVisibility=!0,c["s-ol"]?c["s-ol"].remove():putBackInOriginalLocation(c,!0),c.remove())}}},updateChildren=(t,e,n,a)=>{let o=0,c=0,u=0,l=0,p=e.length-1,b=e[0],v=e[p],x=a.length-1,_=a[0],E=a[x],$,S;for(;o<=p&&c<=x;)if(b==null)b=e[++o];else if(v==null)v=e[--p];else if(_==null)_=a[++c];else if(E==null)E=a[--x];else if(isSameVnode(b,_))patch(b,_),b=e[++o],_=a[++c];else if(isSameVnode(v,E))patch(v,E),v=e[--p],E=a[--x];else if(isSameVnode(b,E))(b.$tag$==="slot"||E.$tag$==="slot")&&putBackInOriginalLocation(b.$elm$.parentNode,!1),patch(b,E),t.insertBefore(b.$elm$,v.$elm$.nextSibling),b=e[++o],E=a[--x];else if(isSameVnode(v,_))(b.$tag$==="slot"||E.$tag$==="slot")&&putBackInOriginalLocation(v.$elm$.parentNode,!1),patch(v,_),t.insertBefore(v.$elm$,b.$elm$),v=e[--p],_=a[++c];else{for(u=-1,l=o;l<=p;++l)if(e[l]&&e[l].$key$!==null&&e[l].$key$===_.$key$){u=l;break}u>=0?(S=e[u],S.$tag$!==_.$tag$?$=createElm(e&&e[c],n,u,t):(patch(S,_),e[u]=void 0,$=S.$elm$),_=a[++c]):($=createElm(e&&e[c],n,c,t),_=a[++c]),$&&parentReferenceNode(b.$elm$).insertBefore($,referenceNode(b.$elm$))}o>p?addVnodes(t,a[x+1]==null?null:a[x+1].$elm$,n,a,c,x):c>x&&removeVnodes(e,o,p)},isSameVnode=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,referenceNode=t=>t&&t["s-ol"]||t,parentReferenceNode=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,patch=(t,e)=>{const n=e.$elm$=t.$elm$,a=t.$children$,o=e.$children$,c=e.$tag$,u=e.$text$;let l;u===null?(isSvgMode=c==="svg"?!0:c==="foreignObject"?!1:isSvgMode,c==="slot"||updateElement(t,e,isSvgMode),a!==null&&o!==null?updateChildren(n,a,e,o):o!==null?(t.$text$!==null&&(n.textContent=""),addVnodes(n,null,e,o,0,o.length-1)):a!==null&&removeVnodes(a,0,a.length-1),isSvgMode&&c==="svg"&&(isSvgMode=!1)):(l=n["s-cr"])?l.parentNode.textContent=u:t.$text$!==u&&(n.data=u)},updateFallbackSlotVisibility=t=>{const e=t.childNodes;let n,a,o,c,u,l;for(a=0,o=e.length;a<o;a++)if(n=e[a],n.nodeType===1){if(n["s-sr"]){for(u=n["s-sn"],n.hidden=!1,c=0;c<o;c++)if(l=e[c].nodeType,e[c]["s-hn"]!==n["s-hn"]||u!==""){if(l===1&&u===e[c].getAttribute("slot")){n.hidden=!0;break}}else if(l===1||l===3&&e[c].textContent.trim()!==""){n.hidden=!0;break}}updateFallbackSlotVisibility(n)}},relocateNodes=[],relocateSlotContent=t=>{let e,n,a,o,c,u,l=0;const p=t.childNodes,b=p.length;for(;l<b;l++){if(e=p[l],e["s-sr"]&&(n=e["s-cr"])&&n.parentNode)for(a=n.parentNode.childNodes,o=e["s-sn"],u=a.length-1;u>=0;u--)n=a[u],!n["s-cn"]&&!n["s-nr"]&&n["s-hn"]!==e["s-hn"]&&(isNodeLocatedInSlot(n,o)?(c=relocateNodes.find(v=>v.$nodeToRelocate$===n),checkSlotFallbackVisibility=!0,n["s-sn"]=n["s-sn"]||o,c?c.$slotRefNode$=e:relocateNodes.push({$slotRefNode$:e,$nodeToRelocate$:n}),n["s-sr"]&&relocateNodes.map(v=>{isNodeLocatedInSlot(v.$nodeToRelocate$,n["s-sn"])&&(c=relocateNodes.find(x=>x.$nodeToRelocate$===n),c&&!v.$slotRefNode$&&(v.$slotRefNode$=c.$slotRefNode$))})):relocateNodes.some(v=>v.$nodeToRelocate$===n)||relocateNodes.push({$nodeToRelocate$:n}));e.nodeType===1&&relocateSlotContent(e)}},isNodeLocatedInSlot=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",nullifyVNodeRefs=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(nullifyVNodeRefs)},renderVdom=(t,e)=>{const n=t.$hostElement$,a=t.$cmpMeta$,o=t.$vnode$||newVNode(null,null),c=isHost(e)?e:h(null,null,e);hostTagName=n.tagName,a.$attrsToReflect$&&(c.$attrs$=c.$attrs$||{},a.$attrsToReflect$.map(([u,l])=>c.$attrs$[l]=n[u])),c.$tag$=null,c.$flags$|=4,t.$vnode$=c,c.$elm$=o.$elm$=n.shadowRoot||n,scopeId=n["s-sc"],contentRef=n["s-cr"],useNativeShadowDom=(a.$flags$&1)!==0,checkSlotFallbackVisibility=!1,patch(o,c);{if(plt.$flags$|=1,checkSlotRelocate){relocateSlotContent(c.$elm$);let u,l,p,b,v,x,_=0;for(;_<relocateNodes.length;_++)u=relocateNodes[_],l=u.$nodeToRelocate$,l["s-ol"]||(p=doc.createTextNode(""),p["s-nr"]=l,l.parentNode.insertBefore(l["s-ol"]=p,l));for(_=0;_<relocateNodes.length;_++)if(u=relocateNodes[_],l=u.$nodeToRelocate$,u.$slotRefNode$){for(b=u.$slotRefNode$.parentNode,v=u.$slotRefNode$.nextSibling,p=l["s-ol"];p=p.previousSibling;)if(x=p["s-nr"],x&&x["s-sn"]===l["s-sn"]&&b===x.parentNode&&(x=x.nextSibling,!x||!x["s-nr"])){v=x;break}(!v&&b!==l.parentNode||l.nextSibling!==v)&&l!==v&&(!l["s-hn"]&&l["s-ol"]&&(l["s-hn"]=l["s-ol"].parentNode.nodeName),b.insertBefore(l,v))}else l.nodeType===1&&(l.hidden=!0)}checkSlotFallbackVisibility&&updateFallbackSlotVisibility(c.$elm$),plt.$flags$&=-2,relocateNodes.length=0}},attachToAncestor=(t,e)=>{},scheduleUpdate=(t,e)=>(t.$flags$|=16,attachToAncestor(t,t.$ancestorComponent$),writeTask(()=>dispatchHooks(t,e))),dispatchHooks=(t,e)=>{const n=t.$hostElement$,a=createTime("scheduleUpdate",t.$cmpMeta$.$tagName$),o=n;let c;return e?c=safeCall(o,"componentWillLoad"):c=safeCall(o,"componentWillUpdate"),c=enqueue(c,()=>safeCall(o,"componentWillRender")),a(),enqueue(c,()=>updateComponent(t,o,e))},enqueue=(t,e)=>t instanceof Promise?t.then(e):e(),updateComponent=async(t,e,n)=>{const a=t.$hostElement$,o=createTime("update",t.$cmpMeta$.$tagName$);a["s-rc"],n&&attachStyles(t);const c=createTime("render",t.$cmpMeta$.$tagName$);callRender(t,e,a),c(),o(),postUpdateComponent(t)},callRender=(t,e,n)=>{try{renderingRef=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(BUILD.hasRenderFn||BUILD.reflect)&&(BUILD.vdomRender||BUILD.reflect)&&(BUILD.hydrateServerSide||renderVdom(t,e))}catch(l){consoleError(l,t.$hostElement$)}return renderingRef=null,null},postUpdateComponent=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,a=createTime("postUpdate",e),o=n;t.$ancestorComponent$,safeCall(o,"componentDidRender"),t.$flags$&64?(safeCall(o,"componentDidUpdate"),a()):(t.$flags$|=64,safeCall(o,"componentDidLoad"),a())},forceUpdate=t=>{{const e=getHostRef(t),n=e.$hostElement$.isConnected;return n&&(e.$flags$&18)===2&&scheduleUpdate(e,!1),n}},safeCall=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(a){consoleError(a)}},getValue=(t,e)=>getHostRef(t).$instanceValues$.get(e),setValue=(t,e,n,a)=>{const o=getHostRef(t),c=t,u=o.$instanceValues$.get(e),l=o.$flags$,p=c;n=parsePropertyValue(n,a.$members$[e][0]);const b=Number.isNaN(u)&&Number.isNaN(n);if(n!==u&&!b){o.$instanceValues$.set(e,n);{if(a.$watchers$&&l&128){const x=a.$watchers$[e];x&&x.map(_=>{try{p[_](n,u,e)}catch(E){consoleError(E,c)}})}if((l&18)===2){if(p.componentShouldUpdate&&p.componentShouldUpdate(n,u,e)===!1)return;scheduleUpdate(o,!1)}}}},proxyComponent=(t,e,n)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const a=Object.entries(e.$members$),o=t.prototype;a.map(([c,[u]])=>{(u&31||u&32)&&Object.defineProperty(o,c,{get(){return getValue(this,c)},set(l){setValue(this,c,l,e)},configurable:!0,enumerable:!0})});{const c=new Map;o.attributeChangedCallback=function(u,l,p){plt.jmp(()=>{const b=c.get(u);if(this.hasOwnProperty(b))p=this[b],delete this[b];else if(o.hasOwnProperty(b)&&typeof this[b]=="number"&&this[b]==p)return;this[b]=p===null&&typeof this[b]=="boolean"?!1:p})},t.observedAttributes=a.filter(([u,l])=>l[0]&15).map(([u,l])=>{const p=l[1]||u;return c.set(p,u),l[0]&512&&e.$attrsToReflect$.push([u,p]),p})}}return t},initializeComponent=async(t,e,n,a,o)=>{if(!(e.$flags$&32)&&(e.$flags$|=32,o=t.constructor,customElements.whenDefined(n.$tagName$).then(()=>e.$flags$|=128),o.style)){let u=o.style;typeof u!="string"&&(u=u[e.$modeName$=computeMode(t)]);const l=getScopeId(n,e.$modeName$);if(!styles.has(l)){const p=createTime("registerStyles",n.$tagName$);registerStyle(l,u,!!(n.$flags$&1)),p()}}e.$ancestorComponent$,(()=>scheduleUpdate(e,!0))()},fireConnectedCallback=t=>{},connectedCallback=t=>{if(!(plt.$flags$&1)){const e=getHostRef(t),n=e.$cmpMeta$,a=createTime("connectedCallback",n.$tagName$);e.$flags$&1?(addHostEventListeners(t,e,n.$listeners$),fireConnectedCallback(e.$lazyInstance$)):(e.$flags$|=1,n.$flags$&12&&setContentReference(t),n.$members$&&Object.entries(n.$members$).map(([o,[c]])=>{if(c&31&&t.hasOwnProperty(o)){const u=t[o];delete t[o],t[o]=u}}),initializeComponent(t,e,n)),a()}},setContentReference=t=>{const e=t["s-cr"]=doc.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},disconnectedCallback=t=>{if(!(plt.$flags$&1)){const e=getHostRef(t);e.$rmListeners$&&(e.$rmListeners$.map(n=>n()),e.$rmListeners$=void 0)}},proxyCustomElement=(t,e)=>{const n={$flags$:e[0],$tagName$:e[1]};n.$members$=e[2],n.$listeners$=e[3],n.$watchers$=t.$watchers$,n.$attrsToReflect$=[];const a=t.prototype.connectedCallback,o=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){registerHost(this,n)},connectedCallback(){connectedCallback(this),a&&a.call(this)},disconnectedCallback(){disconnectedCallback(this),o&&o.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)})}}),t.is=n.$tagName$,proxyComponent(t,n)},addHostEventListeners=(t,e,n,a)=>{n&&n.map(([o,c,u])=>{const l=getHostListenerTarget(t,o),p=hostListenerProxy(e,u),b=hostListenerOpts(o);plt.ael(l,c,p,b),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>plt.rel(l,c,p,b))})},hostListenerProxy=(t,e)=>n=>{try{BUILD.lazyLoad||t.$hostElement$[e](n)}catch(a){consoleError(a)}},getHostListenerTarget=(t,e)=>e&4?doc:e&8?win:e&16?doc.body:t,hostListenerOpts=t=>supportsListenerOptions?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,hostRefs=new WeakMap,getHostRef=t=>hostRefs.get(t),registerHost=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return addHostEventListeners(t,n,e.$listeners$),hostRefs.set(t,n)},isMemberInElement=(t,e)=>e in t,consoleError=(t,e)=>(0,console.error)(t,e),styles=new Map,modeResolutionChain=[],win=typeof window<"u"?window:{},doc=win.document||{head:{}},H=win.HTMLElement||class{},plt={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,a)=>t.addEventListener(e,n,a),rel:(t,e,n,a)=>t.removeEventListener(e,n,a),ce:(t,e)=>new CustomEvent(t,e)},setPlatformHelpers=t=>{Object.assign(plt,t)},supportsListenerOptions=(()=>{let t=!1;try{doc.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),promiseResolve=t=>Promise.resolve(t),supportsConstructableStylesheets=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),queueDomReads=[],queueDomWrites=[],queueTask=(t,e)=>n=>{t.push(n),queuePending||(queuePending=!0,e&&plt.$flags$&4?nextTick(flush):plt.raf(flush))},consume=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){consoleError(n)}t.length=0},flush=()=>{consume(queueDomReads),consume(queueDomWrites),(queuePending=queueDomReads.length>0)&&plt.raf(flush)},nextTick=t=>promiseResolve().then(t),readTask=queueTask(queueDomReads,!1),writeTask=queueTask(queueDomWrites,!0);var Flipping$2={},utils={};/*  @license Rematrix v0.1.3

    Copyright (c) 2017 Fisssion LLC

    Permission is hereby granted, free of charge, to any person obtaining a copy
    of this software and associated documentation files (the "Software"), to deal
    in the Software without restriction, including without limitation the rights
    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
    copies of the Software, and to permit persons to whom the Software is
    furnished to do so, subject to the following conditions:

    The above copyright notice and this permission notice shall be included in
    all copies or substantial portions of the Software.

    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
    THE SOFTWARE.
*/function format(t){if(t.constructor!==Array)throw new TypeError("Expected array.");if(t.length===16)return t;if(t.length===6){var e=identity$1();return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}throw new RangeError("Expected array with either 6 or 16 values.")}function identity$1(){for(var t=[],e=0;e<16;e++)e%5==0?t.push(1):t.push(0);return t}function inverse(t){var e=format(t),n=e[0]*e[5]-e[4]*e[1],a=e[0]*e[6]-e[4]*e[2],o=e[0]*e[7]-e[4]*e[3],c=e[1]*e[6]-e[5]*e[2],u=e[1]*e[7]-e[5]*e[3],l=e[2]*e[7]-e[6]*e[3],p=e[10]*e[15]-e[14]*e[11],b=e[9]*e[15]-e[13]*e[11],v=e[9]*e[14]-e[13]*e[10],x=e[8]*e[15]-e[12]*e[11],_=e[8]*e[14]-e[12]*e[10],E=e[8]*e[13]-e[12]*e[9],$=1/(n*p-a*b+o*v+c*x-u*_+l*E);if(isNaN($)||$===1/0)throw new Error("Inverse determinant attempted to divide by zero.");return[(e[5]*p-e[6]*b+e[7]*v)*$,(-e[1]*p+e[2]*b-e[3]*v)*$,(e[13]*l-e[14]*u+e[15]*c)*$,(-e[9]*l+e[10]*u-e[11]*c)*$,(-e[4]*p+e[6]*x-e[7]*_)*$,(e[0]*p-e[2]*x+e[3]*_)*$,(-e[12]*l+e[14]*o-e[15]*a)*$,(e[8]*l-e[10]*o+e[11]*a)*$,(e[4]*b-e[5]*x+e[7]*E)*$,(-e[0]*b+e[1]*x-e[3]*E)*$,(e[12]*u-e[13]*o+e[15]*n)*$,(-e[8]*u+e[9]*o-e[11]*n)*$,(-e[4]*v+e[5]*_-e[6]*E)*$,(e[0]*v-e[1]*_+e[2]*E)*$,(-e[12]*c+e[13]*a-e[14]*n)*$,(e[8]*c-e[9]*a+e[10]*n)*$]}function multiply(t,e){for(var n=format(t),a=format(e),o=[],c=0;c<4;c++)for(var u=[n[c],n[c+4],n[c+8],n[c+12]],l=0;l<4;l++){var p=l*4,b=[a[p],a[p+1],a[p+2],a[p+3]],v=u[0]*b[0]+u[1]*b[1]+u[2]*b[2]+u[3]*b[3];o[c+p]=v}return o}function parse(t){if(typeof t=="string"){var e=t.match(/matrix(3d)?\(([^)]+)\)/);if(e){var n=e[2].split(", ").map(function(a){return parseFloat(a)});return format(n)}}return identity$1()}function rotateX(t){var e=Math.PI/180*t,n=identity$1();return n[5]=n[10]=Math.cos(e),n[6]=n[9]=Math.sin(e),n[9]*=-1,n}function rotateY(t){var e=Math.PI/180*t,n=identity$1();return n[0]=n[10]=Math.cos(e),n[2]=n[8]=Math.sin(e),n[2]*=-1,n}function rotateZ(t){var e=Math.PI/180*t,n=identity$1();return n[0]=n[5]=Math.cos(e),n[1]=n[4]=Math.sin(e),n[4]*=-1,n}function scale(t,e){var n=identity$1();return n[0]=t,n[5]=e||t,n}function scaleX(t){var e=identity$1();return e[0]=t,e}function scaleY(t){var e=identity$1();return e[5]=t,e}function scaleZ(t){var e=identity$1();return e[10]=t,e}function skew(t,e){var n=Math.PI/180*t,a=identity$1();if(a[4]=Math.tan(n),e){var o=Math.PI/180*e;a[1]=Math.tan(o)}return a}function skewX(t){var e=Math.PI/180*t,n=identity$1();return n[4]=Math.tan(e),n}function skewY(t){var e=Math.PI/180*t,n=identity$1();return n[1]=Math.tan(e),n}function translate(t,e){var n=identity$1();return n[12]=t,e&&(n[13]=e),n}function translateX(t){var e=identity$1();return e[12]=t,e}function translateY(t){var e=identity$1();return e[13]=t,e}function translateZ(t){var e=identity$1();return e[14]=t,e}const rematrix_es=Object.freeze(Object.defineProperty({__proto__:null,format,identity:identity$1,inverse,multiply,parse,rotateX,rotateY,rotateZ,scale,scaleX,scaleY,scaleZ,skew,skewX,skewY,translate,translateX,translateY,translateZ},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(rematrix_es);var constants={};Object.defineProperty(constants,"__esModule",{value:!0});constants.FOLLOW_ATTR="data-flip-follow";constants.KEY_ATTR="data-flip-key";constants.STATE_ATTR="data-flip-state";constants.NO_DELTA={top:0,left:0,width:1,height:1};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=require$$0,n=constants;function a(E,$){var S={};return Object.keys(E).forEach(function(A){S[A]=$(E[A],A,E)}),S}t.mapValues=a;function o(E,$,S){var A={};return Object.keys(E||{}).forEach(function(I){A[I]=S(E[I],$[I],I)}),A}t.mapTwoValues=o;function c(E,$){return e.translate(E,$).join(",")}t.matrixTranslate=c;function u(E,$){return e.scale(E,$).join(",")}t.matrixScale=u;function l(){for(var E=[],$=0;$<arguments.length;$++)E[$]=arguments[$];return E.filter(function(S){return!!S}).reduce(e.multiply).join(",")}t.matrixMultiply=l;function p(E,$){return["height","width","top","left"].indexOf(E)!==-1&&typeof $=="number"?$+"px":$}t.styleValue=p;function b(E,$){return typeof $=="function"?$(E):($||0)*E}t.getStaggerDelay=b,t.identity=function(E){return E},t.noop=function(){},t.rect=function(E){var $=E.getBoundingClientRect(),S=$.top,A=$.left,I=$.width,O=$.height;return{top:S,left:A,width:I,height:O,get transform(){return getComputedStyle(E).transform||void 0}}};function v(E){var $=t.rect(E),S=$.width,A=$.height;return!(S===0&&A===0)}t.isVisible=v;function x(E,$){return E?E.height?$.height?{top:E.top-$.top,left:E.left-$.left,width:E.width/$.width,height:E.height/$.height}:$:E:n.NO_DELTA}t.getDelta=x,t.deltaChanged=function(E){return!!E.top||!!E.left||E.width!==1||E.height!==1},t.boundsChanged=function(E,$){return!!(E.top-$.top||E.left-$.left||E.width-$.width||E.height-$.height)};function _(){var E={},$=[];return{on:function(S,A){S==="*"?$.push(A):(E[S]||(E[S]=[])).push(A)},off:function(S,A){S==="*"?$.splice($.indexOf(A)>>>0,1):E[S]&&E[S].splice(E[S].indexOf(A)>>>0,1)},emit:function(S,A){(E[S]||[]).slice().map(function(I){I(A)}),$.slice().map(function(I){I(S,A)})}}}t.mitt=_})(utils);var mirror={},__assign$2=commonjsGlobal&&commonjsGlobal.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(mirror,"__esModule",{value:!0});function mirrorPlugin(t,e){if(e!=="flip")return t;var n={};return Object.keys(t).forEach(function(a){var o=t[a],c=o.element||o.previous&&o.previous.element;if(c&&c.hasAttribute("data-flip-follow")){var u=c.getAttribute("data-flip-follow");if(u&&t[u])n[a]=__assign$2({},o,{delta:__assign$2({left:0,top:0},t[u].delta,{width:1,height:1})});else if(o.type==="ENTER"||o.type==="LEAVE"){for(var l=c.nextElementSibling;l&&(!l.hasAttribute("data-flip-key")||t[l.getAttribute("data-flip-key")].type!=="MOVE");)l=l.nextElementSibling;if(l){var p=t[l.getAttribute("data-flip-key")].delta;n[a]=__assign$2({},o,{delta:{left:p.left,top:p.top,width:1,height:1}})}}}}),Object.assign(t,n)}mirror.default=mirrorPlugin;var radius={};Object.defineProperty(radius,"__esModule",{value:!0});function radiusPlugin(t,e){return e==="read"&&Object.keys(t).forEach(function(n){var a=t[n],o=a.element;o&&(a.data.radius=getComputedStyle&&getComputedStyle(o).borderRadius||"0")}),t}radius.default=radiusPlugin;var __assign$1=commonjsGlobal&&commonjsGlobal.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t};Object.defineProperty(Flipping$2,"__esModule",{value:!0});var utils_1=utils,constants_1=constants,mirror_1=mirror,radius_1=radius,active=function(){return!0},identity=function(t){return t},flipDatasetMap={flipKey:["key",identity],flipNoScale:["noScale",function(){return!0}]},getFlipData=function(t){if(!("dataset"in t))return{};var e=t.dataset,n={};return Object.keys(e).forEach(function(a){if(flipDatasetMap[a]){var o=flipDatasetMap[a],c=o[0],u=o[1];n[c]=u(e[a])}else a.indexOf("flip")===0&&(n[a[4].toLowerCase()+a.slice(5)]=e[a])}),n},createSelector=function(t,e){return e===void 0&&(e=constants_1.KEY_ATTR),typeof t=="string"?function(n){var a=n.querySelectorAll(t),o=[];return a.forEach(function(c){if(utils_1.isVisible(c)){var u=c.getAttribute(e);u&&o.push(c)}}),o}:t},Flipping$1=function(){function t(e){e===void 0&&(e={}),this.attribute=e.attribute||constants_1.KEY_ATTR,this.selector=createSelector(e.selector||"["+this.attribute+"]",this.attribute),this.active=e.active||active,this.activeSelector=e.activeSelector||utils_1.isVisible,this.getBounds=e.getBounds||utils_1.rect,this.getDelta=e.getDelta||utils_1.getDelta,this.parentElement=e.parent||document.documentElement,this.plugins=e.plugins||[mirror_1.default,radius_1.default],this.emitter=utils_1.mitt(),e.onRead&&this.on("read",e.onRead),e.onFlip&&this.on("flip",e.onFlip),e.onEnter&&this.on("enter",e.onEnter),e.onLeave&&this.on("leave",e.onLeave),this.states={}}return t.prototype.getRelativeBounds=function(e,n){return __assign$1({},n,{top:n.top-e.top,left:n.left-e.left})},t.prototype.selectActive=function(e){var n=this,a=this.selector(e),o=[];return a.forEach(function(c){if(n.activeSelector(c)){var u=c.getAttribute(n.attribute);u&&o.push(c)}}),o},t.prototype.findParent=function(e,n){n===void 0&&(n=this.parentElement);var a=e.getAttribute("data-flip-parent"),o=e.parentElement;if(a)for(;o&&o.getAttribute(this.attribute)!==a;)o=o.parentElement;else for(;o&&!o.hasAttribute(this.attribute);)o=o.parentElement;return o||n},t.prototype.dispatch=function(e,n){var a=this.plugins.reduce(function(o,c){return c(o,e)},n);this.emitter.emit(e,a)},t.prototype.on=function(e,n){this.emitter.on(e,n)},t.prototype.onFlip=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var a,o;e.length===2?(a=e[0],o=e[1]):o=e[0],this.emitter.on("flip",a?function(c){var u=c[a];u&&o(u)}:o)},t.prototype.read=function(e){e===void 0&&(e={}),this.flip(__assign$1({},e,{readOnly:!0}))},t.prototype.flip=function(e){var n=this;e===void 0&&(e={});var a=e.parent||this.parentElement,o=this.selectActive(a),c={};return o.forEach(function(u,l){var p=u.getAttribute(n.attribute);if(p){var b=getFlipData(u),v=n.findParent(u,a),x=v.getAttribute(n.attribute),_=x?c[x]:void 0,E=n.getBounds(v),$=n.states[p],S=$&&$.type!=="LEAVE",A=n.getRelativeBounds(E,n.getBounds(u)),I=S&&$&&$.bounds?n.getDelta($.bounds,A):void 0,O={type:S?"MOVE":"ENTER",key:p,element:u,bounds:A,delta:I,start:Date.now(),animation:S?$.animation:void 0,index:l,previous:$?{type:$.type,bounds:$.bounds,animation:$.animation,element:$.element,data:$.data}:void 0,parent:_,data:b};n.states[p]=c[p]=O}}),e.readOnly?this.dispatch("read",c):(Object.keys(this.states).forEach(function(u,l){if(!c[u]){var p=n.states[u];n.states[u]=c[u]={type:"LEAVE",key:u,element:void 0,bounds:void 0,start:Date.now(),animation:void 0,delta:void 0,index:l,parent:void 0,previous:{type:p.type,bounds:p.bounds,animation:p.animation,element:p.element}}}}),this.dispatch("flip",c))},t.prototype.setAnimation=function(e,n){this.states[e].animation=n},t.prototype.wrap=function(e,n){var a=this;return n===void 0&&(n={}),function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];a.read(n);var u=e.apply(null,o);return a.flip(n),u}},t.prototype.progress=function(e,n){var a=this.states[e].delta;if(a)return t.progress(a,n)},t.progress=function(e,n){if(!e)return constants_1.NO_DELTA;var a=1-n;return{top:e.top*a,left:e.left*a,width:e.width*a,height:e.height*a}},t.rect=utils_1.rect,t.willScale=function(e){return!!(e&&e.element&&!e.element.hasAttribute("data-noflip")&&e.delta&&(e.delta.width!==1||e.delta.height!==1))},t.willMove=function(e){return!e||!e.delta?!1:e&&(e.delta.top!==0||e.delta.left!==0)},t}();Flipping$2.default=Flipping$1;var __extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var a in n)n.hasOwnProperty(a)&&(e[a]=n[a])};return function(e,n){t(e,n);function a(){this.constructor=e}e.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||Object.assign||function(t){for(var e,n=1,a=arguments.length;n<a;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Flipping_1=Flipping$2;function styleVars(t,e,n){n===void 0&&(n="flip"),Object.keys(e).forEach(function(a){var o=e[a];o===void 0||!t||t.style.setProperty("--"+n+"-"+a,""+e[a])})}var flipStyle=function(t){return`
[`+t+`] {
  transition-property: transform;
  transition-duration: calc(var(--flip-active, 1) * 0.6s);
  transform-origin: top left;
  transform:
    translateX(calc(var(--flip-dx, 0) * 1px))
    translateY(calc(var(--flip-dy, 0) * 1px))
    scale(var(--flip-dw, 1), var(--flip-dh, 1));
}
`},matrixRegex=/matrix\(.*, .*, .*, .*, (.*), (.*)\)/,FlippingCSS=function(t){__extends(e,t);function e(){var n=t.call(this,{onFlip:function(a){Object.keys(a).forEach(function(o){var c=a[o];if(c.delta){var u=0,l=0;if(c.bounds&&c.bounds.transform){var p=c.bounds.transform.match(matrixRegex);p&&p.length===3&&(u=parseFloat(p[1]),l=parseFloat(p[2]))}styleVars(c.element,__assign({dx:c.delta.left+u,dy:c.delta.top+l,dw:c.delta.width,dh:c.delta.height},c.data&&c.data.noScale?{dw:1,dh:1}:void 0,{active:0}))}}),requestAnimationFrame(function(){requestAnimationFrame(function(){Object.keys(a).forEach(function(o){var c=a[o];c.bounds&&styleVars(c.element,{dx:0,dy:0,dw:1,dh:1,active:1})})})})}})||this;return n.injectStyle(),n}return e.prototype.injectStyle=function(){var n=document.createElement("style");n.innerHTML=flipStyle(this.attribute),document.querySelector("head").appendChild(n)},e}(Flipping_1.default),css=FlippingCSS;const Flipping=getDefaultExportFromCjs(css);export{$protobuf as $,code$4 as A,cache$2 as B,srcExports as C,mergeOptions as D,anySignalExports as E,browserReadablestreamToIt as F,itAll as G,H,last as I,notFoundError as J,Key as K,peerIdToRoutingKey as L,getLocalKey as M,unmarshal as N,create$2 as O,PQueue as P,marshal as Q,ipnsValidator as R,PubSubDatastore as S,ipnsSelector as T,namespaceLength as U,namespace$1 as V,drain as W,get$1 as X,TieredDatastore as Y,mergeOptions$1 as Z,_global as _,setMode as a,pDoWhilst as a$,isDomain as a0,pipe$1 as a1,map$3 as a2,parallel$1 as a3,filter as a4,blobToIt as a5,browserReadableStreamToIt as a6,peekableIterator as a7,all as a8,mur as a9,fnv1a as aA,encode$g as aB,decode$d as aC,objectSafeGet as aD,sortKeys as aE,QuickLRU as aF,merge$1 as aG,bytes$1 as aH,LevelDatastore as aI,BlockstoreDatastoreAdapter as aJ,toIterable as aK,dagCbor$1 as aL,dagJSON as aM,dagJOSE as aN,Resolver$1 as aO,varint$2 as aP,vd as aQ,functionDebounce as aR,decode$5 as aS,abortableSource$1 as aT,encode$6 as aU,eventsExports as aV,MovingAverage as aW,BaseBlockstore as aX,stringify as aY,buffer$2 as aZ,pMap$2 as a_,dagPb as aa,encode$h as ab,prepare as ac,batch as ad,parallelBatch as ae,src$3 as af,Uint8ArrayList as ag,createHAMT as ah,Bucket as ai,decode$e as aj,pushable as ak,decode$c as al,code$3 as am,pack as an,toBuffer as ao,pako as ap,objectSafeSet as aq,CarWriter as ar,first$1 as as,CarBlockIterator as at,arrayShuffle as au,createMortice as av,code$2 as aw,debug as ax,length$2 as ay,compare$1 as az,Host as b,KBuck as b$,Logger$2 as b0,path as b1,pEachSeries as b2,EventEmitter$4 as b3,safeBufferExports as b4,pMapSeries as b5,isElectronMain as b6,utils$2 as b7,getPublicKey$1 as b8,sign$1 as b9,src$2 as bA,rateLimiterFlexible as bB,retimer$2 as bC,sort as bD,enumeration as bE,message as bF,encodeMessage as bG,decodeMessage as bH,abortableSource as bI,handshake as bJ,abortableDuplex as bK,is_ip_private as bL,sanitize$1 as bM,pSettle as bN,encode$3 as bO,pipe as bP,first as bQ,decode$2 as bR,isLoopbackAddr as bS,isBrowser as bT,upnpNat as bU,isNode as bV,isWebWorker as bW,isElectronRenderer$1 as bX,isReactNative as bY,FIFO as bZ,MemoryDatastore as b_,verify$1 as ba,enumeration$1 as bb,message$1 as bc,encodeMessage$1 as bd,decodeMessage$1 as be,forge$t as bf,utils$1 as bg,sign as bh,verify as bi,Point$1 as bj,getPublicKey as bk,unsigned as bl,requireMinimal as bm,Denque$1 as bn,forgePbkdf2 as bo,forgeUtil as bp,fromString$1 as bq,protobuf as br,anySignal$2 as bs,pDefer$1 as bt,toString$2 as bu,randomBytes$3 as bv,delay$1 as bw,pEvent as bx,lookup as by,AbortError$2 as bz,createEvent as c,xor as c0,take as c1,pTimeout as c2,connect as c3,batchedBytes as c4,anySignal as c5,pushableV as c6,sha256$2 as c7,HKDF_1 as c8,x25519 as c9,Flipping as cA,chacha20poly1305 as ca,pbStream as cb,duplexPair as cc,GCounter as cd,pMap$1 as ce,pSeries$1 as cf,elliptic as cg,LRU$1 as ch,secp256k1$1 as ci,Level as cj,toString as ck,random as cl,fromString as cm,RPCClient as cn,Resolver as co,CacaoBlock as cp,encodePayload as cq,Cacao as cr,verifyJWS as cs,resolveX25519Encrypters as ct,createJWE as cu,prepareCleartext as cv,decodeCleartext as cw,getEIP191Verifier as cx,verifyMessage as cy,Wallet as cz,getAssetPath as d,process$1 as e,forceUpdate as f,getMode as g,h,isElectron_1 as i,errCode$1 as j,isIPv4 as k,isIPv6 as l,isIP as m,fromString$2 as n,concat$2 as o,proxyCustomElement as p,equals as q,readTask as r,setPlatformHelpers as s,toString$4 as t,isoUrl as u,varint$3 as v,writeTask as w,parse$6 as x,timeoutAbortController as y,anySignal_2 as z};
//# sourceMappingURL=other-modules-3990ee0b.js.map
